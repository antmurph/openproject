(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{"+yTb":function(e,n){var t;void 0===(t=jQuery).fn.each2&&t.extend(t.fn,{each2:function(e){for(var n=t([0]),l=-1,i=this.length;++l<i&&(n.context=n[0]=this[l])&&!1!==e.call(n[0],l,n););return this}}),function(e,n){"use strict";function t(n){var t=e(document.createTextNode(""));n.before(t),t.before(n),t.remove()}function l(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return A[e]||e})}function i(e,n){for(var t=0,l=n.length;l>t;t+=1)if(o(e,n[t]))return t;return-1}function o(e,t){return e===t||e!==n&&t!==n&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}function r(e,n,t){var l,i,o;if(null===e||e.length<1)return[];for(i=0,o=(l=e.split(n)).length;o>i;i+=1)l[i]=t(l[i]);return l}function u(e){return e.outerWidth(!1)-e.width()}function a(t){var l="keyup-change-value";t.on("keydown",function(){e.data(t,l)===n&&e.data(t,l,t.val())}),t.on("keyup",function(){var i=e.data(t,l);i!==n&&t.val()!==i&&(e.removeData(t,l),t.trigger("keyup-change"))})}function s(t){t.on("mousemove",function(t){var l=E;(l===n||l.x!==t.pageX||l.y!==t.pageY)&&e(t.target).trigger("mousemove-filtered",t)})}function c(e,t,l){var i;return l=l||n,function(){var n=arguments;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(l,n)},e)}}function d(n){var t=0,l=0;if("selectionStart"in(n=e(n)[0]))t=n.selectionStart,l=n.selectionEnd-t;else if("selection"in document){n.focus();var i=document.selection.createRange();l=document.selection.createRange().text.length,i.moveStart("character",-n.value.length),t=i.text.length-l}return{offset:t,length:l}}function p(e){e.preventDefault(),e.stopPropagation()}function h(n){if(!x){var t=n[0].currentStyle||window.getComputedStyle(n[0],null);(x=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:t.fontSize,fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,textTransform:t.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e(document.body).append(x)}return x.text(n.val()),x.width()}function f(n,t,l){var i,o,r=[];(i=e.trim(n.attr("class")))&&e((i=""+i).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&r.push(this)}),(i=e.trim(t.attr("class")))&&e((i=""+i).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&((o=l(this))&&r.push(o))}),n.attr("class",r.join(" "))}function g(e,n,t,i){var o=l(e.toUpperCase()).indexOf(l(n.toUpperCase())),r=n.length;return 0>o?void t.push(i(e)):(t.push(i(e.substring(0,o))),t.push("<span class='select2-match'>"),t.push(i(e.substring(o,o+r))),t.push("</span>"),void t.push(i(e.substring(o+r,e.length))))}function m(e){var n={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return n[e]})}function v(t){var l,i=null,o=t.quietMillis||100,r=t.url,u=this;return function(a){window.clearTimeout(l),l=window.setTimeout(function(){var l=t.data,o=r,s=t.transport||e.fn.select2.ajaxDefaults.transport,c={type:t.type||"GET",cache:t.cache||!1,jsonpCallback:t.jsonpCallback||n,dataType:t.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,c);l=l?l.call(u,a.term,a.page,a.context):null,o="function"==typeof o?o.call(u,a.term,a.page,a.context):o,i&&"function"==typeof i.abort&&i.abort(),t.params&&(e.isFunction(t.params)?e.extend(d,t.params.call(u)):e.extend(d,t.params)),e.extend(d,{url:o,dataType:t.dataType,data:l,success:function(e){var n=t.results(e,a.page,a);a.callback(n)},error:function(e,n,t){var l={hasError:!0,jqXHR:e,textStatus:n,errorThrown:t};a.callback(l)}}),i=s.call(u,d)},o)}}function b(n){var t,l,i=n,o=function(e){return""+e.text};e.isArray(i)&&(i={results:l=i}),!1===e.isFunction(i)&&(l=i,i=function(){return l});var r=i();return r.text&&(o=r.text,e.isFunction(o)||(t=r.text,o=function(e){return e[t]})),function(n){var t,l=n.term,r={results:[]};return""===l?void n.callback(i()):(t=function(i,r){var u,a;if((i=i[0]).children){for(a in u={},i)i.hasOwnProperty(a)&&(u[a]=i[a]);u.children=[],e(i.children).each2(function(e,n){t(n,u.children)}),(u.children.length||n.matcher(l,o(u),i))&&r.push(u)}else n.matcher(l,o(i),i)&&r.push(i)},e(i().results).each2(function(e,n){t(n,r.results)}),void n.callback(r))}}function y(t){var l=e.isFunction(t);return function(i){var o=i.term,r={results:[]},u=l?t(i):t;e.isArray(u)&&(e(u).each(function(){var e=this.text!==n,t=e?this.text:this;(""===o||i.matcher(o,t))&&r.results.push(e?this:{id:this,text:this})}),i.callback(r))}}function w(n,t){if(e.isFunction(n))return!0;if(!n)return!1;if("string"==typeof n)return!0;throw new Error(t+" must be a string, function, or falsy value")}function k(n,t){if(e.isFunction(n)){var l=Array.prototype.slice.call(arguments,2);return n.apply(t,l)}return n}function C(n){var t=0;return e.each(n,function(e,n){n.children?t+=C(n.children):t++}),t}function I(){var n=this;e.each(arguments,function(e,t){n[t].remove(),n[t]=null})}function P(n,t){var l=function(){};return l.prototype=new n,l.prototype.constructor=l,l.prototype.parent=n.prototype,l.prototype=e.extend(l.prototype,t),l}if(window.Select2===n){var j,_,R,S,x,T,O,E={x:0,y:0},D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&123>=e}},F="<div class='select2-measure-scrollbar'></div>",A={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};T=e(document),S=function(){var e=1;return function(){return e++}}(),j=P(Object,{bind:function(e){var n=this;return function(){e.apply(n,arguments)}},init:function(t){var l,o,r=".select2-results";this.opts=t=this.prepareOpts(t),this.id=t.id,t.element.data("select2")!==n&&null!==t.element.data("select2")&&t.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(t.element.attr("id")||"autogen"+S()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",t.element.attr("title")),this.body=e(document.body),f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",t.element.attr("style")),this.container.css(k(t.containerCss,this.opts.element)),this.container.addClass(k(t.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",p),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(t.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",p),this.results=l=this.container.find(r),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",p),s(this.results),this.dropdown.on("mousemove-filtered",r,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",r,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",r,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",r,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),function(e,n){var t=c(e,function(e){n.trigger("scroll-debounced",e)});n.on("scroll",function(e){i(e.target,n.get())>=0&&t(e)})}(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&l.mousewheel(function(e,n,t,i){var o=l.scrollTop();i>0&&0>=o-i?(l.scrollTop(0),p(e)):0>i&&l.get(0).scrollHeight-l.scrollTop()+i<=l.height()&&(l.scrollTop(l.get(0).scrollHeight-l.height()),p(e))}),a(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(n){e(n.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(n),this.selectHighlighted(n))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=n,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==t.maximumInputLength&&this.search.attr("maxlength",t.maximumInputLength);var u=t.element.prop("disabled");u===n&&(u=!1),this.enable(!u);var d=t.element.prop("readonly");d===n&&(d=!1),this.readonly(d),O=O||function(){var n=e(F);n.appendTo(document.body);var t={width:n.width()-n[0].clientWidth,height:n.height()-n[0].clientHeight};return n.remove(),t}(),this.autofocus=t.element.prop("autofocus"),t.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",t.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2"),l=this;this.close(),e.length&&e[0].detachEvent&&l._sync&&e.each(function(){l._sync&&this.detachEvent("onpropertychange",l._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,t!==n&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),I.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:o(e.attr("locked"),"locked")||o(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(t){var l,i,u,a,s=this;if("select"===(l=t.element).get(0).tagName.toLowerCase()&&(this.select=i=t.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in t)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(t=e.extend({},{populateResults:function(l,i,o){var r,u=this.opts.id,a=this.liveRegion;(r=function(l,i,c){var d,p,h,f,g,m,v,b,y,w,k=[];for(d=0,p=(l=t.sortResults(l,i,o)).length;p>d;d+=1)f=!(g=!0===(h=l[d]).disabled)&&u(h)!==n,m=h.children&&h.children.length>0,(v=e("<li></li>")).addClass("select2-results-dept-"+c),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(s.opts.formatResultCssClass(h)),v.attr("role","presentation"),(b=e(document.createElement("div"))).addClass("select2-result-label"),b.attr("id","select2-result-label-"+S()),b.attr("role","option"),(w=t.formatResult(h,b,o,s.opts.escapeMarkup))!==n&&(b.html(w),v.append(b)),m&&((y=e("<ul></ul>")).addClass("select2-result-sub"),r(h.children,y,c+1),v.append(y)),v.data("select2-data",h),k.push(v[0]);i.append(k),a.text(t.formatMatches(l.length))})(i,l,0)}},e.fn.select2.defaults,t)).id&&(u=t.id,t.id=function(e){return e[u]}),e.isArray(t.element.data("select2Tags"))){if("tags"in t)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+t.element.attr("id");t.tags=t.element.data("select2Tags")}if(i?(t.query=this.bind(function(e){var t,i,o,r={results:[],more:!1},u=e.term;o=function(n,t){var l;n.is("option")?e.matcher(u,n.text(),n)&&t.push(s.optionToData(n)):n.is("optgroup")&&(l=s.optionToData(n),n.children().each2(function(e,n){o(n,l.children)}),l.children.length>0&&t.push(l))},t=l.children(),this.getPlaceholder()!==n&&t.length>0&&((i=this.getPlaceholderOption())&&(t=t.not(i))),t.each2(function(e,n){o(n,r.results)}),e.callback(r)}),t.id=function(e){return e.id}):"query"in t||("ajax"in t?((a=t.element.data("ajax-url"))&&a.length>0&&(t.ajax.url=a),t.query=v.call(t.element,t.ajax)):"data"in t?t.query=b(t.data):"tags"in t&&(t.query=y(t.tags),t.createSearchChoice===n&&(t.createSearchChoice=function(n){return{id:e.trim(n),text:e.trim(n)}}),t.initSelection===n&&(t.initSelection=function(n,l){var i=[];e(r(n.val(),t.separator,t.transformVal)).each(function(){var n={id:this,text:this},l=t.tags;e.isFunction(l)&&(l=l()),e(l).each(function(){return o(this.id,n.id)?(n=this,!1):void 0}),i.push(n)}),l(i)}))),"function"!=typeof t.query)throw"query function not defined for Select2 "+t.element.attr("id");if("top"===t.createSearchChoicePosition)t.createSearchChoicePosition=function(e,n){e.unshift(n)};else if("bottom"===t.createSearchChoicePosition)t.createSearchChoicePosition=function(e,n){e.push(n)};else if("function"!=typeof t.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return t},monitorSource:function(){var t,l=this.opts.element,i=this;l.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=l.prop("disabled");e===n&&(e=!1),this.enable(!e);var t=l.prop("readonly");t===n&&(t=!1),this.readonly(t),this.container&&(f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(k(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(this.opts.dropdownCssClass,this.opts.element)))}),l.length&&l[0].attachEvent&&l.each(function(){this.attachEvent("onpropertychange",i._sync)}),(t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==n&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new t(function(n){e.each(n,i._sync)}),this.propertyObserver.observe(l.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(n){var t=e.Event("select2-selecting",{val:this.id(n),object:n,choice:n});return this.opts.element.trigger(t),!t.isDefaultPrevented()},triggerChange:function(n){n=n||{},n=e.extend({},n,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(n),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,n=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",n),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===n&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===n&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var n,t,l,i,o,r=this.dropdown,u=this.container,a=u.offset(),s=u.outerHeight(!1),c=u.outerWidth(!1),d=r.outerHeight(!1),p=e(window),h=p.width(),f=p.height(),g=p.scrollLeft()+h,m=p.scrollTop()+f,v=a.top+s,b=a.left,y=m>=v+d,w=a.top-d>=p.scrollTop(),C=r.outerWidth(!1);r.hasClass("select2-drop-above")?(t=!0,!w&&y&&(l=!0,t=!1)):(t=!1,!y&&w&&(l=!0,t=!0)),l&&(r.hide(),a=this.container.offset(),s=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=r.outerHeight(!1),g=p.scrollLeft()+h,m=p.scrollTop()+f,v=a.top+s,b=a.left,C=r.outerWidth(!1),r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),(C=r.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:O.width))>c?c=C:C=c,d=r.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(v-=(n=this.body.offset()).top,b-=n.left),!(g>=b+C)&&a.left+g+u.outerWidth(!1)>C&&(b=a.left+this.container.outerWidth(!1)-C),i={left:b,width:c},t?(i.top=a.top-d,i.bottom="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(i.top=v,i.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),i=e.extend(i,k(this.opts.dropdownCss,this.opts.element)),r.css(i)},shouldOpen:function(){var n;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(n=e.Event("select2-opening"),this.opts.element.trigger(n),!n.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),T.on("mousemove.select2Event",function(e){E.x=e.pageX,E.y=e.pageY}),!0)},opening:function(){var n,l=this.containerEventName,i="scroll."+l,o="resize."+l,r="orientationchange."+l;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(n=e("#select2-drop-mask")).length&&((n=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body),n.on("mousedown touchstart click",function(l){t(n);var i,o=e("#select2-drop");o.length>0&&((i=o.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),l.preventDefault(),l.stopPropagation())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var u=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+i+" "+r,function(){u.opened()&&u.positionDropdown()})})},close:function(){if(this.opened()){var n=this.containerEventName,t="scroll."+n,l="resize."+n,i="orientationchange."+n;this.container.parents().add(window).each(function(){e(this).off(t).off(l).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),T.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return k(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var n,t,l,i,o,r,u,a,s=this.results;if(!(0>(t=this.highlight()))){if(0==t)return void s.scrollTop(0);n=this.findHighlightableChoices().find(".select2-result-label"),i=(a=((l=e(n[t])).offset()||{}).top||0)+l.outerHeight(!0),t===n.length-1&&((u=s.find("li.select2-more-results")).length>0&&(i=u.offset().top+u.outerHeight(!0))),i>(o=s.offset().top+s.outerHeight(!1))&&s.scrollTop(s.scrollTop()+(i-o)),0>(r=a-s.offset().top)&&"none"!=l.css("display")&&s.scrollTop(s.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(n){for(var t=this.findHighlightableChoices(),l=this.highlight();l>-1&&l<t.length;){var i=e(t[l+=n]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(l);break}}},highlight:function(n){var t,l,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(n>=o.length&&(n=o.length-1),0>n&&(n=0),this.removeHighlight(),(t=e(o[n])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",t.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(t.text()),void((l=t.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(l),choice:l})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(n){var t=e(n.target).closest(".select2-result-selectable");if(t.length>0&&!t.is(".select2-highlighted")){var l=this.findHighlightableChoices();this.highlight(l.index(t))}else 0==t.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,n=e.find("li.select2-more-results"),t=this.resultsPage+1,l=this,i=this.search.val(),o=this.context;0!==n.length&&(n.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:i,page:t,context:o,matcher:this.opts.matcher,callback:this.bind(function(r){l.opened()&&(l.opts.populateResults.call(this,e,r.results,{term:i,page:t,context:o}),l.postprocessResults(r,!1,!1),!0===r.more?(n.detach().appendTo(e).html(l.opts.escapeMarkup(k(l.opts.formatLoadMore,l.opts.element,t+1))),window.setTimeout(function(){l.loadMoreIfNeeded()},10)):n.remove(),l.positionDropdown(),l.resultsPage=t,l.context=r.context,this.opts.element.trigger({type:"select2-loaded",items:r}))})})))},tokenize:function(){},updateResults:function(t){function l(){s.removeClass("select2-active"),p.positionDropdown(),c.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?p.liveRegion.text(c.text()):p.liveRegion.text(p.opts.formatMatches(c.find('.select2-result-selectable:not(".select2-selected")').length))}function i(e){c.html(e),l()}var r,u,a,s=this.search,c=this.results,d=this.opts,p=this,h=s.val(),f=e.data(this.container,"select2-last-term");if((!0===t||!f||!o(h,f))&&(e.data(this.container,"select2-last-term",h),!0===t||!1!==this.showSearchInput&&this.opened())){a=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(r=this.data(),e.isArray(r)&&r.length>=g&&w(d.formatSelectionTooBig,"formatSelectionTooBig")))return void i("<li class='select2-selection-limit'>"+k(d.formatSelectionTooBig,d.element,g)+"</li>");if(s.val().length<d.minimumInputLength)return w(d.formatInputTooShort,"formatInputTooShort")?i("<li class='select2-no-results'>"+k(d.formatInputTooShort,d.element,s.val(),d.minimumInputLength)+"</li>"):i(""),void(t&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&s.val().length>d.maximumInputLength)return void(w(d.formatInputTooLong,"formatInputTooLong")?i("<li class='select2-no-results'>"+k(d.formatInputTooLong,d.element,s.val(),d.maximumInputLength)+"</li>"):i(""));d.formatSearching&&0===this.findHighlightableChoices().length&&i("<li class='select2-searching'>"+k(d.formatSearching,d.element)+"</li>"),s.addClass("select2-active"),this.removeHighlight(),(u=this.tokenize())!=n&&null!=u&&s.val(u),this.resultsPage=1,d.query({element:d.element,term:s.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(r){var u;if(a==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(r.hasError!==n&&w(d.formatAjaxError,"formatAjaxError"))return void i("<li class='select2-ajax-error'>"+k(d.formatAjaxError,d.element,r.jqXHR,r.textStatus,r.errorThrown)+"</li>");if(this.context=r.context===n?null:r.context,this.opts.createSearchChoice&&""!==s.val()&&((u=this.opts.createSearchChoice.call(p,s.val(),r.results))!==n&&null!==u&&p.id(u)!==n&&null!==p.id(u)&&0===e(r.results).filter(function(){return o(p.id(this),p.id(u))}).length&&this.opts.createSearchChoicePosition(r.results,u)),0===r.results.length&&w(d.formatNoMatches,"formatNoMatches"))return void i("<li class='select2-no-results'>"+k(d.formatNoMatches,d.element,s.val())+"</li>");c.empty(),p.opts.populateResults.call(this,c,r.results,{term:s.val(),page:this.resultsPage,context:null}),!0===r.more&&w(d.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+d.escapeMarkup(k(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){p.loadMoreIfNeeded()},10)),this.postprocessResults(r,t),l(),this.opts.element.trigger({type:"select2-loaded",items:r})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var n,t=e[0],l=e.val().length;e.focus(),(t.offsetWidth>0||t.offsetHeight>0)&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(l,l):t.createTextRange&&((n=t.createTextRange()).collapse(!1),n.select()))},0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var n=this.highlight(),t=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");t?(this.highlight(n),this.onSelect(t,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==n?e.text():n)},getPlaceholderOption:function(){if(this.select){var t=this.select.children("option").first();if(this.opts.placeholderOption!==n)return"first"===this.opts.placeholderOption&&t||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(t.text())&&""===t.val())return t}},initContainerWidth:function(){var t=(function(){var t,l,i,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((t=this.opts.element.attr("style"))!==n)for(o=0,r=(l=t.split(";")).length;r>o;o+=1)if(null!==(i=l[o].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width")).indexOf("%")>0?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}).call(this);null!==t&&this.container.css("width",t)}}),_=P(j,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,l,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(t=this.search.get(0)).createTextRange?((l=t.createTextRange()).collapse(!1),l.select()):t.setSelectionRange&&(i=this.search.val().length,t.setSelectionRange(i,i))),""===this.search.val()&&this.nextSearchTerm!=n&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"selection","focusser")},initContainer:function(){var n,l,i=this.container,o=this.dropdown,r=S();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=n=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),n.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),l=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(l.text()).attr("for",this.focusser.attr("id"));var u=this.opts.element.attr("title");this.opts.element.attr("title",u||l.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)return void p(e);switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),void p(e);case D.ENTER:return this.selectHighlighted(),void p(e);case D.TAB:return void this.selectHighlighted({noFocus:!0});case D.ESC:return this.cancel(e),void p(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.ESC){if(!1===this.opts.openOnEnter&&e.which===D.ENTER)return void p(e);if(e.which==D.DOWN||e.which==D.UP||e.which==D.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void p(e)}return e.which==D.DELETE||e.which==D.BACKSPACE?(this.opts.allowClear&&this.clear(),void p(e)):void 0}})),a(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),n.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection&&this.selection.focus())})),n.on("mousedown touchstart",this.bind(function(l){t(n),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(l)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),n.on("focus",this.bind(function(e){p(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(n){var t=this.selection.data("select2-data");if(t){var l=e.Event("select2-clearing");if(this.opts.element.trigger(l),l.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==n&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==n&&null!==t&&(e.updateSelection(t),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(t,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==n&&((e=this.getPlaceholderOption())!==n&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===n||null===this.opts.element.val())},prepareOpts:function(){var n=this.parent.prepareOpts.apply(this,arguments),t=this;return"select"===n.element.get(0).tagName.toLowerCase()?n.initSelection=function(e,n){var l=e.find("option").filter(function(){return this.selected&&!this.disabled});n(t.optionToData(l))}:"data"in n&&(n.initSelection=n.initSelection||function(t,l){var i=t.val(),r=null;n.query({matcher:function(e,t,l){var u=o(i,n.id(l));return u&&(r=l),u},callback:e.isFunction(l)?function(){l(r)}:e.noop})}),n},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===n?n:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==n){if(this.select&&this.getPlaceholderOption()===n)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,n,t){var l=0,i=this;if(this.findHighlightableChoices().each2(function(e,n){return o(i.id(n.data("select2-data")),i.opts.element.val())?(l=e,!1):void 0}),!1!==t&&(!0===n&&l>=0?this.highlight(l):this.highlight(0)),!0===n){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(C(e.results)>=r)}},showSearch:function(n){this.showSearchInput!==n&&(this.showSearchInput=n,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!n),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!n),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",n))},onSelect:function(e,n){if(this.triggerSelect(e)){var t=this.opts.element.val(),l=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),n&&n.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),o(t,this.id(e))||this.triggerChange({added:e,removed:l})}},updateSelection:function(e){var t,l,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),i.empty(),null!==e&&(t=this.opts.formatSelection(e,i,this.opts.escapeMarkup)),t!==n&&i.append(t),(l=this.opts.formatSelectionCssClass(e,i))!==n&&i.addClass(l),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==n&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,l=null,i=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(t=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,n){return l=i.optionToData(n),!1}),this.updateSelection(l),this.setPlaceholder(),t&&this.triggerChange({added:l,removed:o});else{if(!e&&0!==e)return void this.clear(t);if(this.opts.initSelection===n)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),t&&i.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,l=!1;return 0===arguments.length?((t=this.selection.data("select2-data"))==n&&(t=null),t):(arguments.length>1&&(l=arguments[1]),void(e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),l&&this.triggerChange({added:e,removed:t})):this.clear(l)))}}),R=P(j,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var n=this.parent.prepareOpts.apply(this,arguments),t=this;return"select"===n.element.get(0).tagName.toLowerCase()?n.initSelection=function(e,n){var l=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,n){l.push(t.optionToData(n))}),n(l)}:"data"in n&&(n.initSelection=n.initSelection||function(t,l){var i=r(t.val(),n.separator,n.transformVal),u=[];n.query({matcher:function(t,l,r){var a=e.grep(i,function(e){return o(e,n.id(r))}).length;return a&&u.push(r),a},callback:e.isFunction(l)?function(){for(var e=[],t=0;t<i.length;t++)for(var r=i[t],a=0;a<u.length;a++){var s=u[a];if(o(r,n.id(s))){e.push(s),u.splice(a,1);break}}l(e)}:e.noop})}),n},selectChoice:function(e){var n=this.container.find(".select2-search-choice-focus");n.length&&e&&e[0]==n[0]||(n.length&&this.opts.element.trigger("choice-deselected",n),n.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"searchContainer","selection")},initContainer:function(){var n,t=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=n=this.container.find(t);var l=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){l.search[0].focus(),l.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+S()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t=n.find(".select2-search-choice-focus"),l=t.prev(".select2-search-choice:not(.select2-locked)"),i=t.next(".select2-search-choice:not(.select2-locked)"),o=d(this.search);if(t.length&&(e.which==D.LEFT||e.which==D.RIGHT||e.which==D.BACKSPACE||e.which==D.DELETE||e.which==D.ENTER)){var r=t;return e.which==D.LEFT&&l.length?r=l:e.which==D.RIGHT?r=i.length?i:null:e.which===D.BACKSPACE?this.unselect(t.first())&&(this.search.width(10),r=l.length?l:i):e.which==D.DELETE?this.unselect(t.first())&&(this.search.width(10),r=i.length?i:null):e.which==D.ENTER&&(r=null),this.selectChoice(r),p(e),void(r&&r.length||this.open())}if((e.which===D.BACKSPACE&&1==this.keydowns||e.which==D.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(n.find(".select2-search-choice:not(.select2-locked)").last()),void p(e);if(this.selectChoice(null),this.opened())switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),void p(e);case D.ENTER:return this.selectHighlighted(),void p(e);case D.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case D.ESC:return this.cancel(e),void p(e)}if(e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.BACKSPACE&&e.which!==D.ESC){if(e.which===D.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)&&p(e),e.which===D.ENTER&&p(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(n){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),n.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(n){this.isInterfaceEnabled()&&(e(n.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),n.preventDefault()))})),this.container.on("focus",t,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==n&&null!==t&&(e.updateSelection(t),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==n&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(t>0?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=n&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(n){var t=[],l=[],o=this;e(n).each(function(){i(o.id(this),t)<0&&(t.push(o.id(this)),l.push(this))}),n=l,this.selection.find(".select2-search-choice").remove(),e(n).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=n&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=n&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var l,i,o=!t.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),u=e("<li class='select2-search-choice select2-locked'><div></div></li>"),a=o?r:u,s=this.id(t),c=this.getVal();(l=this.opts.formatSelection(t,a.find("div"),this.opts.escapeMarkup))!=n&&a.find("div").replaceWith(e("<div></div>").html(l)),(i=this.opts.formatSelectionCssClass(t,a.find("div")))!=n&&a.addClass(i),o&&a.find(".select2-search-choice-close").on("mousedown",p).on("click dblclick",this.bind(function(n){this.isInterfaceEnabled()&&(this.unselect(e(n.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),p(n),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",t),a.insertBefore(this.searchContainer),c.push(s),this.setVal(c)},unselect:function(n){var t,l,o=this.getVal();if(0===(n=n.closest(".select2-search-choice")).length)throw"Invalid argument: "+n+". Must be .select2-search-choice";if(t=n.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(t),r.choice=t,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(l=i(this.id(t),o))>=0;)o.splice(l,1),this.setVal(o),this.select&&this.postprocessResults();return n.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,n,t){var l=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),u=this;o.each2(function(e,n){i(u.id(n.data("select2-data")),l)>=0&&(n.addClass("select2-selected"),n.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,n){n.is(".select2-result-selectable")||0!==n.find(".select2-result-selectable:not(.select2-selected)").length||n.addClass("select2-selected")}),-1==this.highlight()&&!1!==t&&!0===this.opts.closeOnSelect&&u.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&w(u.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+k(u.opts.formatNoMatches,u.opts.element,u.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-u(this.search)},resizeSearch:function(){var e,n,t,l,i=u(this.search);e=h(this.search)+10,n=this.search.offset().left,e>(l=(t=this.selection.width())-(n-this.selection.offset().left)-i)&&(l=t-i),40>l&&(l=t-i),0>=l&&(l=e),this.search.width(Math.floor(l))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:r(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(n){var t;this.select?this.select.val(n):(t=[],e(n).each(function(){i(this,t)<0&&t.push(this)}),this.opts.element.val(0===t.length?"":t.join(this.opts.separator)))},buildChangeDetails:function(e,n){n=n.slice(0),e=e.slice(0);for(var t=0;t<n.length;t++)for(var l=0;l<e.length;l++)o(this.opts.id(n[t]),this.opts.id(e[l]))&&(n.splice(t,1),t>0&&t--,e.splice(l,1),l--);return{added:n,removed:e}},val:function(t,l){var i,o=this;if(0===arguments.length)return this.getVal();if((i=this.data()).length||(i=[]),!t&&0!==t)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(l&&this.triggerChange({added:this.data(),removed:i}));if(this.setVal(t),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),l&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===n)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(n){var t=e.map(n,o.id);o.setVal(t),o.updateSelection(n),o.clearSearch(),l&&o.triggerChange(o.buildChangeDetails(i,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var n=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){n.push(t.opts.id(e(this).data("select2-data")))}),this.setVal(n),this.triggerChange()},data:function(n,t){var l,i,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(i=this.data(),n||(n=[]),l=e.map(n,function(e){return o.opts.id(e)}),this.setVal(l),this.updateSelection(n),this.clearSearch(),void(t&&this.triggerChange(this.buildChangeDetails(i,this.data()))))}}),e.fn.select2=function(){var t,l,o,r,u,a=Array.prototype.slice.call(arguments,0),s=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],d=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===a.length||"object"==typeof a[0])(t=0===a.length?{}:e.extend({},a[0])).element=e(this),"select"===t.element.get(0).tagName.toLowerCase()?u=t.element.prop("multiple"):(u=t.multiple||!1,"tags"in t&&(t.multiple=u=!0)),(l=u?new window.Select2.class.multi:new window.Select2.class.single).init(t);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(i(a[0],s)<0)throw"Unknown method: "+a[0];if(r=n,(l=e(this).data("select2"))===n)return;if("container"===(o=a[0])?r=l.container:"dropdown"===o?r=l.dropdown:(p[o]&&(o=p[o]),r=l[o].apply(l,a.slice(1))),i(a[0],c)>=0||i(a[0],d)>=0&&1==a.length)return!1}}),r===n?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,n,t,l){var i=[];return g(this.text(e),t.term,i,l),i.join("")},transformVal:function(n){return e.trim(n)},formatSelection:function(e,t,l){return e?l(this.text(e)):n},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return n},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==n?null:e.id},text:function(n){return n&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(n):n[this.data.text]:n.text},matcher:function(e,n){return l(""+n).toUpperCase().indexOf(l(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,t,l,i){var r,u,a,s,c,d=e,p=!1;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return n;for(;;){for(u=-1,a=0,s=i.tokenSeparators.length;s>a&&(c=i.tokenSeparators[a],!((u=e.indexOf(c))>=0));a++);if(0>u)break;if(r=e.substring(0,u),e=e.substring(u+c.length),r.length>0&&(r=i.createSearchChoice.call(this,r,t))!==n&&null!==r&&i.id(r)!==n&&null!==i.id(r)){for(p=!1,a=0,s=t.length;s>a;a++)if(o(i.id(r),i.id(t[a]))){p=!0;break}p||l(r)}}return d!==e?e:void 0},escapeMarkup:m,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return n},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,n){var t=n-e.length;return"Please enter "+t+" or more character"+(1==t?"":"s")},formatInputTooLong:function(e,n){var t=e.length-n;return"Please delete "+t+" character"+(1==t?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:v,local:b,tags:y},util:{debounce:c,markMatch:g,escapeMarkup:m,stripDiacritics:l},class:{abstract:j,single:_,multi:R}}}}(jQuery)},0:function(e,n,t){e.exports=t("zUnb")},"5Lfy":function(e,n,t){"use strict";t.d(n,"a",function(){return o});var l=t("mrSG"),i=t("SqdZ"),o=(t("wZYP"),function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;return o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o}return l.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.$element.find(".dynamic-content-modal--wrapper").addClass(this.locals.modalClassName).append(this.locals.modalBody),jQuery(document.body).on("click.opdynamicmodal",".dynamic-content-modal--close-button",function(e){n.closeMe(e)})},n.prototype.ngOnDestroy=function(){jQuery(document.body).off("click.opdynamicmodal"),e.prototype.ngOnDestroy.call(this)},n}(i.a))},"7ond":function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l=function(){function e(){this.minimumOffsetForNewSwitchInMs=100,this.lastFocusSwitch=-this.minimumOffsetForNewSwitchInMs,this.lastPriority=-1}return e.prototype.throttleAndCheckIfAllowedFocusChangeBasedOnTimeout=function(){var e=Date.now()-this.lastFocusSwitch>=this.minimumOffsetForNewSwitchInMs;return this.lastFocusSwitch=Date.now(),e},e.prototype.checkIfAllowedFocusChange=function(e){var n=this.throttleAndCheckIfAllowedFocusChangeBasedOnTimeout();if(n)this.lastPriority=-1;else if(e>this.lastPriority)return this.lastPriority=e,!0;return n},e.prototype.getFocusableElement=function(n){var t=n.find("input.ui-select-focusser");if(t.length>0)return t[0];var l=n;return n.is(e.FOCUSABLE_SELECTORS)||(l=n.find(e.FOCUSABLE_SELECTORS)),l[0]},e.prototype.focus=function(e){var n=jQuery(this.getFocusableElement(e)),t=jQuery(n),l=t.is("[disabled]");l&&!t.attr("ng-disabled")&&t.prop("disabled",!1),n.focus(),l&&!t.attr("ng-disabled")&&t.prop("disabled",!0)},e.prototype.focusElement=function(e,n){var t=this;this.checkIfAllowedFocusChange(n)&&setTimeout(function(){t.focus(e)},10)},e.FOCUSABLE_SELECTORS="a, button, :input, [tabindex], select",e}()},AytR:function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l={production:!0}},"E+lO":function(e,n,t){"use strict";t.r(n),t.d(n,"DynamicBootstrapper",function(){return l});var l=function(){function e(){}return e.register=function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];(e=this.optionalBoostrapComponents).push.apply(e,n)},e.bootstrapOptionalDocument=function(e,n,t){void 0===t&&(t=this.optionalBoostrapComponents),this.performBootstrap(e,n,!1,t)},e.bootstrapOptionalEmbeddable=function(e,n,t){void 0===t&&(t=this.optionalBoostrapComponents),this.performBootstrap(e,n,!0,t)},e.getEmbeddable=function(){return this.optionalBoostrapComponents.filter(function(e){return e.embeddable})},e.performBootstrap=function(e,n,t,l){l.forEach(function(l){if(!t||l.embeddable)for(var i=n.querySelectorAll(l.selector),o=0;o<i.length;o++)e.bootstrap(l.cls,i[o])})},e.optionalBoostrapComponents=[],e}()},E5Dd:function(e,n,t){"use strict";var l;t.d(n,"a",function(){return l}),function(e){e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT_ARROW=37]="LEFT_ARROW",e[e.UP_ARROW=38]="UP_ARROW",e[e.RIGHT_ARROW=39]="RIGHT_ARROW",e[e.DOWN_ARROW=40]="DOWN_ARROW",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.KEY_0=48]="KEY_0",e[e.KEY_1=49]="KEY_1",e[e.KEY_2=50]="KEY_2",e[e.KEY_3=51]="KEY_3",e[e.KEY_4=52]="KEY_4",e[e.KEY_5=53]="KEY_5",e[e.KEY_6=54]="KEY_6",e[e.KEY_7=55]="KEY_7",e[e.KEY_8=56]="KEY_8",e[e.KEY_9=57]="KEY_9",e[e.KEY_A=65]="KEY_A",e[e.KEY_B=66]="KEY_B",e[e.KEY_C=67]="KEY_C",e[e.KEY_D=68]="KEY_D",e[e.KEY_E=69]="KEY_E",e[e.KEY_F=70]="KEY_F",e[e.KEY_G=71]="KEY_G",e[e.KEY_H=72]="KEY_H",e[e.KEY_I=73]="KEY_I",e[e.KEY_J=74]="KEY_J",e[e.KEY_K=75]="KEY_K",e[e.KEY_L=76]="KEY_L",e[e.KEY_M=77]="KEY_M",e[e.KEY_N=78]="KEY_N",e[e.KEY_O=79]="KEY_O",e[e.KEY_P=80]="KEY_P",e[e.KEY_Q=81]="KEY_Q",e[e.KEY_R=82]="KEY_R",e[e.KEY_S=83]="KEY_S",e[e.KEY_T=84]="KEY_T",e[e.KEY_U=85]="KEY_U",e[e.KEY_V=86]="KEY_V",e[e.KEY_W=87]="KEY_W",e[e.KEY_X=88]="KEY_X",e[e.KEY_Y=89]="KEY_Y",e[e.KEY_Z=90]="KEY_Z",e[e.LEFT_META=91]="LEFT_META",e[e.RIGHT_META=92]="RIGHT_META",e[e.SELECT=93]="SELECT",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.MULTIPLY=106]="MULTIPLY",e[e.ADD=107]="ADD",e[e.SUBTRACT=109]="SUBTRACT",e[e.DECIMAL=110]="DECIMAL",e[e.DIVIDE=111]="DIVIDE",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUM_LOCK=144]="NUM_LOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.SEMICOLON=186]="SEMICOLON",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.DASH=189]="DASH",e[e.PERIOD=190]="PERIOD",e[e.FORWARD_SLASH=191]="FORWARD_SLASH",e[e.GRAVE_ACCENT=192]="GRAVE_ACCENT",e[e.OPEN_BRACKET=219]="OPEN_BRACKET",e[e.BACK_SLASH=220]="BACK_SLASH",e[e.CLOSE_BRACKET=221]="CLOSE_BRACKET",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE"}(l||(l={}))},FUyZ:function(e,n,t){t("/ur0"),t("7k/7"),t("z2n6"),t("/Su4"),t("RMHK"),t("brli"),t("Iia5"),t("fPeS"),t("Jchv"),t("Vn+K"),t("2nA0"),t("9/yf"),t("NvoQ"),t("+NVk"),t("wEvd"),t("HmDX"),t("cZ/E"),t("2nA0"),t("O2Hw"),t("Oaa7"),t("tGlX"),t("TiIQ"),t("yFkT"),t("/+cc"),t("+yTb"),t("+WSP"),t("gkXs"),t("VG3H"),t("cK71")},"IaZ+":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return u});var l=t("CcnG"),i=t("4c35"),o=(t("+rW8"),t("E5Dd")),r=(t("7ond"),new l.InjectionToken("OP_MODAL_LOCALS")),u=function(){function e(e,n,t,l,r){var u=this;this.componentFactoryResolver=e,this.FocusHelper=n,this.appRef=t,this.$transitions=l,this.injector=r,this.active=null,this.opening=!1;var a=this.portalHostElement=document.createElement("div");a.classList.add("op-modals--overlay"),document.body.appendChild(a),jQuery(window).on("keydown",function(e){return u.active&&u.active.closeOnEscape&&e.which===o.a.ESCAPE&&u.active.closeOnEscapeFunction(e),!0}),jQuery(window).on("click",function(e){u.active&&!u.opening&&u.active.closeOnOutsideClick&&!u.portalHostElement.contains(e.target)&&u.close(e)}),this.bodyPortalHost=new i.b(a,this.componentFactoryResolver,this.appRef,this.injector)}return e.prototype.show=function(e,n,t){var l=this;void 0===t&&(t={}),this.close(),this.opening=!0,"global"===n&&(n=this.injector);var o=new i.a(e,null,this.injectorFor(n,t)),r=this.bodyPortalHost.attach(o).instance;return this.active=r,this.portalHostElement.style.display="block",setTimeout(function(){l.active&&l.active.onOpen(l.activeModal),l.opening=!1},20),this.active},e.prototype.isActive=function(e){return this.active&&this.active===e},e.prototype.close=function(e){this.active&&this.active.onClose()&&(this.active.closingEvent.emit(this.active),this.bodyPortalHost.detach(),this.portalHostElement.style.display="none",this.active=null,e&&(e.preventDefault(),e.stopPropagation()))},Object.defineProperty(e.prototype,"activeModal",{get:function(){return jQuery(this.portalHostElement).find(".op-modal--portal")},enumerable:!0,configurable:!0}),e.prototype.injectorFor=function(e,n){var t=new WeakMap;return n.service=this,t.set(r,n),new i.c(e,t)},e}()},RnhZ:function(e,n,t){var l={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-SG":"zavE","./en-SG.js":"zavE","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(e){var n=o(e);return t(n)}function o(e){var n=l[e];if(!(n+1)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n}i.keys=function(){return Object.keys(l)},i.resolve=o,e.exports=i,i.id="RnhZ"},SU55:function(e,n){!function(e){"use strict";e(function(){e("[data-selected-page].tree-menu--container").each(function(n,t){var l=e(t).data("selected-page");l&&e("[slug="+l+"]",t).toggleClass("-selected",!0)}),e(".pages-hierarchy.-with-hierarchy .tree-menu--hierarchy-span").on("click keypress",function(n){return("keypress"!==n.type||13===n.which)&&(e(n.target).closest("ul.-with-hierarchy > li").toggleClass("-hierarchy-collapsed -hierarchy-expanded"),!1)})})}(jQuery)},SqdZ:function(e,n,t){"use strict";t.d(n,"a",function(){return i});var l=t("CcnG"),i=function(){function e(e,n,t){this.locals=e,this.cdRef=n,this.elementRef=t,this.closeOnEscape=!0,this.closeOnEscapeFunction=this.closeMe,this.closeOnOutsideClick=!0,this.service=this.locals.service,this.closingEvent=new l.EventEmitter,this.openingEvent=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement)},e.prototype.ngOnDestroy=function(){this.closingEvent.complete(),this.openingEvent.complete()},e.prototype.onClose=function(){return this.afterFocusOn&&this.afterFocusOn.focus(),!0},e.prototype.closeMe=function(e){this.service.close(e)},e.prototype.onOpen=function(e){this.openingEvent.emit(),this.cdRef.detectChanges()},Object.defineProperty(e.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),e}()},ZXPj:function(e,n,t){var l={"./apl/apl":["4kmW",1,0,18],"./apl/apl.js":["4kmW",1,0,18],"./asciiarmor/asciiarmor":["Jt+K",1,0,19],"./asciiarmor/asciiarmor.js":["Jt+K",1,0,19],"./asn.1/asn.1":["0OHD",1,0,20],"./asn.1/asn.1.js":["0OHD",1,0,20],"./asterisk/asterisk":["yGjk",1,0,21],"./asterisk/asterisk.js":["yGjk",1,0,21],"./brainfuck/brainfuck":["oF4/",1,0,22],"./brainfuck/brainfuck.js":["oF4/",1,0,22],"./clike/clike":["S6bl",1,4,0],"./clike/clike.js":["S6bl",1,4,0],"./clojure/clojure":["LA1u",1,0,23],"./clojure/clojure.js":["LA1u",1,0,23],"./cmake/cmake":["qE+Q",1,0,24],"./cmake/cmake.js":["qE+Q",1,0,24],"./cobol/cobol":["JNJg",1,0,25],"./cobol/cobol.js":["JNJg",1,0,25],"./coffeescript/coffeescript":["oL3q",1,0],"./coffeescript/coffeescript.js":["oL3q",1,0],"./commonlisp/commonlisp":["kmAK",1,0,26],"./commonlisp/commonlisp.js":["kmAK",1,0,26],"./crystal/crystal":["JRJP",1,0,27],"./crystal/crystal.js":["JRJP",1,0,27],"./css/css":["ewDg",1,3,0],"./css/css.js":["ewDg",1,3,0],"./cypher/cypher":["vW+e",1,0,28],"./cypher/cypher.js":["vW+e",1,0,28],"./d/d":["zRyg",1,0,29],"./d/d.js":["zRyg",1,0,29],"./dart/dart":["6q/U",1,4,0,30],"./dart/dart.js":["6q/U",1,4,0,30],"./diff/diff":["3fnu",1,0,31],"./diff/diff.js":["3fnu",1,0,31],"./django/django":["SzTn",1,2,3,0,9],"./django/django.js":["SzTn",1,2,3,0,9],"./dockerfile/dockerfile":["R6x9",1,0,32],"./dockerfile/dockerfile.js":["R6x9",1,0,32],"./dtd/dtd":["/YIB",1,0,33],"./dtd/dtd.js":["/YIB",1,0,33],"./dylan/dylan":["PLH4",1,0,34],"./dylan/dylan.js":["PLH4",1,0,34],"./ebnf/ebnf":["AvIz",1,0,35],"./ebnf/ebnf.js":["AvIz",1,0,35],"./ecl/ecl":["rSpl",1,0,36],"./ecl/ecl.js":["rSpl",1,0,36],"./eiffel/eiffel":["t86p",1,0,37],"./eiffel/eiffel.js":["t86p",1,0,37],"./elm/elm":["Rba3",1,0,38],"./elm/elm.js":["Rba3",1,0,38],"./erlang/erlang":["9RTS",1,0,39],"./erlang/erlang.js":["9RTS",1,0,39],"./factor/factor":["yv4w",1,0,40],"./factor/factor.js":["yv4w",1,0,40],"./fcl/fcl":["xvvs",1,0,41],"./fcl/fcl.js":["xvvs",1,0,41],"./forth/forth":["CDkR",1,0,42],"./forth/forth.js":["CDkR",1,0,42],"./fortran/fortran":["UYub",1,0,43],"./fortran/fortran.js":["UYub",1,0,43],"./gas/gas":["Upog",1,0,44],"./gas/gas.js":["Upog",1,0,44],"./gfm/gfm":["RKCW",1,6,0,45],"./gfm/gfm.js":["RKCW",1,6,0,45],"./gherkin/gherkin":["tkAH",1,0,46],"./gherkin/gherkin.js":["tkAH",1,0,46],"./go/go":["T/QY",1,0,47],"./go/go.js":["T/QY",1,0,47],"./groovy/groovy":["X7TR",1,0,48],"./groovy/groovy.js":["X7TR",1,0,48],"./haml/haml":["c+b1",1,2,3,0,10],"./haml/haml.js":["c+b1",1,2,3,0,10],"./handlebars/handlebars":["4d6s",1,0],"./handlebars/handlebars.js":["4d6s",1,0],"./haskell-literate/haskell-literate":["INem",1,0,49],"./haskell-literate/haskell-literate.js":["INem",1,0,49],"./haskell/haskell":["0+DK",1,0],"./haskell/haskell.js":["0+DK",1,0],"./haxe/haxe":["We/1",1,0,50],"./haxe/haxe.js":["We/1",1,0,50],"./htmlembedded/htmlembedded":["dLt8",1,2,3,0,11],"./htmlembedded/htmlembedded.js":["dLt8",1,2,3,0,11],"./htmlmixed/htmlmixed":["1p+/",1,2,3,0,16],"./htmlmixed/htmlmixed.js":["1p+/",1,2,3,0,16],"./http/http":["scEK",1,0,51],"./http/http.js":["scEK",1,0,51],"./idl/idl":["HqpV",1,0,52],"./idl/idl.js":["HqpV",1,0,52],"./javascript/javascript":["+dQi",1,2,0],"./javascript/javascript.js":["+dQi",1,2,0],"./jinja2/jinja2":["ToA7",1,0,53],"./jinja2/jinja2.js":["ToA7",1,0,53],"./jsx/jsx":["onn/",1,2,0,17],"./jsx/jsx.js":["onn/",1,2,0,17],"./julia/julia":["NGrM",1,0,54],"./julia/julia.js":["NGrM",1,0,54],"./livescript/livescript":["5RX+",1,0,55],"./livescript/livescript.js":["5RX+",1,0,55],"./lua/lua":["jrMQ",1,0,56],"./lua/lua.js":["jrMQ",1,0,56],"./markdown/markdown":["lZu9",1,6,0],"./markdown/markdown.js":["lZu9",1,6,0],"./mathematica/mathematica":["ztbM",1,0,57],"./mathematica/mathematica.js":["ztbM",1,0,57],"./mbox/mbox":["6mA5",1,0,58],"./mbox/mbox.js":["6mA5",1,0,58],"./meta":["8EBN",1,0,59],"./meta.js":["8EBN",1,0,59],"./mirc/mirc":["o5kb",1,0,60],"./mirc/mirc.js":["o5kb",1,0,60],"./mllike/mllike":["NU+Z",1,0,61],"./mllike/mllike.js":["NU+Z",1,0,61],"./modelica/modelica":["lQiH",1,0,62],"./modelica/modelica.js":["lQiH",1,0,62],"./mscgen/mscgen":["6gTk",1,0,63],"./mscgen/mscgen.js":["6gTk",1,0,63],"./mumps/mumps":["Q7su",1,0,64],"./mumps/mumps.js":["Q7su",1,0,64],"./nginx/nginx":["srmC",1,0,65],"./nginx/nginx.js":["srmC",1,0,65],"./nsis/nsis":["bYLO",1,0,66],"./nsis/nsis.js":["bYLO",1,0,66],"./ntriples/ntriples":["PWBO",1,0,67],"./ntriples/ntriples.js":["PWBO",1,0,67],"./octave/octave":["mybg",1,0,68],"./octave/octave.js":["mybg",1,0,68],"./oz/oz":["yhmh",1,0,69],"./oz/oz.js":["yhmh",1,0,69],"./pascal/pascal":["lB9V",1,0,70],"./pascal/pascal.js":["lB9V",1,0,70],"./pegjs/pegjs":["ZGb1",1,2,0,71],"./pegjs/pegjs.js":["ZGb1",1,2,0,71],"./perl/perl":["kG+r",1,0,72],"./perl/perl.js":["kG+r",1,0,72],"./php/php":["RNWO",1,2,3,4,0,12],"./php/php.js":["RNWO",1,2,3,4,0,12],"./pig/pig":["860+",1,0,73],"./pig/pig.js":["860+",1,0,73],"./powershell/powershell":["naPG",1,0,74],"./powershell/powershell.js":["naPG",1,0,74],"./properties/properties":["3Fvf",1,0,75],"./properties/properties.js":["3Fvf",1,0,75],"./protobuf/protobuf":["cHwl",1,0,76],"./protobuf/protobuf.js":["cHwl",1,0,76],"./pug/pug":["W+/v",1,2,3,5,0],"./pug/pug.js":["W+/v",1,2,3,5,0],"./puppet/puppet":["cwoo",1,0,77],"./puppet/puppet.js":["cwoo",1,0,77],"./python/python":["25Eh",1,0],"./python/python.js":["25Eh",1,0],"./q/q":["MiqB",1,0,78],"./q/q.js":["MiqB",1,0,78],"./r/r":["kD6b",1,0,79],"./r/r.js":["kD6b",1,0,79],"./rpm/changes/index.html":["S4ZP",120],"./rpm/rpm":["Qs4+",1,0,80],"./rpm/rpm.js":["Qs4+",1,0,80],"./rst/rst":["jIQM",1,0,81],"./rst/rst.js":["jIQM",1,0,81],"./ruby/ruby":["hTYL",1,0],"./ruby/ruby.js":["hTYL",1,0],"./rust/rust":["sY4N",1,0,82],"./rust/rust.js":["sY4N",1,0,82],"./sas/sas":["Sh3j",1,0,83],"./sas/sas.js":["Sh3j",1,0,83],"./sass/sass":["G2Pi",1,3,0],"./sass/sass.js":["G2Pi",1,3,0],"./scheme/scheme":["8wdy",1,0,84],"./scheme/scheme.js":["8wdy",1,0,84],"./shell/shell":["AvDn",1,0,85],"./shell/shell.js":["AvDn",1,0,85],"./sieve/sieve":["1dRh",1,0,86],"./sieve/sieve.js":["1dRh",1,0,86],"./slim/slim":["VI2i",1,2,3,0,13],"./slim/slim.js":["VI2i",1,2,3,0,13],"./smalltalk/smalltalk":["n4Nj",1,0,87],"./smalltalk/smalltalk.js":["n4Nj",1,0,87],"./smarty/smarty":["QWhe",1,0,88],"./smarty/smarty.js":["QWhe",1,0,88],"./solr/solr":["xhF3",1,0,89],"./solr/solr.js":["xhF3",1,0,89],"./soy/soy":["vH+N",1,2,3,0,14],"./soy/soy.js":["vH+N",1,2,3,0,14],"./sparql/sparql":["++e5",1,0,90],"./sparql/sparql.js":["++e5",1,0,90],"./spreadsheet/spreadsheet":["bEWP",1,0,91],"./spreadsheet/spreadsheet.js":["bEWP",1,0,91],"./sql/sql":["/9rB",1,0,92],"./sql/sql.js":["/9rB",1,0,92],"./stex/stex":["+NIl",1,0],"./stex/stex.js":["+NIl",1,0],"./stylus/stylus":["dtKC",1,7,0],"./stylus/stylus.js":["dtKC",1,7,0],"./swift/swift":["wOIU",1,0,93],"./swift/swift.js":["wOIU",1,0,93],"./tcl/tcl":["BEBj",1,0,94],"./tcl/tcl.js":["BEBj",1,0,94],"./textile/textile":["TD3l",1,0,95],"./textile/textile.js":["TD3l",1,0,95],"./tiddlywiki/tiddlywiki":["9+NH",1,0,96],"./tiddlywiki/tiddlywiki.css":["3ZWL",121],"./tiddlywiki/tiddlywiki.js":["9+NH",1,0,96],"./tiki/tiki":["Km7L",1,0,97],"./tiki/tiki.css":["Za/t",122],"./tiki/tiki.js":["Km7L",1,0,97],"./toml/toml":["0sou",1,0,98],"./toml/toml.js":["0sou",1,0,98],"./tornado/tornado":["xbNY",1,2,3,0,15],"./tornado/tornado.js":["xbNY",1,2,3,0,15],"./troff/troff":["s1o1",1,0,99],"./troff/troff.js":["s1o1",1,0,99],"./ttcn-cfg/ttcn-cfg":["hmTv",1,0,100],"./ttcn-cfg/ttcn-cfg.js":["hmTv",1,0,100],"./ttcn/ttcn":["TYrp",1,0,101],"./ttcn/ttcn.js":["TYrp",1,0,101],"./turtle/turtle":["P3N9",1,0,102],"./turtle/turtle.js":["P3N9",1,0,102],"./twig/twig":["SII/",1,0,103],"./twig/twig.js":["SII/",1,0,103],"./vb/vb":["Kr55",1,0,104],"./vb/vb.js":["Kr55",1,0,104],"./vbscript/vbscript":["axah",1,0,105],"./vbscript/vbscript.js":["axah",1,0,105],"./velocity/velocity":["/kYp",1,0,106],"./velocity/velocity.js":["/kYp",1,0,106],"./verilog/verilog":["m2bc",1,0,107],"./verilog/verilog.js":["m2bc",1,0,107],"./vhdl/vhdl":["PP56",1,0,108],"./vhdl/vhdl.js":["PP56",1,0,108],"./vue/vue":["aT2M",1,2,3,7,5,0,109],"./vue/vue.js":["aT2M",1,2,3,7,5,0,109],"./webidl/webidl":["PVgs",1,0,110],"./webidl/webidl.js":["PVgs",1,0,110],"./xml/xml":["1eCo",1,0,111],"./xml/xml.js":["1eCo",1,0,111],"./xquery/xquery":["bJEP",1,0,112],"./xquery/xquery.js":["bJEP",1,0,112],"./yacas/yacas":["WThJ",1,0,113],"./yacas/yacas.js":["WThJ",1,0,113],"./yaml-frontmatter/yaml-frontmatter":["0gIM",1,0,114],"./yaml-frontmatter/yaml-frontmatter.js":["0gIM",1,0,114],"./yaml/yaml":["ztCB",1,0],"./yaml/yaml.js":["ztCB",1,0],"./z80/z80":["dRHf",1,0,115],"./z80/z80.js":["dRHf",1,0,115]};function i(e){var n=l[e];return n?Promise.all(n.slice(1).map(t.e)).then(function(){var e=n[0];return t.t(e,7)}):Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}i.keys=function(){return Object.keys(l)},i.id="ZXPj",e.exports=i},buKu:function(e,n,t){"use strict";t.r(n);var l=t("qHU1"),i=t("FnNU");t("yLV6");t("tG68"),t("E+lO"),t("vPHx"),t("vqYl"),t("SU55"),window.appBasePath=jQuery("meta[name=app_base_path]").attr("content")||"";var o=jQuery("meta[name=openproject_initializer]");I18n.locale=o.data("defaultLocale"),I18n.locale=o.data("locale"),I18n.firstDayOfWeek=parseInt(o.data("firstDayOfWeek"),10),Object(l.c)(function(){window.enableReactiveStatesLogging=function(){return Object(i.f)(!0)},window.disableReactiveStatesLogging=function(){return Object(i.f)(!1)}})},cK71:function(e,n,t){e.exports=global.I18n=t("eFC/")},crnd:function(e,n){function t(e){return Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id="crnd"},"eFC/":function(e,n,t){var l,i;i=this,void 0===(l=(function(){return function(e){"use strict";var n=e&&e.I18n||{},t=Array.prototype.slice,l=function(e){return("0"+e.toString()).substr(-2)},i=function(e){var n=typeof e;return"function"===n||"object"===n},o=function(e){var n=typeof e;return"function"===n},r=function(e){return null!=e},u=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},a=function(e){return"string"==typeof value||"[object String]"===Object.prototype.toString.call(e)},s=function(e){return!0===e||!1===e},c=function(e,n,t){return void 0===t||0==+t?Math[e](n):(n=+n,t=+t,isNaN(n)||"number"!=typeof t||t%1!=0?NaN:(n=n.toString().split("e"),+((n=(n=Math[e](+(n[0]+"e"+(n[1]?+n[1]-t:-t)))).toString().split("e"))[0]+"e"+(n[1]?+n[1]+t:t))))},d=function(e,n){return o(e)?e(n):e},p=function(e,n){var t,l,i;for(t in n)n.hasOwnProperty(t)&&(l=n[t],a(l)||"number"==typeof(i=l)||"[object Number]"===Object.prototype.toString.call(i)||s(l)||u(l)?e[t]=l:(null==e[t]&&(e[t]={}),p(e[t],l)));return e},h={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},f={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},g={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},m={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},v=[null,"kb","mb","gb","tb"],b={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};return n.reset=function(){var e;for(e in b)this[e]=b[e]},n.initializeOptions=function(){var e;for(e in b)r(this[e])||(this[e]=b[e])},n.initializeOptions(),n.locales={},n.locales.get=function(e){var t=this[e]||this[n.locale]||this.default;return o(t)&&(t=t(e)),!1===u(t)&&(t=[t]),t},n.locales.default=function(e){var t=[],l=[];return e&&t.push(e),!e&&n.locale&&t.push(n.locale),n.fallbacks&&n.defaultLocale&&t.push(n.defaultLocale),t.forEach(function(e){var t=e.split("-"),i=null,o=null;3===t.length?(i=[t[0],t[1]].join("-"),o=t[0]):2===t.length&&(i=t[0]),-1===l.indexOf(e)&&l.push(e),n.fallbacks&&[i,o].forEach(function(n){null!=n&&n!==e&&-1===l.indexOf(n)&&l.push(n)})}),t.length||t.push("en"),l},n.pluralization={},n.pluralization.get=function(e){return this[e]||this[n.locale]||this.default},n.pluralization.default=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},n.currentLocale=function(){return this.locale||this.defaultLocale},n.isSet=r,n.lookup=function(e,n){n=n||{};var t,l,i,o,u=this.locales.get(n.locale).slice();for(u[0],i=this.getFullScope(e,n);u.length;)if(t=u.shift(),l=i.split(this.defaultSeparator),o=this.translations[t]){for(;l.length&&null!=(o=o[l.shift()]););if(null!=o)return o}if(r(n.defaultValue))return d(n.defaultValue,e)},n.pluralizationLookupWithoutFallback=function(e,n,t){var l,o,u=this.pluralization.get(n)(e);if(i(t))for(;u.length;)if(l=u.shift(),r(t[l])){o=t[l];break}return o},n.pluralizationLookup=function(e,n,t){t=t||{};var l,o,u,a,s=this.locales.get(t.locale).slice();for(s[0],n=this.getFullScope(n,t);s.length;)if(l=s.shift(),o=n.split(this.defaultSeparator),u=this.translations[l]){for(;o.length&&(u=u[o.shift()],i(u));)0==o.length&&(a=this.pluralizationLookupWithoutFallback(e,l,u));if(null!=a&&null!=a)break}return null!=a&&null!=a||r(t.defaultValue)&&(a=i(t.defaultValue)?this.pluralizationLookupWithoutFallback(e,t.locale,t.defaultValue):t.defaultValue,u=t.defaultValue),{message:a,translations:u}},n.meridian=function(){var e=this.lookup("time"),n=this.lookup("date");return e&&e.am&&e.pm?[e.am,e.pm]:n&&n.meridian?n.meridian:h.meridian},n.prepareOptions=function(){for(var e,n=t.call(arguments),l={};n.length;)if("object"==typeof(e=n.shift()))for(var i in e)e.hasOwnProperty(i)&&(r(l[i])||(l[i]=e[i]));return l},n.createTranslationOptions=function(e,n){var t=[{scope:e}];return r(n.defaults)&&(t=t.concat(n.defaults)),r(n.defaultValue)&&t.push({message:n.defaultValue}),t},n.translate=function(e,n){n=n||{};var t,l=this.createTranslationOptions(e,n),o=this.prepareOptions(n);return delete o.defaultValue,l.some(function(n){if(r(n.scope)?t=this.lookup(n.scope,o):r(n.message)&&(t=d(n.message,e)),null!=t)return!0},this)?("string"==typeof t?t=this.interpolate(t,n):i(t)&&r(n.count)&&(t=this.pluralize(n.count,e,n)),t):this.missingTranslation(e,n)},n.interpolate=function(e,n){n=n||{};var t,l,i,o,u=e.match(this.placeholder);if(!u)return e;for(;u.length;)l=(t=u.shift()).replace(this.placeholder,"$1"),o=r(n[l])?n[l].toString().replace(/\$/gm,"_#$#_"):l in n?this.nullPlaceholder(t,e,n):this.missingPlaceholder(t,e,n),i=new RegExp(t.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(i,o);return e.replace(/_#\$#_/g,"$")},n.pluralize=function(e,n,t){var l,i;return t=this.prepareOptions({count:String(e)},t),null==(i=this.pluralizationLookup(e,n,t)).translations||null==i.translations?this.missingTranslation(n,t):null!=i.message&&null!=i.message?this.interpolate(i.message,t):(l=this.pluralization.get(t.locale),this.missingTranslation(n+"."+l(e)[0],t))},n.missingTranslation=function(e,n){if("guess"==this.missingBehaviour){var t=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+t.replace("_"," ").replace(/([a-z])([A-Z])/g,function(e,n,t){return n+" "+t.toLowerCase()})}return'[missing "'+[null!=n&&null!=n.locale?n.locale:this.currentLocale(),this.getFullScope(e,n)].join(this.defaultSeparator)+'" translation]'},n.missingPlaceholder=function(e,n,t){return"[missing "+e+" value]"},n.nullPlaceholder=function(){return n.missingPlaceholder.apply(n,arguments)},n.toNumber=function(e,n){n=this.prepareOptions(n,this.lookup("number.format"),f);var t,l,i=e<0,o=function(e,n){return c("round",e,-n).toFixed(n)}(Math.abs(e),n.precision).toString().split("."),r=[],u=n.format||"%n",a=i?"-":"";for(e=o[0],t=o[1];e.length>0;)r.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);return l=r.join(n.delimiter),n.strip_insignificant_zeros&&t&&(t=t.replace(/0+$/,"")),n.precision>0&&t&&(l+=n.separator+t),l=(u=n.sign_first?"%s"+u:u.replace("%n","%s%n")).replace("%u",n.unit).replace("%n",l).replace("%s",a)},n.toCurrency=function(e,n){return n=this.prepareOptions(n,this.lookup("number.currency.format"),this.lookup("number.format"),g),this.toNumber(e,n)},n.localize=function(e,n,t){switch(t||(t={}),e){case"currency":return this.toCurrency(n);case"number":return e=this.lookup("number.format"),this.toNumber(n,e);case"percentage":return this.toPercentage(n);default:var l;return l=e.match(/^(date|time)/)?this.toTime(e,n):n.toString(),this.interpolate(l,t)}},n.parseDate=function(e){var n,t,l;if("object"==typeof e)return e;if(n=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var i=1;i<=6;i++)n[i]=parseInt(n[i],10)||0;n[2]-=1,l=n[7]?1e3*("0"+n[7]):null,t=n[8]?new Date(Date.UTC(n[1],n[2],n[3],n[4],n[5],n[6],l)):new Date(n[1],n[2],n[3],n[4],n[5],n[6],l)}else"number"==typeof e?(t=new Date).setTime(e):e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(t=new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" "))):(e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(t=new Date).setTime(Date.parse(e)));return t},n.strftime=function(e,t){var i=this.lookup("date"),o=n.meridian();if(i||(i={}),i=this.prepareOptions(i,h),isNaN(e.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var r=e.getDay(),u=e.getDate(),a=e.getFullYear(),s=e.getMonth()+1,c=e.getHours(),d=c,p=c>11?1:0,f=e.getSeconds(),g=e.getMinutes(),m=e.getTimezoneOffset(),v=Math.floor(Math.abs(m/60)),b=Math.abs(m)-60*v,y=(m>0?"-":"+")+(v.toString().length<2?"0"+v:v)+(b.toString().length<2?"0"+b:b);return d>12?d-=12:0===d&&(d=12),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%a",i.abbr_day_names[r])).replace("%A",i.day_names[r])).replace("%b",i.abbr_month_names[s])).replace("%B",i.month_names[s])).replace("%d",l(u))).replace("%e",u)).replace("%-d",u)).replace("%H",l(c))).replace("%-H",c)).replace("%I",l(d))).replace("%-I",d)).replace("%m",l(s))).replace("%-m",s)).replace("%M",l(g))).replace("%-M",g)).replace("%p",o[p])).replace("%S",l(f))).replace("%-S",f)).replace("%w",r)).replace("%y",l(a))).replace("%-y",l(a).replace(/^0+/,""))).replace("%Y",a)).replace("%z",y)},n.toTime=function(e,n){var t=this.parseDate(n),l=this.lookup(e);return t.toString().match(/invalid/i)?t.toString():l?this.strftime(t,l):t.toString()},n.toPercentage=function(e,n){return n=this.prepareOptions(n,this.lookup("number.percentage.format"),this.lookup("number.format"),m),this.toNumber(e,n)},n.toHumanSize=function(e,n){for(var t,l,i=e,o=0;i>=1024&&o<4;)i/=1024,o+=1;return 0===o?(t=this.t("number.human.storage_units.units.byte",{count:i}),l=0):(t=this.t("number.human.storage_units.units."+v[o]),l=i-Math.floor(i)==0?0:1),n=this.prepareOptions(n,{unit:t,precision:l,format:"%n%u",delimiter:""}),this.toNumber(i,n)},n.getFullScope=function(e,n){return n=n||{},u(e)&&(e=e.join(this.defaultSeparator)),n.scope&&(e=[n.scope,e].join(this.defaultSeparator)),e},n.extend=function(e,n){return void 0===e&&void 0===n?{}:p(e,n)},n.t=n.translate,n.l=n.localize,n.p=n.pluralize,n}(i)}).call(n,t,n,e))||(e.exports=l)},qHU1:function(e,n,t){"use strict";t.d(n,"c",function(){return i}),t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});var l=t("AytR");function i(e){l.a.production||e()}function o(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];i(function(){return console.log.apply(console,["[DEBUG] "+e].concat(n))})}function r(e,n){if(l.a.production)return n();var t=performance.now(),i=n(),o=performance.now();return console.log("%c"+e+" completed in "+(o-t)+" milliseconds.","color:#00A093;"),i}},tG68:function(e,n,t){"use strict";t.r(n),t.d(n,"ModalWrapperAugmentService",function(){return i});var l=t("5Lfy"),i=(t("IaZ+"),function(){function e(e,n,t){this.documentElement=e,this.injector=n,this.opModalService=t}return e.prototype.setupListener=function(){for(var e=this.documentElement.querySelectorAll("section[data-augmented-model-wrapper]"),n=0;n<e.length;++n)this.wrapElement(jQuery(e[n]))},e.prototype.wrapElement=function(e){var n=this,t=e.find(".modal-wrapper--activation-link"),l=e.data("activationSelector");l&&(t=jQuery(l)),e.data("modalInitializeNow")?this.show(e):t.click(function(t){n.show(e),t.preventDefault()})},e.prototype.show=function(e){var n=e.data("modalClassName"),t=e.data("modalIframeUrl"),i=e.find(".modal-wrapper--content").html();t&&(i=this.appendIframe(i,t)),this.opModalService.show(l.a,this.injector,{modalBody:i,modalClassName:n})},e.prototype.appendIframe=function(e,n){var t=jQuery(e),l=jQuery('<iframe frameborder="0" height="400" allowfullscreen>></iframe>');return l.attr("src",n),t.find(".iframe-target-wrapper").append(l),t.html()},e}())},vPHx:function(e,n,t){"use strict";var l;t.r(n),(l=jQuery)(function(){l(document.documentElement).on("click",function(e){var n=jQuery(e.target);return function(e,n){n.hasClass("-augmented-datepicker")&&n.attr("autocomplete","off").datepicker().datepicker("show")}(0,n),function(e,n){document.contains(e.target)||e.preventDefault();var t=n.closest("a");if(0!==t.length){var l=t.attr("href")||"",i=l.indexOf("#");""!==l&&0!==i||(-1!==i&&"#"!==l&&(window.location.hash=l),e.preventDefault())}}(e,n),!0});var e=window.location.hash;if(e&&e.startsWith("#")){var n=document.querySelector(e);n&&n.scrollIntoView()}l(document.documentElement).on("dragover drop",function(e){return e.preventDefault(),!1})})},vqYl:function(e,n,t){"use strict";t.r(n),t.d(n,"OpenProject",function(){return o});var l=t("FnNU"),i=t("t9fZ"),o=function(){function e(){this.pluginContext=Object(l.g)()}return e.prototype.getPluginContext=function(){return this.pluginContext.values$().pipe(Object(i.a)(1)).toPromise()},Object.defineProperty(e.prototype,"urlRoot",{get:function(){return jQuery("meta[name=app_base_path]").attr("content")||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"environment",{get:function(){return jQuery("meta[name=openproject_initializer]").data("environment")},enumerable:!0,configurable:!0}),e.prototype.guardedLocalStorage=function(e,n){try{if(void 0===n){var t=window.localStorage.getItem(e);return null===t?void 0:t}window.localStorage.setItem(e,n)}catch(l){console.error("Failed to access your browsers local storage. Is your local database corrupted?")}},e}();window.OpenProject=new o},wEvd:function(e,n){jQuery(function(e){var n=e.datepicker.regional,t=n[I18n.locale]||n[""];"number"==typeof I18n.firstDayOfWeek&&(t.firstDay=I18n.firstDayOfWeek),e.datepicker.setDefaults(t);var l=e.datepicker._gotoToday;e.datepicker._gotoToday=function(n){l.call(this,n);var t=e(n),i=this._getInst(t[0]),o=e.datepicker._formatDate(i);t.val(o),t.blur(),e.datepicker._hideDatepicker()};var i={showWeek:!0,changeMonth:!0,changeYear:!0,yearRange:"c-100:c+10",dateFormat:"yy-mm-dd",showButtonPanel:!0,calculateWeek:function(n){var t=new Date(+n);return 1!=n.getDay()&&t.setDate(n.getDate()-n.getDay()+1),e.datepicker.iso8601Week(t)}};e.datepicker.setDefaults(i),e.extend(e.datepicker,{_originalGotoToday:e.datepicker._gotoToday,_gotoToday:function(n){var t=e(n),l=this._getInst(t[0]),i=new Date,o=this._formatDate(l,i.getDate(),i.getMonth(),i.getFullYear());this._originalGotoToday(n),this._selectDate(n,o)},_inlineDatepicker2:e.datepicker._inlineDatepicker,_inlineDatepicker:function(n,t){this._inlineDatepicker2(n,t);var l=e.datepicker._get(t,"beforeShow");l&&l.apply(n,[n,t])},_checkOffsetOriginal:e.datepicker._checkOffset,_checkOffset:function(n,t,l){var i=e.datepicker._checkOffsetOriginal(n,t,l),o=this._get(n,"alterOffset");if(o){var r=n.input?n.input[0]:null;return o.apply(r,[i])}return i}})})},wZYP:function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l=function(){function e(){this._i18n=window.I18n,this.toNumber=this._i18n.toNumber.bind(this._i18n),this.toPercentage=this._i18n.toPercentage.bind(this._i18n),this.toCurrency=this._i18n.toCurrency.bind(this._i18n),this.strftime=this._i18n.strftime.bind(this._i18n),this.toHumanSize=this._i18n.toHumanSize.bind(this._i18n)}return Object.defineProperty(e.prototype,"locale",{get:function(){return this._i18n.locale},enumerable:!0,configurable:!0}),e.prototype.t=function(e,n){return this._i18n.t(e,n)},e.prototype.lookup=function(e){return this._i18n.lookup(e)},e}()},zUnb:function(e,n,t){"use strict";t.r(n);var l=t("CcnG"),i=t("EVdn"),o=t("AytR"),r=t("mrSG"),u=t("FnNU"),a=t("K9Ia"),s=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.name="MainStore",n.projects=Object(u.h)(),n.workPackages=Object(u.h)(),n.posts=Object(u.h)(),n.schemas=Object(u.h)(),n.types=Object(u.h)(),n.statuses=Object(u.h)(),n.versions=Object(u.h)(),n.users=Object(u.h)(),n.queries=new d,n.changes=new c,n.additional={},n}return r.d(n,e),n.prototype.forResource=function(e){var n=_.camelCase(e._type)+"s",t=this.additional[n];return t||(t=this.additional[n]=Object(u.h)()),t&&t.get(e.id)},n.prototype.add=function(e,n){this.additional[e]=n},n}(u.b),c=function(){return function(){this.queries=new a.a}}(),d=function(){return function(){this.columns=Object(u.g)(),this.sortBy=Object(u.g)(),this.groupBy=Object(u.g)(),this.filters=Object(u.g)()}}(),p=t("4c35"),h=t("+rW8"),f=t("7ond"),g=t("VnD/"),m=function(){function e(){this.contextSwitch$=Object(u.g)()}return e.prototype.transition=function(e){this.validTransition(e)&&this.contextSwitch$.putValue(e)},e.prototype.validTransition=function(e){return this.contextSwitch$.value!==e},Object.defineProperty(e.prototype,"current",{get:function(){return this.contextSwitch$.value},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){this.contextSwitch$.clear(e)},e.prototype.doAndTransition=function(e,n){var t=this;return this.reset("Clearing before transitioning to "+e),n().then(function(){return t.transition(e)})},e.prototype.fireOnTransition=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return Object(u.a)(this.contextSwitch$,function(e){return n.indexOf(e)>-1},e)},e.prototype.fireOnStateChange=function(e){for(var n=this,t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];return Object(u.d)(e,function(e){return e.pipe(Object(g.a)(function(){return n.contextSwitch$.hasValue()&&t.indexOf(n.contextSwitch$.value)>-1}))})},e}(),v=t("67Y/"),b=t("aGNc"),y=function(e){function n(){var n=e.call(this)||this;return n.name="IsolatedQuerySpace",n.query=Object(u.g)(),n.queryForm=Object(u.g)(),n.results=Object(u.g)(),n.rows=Object(u.g)(),n.groups=Object(u.g)(),n.columns=Object(u.g)(),n.filters=Object(u.g)(),n.sortBy=Object(u.g)(),n.groupBy=Object(u.g)(),n.sum=Object(u.g)(),n.pagination=Object(u.g)(),n.selection=Object(u.g)(),n.collapsedGroups=Object(u.g)(),n.hierarchies=Object(u.g)(),n.highlighting=Object(u.g)(),n.rendered=Object(u.g)(),n.renderedWorkPackages=Object(u.d)(n.rendered,function(e){return e.pipe(Object(v.a)(function(e){return e.filter(function(e){return!!e.workPackageId})}))}),n.focusedWorkPackage=Object(u.g)(),n.timeline=Object(u.g)(),n.stopAllSubscriptions=new a.a,n.refreshRequired=Object(u.g)(),n.relationColumns=Object(u.g)(),n.additionalRequiredWorkPackages=Object(u.g)(),n.tableRendering=new w(n),n.ready=new m,n.updates=new k(n),n}return r.d(n,e),n}(u.b),w=function(){return function(e){this.querySpace=e,this.combinedquerySpaces=Object(u.c)(this.querySpace.rows,this.querySpace.columns,this.querySpace.sum,this.querySpace.sortBy,this.querySpace.groupBy,this.querySpace.additionalRequiredWorkPackages),this.onQueryUpdated=Object(u.d)(this.combinedquerySpaces,function(e){return e.pipe(Object(b.a)(null))})}}(),k=function(){return function(e){this.querySpace=e,this.columnsUpdates=this.querySpace.ready.fireOnStateChange(this.querySpace.columns,"Query loaded"),this.hierarchyUpdates=this.querySpace.ready.fireOnStateChange(this.querySpace.hierarchies,"Query loaded"),this.relationUpdates=this.querySpace.ready.fireOnStateChange(this.querySpace.relationColumns,"Query loaded")}}(),C=t("wd/R"),I="timeline-element",P=function(){return function(){this.zoomLevel="days"}}(),j=["days","weeks","months","quarters","years"];function R(e){switch(e){case"days":return 30;case"weeks":return 15;case"months":return 6;case"quarters":return 2;case"years":return.5}throw new Error("invalid zoom level: "+e)}var S=function(){function e(){this.now=C({hour:0,minute:0,seconds:0}),this.dateDisplayStart=C({hour:0,minute:0,seconds:0}),this.dateDisplayEnd=this.dateDisplayStart.clone().add(1,"day"),this.settings=new P,this.activeSelectionMode=null,this.selectionModeStart=null}return Object.defineProperty(e.prototype,"pixelPerDay",{get:function(){return R(this.settings.zoomLevel)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidthInPx",{get:function(){return this.maxSteps*this.pixelPerDay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSteps",{get:function(){return this.dateDisplayEnd.diff(this.dateDisplayStart,"days")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dayCountForMarginLeft",{get:function(){return Math.ceil(120/this.pixelPerDay)},enumerable:!0,configurable:!0}),e}();function x(e,n){return n*e.pixelPerDay}function T(e,n){return x(e,n)+"px"}function O(e,n,t,l){for(var i=[],o=[],r=t.clone().startOf(n),u=l.clone().endOf(n);r.isBefore(u);){var a=C.max(r,t).clone(),s=C.min(r.clone().endOf(n),l).clone();r.add(1,n);var c=e.visibleViewportAtCalculationTime;a.isSameOrAfter(c[0])&&a.isSameOrBefore(c[1])||s.isSameOrAfter(c[0])&&s.isSameOrBefore(c[1])?i.push([a,s]):o.push([a,s])}var d=o.splice(0,1)[0],p=o.pop();return{inViewportAndBoundaries:_.concat([d].filter(function(e){return!_.isNil(e)}),i,[p].filter(function(e){return!_.isNil(e)})),rest:o}}var E,D=t("ny24"),F=t("t9fZ"),A=function(){function e(e){this.querySpace=e}return e.prototype.initialize=function(e,n,t){this.update(this.valueFromQuery(e,n))},e.prototype.update=function(e){this.state.putValue(e)},e.prototype.clear=function(e){this.state.clear(e)},e.prototype.observeUntil=function(e){return this.state.values$().pipe(Object(D.a)(e))},e.prototype.onReady=function(){return this.state.values$().pipe(Object(F.a)(1),Object(b.a)(null)).toPromise()},Object.defineProperty(e.prototype,"readonlyState",{get:function(){return this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this.state.value},set:function(e){e?this.state.putValue(e):this.state.clear()},enumerable:!0,configurable:!0}),e}(),N=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(A),M=function(e){function n(n){var t=e.call(this,n)||this;return t.querySpace=n,t.appliedZoomLevel$=Object(u.g)("auto"),t}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.timeline},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return r.a({},this.defaultState,{visible:e.timelineVisible,zoomLevel:e.timelineZoomLevel,labels:e.timelineLabels})},Object.defineProperty(n.prototype,"appliedZoomLevel",{get:function(){return this.appliedZoomLevel$.value},set:function(e){this.appliedZoomLevel$.putValue(e)},enumerable:!0,configurable:!0}),n.prototype.hasChanged=function(e){var n=this.isVisible!==e.timelineVisible,t=this.zoomLevel!==e.timelineZoomLevel,l=!_.isEqual(this.current.labels,e.timelineLabels);return n||t||l},n.prototype.applyToQuery=function(e){return e.timelineVisible=this.isVisible,e.timelineZoomLevel=this.zoomLevel,e.timelineLabels=this.current.labels,!1},n.prototype.toggle=function(){var e=this.current;this.setVisible(!e.visible)},n.prototype.setVisible=function(e){this.state.putValue(r.a({},this.current,{visible:e}))},Object.defineProperty(n.prototype,"isVisible",{get:function(){return this.current.visible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"zoomLevel",{get:function(){return this.current.zoomLevel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labels",{get:function(){return _.isEmpty(this.current.labels)?this.defaultLabels:this.current.labels},enumerable:!0,configurable:!0}),n.prototype.updateLabels=function(e){this.modify({labels:e})},n.prototype.getNormalizedLabels=function(e){var n=this.defaultLabels;return _.each(this.current.labels,function(e,t){var l=t;n[l]=""===e?null:e}),n},n.prototype.setZoomLevel=function(e){this.modify({zoomLevel:e})},n.prototype.updateZoomWithDelta=function(e){var n=this.current.zoomLevel;if("auto"!==n)return this.applyZoomLevel(n,e);if(this.appliedZoomLevel&&"auto"!==this.appliedZoomLevel)this.applyZoomLevel(this.appliedZoomLevel,e);else{var t=e<0?"days":"years";this.setZoomLevel(t)}},n.prototype.isAutoZoom=function(){return"auto"===this.current.zoomLevel},n.prototype.enableAutozoom=function(){this.modify({zoomLevel:"auto"})},Object.defineProperty(n.prototype,"current",{get:function(){return this.state.getValueOr(this.defaultState)},enumerable:!0,configurable:!0}),n.prototype.modify=function(e){this.update(r.a({},this.current,e))},n.prototype.applyZoomLevel=function(e,n){var t=j.indexOf(e);(t+=n)>=0&&t<j.length&&this.setZoomLevel(j[t])},Object.defineProperty(n.prototype,"defaultLabels",{get:function(){return{left:"",right:"",farRight:"subject"}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"defaultState",{get:function(){return{zoomLevel:"auto",visible:!1,labels:this.defaultLabels}},enumerable:!0,configurable:!0}),n}(N),V=function(){function e(e,n,t){this.page=e,this.total=n,this.perPage=t}return e.prototype.getLowerPageBound=function(){return this.perPage*(this.page-1)+1},e.prototype.getUpperPageBound=function(e){return Math.min(this.perPage*this.page,e)},e.prototype.nextPage=function(){this.page+=1},e.prototype.previousPage=function(){this.page-=1},e}(),q=function(){function e(e){this.current=new V(e.offset,e.total,e.pageSize)}return Object.defineProperty(e.prototype,"page",{get:function(){return this.current.page},set:function(e){this.current.page=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perPage",{get:function(){return this.current.perPage},set:function(e){this.current.perPage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this.current.total},set:function(e){this.current.total=e},enumerable:!0,configurable:!0}),e}(),L=t("t/Na"),$=t("vLqr"),H=t("9Z1F"),B=t("wZYP"),z=function(){function e(e,n,t,l,i){this.injector=e,this.source=n,this.$loaded=t,this.halInitializer=l,this.states=this.injector.get(s),this.I18n=this.injector.get(B.a),this.$links={},this.$embedded={},this.$halType=i,this.$initialize(n)}return e.getEmptyResource=function(e){return void 0===e&&(e={href:null}),{_links:{self:e}}},e.idFromLink=function(e){return e.split("/").pop()},Object.defineProperty(e.prototype,"idFromLink",{get:function(){return this.$href?e.idFromLink(this.$href):""},enumerable:!0,configurable:!0}),e.prototype.$initialize=function(e){this.$source=e.$source||e,this.halInitializer(this)},Object.defineProperty(e.prototype,"id",{get:function(){if(this.$source.id)return this.$source.id.toString();var e=this.idFromLink;return e.match(/^\d+$/)?e:null},set:function(e){this.$source.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"persisted",{get:function(){return this.id&&"new"!==this.id},enumerable:!0,configurable:!0}),e.prototype.$copy=function(e){return void 0===e&&(e={}),new(0,this.constructor)(this.injector,_.merge(this.$plain(),e),this.$loaded,this.halInitializer,this.$halType)},e.prototype.$plain=function(){return _.cloneDeep(this.$source)},Object.defineProperty(e.prototype,"$isHal",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$link",{get:function(){return this.$links.self.$link},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name||this.$link.title||""},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"href",{get:function(){return this.$link.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$href",{get:function(){return this.$link.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.$load=function(e){var n=this;if(void 0===e&&(e=!1),!this.state)return this.$loadResource(e);var t=this.state;return e&&t.clear(),t.putFromPromiseIfPristine(function(){return n.$loadResource(e)}),t.valuesPromise().then(function(e){return n.$initialize(e),n.$loaded=!0,n})},e.prototype.$loadResource=function(e){var n=this;if(void 0===e&&(e=!1),!e){if(this.$loaded)return Promise.resolve(this);if(!this.$loaded&&this.$self)return this.$self}return this.$loaded=!1,this.$self=this.$links.self({}).then(function(e){return n.$loaded=!0,n.$initialize(e.$source),n}),this.$self},e.prototype.$update=function(){return this.$load(!0)},e.prototype.$embeddableKeys=function(){var e=Object.keys(this.$source);return _.without(e,"_links","_embedded","id")},e.prototype.$linkableKeys=function(){var e=Object.keys(this.$links);return _.without(e,"self")},e}(),W=function(){function e(e,n,t,l,i,o,r,u){void 0===n&&(n=null),void 0===t&&(t=""),void 0===l&&(l="get"),void 0===i&&(i=!1),void 0===r&&(r="application/json"),this.requestMethod=e,this.href=n,this.title=t,this.method=l,this.templated=i,this.payload=o,this.type=r,this.identifier=u}return e.fromObject=function(n,t){return new e(function(e,t,l,i){return n.request(e,t,l,i).toPromise()},t.href,t.title,t.method,t.templated,t.payload,t.type,t.identifier)},e.prototype.$fetch=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[0],l=e[1];return this.requestMethod(this.method,this.href,t,l)},e.prototype.$prepare=function(n){if(!this.templated)throw"The link "+this.href+" is not templated.";var t=_.clone(this.href)||"";return _.each(n,function(e,n){var l=new RegExp("{"+n+"}");t=t.replace(l,e)}),new e(this.requestMethod,t,this.title,this.method,!1,this.payload,this.type,this.identifier).$callable()},e.prototype.$callable=function(){var e=this,n=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.$fetch.apply(e,n)};return _.extend(n,{$link:this,href:this.href,title:this.title,method:this.method,templated:this.templated,payload:this.payload,type:this.type,identifier:this.identifier}),n},e}();!function(e){e.lazy=function(e,n,t,l){if(_.isObject(e)){var i,o=!1,r={get:function(){return o||(i=t(),o=!0),i},set:function(){},configurable:!0,enumerable:!0};l&&(r.set=function(e){i=l(e),o=!0}),Object.defineProperty(e,n,r)}}}(E||(E={}));var Q=t("NAZG");function U(e){return _.isNil(e)?[]:e.map(function(e){return e.$copy()})}function K(e,n){function t(n,t){return void 0===t&&(t=!0),_.isNil(n)?n:n._links||n._embedded||n._type?e.createHalResource(n,t):n}function l(e,t){var l="$"+e,i="_"+e,o=n.$source[i];_.isObject(o)&&Object.keys(o).forEach(function(e){E.lazy(n[l],e,function(){return t(o[e])})})}function i(e,t){var l=Array.isArray(e);if(e)if(l)n.$source._links[t]=e.map(function(e){return{href:e.href}});else if(e.hasOwnProperty("$link")){var i=e.$link;i.href&&(n.$source._links[t]=i)}else"href"in e&&(n.$source._links[t]={href:e.href});else n.$source._links[t]={href:null};return n.$embedded&&n.$embedded[t]&&(n.$embedded[t]=e,n.$source._embedded[t]=l?e.map(function(e){return e.$source}):_.get(e,"$source",e)),e}!function(){n.$source._links||(n.$source._links={});n.$source._links.self||(n.$source._links.self={href:null})}(),l("links",function(n){return Array.isArray(n)?n.map(function(n){return W.fromObject(e,n).$callable()}):W.fromObject(e,n).$callable()}),l("embedded",function(e){return Array.isArray(e)?e.map(function(e){return t(e,!0)}):(_.isObject(e)&&_.each(e,function(n,l){n&&(n._embedded||n._links)&&E.lazy(e,l,function(){return t(n,!0)})}),t(e,!0))}),n.$embeddableKeys().forEach(function(e){Object.defineProperty(n,e,{get:function(){var l=n.$source[e];return t(l,!0)},set:function(t){n.$source[e]=t},enumerable:!0,configurable:!0})}),n.$linkableKeys().forEach(function(t){E.lazy(n,t,function(){var l=n.$links[t].$link||n.$links[t];if(Array.isArray(l)){var i=l.map(function(l){return e.createLinkedResource(n,t,l.$link)}),o=(new(Q.bind.apply(Q,[void 0].concat(i)))).on("change",function(){o.forEach(function(e){e.$link||o.splice(o.indexOf(e),1)}),n.$source._links[t]=o.map(function(e){return e.$link})});return o}return l.href?"get"!==l.method?W.fromObject(e,l).$callable():e.createLinkedResource(n,t,l):null},function(e){return i(e,t)})}),function(){if(!n.$source._embedded)return;Object.keys(n.$source._embedded).forEach(function(e){E.lazy(n,e,function(){return n.$embedded[e]},function(n){return i(n,e)})})}()}var G=function(){function e(){}return e.prototype.encodeKey=function(e){return encodeURIComponent(e)},e.prototype.encodeValue=function(e){return encodeURIComponent(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}(),Y=function(){function e(e,n){this.injector=e,this.http=n,this.config={}}return e.prototype.request=function(e,n,t,l){if(void 0===l&&(l={}),"get"===e)return this.get(n,t,l);var i={body:t||{},headers:l,withCredentials:!0,responseType:"json"};return this._request(e,n,i)},e.prototype._request=function(e,n,t){var l=this;return this.http.request(e,n,t).pipe(Object(v.a)(function(e){return l.createHalResource(e)}),Object(H.a)(function(t){return console.error("Failed to "+e+" "+n+": "+t.name),Object($.throwError)(l.createHalResource(t.error))}))},e.prototype.get=function(e,n,t){var l={headers:t,params:new L.i({encoder:new G,fromObject:n}),withCredentials:!0,responseType:"json"};return this._request("get",e,l)},e.prototype.getAllPaginated=function(e,n,t,l){return void 0===t&&(t={}),void 0===l&&(l={}),r.b(this,void 0,void 0,function(){var i,o,u,a;return r.e(this,function(r){switch(r.label){case 0:i=0,o=1,u=[],t.pageSize=n,r.label=1;case 1:return i<n?(t.offset=o,[4,this.request("get",e,t,l).toPromise()]):[3,3];case 2:if(0===(a=r.sent()).count)throw"No more results for this query, but expected more.";return u.push(a),i+=a.count,o+=1,[3,1];case 3:return[2,u]}})})},e.prototype.put=function(e,n,t){return this.request("put",e,n,t)},e.prototype.post=function(e,n,t){return this.request("post",e,n,t)},e.prototype.patch=function(e,n,t){return this.request("patch",e,n,t)},e.prototype.delete=function(e,n,t){return this.request("delete",e,n,t)},e.prototype.registerResource=function(e,n){this.config[e]=n},Object.defineProperty(e.prototype,"defaultClass",{get:function(){return z},enumerable:!0,configurable:!0}),e.prototype.createHalResource=function(e,n){void 0===n&&(n=!0),_.isNil(e)&&(e=z.getEmptyResource());var t=e._type||"HalResource";return this.createHalResourceOfType(t,e,n)},e.prototype.createHalResourceOfType=function(e,n,t){var l=this;void 0===t&&(t=!1);return new(this.getResourceClassOfType(e))(this.injector,n,t,function(e){return K(l,e)},e)},e.prototype.createHalResourceOfClass=function(e,n,t){var l=this;void 0===t&&(t=!1);var i=n._type||"HalResource";return new e(this.injector,n,t,function(e){return K(l,e)},i)},e.prototype.fromLink=function(e){var n=z.getEmptyResource(W.fromObject(this,e));return this.createHalResource(n,!1)},e.prototype.fromSelfLink=function(e){var n={_links:{self:{href:e}}};return this.createHalResource(n)},e.prototype.createLinkedResource=function(e,n,t){var l=z.getEmptyResource(),i=e.$halType,o=this.getResourceClassOfAttribute(i,n)||"HalResource";return l._links.self=t,this.createHalResourceOfType(o,l,!1)},e.prototype.getResourceClassOfType=function(e){var n=this.config[e];return n&&n.cls?n.cls:this.defaultClass},e.prototype.getResourceClassOfAttribute=function(e,n){var t=this.config[e];return(t&&t.attrTypes||{})[n]},e}(),Z=function(){function e(e,n){this.basePath=e,this.path=this.basePath+"/"+n}return e.prototype.id=function(e){return new J(this.path,e)},e.prototype.optionalId=function(e){return _.isNil(e)?this:this.id(e)},e.prototype.toString=function(){return this.path},e.prototype.toPath=function(){return this.path},e.prototype.filtered=function(e){return this.toString()+"/?"+e.toParams()},e}(),J=function(){function e(e,n){this.basePath=e,this.path=this.basePath+"/"+n}return e.prototype.toString=function(){return this.path},e.prototype.toPath=function(){return this.path},e}(),X=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.workPackageId=t,l.relations=l.path+"/relations",l.revisions=l.path+"/revisions",l.activities=l.path+"/activities",l.available_watchers=l.path+"/available_watchers",l.available_projects=l.path+"/available_projects",l}return r.d(n,e),n}(J),ee=function(e){function n(n){var t=e.call(this,n,"work_packages")||this;return t.form=new J(t.path,"form"),t}return r.d(n,e),n.prototype.id=function(e){return new X(this.path,e)},n}(Z),ne=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.userId=t,l.avatar=l.path+"/avatar",l}return r.d(n,e),n}(J),te=function(e){function n(n){var t=e.call(this,n,"users")||this;return t.me=t.path+"/me",t}return r.d(n,e),n.prototype.id=function(e){return new ne(this.path,e)},n}(Z),le=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.form=new J(l.path,"form"),l}return r.d(n,e),n}(J),ie=function(e){function n(n){var t=e.call(this,n,"queries")||this;return t.form=new J(t.path,"form"),t.default=new J(t.path,"default"),t}return r.d(n,e),n.prototype.id=function(e){return new le(this.path,e)},n}(Z),oe=function(e){function n(n){return e.call(this,n,"types")||this}return r.d(n,e),n}(Z),re=function(e){function n(n){var t=e.call(this,n,"versions")||this;return t.form=new J(t.path,"form"),t.availableProjects=new J(t.path,"available_projects"),t}return r.d(n,e),n}(Z),ue=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.projectId=t,l.queries=new ie(l.path),l.types=new oe(l.path),l.work_packages=new ee(l.path),l.versions=new re(l.path),l}return r.d(n,e),n}(J),ae=function(e){function n(n){return e.call(this,n,"projects")||this}return r.d(n,e),n.prototype.id=function(e){return new ue(this.path,e)},n}(Z),se=function(){function e(){this.filters=[]}return e.prototype.add=function(e,n,t){var l={};return l[e]={operator:n,values:t},this.filters.push(l),this},e.prototype.toJson=function(){return JSON.stringify(this.filters)},e.prototype.toParams=function(){var e=this,n=[];return n=this.filters.map(function(n){return e.serializeFilter(n)}),"filters="+encodeURI("["+n.join(",")+"]")},e.prototype.serializeFilter=function(e){var n=this,t=Object.keys(e)[0],l=e[t];return'{"'+t+'":{"operator":"'+l.operator+'","values":['+l.values.map(function(e){return n.serializeFilterValue(e)}).join(",")+"]}}"},e.prototype.serializeFilterValue=function(e){return'"'+e+'"'},e}();function ce(e,n,t){return(new se).add(e,n,t)}var de=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.form=new J(l.path,"form"),l}return r.d(n,e),n}(J),pe=function(e){function n(n){return e.call(this,n,"grids")||this}return r.d(n,e),n.prototype.id=function(e){return new de(this.path,e)},n.prototype.form=function(){return new J(this.path,"form")},n}(Z),he=function(e){function n(n,t){return e.call(this,n,t)||this}return r.d(n,e),n}(J),fe=function(e){function n(n){return e.call(this,n,"news")||this}return r.d(n,e),n.prototype.id=function(e){return new he(this.path,e)},n}(Z),ge=function(e){function n(n){return e.call(this,n,"time_entries")||this}return r.d(n,e),n.prototype.id=function(e){return new he(this.path,e)},n}(Z),me=function(){function e(e){this.appBasePath=e,this.apiV3Base=this.appBasePath+"/api/v3",this.attachments=new J(this.apiV3Base,"attachments"),this.configuration=new J(this.apiV3Base,"configuration"),this.root=new J(this.apiV3Base,""),this.statuses=new Z(this.apiV3Base,"statuses"),this.relations=new Z(this.apiV3Base,"relations"),this.priorities=new Z(this.apiV3Base,"priorities"),this.time_entries=new ge(this.apiV3Base),this.news=new fe(this.apiV3Base),this.types=new oe(this.apiV3Base),this.versions=new re(this.apiV3Base),this.work_packages=new ee(this.apiV3Base),this.queries=new ie(this.apiV3Base),this.projects=new ae(this.apiV3Base),this.users=new te(this.apiV3Base),this.help_texts=new Z(this.apiV3Base,"help_texts"),this.grids=new pe(this.apiV3Base)}return e.prototype.withOptionalProject=function(e){return _.isNil(e)?this:this.projects.id(e)},e.prototype.resource=function(e){return e.startsWith("/")||(e="/"+e),this.apiV3Base+e},e.prototype.previewMarkup=function(e){var n=this.apiV3Base+"/render/markdown";return e?n+"?context="+e:n},e.prototype.principals=function(e,n){var t=new se;return t.add("status","!",["0","3"]),t.add("member","=",[e.toString()]),t.add("type","=",["User","Group"]),t.add("id","!",["me"]),n&&n.length>0&&t.add("name","~",[n]),this.apiV3Base+"/principals?"+t.toParams()+encodeURI('&sortBy=[["name","asc"]]&offset=1&pageSize=10')},e.prototype.wpBySubjectOrId=function(e,n){void 0===n&&(n=!1);var t=new se;return n?t.add("id","=",[e]):t.add("subjectOrId","**",[e]),this.apiV3Base+"/work_packages?"+t.toParams()+encodeURI('&sortBy=[["updatedAt","desc"]]&offset=1&pageSize=10')},e}(),ve=function(){function e(){this.appBasePath=window.appBasePath?window.appBasePath:"",this.api={v3:new me(this.appBasePath)}}return Object.defineProperty(e.prototype,"staticBase",{get:function(){return this.appBasePath},enumerable:!0,configurable:!0}),e.prototype.attachmentDownloadPath=function(e,n){var t=this.staticBase+"/attachments/"+e;return n?t+"/"+n:t},e.prototype.highlightingCssPath=function(){return this.staticBase+"/highlighting/styles"},e.prototype.forumPath=function(e,n){return this.projectForumPath(e)+"/"+n},e.prototype.keyboardShortcutsHelpPath=function(){return this.staticBase+"/help/keyboard_shortcuts"},e.prototype.messagePath=function(e){return this.staticBase+"/topics/"+e},e.prototype.myPagePath=function(){return this.staticBase+"/my/page"},e.prototype.loginPath=function(){return this.staticBase+"/login"},e.prototype.projectsPath=function(){return this.staticBase+"/projects"},e.prototype.projectPath=function(e){return this.projectsPath()+"/"+e},e.prototype.projectActivityPath=function(e){return this.projectPath(e)+"/activity"},e.prototype.projectForumPath=function(e){return this.projectPath(e)+"/forums"},e.prototype.projectCalendarPath=function(e){return this.projectPath(e)+"/work_packages/calendar"},e.prototype.projectNewsPath=function(e){return this.projectPath(e)+"/news"},e.prototype.projectTimelinesPath=function(e){return this.projectPath(e)+"/timelines"},e.prototype.projectTimeEntriesPath=function(e){return this.projectPath(e)+"/time_entries"},e.prototype.projectWikiPath=function(e){return this.projectPath(e)+"/wiki"},e.prototype.projectWorkPackagePath=function(e,n){return this.projectWorkPackagesPath(e)+"/"+n},e.prototype.projectWorkPackagesPath=function(e){return this.projectPath(e)+"/work_packages"},e.prototype.projectWorkPackageNewPath=function(e){return this.projectWorkPackagesPath(e)+"/new"},e.prototype.projectBoardsPath=function(e){return e?this.projectPath(e)+"/boards":this.staticBase+"/boards"},e.prototype.timeEntriesPath=function(e){return e?this.workPackagePath(e)+"/time_entries":this.staticBase+"/time_entries"},e.prototype.timeEntryPath=function(e){return this.staticBase+"/time_entries/"+e},e.prototype.timeEntryEditPath=function(e){return this.timeEntryPath(e)+"/edit"},e.prototype.usersPath=function(){return this.staticBase+"/users"},e.prototype.userPath=function(e){return this.usersPath()+"/"+e},e.prototype.versionsPath=function(){return this.staticBase+"/versions"},e.prototype.versionEditPath=function(e){return this.staticBase+"/versions/"+e+"/edit"},e.prototype.versionShowPath=function(e){return this.staticBase+"/versions/"+e},e.prototype.workPackagesPath=function(){return this.staticBase+"/work_packages"},e.prototype.workPackagePath=function(e){return this.staticBase+"/work_packages/"+e},e.prototype.workPackageCopyPath=function(e){return this.workPackagePath(e)+"/copy"},e.prototype.workPackageDetailsCopyPath=function(e,n){return this.projectWorkPackagesPath(e)+"/details/"+n+"/copy"},e.prototype.workPackagesBulkDeletePath=function(){return this.workPackagesPath()+"/bulk"},e.prototype.projectLevelListPath=function(){return this.projectsPath()+"/level_list.json"},e.prototype.textFormattingHelp=function(){return this.staticBase+"/help/text_formatting"},e}(),be=t("klSw"),ye=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(){return this.$configuration?this.$configuration:this.$configuration=this.halResourceService.get(this.pathHelper.api.v3.configuration.toString()).pipe(Object(be.a)())},e}(),we={maxVisiblePageOptions:6,optionsTruncationSize:1},ke=function(){function e(e){this.ConfigurationDm=e;var n=this.getInitialPageOptions();this.paginationOptions={perPage:this.getCachedPerPage(n),perPageOptions:n,maxVisiblePageOptions:we.maxVisiblePageOptions,optionsTruncationSize:we.optionsTruncationSize}}return e.prototype.getInitialPageOptions=function(){try{return window.gon.settings.pagination.per_page_options}catch(e){return console.log("Can't load initial page options from gon: "+e),[]}},e.prototype.getCachedPerPage=function(e){var n=window.OpenProject.guardedLocalStorage("pagination.perPage");if(void 0!==n){var t=parseInt(n,10);if(t>0&&(0===e.length||-1!==e.indexOf(t)))return t}return e.length>0?e[0]:20},e.prototype.getPaginationOptions=function(){return this.paginationOptions},e.prototype.getPerPage=function(){return this.paginationOptions.perPage},e.prototype.getMaxVisiblePageOptions=function(){return this.paginationOptions.maxVisiblePageOptions},e.prototype.getOptionsTruncationSize=function(){return this.paginationOptions.optionsTruncationSize},e.prototype.setPerPage=function(e){window.OpenProject.guardedLocalStorage("pagination.perPage",e.toString()),this.paginationOptions.perPage=e},e.prototype.getPerPageOptions=function(){return this.paginationOptions.perPageOptions},e.prototype.setPerPageOptions=function(e){this.paginationOptions.perPageOptions=e},e.prototype.loadPaginationOptions=function(){var e=this;return this.ConfigurationDm.load().toPromise().then(function(n){return e.setPerPageOptions(n.perPageOptions),e.paginationOptions})},e}(),Ce=function(e){function n(n,t){var l=e.call(this,n)||this;return l.paginationService=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.pagination},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paginationObject",{get:function(){return this.current?{pageSize:this.current.perPage,offset:this.current.page}:{pageSize:this.paginationService.getCachedPerPage([]),offset:1}},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e,n){return new q(n)},n.prototype.updateFromObject=function(e){var n=this.current;e.page&&(n.page=e.page),e.perPage&&(n.perPage=e.perPage),e.total&&(n.total=e.total),this.state.putValue(n)},n.prototype.updateFromResults=function(e){var n={page:e.offset,perPage:e.pageSize,total:e.total,count:e.count};this.updateFromObject(n)},Object.defineProperty(n.prototype,"current",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),n}(A),Ie=function(){return function(e,n){this.injector=e,this.workPackage=n,this.I18n=this.injector.get(B.a)}}();function Pe(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var l=document.createElement("i");return l.setAttribute("aria-hidden","true"),(e=l.classList).add.apply(e,n),l}var je=t("S5bw"),_e=function(){function e(e,n){var t=this;this.$state=e,this.$transitions=n,this.currentTab="overview",this.subject=new je.a(1),this.updateTabs(),n.onSuccess({},function(e){t.updateTabs(e.to().name)})}return Object.defineProperty(e.prototype,"observable",{get:function(){return this.subject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastActiveTab",{get:function(){return this.isCurrentState("show")?this.currentShowTab:this.currentDetailsTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentShowState",{get:function(){return"work-packages.show."+this.currentShowTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentDetailsState",{get:function(){return"work-packages.list.details."+this.currentDetailsTab},enumerable:!0,configurable:!0}),e.prototype.isDetailsState=function(e){return"work-packages.list.details"===e},Object.defineProperty(e.prototype,"currentShowTab",{get:function(){return"overview"===this.currentTab?"activity":this.currentTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentDetailsTab",{get:function(){return this.currentTab},enumerable:!0,configurable:!0}),e.prototype.notify=function(){this.subject.next({active:this.lastActiveTab,show:this.currentShowState,details:this.currentDetailsState})},e.prototype.updateTab=function(e){if(this.isCurrentState(e)){var n=this.$state.current.name;this.currentTab=n.split(".").pop(),this.notify()}},e.prototype.isCurrentState=function(e){return"show"===e?this.$state.includes("work-packages.show.*"):"details"===e&&this.$state.includes("work-packages.list.details.*")},e.prototype.updateTabs=function(e){if("work-packages.show.activity"===e)return this.currentTab="overview",this.notify();this.updateTab("show"),this.updateTab("details")},e}(),Re=function(){function e(e,n){this.$state=e,this.keepTab=n}return e.prototype.linkToDetails=function(e,n,t){return this.build(e,"currentDetailsState",n,t)},e.prototype.linkToShow=function(e,n,t){return this.build(e,"currentShowState",n,t)},e.prototype.build=function(e,n,t,l){var i=document.createElement("a");return i.href=this.$state.href(this.keepTab[n],{workPackageId:e}),i.classList.add("__ui-state-link"),i.dataset.workPackageId=e,i.dataset.wpState=n,i.setAttribute("title",t),i.textContent=l,i},e}(),Se=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.identifier="open-details-action",n.uiStatebuilder=new Re(n.injector.get(h.G),n.injector.get(_e)),n.text={button:n.I18n.t("js.button_open_details")},n}return r.d(n,e),n.prototype.buildElement=function(){var e=this.uiStatebuilder.linkToDetails(this.workPackage.id,this.text.button,"");return e.classList.add("wp-table--details-link","wp-table-context-menu-icon","hidden-for-mobile"),e.appendChild(Pe("icon","icon-info2")),e},n}(Ie),xe=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.identifier="open-context-menu-action",n.text={linkTitle:n.I18n.t("js.label_open_context_menu")},n}return r.d(n,e),n.prototype.buildElement=function(){var e=document.createElement("a");return e.href="#",e.classList.add("wp-table-context-menu-link","wp-table-context-menu-icon"),e.title=this.text.linkTitle,e.appendChild(Pe("icon","icon-show-more-horizontal")),e},n}(Ie),Te=function(){function e(e){this.injector=e,this.actions=[function(e,n){return new Se(e,n)},function(e,n){return new xe(e,n)}]}return e.prototype.setActions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.actions=e},e.prototype.render=function(e){var n=this,t=this.actions.map(function(t){return t(n.injector,e).buildElement()});return _.compact(t)},e}(),Oe=function(){function e(){}return e.prototype.extract=function(e,n){var t=this,l={_links:{}},i=[];for(var o in n)n.hasOwnProperty(o)&&n[o].writable&&(e.$links[o]?Array.isArray(e[o])?l._links[o]=_.map(e[o],function(e){return{href:e.$href}}):l._links[o]={href:e[o]&&e[o].$href}:i.push(o));return _.each(i,function(n){(e.hasOwnProperty(n)||e[n])&&(Array.isArray(e[n])?l[n]=_.map(e[n],function(e){return e instanceof z?t.extract(e,e.currentSchema||e.schema):e}):l[n]=e[n])}),l},e}(),Ee=function(){function e(e){this.paginationService=e}return e.prototype.buildQueryString=function(e){if(e){var n=[];return _.each(e,function(e,t){e&&(Array.isArray(e)||(e=[e]),_.each(e,function(e){null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}))}),n.join("&")}},e.prototype.encodeQueryJsonParams=function(e,n){void 0===n&&(n={});var t={};return t=this.encodeColumns(t,e),t=this.encodeSums(t,e),t=this.encodeTimelineVisible(t,e),t=this.encodeHighlightingMode(t,e),(t=this.encodeHighlightedAttributes(t,e)).hi=!!e.showHierarchies,t.g=_.get(e.groupBy,"id",""),t=this.encodeSortBy(t,e),(t=this.encodeFilters(t,e.filters)).pa=n.page,t.pp=n.perPage,JSON.stringify(t)},e.prototype.encodeColumns=function(e,n){return e.c=n.columns.map(function(e){return e.id}),e},e.prototype.encodeSums=function(e,n){return n.sums&&(e.s=n.sums),e},e.prototype.encodeHighlightingMode=function(e,n){return n.highlightingMode&&"inline"!==n.highlightingMode&&(e.hl=n.highlightingMode),e},e.prototype.encodeHighlightedAttributes=function(e,n){return"inline"===n.highlightingMode&&Array.isArray(n.highlightedAttributes)&&n.highlightedAttributes.length>0&&(e.hla=n.highlightedAttributes.map(function(e){return e.id})),e},e.prototype.encodeSortBy=function(e,n){return n.sortBy&&(e.t=n.sortBy.map(function(e){return e.id.replace("-",":")}).join()),e},e.prototype.encodeFilters=function(e,n){var t=this;return n&&n.length>0?e.f=n.map(function(e){return{n:e.id,o:e.operator.id,v:_.map(e.values,function(e){return t.queryFilterValueToParam(e)})}}):e.f=[],e},e.prototype.encodeTimelineVisible=function(e,n){return n.timelineVisible&&(e.tv=n.timelineVisible,_.isEmpty(n.timelineLabels)||(e.tll=JSON.stringify(n.timelineLabels)),e.tzl=n.timelineZoomLevel),e},e.prototype.buildV3GetQueryFromJsonParams=function(e){var n={pageSize:this.paginationService.getPerPage()};if(!e)return n;var t=JSON.parse(e);if(t.c&&(n["columns[]"]=t.c.map(function(e){return e})),t.s&&(n.showSums=t.s),t.tv&&(n.timelineVisible=t.tv,t.tll&&(n.timelineLabels=t.tll),t.tzl&&(n.timelineZoomLevel=t.tzl)),t.hl&&(n.highlightingMode=t.hl),t.hla&&(n["highlightedAttributes[]"]=t.hla.map(function(e){return e})),!1!==t.hi&&!0!==t.hi||(n.showHierarchies=t.hi),n.groupBy=_.get(t,"g",""),t.f){var l=t.f.map(function(e){var n={operator:decodeURIComponent(e.o)};if(e.v){var t=Array.isArray(e.v)?e.v:[e.v];_.extend(n,{values:t})}var l={};return l[e.n]=n,l});n.filters=JSON.stringify(l)}return t.t&&(n.sortBy=JSON.stringify(t.t.split(",").map(function(e){return e.split(":")}))),t.pa&&(n.offset=t.pa),t.pp&&(n.pageSize=t.pp),n},e.prototype.buildV3GetQueryFromQueryResource=function(e,n,t){void 0===n&&(n={}),void 0===t&&(t={});var l={};return l["columns[]"]=this.buildV3GetColumnsFromQueryResource(e),l.showSums=e.sums,l.timelineVisible=!!e.timelineVisible,e.timelineVisible&&(l.timelineZoomLevel=e.timelineZoomLevel,l.timelineLabels=JSON.stringify(e.timelineLabels)),e.highlightingMode&&(l.highlightingMode=e.highlightingMode),e.highlightedAttributes&&"inline"===e.highlightingMode&&(l.highlightedAttributes=e.highlightedAttributes.map(function(e){return e.href})),l.showHierarchies=!!e.showHierarchies,l.groupBy=_.get(e.groupBy,"id",""),l.filters=this.buildV3GetFiltersAsJson(e.filters,t),l.sortBy=this.buildV3GetSortByFromQuery(e),_.extend(n,l)},e.prototype.queryFilterValueToParam=function(e){return"boolean"==typeof e?e?"t":"f":e?e.id?e.id.toString():e.$href&&e.$href.match(/^\/api\/v3\/string_objects/i)?e.$href.match(/value=([^&]+)/)[1].toString():e.$href?e.$href.split("/").pop().toString():e.toString():""},e.prototype.buildV3GetColumnsFromQueryResource=function(e){var n=this;return e.columns?e.columns.map(function(e){return e.id||e.idFromLink}):e._links.columns?e._links.columns.map(function(e){var t=e.href;return n.idFromHref(t)}):void 0},e.prototype.buildV3GetFilters=function(e,n){var t=this;return void 0===n&&(n={}),e.map(function(e){var l=t.buildV3GetFilterIdFromFilter(e),i=t.buildV3GetOperatorIdFromFilter(e),o=t.buildV3GetValuesFromFilter(e).map(function(e){return _.each(n,function(n,t){e=e.replace("{"+t+"}",n)}),e}),r={};return r[l]={operator:i,values:o},r})},e.prototype.buildV3GetFiltersAsJson=function(e,n){return void 0===n&&(n={}),JSON.stringify(this.buildV3GetFilters(e,n))},e.prototype.buildV3GetFilterIdFromFilter=function(e){var n=e.filter?e.filter.$href:e._links.filter.href;return this.idFromHref(n)},e.prototype.buildV3GetOperatorIdFromFilter=function(e){if(e.operator)return e.operator.id||e.operator.idFromLink;var n=e._links.operator.href;return this.idFromHref(n)},e.prototype.buildV3GetValuesFromFilter=function(e){var n=this;return e.values?_.map(e.values,function(e){return n.queryFilterValueToParam(e)}):_.map(e._links.values,function(e){return n.idFromHref(e.href)})},e.prototype.buildV3GetSortByFromQuery=function(e){var n=this,t=(e.sortBy?e.sortBy:e._links.sortBy).map(function(e){if(e.id)return e.id;var t=e.href;return n.idFromHref(t)});return JSON.stringify(t.map(function(e){return e.split("-")}))},e.prototype.idFromHref=function(e){var n=e.substring(e.lastIndexOf("/")+1,e.length);return decodeURIComponent(n)},e}(),De=function(){function e(){}return e.prototype.getFilterSchema=function(e,n){var t=n.$embedded.schema.filtersSchemas.elements;return _.find(t,function(n){return n.allowedFilterValue.href===e.filter.href})},e.prototype.mapSchemasIntoFilters=function(e,n){var t=this;e.filters.forEach(function(e){e.schema=t.getFilterSchema(e,n)})},e}(),Fe=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.list=function(e){var n=[];if(e&&e.sortBy&&n.push("sortBy="+JSON.stringify(e.sortBy)),e&&e.pageSize&&n.push("pageSize="+e.pageSize),e&&e.filters){var t=new se;e.filters.forEach(function(e){t.add.apply(t,e)}),n.push(t.toParams())}var l="";return n.length&&(l="?"+n.join("&")),this.halResourceService.get(this.listUrl()+l).toPromise()},e.prototype.one=function(e){return this.halResourceService.get(this.oneUrl(e).toString()).toPromise()},e}(),Ae=function(e){function n(n,t,l,i,o){var r=e.call(this,n,t)||this;return r.halResourceService=n,r.pathHelper=t,r.UrlParamsHelper=l,r.QueryFilters=i,r.PayloadDm=o,r}return r.d(n,e),n.prototype.stream=function(e,n,t){var l;return l=n?this.pathHelper.api.v3.queries.id(n).toString():this.pathHelper.api.v3.withOptionalProject(t).queries.default.toString(),this.halResourceService.get(l,e)},n.prototype.find=function(e,n,t){return this.stream(e,n,t).toPromise()},n.prototype.findDefault=function(e,n){return this.find(e,void 0,n)},n.prototype.reload=function(e,n){var t=this.pathHelper.api.v3.queries.id(e.id).toString();return this.halResourceService.get(t,n).toPromise()},n.prototype.loadResults=function(e,n){if(!e.results)throw"No results embedded when expected";var t=this.UrlParamsHelper.buildV3GetQueryFromQueryResource(e,n),l=URI(e.results.href).path();return this.halResourceService.get(l,t).toPromise()},n.prototype.loadIdsUpdatedSince=function(e,n){var t=[{id:{operator:"=",values:e.filter(function(e){return e})}},{updatedAt:{operator:"<>d",values:[n,""]}}];return this.halResourceService.get(this.pathHelper.api.v3.work_packages.toString(),{filters:JSON.stringify(t)}).toPromise()},n.prototype.update=function(e,n){var t=this.extractPayload(e,n);return this.patch(e.id,t)},n.prototype.patch=function(e,n){var t=this.pathHelper.api.v3.queries.id(e).toString();return this.halResourceService.patch(t,n)},n.prototype.create=function(e,n){var t=this.extractPayload(e,n),l=this.pathHelper.api.v3.queries.toString();return this.halResourceService.post(l,t).toPromise()},n.prototype.delete=function(e){return e.delete()},n.prototype.toggleStarred=function(e){return e.starred?e.unstar():e.star()},n.prototype.listNonHidden=function(e){var n={filters:[["hidden","=",["f"]]]};return e?n.filters.push(["project_identifier","=",[e]]):n.filters.push(["project","!*",[]]),this.list(n)},n.prototype.extractPayload=function(e,n){return this.QueryFilters.mapSchemasIntoFilters(e,n),this.PayloadDm.extract(e,n.schema)},n.prototype.listUrl=function(){return this.pathHelper.api.v3.queries.toString()},n.prototype.oneUrl=function(e){return this.pathHelper.api.v3.queries.id(e).toString()},n}(Fe),Ne=function(){function e(e,n,t){this.http=e,this.PathHelper=n,this.I18n=t,this.path=this.PathHelper.api.v3.configuration.toString(),this.settings=this.initSettings()}return e.prototype.fetchSettings=function(){return this.http.get(this.path).toPromise()},e.prototype.api=function(){var e=this;return new Promise(function(n,t){e.cache?n(e.cache):e.fetchSettings().then(function(t){e.cache=t,n(t)}).catch(t)})},e.prototype.initSettings=function(){var e={},n=window.gon;return void 0!==n&&(e=n.settings),_.merge({enabled_modules:[],display:{},user_preferences:{time_zone:"",others:{comments_sorting:"asc",warn_on_leaving_unsaved:!0,auto_hide_popups:!1}}},e)},e.prototype.displaySettingPresent=function(e){return this.settings.display.hasOwnProperty(e)&&!1!==this.settings.display[e]},e.prototype.commentsSortedInDescendingOrder=function(){return"desc"===this.settings.user_preferences.others.comments_sorting},e.prototype.warnOnLeavingUnsaved=function(){return!0===this.settings.user_preferences.others.warn_on_leaving_unsaved},e.prototype.autoHidePopups=function(){return!0===this.settings.user_preferences.others.auto_hide_popups},e.prototype.isTimezoneSet=function(){return""!==this.settings.user_preferences.time_zone},e.prototype.timezone=function(){return this.settings.user_preferences.time_zone},e.prototype.dateFormatPresent=function(){return this.displaySettingPresent("date_format")&&""!==this.settings.display.date_format},e.prototype.dateFormat=function(){return this.settings.display.date_format},e.prototype.timeFormatPresent=function(){return this.displaySettingPresent("time_format")&&""!==this.settings.display.time_format},e.prototype.timeFormat=function(){return this.settings.display.time_format},e.prototype.isModuleEnabled=function(e){return this.settings.enabled_modules.indexOf(e)>=0},e.prototype.startOfWeekPresent=function(){return this.displaySettingPresent("start_of_week")&&""!==this.settings.display.start_of_week},e.prototype.startOfWeek=function(){return this.startOfWeekPresent()?this.settings.display.start_of_week:"en"===I18n.locale?1:"de"===I18n.locale?0:""},e}(),Me={PROPERTY:"QueryColumn::Property",RELATION_OF_TYPE:"QueryColumn::RelationOfType",RELATION_TO_TYPE:"QueryColumn::RelationToType"};function Ve(e){return[Me.RELATION_TO_TYPE,Me.RELATION_OF_TYPE].indexOf(e._type)>=0}var qe=function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.querySpace=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.columns},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return e.columns.slice()},n.prototype.hasChanged=function(e){return!this.isCurrentlyEqualTo(e.columns)},n.prototype.isCurrentlyEqualTo=function(e){var n=function(e){return e.map(function(e){return e.href})};return _.isEqual(n(e),n(this.getColumns()))},n.prototype.applyToQuery=function(e){var n=this.getColumns(),t=e.columns.map(function(e){return e.id}),l=n.map(function(e){return e.id});return e.columns=U(n),!(0===_.difference(l,t).length)&&this.hasRelationColumns()},n.prototype.hasRelationColumns=function(){var e=[Me.RELATION_OF_TYPE,Me.RELATION_TO_TYPE];return!!_.find(this.getColumns(),function(n){return e.indexOf(n._type)>=0})},n.prototype.getColumns=function(){return this.currentState.slice()},n.prototype.index=function(e){return _.findIndex(this.getColumns(),function(n){return n.id===e})},n.prototype.findById=function(e){return _.find(this.getColumns(),function(n){return n.id===e})},n.prototype.previous=function(e){var n=this.index(e.id);return n<=0?null:this.getColumns()[n-1]},n.prototype.next=function(e){var n=this.index(e.id);return-1===n||this.isLast(name)?null:this.getColumns()[n+1]},n.prototype.isFirst=function(e){return 0===this.index(e.id)},n.prototype.isLast=function(e){return this.index(e.id)===this.columnCount-1},n.prototype.setColumns=function(e){this.isCurrentlyEqualTo(e)||(this.current=e)},n.prototype.setColumnsById=function(e){var n=this,t=e.map(function(e){return _.find(n.all,function(n){return n.id===e})});this.setColumns(_.compact(t))},n.prototype.moveColumn=function(e,n){var t=this.getColumns();n>=t.length&&(n=t.length-1),n<0&&(n=0);var l=t[e];t.splice(e,1),t.splice(n,0,l),this.setColumns(t)},n.prototype.shift=function(e,n){var t=this.index(e.id);-1!==t&&this.moveColumn(t,t+n)},n.prototype.addColumn=function(e,n){var t=this.getColumns();if(void 0===n&&(n=t.length),-1===this.index(e)){var l=_.find(this.all,function(n){return n.id===e});if(!l)throw"Column with provided name is not found";t.splice(n,0,l),this.setColumns(t)}},n.prototype.removeColumn=function(e){var n=this.index(e.id);if(-1!==n){var t=this.getColumns();t.splice(n,1),this.setColumns(t)}},Object.defineProperty(n.prototype,"currentState",{get:function(){return this.state.getValueOr([])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.columns},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this.getColumns().length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"all",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allPropertyColumns",{get:function(){return this.all.filter(function(e){return e._type===Me.PROPERTY})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"unused",{get:function(){return _.differenceBy(this.all,this.getColumns(),"$href")},enumerable:!0,configurable:!0}),n}(N),Le=t("SqdZ"),$e=function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.querySpace=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.groupBy},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return e.groupBy||null},n.prototype.hasChanged=function(e){var n=function(e){return e?e.href:null};return!_.isEqual(n(e.groupBy),n(this.current))},n.prototype.applyToQuery=function(e){var n=this.current;return e.groupBy=null===n?void 0:n,!0},n.prototype.isGroupable=function(e){return!!_.find(this.available,function(n){return n.id===e.id})},n.prototype.update=function(n){if(null!==n){var t=this.querySpace.hierarchies.value;this.querySpace.hierarchies.putValue(r.a({},t,{isVisible:!1}))}e.prototype.update.call(this,n)},n.prototype.setBy=function(e){var n=_.find(this.available,function(n){return n.id===e.id});n&&this.update(n)},Object.defineProperty(n.prototype,"current",{get:function(){return this.state.getValueOr(null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.groupBy},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEnabled",{get:function(){return!!this.current},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"available",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),n.prototype.isCurrentlyGroupedBy=function(e){return!(!this.current||this.current.id!==e.id)},n}(N),He=function(){return function(e){this.isVisible=!1,this.last=null,this.collapsed={},this.isVisible=e}}(),Be="urn:openproject-org:api:v3:queries:directions:asc",ze="urn:openproject-org:api:v3:queries:directions:desc",We=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}r.d(n,e)}(z),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}r.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$href.split("/").pop()},enumerable:!0,configurable:!0})}(z),function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.querySpace=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.sortBy},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return e.sortBy.slice()},n.prototype.onReadyWithAvailable=function(){return Object(u.c)(this.state,this.states.queries.sortBy).values$().pipe(Object(b.a)(null))},n.prototype.hasChanged=function(e){var n=function(e){return e.map(function(e){return e.href})};return!_.isEqual(n(e.sortBy),n(this.current))},n.prototype.applyToQuery=function(e){return e.sortBy=this.current.slice(),!0},n.prototype.isSortable=function(e){return!!_.find(this.available,function(n){return n.column.$href===e.$href})},n.prototype.addAscending=function(e){var n=this.findAvailableDirection(e,Be);n&&this.add(n)},n.prototype.addDescending=function(e){var n=this.findAvailableDirection(e,ze);n&&this.add(n)},n.prototype.findAvailableDirection=function(e,n){return _.find(this.available,function(t){return t.column.$href===e.$href&&t.direction.$href===n})},n.prototype.add=function(e){this.state.doModify(function(n){var t=[e].concat(n);return _.uniqBy(t,function(e){return e.column.$href}).slice(0,3)})},Object.defineProperty(n.prototype,"current",{get:function(){return this.state.getValueOr([])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.sortBy},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"available",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),n}(N)),Qe=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.querySpace=n,i.wpTableGroupBy=t,i.wpTableSortBy=l,i}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.hierarchies},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){var n=new He(e.showHierarchies),t=this.current;return t&&(n.collapsed=t.collapsed),n},n.prototype.hasChanged=function(e){return e.showHierarchies!==this.isEnabled},n.prototype.applyToQuery=function(e){return e.showHierarchies=this.isEnabled,this.isEnabled},Object.defineProperty(n.prototype,"isEnabled",{get:function(){return!(!this.current||!this.current.isVisible)},enumerable:!0,configurable:!0}),n.prototype.setEnabled=function(e){void 0===e&&(e=!0);var n=r.a({collapsed:{}},this.current,{isVisible:e,last:null});e&&this.wpTableGroupBy.update(null),this.update(n)},n.prototype.toggleState=function(){this.setEnabled(!this.isEnabled)},n.prototype.collapsed=function(e){return this.currentState.collapsed[e]},n.prototype.collapse=function(e){this.setState(e,!0)},n.prototype.expand=function(e){this.setState(e,!1)},n.prototype.toggle=function(e){this.setState(e,!this.collapsed(e))},n.prototype.setState=function(e,n){var t=this.currentState;t.collapsed[e]=n,t.last=e,this.state.putValue(t)},Object.defineProperty(n.prototype,"currentState",{get:function(){var e=this.state.value;return void 0===e?this.initialState:(e.collapsed||(e.collapsed={}),e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialState",{get:function(){return new He(!1)},enumerable:!0,configurable:!0}),n}(N),Ue=function(e){function n(n){return e.call(this,n)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.sum},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return!!e.sums},n.prototype.initialize=function(e){this.state.putValue(!!e.sums)},n.prototype.hasChanged=function(e){return e.sums!==this.isEnabled},n.prototype.applyToQuery=function(e){return e.sums=this.isEnabled,!0},n.prototype.toggle=function(){this.state.putValue(!this.current)},n.prototype.setEnabled=function(e){this.state.putValue(e)},Object.defineProperty(n.prototype,"isEnabled",{get:function(){return this.current},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"current",{get:function(){return this.state.getValueOr(!1)},enumerable:!0,configurable:!0}),n}(N),Ke=function(){function e(e,n,t,l,i){this.injector=e,this.I18n=n,this.wpTableGroupBy=t,this.wpTableHierarchies=l,this.wpTableSums=i,this.displayMode="default",this.availableGroups=[],this.displaySums=!1,this.text={choose_mode:this.I18n.t("js.work_packages.table_configuration.choose_display_mode"),label_group_by:this.I18n.t("js.label_group_by"),title:this.I18n.t("js.label_group_by"),placeholder:this.I18n.t("js.placeholders.default"),please_select:this.I18n.t("js.placeholders.selection"),default:"\u2014 "+this.I18n.t("js.work_packages.table_configuration.default"),display_sums:this.I18n.t("js.work_packages.query.display_sums"),display_sums_hint:"\u2014 "+this.I18n.t("js.work_packages.table_configuration.display_sums_hint"),display_mode:{default:this.I18n.t("js.work_packages.table_configuration.default_mode"),grouped:this.I18n.t("js.work_packages.table_configuration.grouped_mode"),hierarchy:this.I18n.t("js.work_packages.table_configuration.hierarchy_mode"),hierarchy_hint:"\u2014 "+this.I18n.t("js.work_packages.table_configuration.hierarchy_hint")}}}return e.prototype.onSave=function(){this.wpTableHierarchies.setEnabled("hierarchy"===this.displayMode);var e="grouped"===this.displayMode?this.currentGroup:null;this.wpTableGroupBy.update(e),this.wpTableSums.setEnabled(this.displaySums)},e.prototype.updateGroup=function(e){this.displayMode="grouped",this.currentGroup=_.find(this.availableGroups,function(n){return n.href===e})||null},e.prototype.ngOnInit=function(){var e=this;this.wpTableHierarchies.isEnabled?this.displayMode="hierarchy":this.wpTableGroupBy.current&&(this.displayMode="grouped"),this.displaySums=this.wpTableSums.current,this.wpTableGroupBy.onReady().then(function(){e.availableGroups=_.sortBy(e.wpTableGroupBy.available,"name"),e.currentGroup=e.wpTableGroupBy.current})},e}(),Ge=function(){function e(e){this.documentElement=e,this._banners=!0,this._banners=e.body.classList.contains("ee-banners-visible")}return Object.defineProperty(e.prototype,"eeShowBanners",{get:function(){return this._banners},enumerable:!0,configurable:!0}),e.prototype.conditional=function(e,n){this._banners?this.callMaybe(e):this.callMaybe(n)},e.prototype.callMaybe=function(e){e&&e()},e}(),Ye=function(){function e(e,n,t,l,i){var o=this;this.injector=e,this.I18n=n,this.wpTableColumns=t,this.ConfigurationService=l,this.bannerService=i,this.availableColumns=this.wpTableColumns.all,this.availableColumnsMap=_.keyBy(this.availableColumns,function(e){return e.id}),this.selectedColumns=this.wpTableColumns.getColumns().map(function(e){return o.column2Like(e)}),this.selectedColumnMap={},this.eeShowBanners=!1,this.text={columnsHelp:this.I18n.t("js.work_packages.table_configuration.columns_help_text"),columnsLabel:this.I18n.t("js.label_columns"),selectedColumns:this.I18n.t("js.description_selected_columns"),multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect"),upsaleRelationColumns:this.I18n.t("js.work_packages.table_configuration.upsale.relation_columns"),upsaleCheckOutLink:this.I18n.t("js.work_packages.table_configuration.upsale.check_out_link")}}return e.prototype.onSave=function(){this.wpTableColumns.setColumnsById(this.selectedColumns.map(function(e){return e.id}))},e.prototype.setSelectedColumn=function(e){this.selectedColumnMap[e.id]?this.selectedColumns.push(e):_.remove(this.selectedColumns,function(n){return n.id===e.id})},e.prototype.updateSelect2Columns=function(e){var n=this,t=e.val;this.selectedColumnMap={},this.selectedColumns=t.map(function(e){return n.selectedColumnMap[e]=!0,n.column2Like(n.availableColumnsMap[e])})},e.prototype.ngOnInit=function(){var e=this;this.eeShowBanners=this.bannerService.eeShowBanners,this.selectedColumns.forEach(function(n){e.selectedColumnMap[n.id]=!0})},e.prototype.ngAfterViewInit=function(){this.setupSelect2()},e.prototype.ngOnDestroy=function(){jQuery(this.select2Columns.nativeElement).select2("close")},e.prototype.setupSelect2=function(){var e=this,n=jQuery(this.select2Columns.nativeElement);n.on("change",this.updateSelect2Columns.bind(this)).select2({multiple:!0,tags:!1,initSelection:function(n,t){return t(e.selectedColumns)},query:function(n){var t=[];e.availableColumns.forEach(function(e){(0===n.term.length||e.name.toUpperCase().indexOf(n.term.toUpperCase())>=0)&&t.push({id:e.id,text:e.name})}),n.callback({results:t,more:!1})}}).select2("val",[]),n.select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){n.select2("onSortStart")},update:function(){n.select2("onSortEnd")}}),n.select2("focus")},e.prototype.column2Like=function(e){return{id:e.id,text:e.name}},e}(),Ze=function(){function e(){this.state=Object(u.g)(!1)}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.state.getValueOr(!1)},set:function(e){this.state.putValue(e)},enumerable:!0,configurable:!0}),e.prototype.observeUntil=function(e){return this.state.values$().pipe(Object(D.a)(e))},e.prototype.toggleVisibility=function(){this.state.doModify(function(e){return!e})},e}(),Je=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.memoizedCurrentSchemas={},n}return r.d(n,e),n.prototype.$copy=function(){var n=e.prototype.$copy.call(this);return n.schema=this.schema,n},Object.defineProperty(n.prototype,"id",{get:function(){return this.filter.id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this.filter.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentSchema",{get:function(){if(!this.schema||!this.operator)return null;var e=this.operator.href.toString();return void 0===this.memoizedCurrentSchemas[e]&&(this.memoizedCurrentSchemas[e]=this.schema.resultingSchema(this.operator)),this.memoizedCurrentSchemas[e]},enumerable:!0,configurable:!0}),n.prototype.isCompletelyDefined=function(){return this.values.length||this.currentSchema&&!this.currentSchema.isValueRequired()},n.prototype.findOperator=function(e){return _.find(this.schema.availableOperators,function(n){return n.id===e})},n}(z),Xe=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$source.id||this.idFromLink},set:function(e){this.$source.id=e},enumerable:!0,configurable:!0}),n}(z),en=function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.querySpace=t,l.hidden=["id","parent","datesInterval","precedes","follows","relates","duplicates","duplicated","blocks","blocked","partof","includes","requires","required","search","subjectOrId"],l}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.filters},enumerable:!0,configurable:!0}),n.prototype.initializeFilters=function(e,n){var t=this,l=U(e.filters);this.loadCurrentFiltersSchemas(l).then(function(){t.availableState.putValue(n.filtersSchemas.elements),t.update(l)})},Object.defineProperty(n.prototype,"isEmpty",{get:function(){var e=this.state.value;return!e||0===e.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.filters},enumerable:!0,configurable:!0}),n.prototype.add=function(e){this.state.doModify(function(n){return n.concat([e])})},n.prototype.replace=function(e,n){var t=this,l=this.instantiate(e);this.state.doModify(function(i){var o=i.slice();n(l);var r=t.findIndex(e);return-1===r?o.push(l):o.splice(r,1,l),o})},n.prototype.modify=function(e,n){var t=this.findIndex(e);return-1!==t&&(this.state.doModify(function(e){return n(e[t]),e}),!0)},n.prototype.instantiate=function(e){var n=e instanceof Xe?e.id:e;return _.find(this.availableSchemas,function(e){return e.filter.allowedValues[0].id===n}).getFilter()},n.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=function(e){return e instanceof Je?e.id:e},l=new Set(e.map(t));this.state.doModify(function(e){return e.filter(function(e){return!l.has(t(e))})})},n.prototype.remainingVisibleFilters=function(e){var n=this;return void 0===e&&(e=this.current),this.remainingFilters(e).filter(function(e){return-1===n.hidden.indexOf(e.id)})},Object.defineProperty(n.prototype,"availableFilters",{get:function(){return this.availableSchemas.map(function(e){return e.allowedFilterValue})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableSchemas",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),n.prototype.findAvailableFilter=function(e){return _.find(this.availableFilters,function(n){return n.id===e})},n.prototype.isComplete=function(e){return _.every(e,function(e){return e.isCompletelyDefined()})},n.prototype.hasChanged=function(e){var n=function(e){return e.map(function(e){return e.$source})};return!_.isEqual(n(e.filters),n(this.rawFilters))},n.prototype.valueFromQuery=function(e){},n.prototype.find=function(e){var n=this.findIndex(e);if(-1!==n)return this.rawFilters[n]},n.prototype.findIndex=function(e){return _.findIndex(this.current,function(n){return n.id===e})},n.prototype.applyToQuery=function(e){return e.filters=this.cloneFilters(),!0},Object.defineProperty(n.prototype,"current",{get:function(){return this.rawFilters.slice()},enumerable:!0,configurable:!0}),n.prototype.cloneFilters=function(){return U(this.rawFilters)},Object.defineProperty(n.prototype,"rawFilters",{get:function(){return this.state.getValueOr([])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentlyVisibleFilters",{get:function(){var e=new Set(this.hidden);return e.delete("search"),_.reject(this.currentFilterResources,function(n){return e.has(n.id)})},enumerable:!0,configurable:!0}),n.prototype.replaceIfComplete=function(e){return!!this.isComplete(e)&&(this.update(e),!0)},n.prototype.onReady=function(){return Object(u.c)(this.state,this.availableState).values$().pipe(Object(F.a)(1),Object(b.a)(null)).toPromise()},n.prototype.remainingFilters=function(e){return void 0===e&&(e=this.rawFilters),_.differenceBy(this.availableFilters,e,function(e){return e.id})},Object.defineProperty(n.prototype,"currentFilterResources",{get:function(){return this.rawFilters.map(function(e){return e.filter})},enumerable:!0,configurable:!0}),n.prototype.loadCurrentFiltersSchemas=function(e){var n=this;return Promise.all(e.map(function(e){var t="/api/v3/queries/filter_instance_schemas/"+e.id;return e.schema?e.schema.$load():n.states.schemas.get(t).valuesPromise().then(function(n){return e.schema=n})}))},n}(N),nn=function(){function e(e,n,t,l,i){this.injector=e,this.I18n=n,this.wpTableFilters=t,this.wpFiltersService=l,this.bannerService=i,this.filters=[],this.eeShowBanners=!1,this.text={columnsLabel:this.I18n.t("js.label_columns"),selectedColumns:this.I18n.t("js.description_selected_columns"),multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect"),upsaleRelationColumns:this.I18n.t("js.modals.upsale_relation_columns"),upsaleRelationColumnsLink:this.I18n.t("js.modals.upsale_relation_columns_link")}}return e.prototype.ngOnInit=function(){var e=this;this.eeShowBanners=this.bannerService.eeShowBanners,this.wpTableFilters.onReady().then(function(){return e.filters=e.wpTableFilters.current})},e.prototype.onSave=function(){this.filters&&this.wpTableFilters.replaceIfComplete(this.filters)},e}(),tn=function(){return function(e,n){this.column=e,this.direction=n}}(),ln=function(){function e(e,n,t){this.injector=e,this.I18n=n,this.wpTableSortBy=t,this.text={title:this.I18n.t("js.label_sort_by"),placeholder:this.I18n.t("js.placeholders.default"),sort_criteria_1:this.I18n.t("js.filter.sorting.criteria.one"),sort_criteria_2:this.I18n.t("js.filter.sorting.criteria.two"),sort_criteria_3:this.I18n.t("js.filter.sorting.criteria.three")},this.availableDirections=[{$href:Be,name:this.I18n.t("js.label_ascending")},{$href:ze,name:this.I18n.t("js.label_descending")}],this.availableColumns=[],this.allColumns=[],this.sortationObjects=[],this.emptyColumn={name:this.text.placeholder,href:null}}return e.prototype.onSave=function(){var e=this,n=this.sortationObjects.filter(function(e){return null!==e.column}).map(function(n){return e.getMatchingSort(n.column.href,n.direction)});this.wpTableSortBy.update(_.compact(n))},e.prototype.ngOnInit=function(){var e=this;this.wpTableSortBy.state.values$().pipe(Object(F.a)(1)).toPromise().then(function(){var n=e.wpTableSortBy.available.filter(function(e){return!e.column.$href.endsWith("/parent")}).map(function(e){return{name:e.column.name,href:e.column.$href}});e.allColumns=_.uniqBy(n,"href"),_.each(e.wpTableSortBy.current,function(n){n.column.$href.endsWith("/parent")||e.sortationObjects.push(new tn({name:n.column.name,href:n.column.$href},n.direction.$href))}),e.updateUsedColumns(),e.fillUpSortElements()})},e.prototype.updateSelection=function(e,n){e.column=_.find(this.allColumns,function(e){return e.href===n})||this.emptyColumn,this.updateUsedColumns()},e.prototype.updateUsedColumns=function(){var e=this.sortationObjects.filter(function(e){return null!==e.column}).map(function(e){return e.column});this.availableColumns=_.sortBy(_.differenceBy(this.allColumns,e,"href"),"name")},e.prototype.getMatchingSort=function(e,n){return _.find(this.wpTableSortBy.available,function(t){return t.column.$href===e&&t.direction.$href===n})},e.prototype.fillUpSortElements=function(){for(;this.sortationObjects.length<3;)this.sortationObjects.push(new tn(this.emptyColumn,Be))},e}(),on=function(){function e(e,n,t,l){this.injector=e,this.I18n=n,this.wpTableTimeline=t,this.wpTableColumns=l,this.timelineVisible=!1,this.availableZoomLevels=["auto"].concat(j),this.text={title:this.I18n.t("js.timelines.gantt_chart"),display_timelines:this.I18n.t("js.timelines.button_activate"),display_timelines_hint:this.I18n.t("js.work_packages.table_configuration.show_timeline_hint"),zoom:{level:this.I18n.t("js.tl_toolbar.zooms"),description:this.I18n.t("js.timelines.zoom.description"),days:this.I18n.t("js.timelines.zoom.days"),weeks:this.I18n.t("js.timelines.zoom.weeks"),months:this.I18n.t("js.timelines.zoom.months"),quarters:this.I18n.t("js.timelines.zoom.quarters"),years:this.I18n.t("js.timelines.zoom.years"),auto:this.I18n.t("js.timelines.zoom.auto")},labels:{title:this.I18n.t("js.timelines.labels.title"),description:this.I18n.t("js.timelines.labels.description"),bar:this.I18n.t("js.timelines.labels.bar"),none:this.I18n.t("js.timelines.filter.noneSelection"),left:this.I18n.t("js.timelines.labels.left"),right:this.I18n.t("js.timelines.labels.right"),farRight:this.I18n.t("js.timelines.labels.farRight")}}}return e.prototype.onSave=function(){var e=this.wpTableTimeline.current;e.visible=this.timelineVisible,e.labels=this.labels,e.zoomLevel=this.zoomLevel,this.wpTableTimeline.state.putValue(e)},e.prototype.updateLabels=function(e,n){""===n&&(n=null),this.labels[e]=n},e.prototype.ngOnInit=function(){this.timelineVisible=this.wpTableTimeline.isVisible,this.zoomLevel=this.wpTableTimeline.zoomLevel;var e=this.wpTableTimeline.labels;this.labels=_.clone(e),this.availableLabels=Object.keys(this.labels);var n=this.wpTableColumns.allPropertyColumns.sort(function(e,n){return e.name.localeCompare(n.name)});this.availableAttributes=[{id:"",name:this.text.labels.none}].concat(n)},e}(),rn=function(){function e(e,n){this.documentElement=e,this.pathHelper=n,this.stylesheets={highlighting:this.pathHelper.staticBase+"/highlighting/styles.css"}}return e.prototype.requireHighlighting=function(){this.require("highlighting")},e.prototype.require=function(e){if(this.assertExists(e),!this.isLoaded(e)){var n=this.documentElement.createElement("link");n.id="dynamic-stylesheet-"+e,n.rel="stylesheet",n.type="text/css",n.href=this.stylesheets[e],n.media="all",this.documentElement.head.appendChild(n)}},e.prototype.assertExists=function(e){if(!this.stylesheets[e])throw"Unknown stylesheet "+e},e.prototype.isLoaded=function(e){return!!this.stylesheets[e]&&!!this.documentElement.getElementById("dynamic-stylesheet-"+e)},e}(),un=function(e){function n(n,t,l,i){var o=e.call(this,i)||this;return o.states=n,o.Banners=t,o.dynamicCssService=l,o.querySpace=i,o}return r.d(n,e),n.prototype.shouldHighlightInline=function(e){return!(!this.isInline||this.Banners.eeShowBanners)&&(void 0===this.current.selectedAttributes||this.current.selectedAttributes===[]||!!_.find(this.current.selectedAttributes,function(n){return n.id===e}))},Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.highlighting},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"current",{get:function(){var e=this.state.getValueOr({mode:"inline"});return this.filteredValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isInline",{get:function(){return"inline"===this.current.mode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDisabled",{get:function(){return"none"===this.current.mode},enumerable:!0,configurable:!0}),n.prototype.update=function(n){_.isEmpty(n.selectedAttributes)&&(n.selectedAttributes=void 0),e.prototype.update.call(this,this.filteredValue(n)),this.dynamicCssService.requireHighlighting()},n.prototype.valueFromQuery=function(e){var n={mode:e.highlightingMode||"inline",selectedAttributes:e.highlightedAttributes};return this.filteredValue(n)},n.prototype.hasChanged=function(e){return e.highlightingMode!==this.current.mode||!_.isEqual(e.highlightedAttributes,this.current.selectedAttributes)},n.prototype.applyToQuery=function(e){var n=this.current;return e.highlightingMode=n.mode,e.highlightedAttributes=n.selectedAttributes,!1},n.prototype.filteredValue=function(e){return this.Banners.conditional(function(){e.mode="none",e.selectedAttributes=void 0}),e},n}(N),an=function(){function e(e,n,t,l,i,o){this.injector=e,this.I18n=n,this.states=t,this.querySpace=l,this.Banners=i,this.wpTableHighlight=o,this.highlightingMode="inline",this.entireRowMode=!1,this.lastEntireRowAttribute="status",this.eeShowBanners=!1,this.availableMappedHighlightedAttributes=[],this.selectedAttributes=[],this.text={title:this.I18n.t("js.work_packages.table_configuration.highlighting"),highlighting_mode:{description:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.description"),none:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.none"),inline:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.inline"),inline_all_attributes:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.inline_all"),status:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.status"),type:this.I18n.t("js.work_packages.properties.type"),priority:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.priority"),entire_row_by:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.entire_row_by")},upsaleAttributeHighlighting:this.I18n.t("js.work_packages.table_configuration.upsale.attribute_highlighting"),upsaleCheckOutLink:this.I18n.t("js.work_packages.table_configuration.upsale.check_out_link")}}return e.prototype.onSave=function(){var e=this.highlightingMode,n=this.selectedAttributesAsHal();this.wpTableHighlight.update({mode:e,selectedAttributes:n})},e.prototype.selectedAttributesAsHal=function(){return this.isAllOptionSelected()?[]:this.multiToggleValuesToHal(this.selectedAttributes)},e.prototype.multiToggleValuesToHal=function(e){var n=this;return e.map(function(e){return _.find(n.availableHighlightedAttributes,function(n){return n.href===e.value})})},e.prototype.isAllOptionSelected=function(){return 1===this.selectedAttributes.length&&"all"===_.get(this.selectedAttributes[0],"value")},e.prototype.updateMode=function(e){this.highlightingMode="entire-row"===e?this.lastEntireRowAttribute:e,-1!==["status","priority","type"].indexOf(this.highlightingMode)?(this.lastEntireRowAttribute=this.highlightingMode,this.entireRowMode=!0):this.entireRowMode=!1},e.prototype.disabledValue=function(e){return e?"disabled":null},e.prototype.ngOnInit=function(){this.availableMappedHighlightedAttributes=[this.allAttributesOption].concat(this.getAvailableAttributes()),this.setSelectedValues(),this.eeShowBanners=this.Banners.eeShowBanners,this.updateMode(this.wpTableHighlight.current.mode),this.eeShowBanners&&this.updateMode("none")},e.prototype.setSelectedValues=function(){var e=this.wpTableHighlight.current.selectedAttributes;this.selectedAttributes=void 0===e?[this.allAttributesOption]:this.mapAttributes(e)},Object.defineProperty(e.prototype,"availableHighlightedAttributes",{get:function(){return this.querySpace.queryForm.value.schema.highlightedAttributes.allowedValues},enumerable:!0,configurable:!0}),e.prototype.getAvailableAttributes=function(){return this.mapAttributes(this.availableHighlightedAttributes)},e.prototype.mapAttributes=function(e){return e.map(function(e){return{name:e.name,value:e.$href}})},Object.defineProperty(e.prototype,"allAttributesOption",{get:function(){return{name:this.text.highlighting_mode.inline_all_attributes,singleOnly:!0,selectWhenEmptySelection:!0,value:"all"}},enumerable:!0,configurable:!0}),e}(),sn=function(){function e(e){this.I18n=e,this._tabs=[{name:"columns",title:this.I18n.t("js.label_columns"),componentClass:Ye},{name:"filters",title:this.I18n.t("js.work_packages.query.filters"),componentClass:nn},{name:"sort-by",title:this.I18n.t("js.label_sort_by"),componentClass:ln},{name:"display-settings",title:this.I18n.t("js.work_packages.table_configuration.display_settings"),componentClass:Ke},{name:"highlighting",title:this.I18n.t("js.work_packages.table_configuration.highlighting"),componentClass:an},{name:"timelines",title:this.I18n.t("js.timelines.gantt_chart"),componentClass:on}]}return Object.defineProperty(e.prototype,"tabs",{get:function(){return this._tabs},enumerable:!0,configurable:!0}),e}(),cn=function(){function e(e,n,t,l,i){this.availableTabs=e,this.outletElement=n,this.componentFactoryResolver=t,this.appRef=l,this.injector=i,this.activeTabs={},this.currentTab=null}return Object.defineProperty(e.prototype,"activeComponents",{get:function(){return _.values(this.activeTabs).map(function(e){return e.componentRef.instance})},enumerable:!0,configurable:!0}),e.prototype.switchTo=function(e){var n=_.find(this.availableTabs,function(n){return n.name===e});if(!n)throw"Trying to switch to unknown tab "+e+".";if(null!=n.disableBecause)return!1;this.detach();var t=this.activateInstance(n);return this.outletElement.innerHTML="",this.outletElement.appendChild(this._getComponentRootNode(t.componentRef)),this.outletElement.dataset.tabName=n.title,this.currentTab=t,!1},e.prototype.detach=function(){var e=this.currentTab;null!==e&&(e.portal.setAttachedHost(null),this.currentTab=null)},e.prototype.dispose=function(){_.each(this.activeTabs,function(e){return e.dispose()}),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)},e.prototype.activateInstance=function(e){return this.activeTabs[e.name]||(this.activeTabs[e.name]=this.createComponent(e)),this.activeTabs[e.name]||null},e.prototype.createComponent=function(e){var n=this,t=this.componentFactoryResolver.resolveComponentFactory(e.componentClass).create(this.injector),l=new p.a(e.componentClass,null,this.injector);return this.appRef.attachView(t.hostView),{name:e.name,portal:l,componentRef:t,dispose:function(){n.appRef.detachView(t.hostView),t.destroy()}}},e.prototype._getComponentRootNode=function(e){return e.hostView.rootNodes[0]},e}(),dn=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){var n={name:e.name||"!!!__O__o__O__!!!"};return e.project&&(n._links={project:{href:e.project.$href}}),e.$links.update(n)},e.prototype.loadWithParams=function(e,n,t,l){void 0===l&&(l={}),n||l.name||(l.name="!!!__O__o__O__!!!"),t&&(l._links=l._links||{},l._links.project={href:this.pathHelper.api.v3.projects.id(t).toString()});var i=this.pathHelper.api.v3.queries.optionalId(n).form.toString();return i=URI(i).search(e).toString(),this.halResourceService.post(i,l).toPromise()},e.prototype.buildQueryResource=function(e){return this.halResourceService.createHalResourceOfType("Query",e.payload)},e}(),pn=t("p0Sj"),hn=t("Rney"),fn=function(){function e(e){void 0===e&&(e=3600),this.holdValuesForSeconds=e,this.cacheDurationInMs=1e3*e}return e.prototype.state=function(e){return this.multiState.get(e)},e.prototype.touch=function(e){var n=this.multiState.get(e);n.putValue(n.value,"Touching the state")},e.prototype.updateValue=function(e,n){this.multiState.get(e).putValue(n)},e.prototype.observe=function(e){return this.state(e).values$()},e.prototype.observeAll=function(){var e=this;return this.multiState.observeChange().pipe(Object(pn.a)([]),Object(hn.a)(250),Object(v.a)(function(){var n=[];return _.each(e.multiState.getValueOr({}),function(e){e.value&&n.push(e.value)}),n}))},e.prototype.clearSome=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.forEach(function(n){return e.multiState.get(n).clear()})},e.prototype.require=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.multiState.get(e);return(this.stale(l)||n)&&(l.clear(),l.putFromPromiseIfPristine(function(){return t.load(e)})),l.valuesPromise()},e.prototype.requireAndStream=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.multiState.get(e);return(this.stale(l)||n)&&(l.clear(),l.putFromPromiseIfPristine(function(){return t.load(e)})),l.values$()},e.prototype.requireAll=function(e,n){var t,l=this;return void 0===n&&(n=!1),0===(t=n?e:e.filter(function(e){return l.stale(l.multiState.get(e))})).length?Promise.resolve(void 0):this.loadAll(t)},e.prototype.stale=function(e){return e.isPristine()||e.isValueOlderThan(this.cacheDurationInMs)},e}(),gn=function(){function e(e,n){this.states=e,this.halResourceService=n}return e.prototype.ensureLoaded=function(e){var n=this.state(e);return n.hasValue()?Promise.resolve(n.value):this.load(e).valuesPromise()},e.prototype.state=function(e){var n=e.$links.schema;return this.states.schemas.get(n.href)},e.prototype.load=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.state(e);return n&&l.clear(),l.putFromPromiseIfPristine(function(){return t.halResourceService.createLinkedResource(e,"schema",e.$links.schema.$link).$load()}),l},e}(),mn=t("qHU1"),vn=function(){function e(e,n,t){this.halResourceService=e,this.pathHelper=n,this.states=t}return e.prototype.loadWorkPackageById=function(e,n){void 0===n&&(n=!1);var t=this.pathHelper.api.v3.work_packages.id(e).toString();return this.halResourceService.get(t).toPromise()},e.prototype.loadWorkPackagesCollectionsFor=function(e){return this.halResourceService.getAllPaginated(this.pathHelper.api.v3.work_packages.toString(),e.length,{filters:ce("id","=",e).toJson()})},e.prototype.emptyCreateForm=function(e,n){return this.halResourceService.post(this.workPackagesFormPath(n),e).toPromise()},e.prototype.typedCreateForm=function(e,n){var t={_links:{type:{href:this.pathHelper.api.v3.types.id(e).toString()}}};return this.halResourceService.post(this.workPackagesFormPath(n),t).toPromise()},e.prototype.createWorkPackage=function(e){return this.halResourceService.post(this.pathHelper.api.v3.work_packages.path,e).toPromise()},e.prototype.workPackagesFormPath=function(e){return e?this.pathHelper.api.v3.projects.id(e).work_packages.form.toString():this.pathHelper.api.v3.work_packages.form.toString()},e}();function bn(e){return(e||"new").toString()}var yn=function(e){function n(n,t,l){var i=e.call(this)||this;return i.states=n,i.schemaCacheService=t,i.workPackageDmService=l,i}return r.d(n,e),n.prototype.updateValue=function(e,n){this.updateWorkPackageList([n],!1)},n.prototype.updateWorkPackage=function(e,n){var t=this;void 0===n&&(n=!1);var l=bn(e.id);return n||e.isNew?(this.multiState.get(l).putValue(e),Promise.resolve()):this.schemaCacheService.ensureLoaded(e).then(function(){t.multiState.get(l).putValue(e)})},n.prototype.updateWorkPackageList=function(e,n){var t=this;void 0===n&&(n=!0);for(var l=function(){var e=u,l=bn(e.id),o=i.multiState.get(l);if(e.isNew)return o.putValue(e),"continue";i.schemaCacheService.ensureLoaded(e).then(function(){n&&o.hasValue()&&_.isEqual(o.value.$source,e.$source)?Object(mn.a)("Skipping identical work package from updating"):t.multiState.get(l).putValue(e)})},i=this,o=0,r=e;o<r.length;o++){var u=r[o];l()}},n.prototype.loadWorkPackage=function(e,n){void 0===n&&(n=!1);var t=this.state(e);return"new"===e?t:(this.require(e,n),t)},n.prototype.loadAll=function(e){var n=this;return new Promise(function(t,l){n.workPackageDmService.loadWorkPackagesCollectionsFor(_.uniq(e)).then(function(e){_.each(e,function(e){e.schemas&&_.each(e.schemas.elements,function(e){n.states.schemas.get(e.href).putValue(e)}),e.elements&&n.updateWorkPackageList(e.elements),t(void 0)})},l)})},n.prototype.load=function(e){var n=this;return new Promise(function(t,l){var i=function(e){l(e)};n.workPackageDmService.loadWorkPackageById(e,!0).then(function(l){n.schemaCacheService.ensureLoaded(l).then(function(){n.multiState.get(e).putValue(l),t(l)},i)},i)})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.workPackages},enumerable:!0,configurable:!0}),n}(fn),wn=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){return this.halResourceService.get(this.pathHelper.api.v3.work_packages.id(e).relations,{}).toPromise().then(function(e){return e.elements})},e.prototype.loadInvolved=function(e){var n=_.filter(e,function(e){return/\d+/.test(e)});return 0===n.length?Promise.resolve([]):this.halResourceService.get(this.pathHelper.api.v3.relations.toPath(),{filters:ce("involved","=",n).toJson()}).toPromise().then(function(e){return e.elements})},e}(),kn=function(e){function n(){var n=e.call(this)||this;return n.name="WP-Relations",n.relations=Object(u.h)(),n.initializeMembers(),n}return r.d(n,e),n}(u.b),Cn=function(e){function n(n,t,l){var i=e.call(this)||this;return i.relationsDm=n,i.PathHelper=t,i.halResource=l,i.relationStates=new kn,i}return r.d(n,e),Object.defineProperty(n.prototype,"multiState",{get:function(){return this.relationStates.relations},enumerable:!0,configurable:!0}),n.prototype.load=function(e){var n=this;return new Promise(function(t,l){n.relationsDm.load(e).then(function(l){n.updateRelationsStateTo(e,l),t(n.state(e).value)}).catch(l)})},n.prototype.loadAll=function(e){var n=this;return new Promise(function(t,l){n.relationsDm.loadInvolved(e).then(function(l){n.clearSome.apply(n,e),n.accumulateRelationsFromInvolved(e,l),t()}).catch(l)})},n.prototype.find=function(e,n,t){var l=this.state(e.id).value;if(l)return _.find(l,function(l){var i=l.denormalized(e);return i.target.id===n.id&&i.relationType===t})},n.prototype.removeRelation=function(e){var n=this;return e.delete().then(function(){n.removeFromStates(e)})},n.prototype.updateRelationType=function(e,n,t,l){var i={_links:{from:{href:e.href},to:{href:n.href}},type:l};return this.updateRelation(t,i)},n.prototype.updateRelation=function(e,n){var t=this;return e.updateImmediately(n).then(function(e){return t.insertIntoStates(e),e})},n.prototype.addCommonRelation=function(e,n,t){var l=this,i={_links:{from:{href:this.PathHelper.api.v3.work_packages.id(e).toString()},to:{href:this.PathHelper.api.v3.work_packages.id(t).toString()}},type:n},o=this.PathHelper.api.v3.work_packages.id(e).relations.toString();return this.halResource.post(o,i).toPromise().then(function(e){return l.insertIntoStates(e),e})},n.prototype.insertIntoStates=function(e){var n=this;_.values(e.ids).forEach(function(t){n.multiState.get(t).doModify(function(n){return n[e.id]=e,n},function(){var n={};return n[e.id]=e,n})})},n.prototype.removeFromStates=function(e){var n=this;_.values(e.ids).forEach(function(t){n.multiState.get(t).doModify(function(n){return delete n[e.id],n},function(){return{}})})},n.prototype.updateRelationsStateTo=function(e,n){var t=this.multiState.get(e),l=_.keyBy(n,function(e){return e.id});t.putValue(l,"Overriding relations state.")},n.prototype.accumulateRelationsFromInvolved=function(e,n){var t=this;e.forEach(function(e){var l=n.filter(function(n){return n.isInvolved(e)});t.updateRelationsStateTo(e,l)})},n}(fn),In=function(e){function n(n,t,l,i,o){var r=e.call(this,n)||this;return r.querySpace=n,r.wpTableColumns=t,r.halResourceService=l,r.wpCacheService=i,r.wpRelations=o,r}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.querySpace.relationColumns},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return this.current},n.prototype.relationsToExtendFor=function(e,n,t){if(this.wpTableColumns.hasRelationColumns()&&!this.state.isPristine()&&!_.isNil(n)){var l=this.getExpandFor(e.id);if(void 0!==l){var i=this.wpTableColumns.findById(l),o=this.relationColumnType(i);null!==o&&_.each(this.relationsForColumn(e,n,i),function(e){return t(e,i,o)})}}},n.prototype.relationsForColumn=function(e,n,t){var l=this;if(_.isNil(n))return[];var i=this.relationColumnType(t);if("toType"===i){var o=t.type.href;return _.filter(n,function(n){var t=n.denormalized(e),i=l.wpCacheService.state(t.targetId).value;return _.get(i,"type.href")===o})}if("ofType"===i){var r=t.relationType;return _.filter(n,function(n){return n.denormalized(e).relationType===r})}return[]},n.prototype.relationColumnType=function(e){switch(e._type){case Me.RELATION_TO_TYPE:return"toType";case Me.RELATION_OF_TYPE:return"ofType";default:return null}},n.prototype.getExpandFor=function(e){return this.current[e]},n.prototype.setExpandFor=function(e,n){this.state.doModify(function(t){var l=r.a({},t);return l[e]=n,l})},n.prototype.collapse=function(e){this.state.doModify(function(n){var t=r.a({},n);return delete t[e],t})},Object.defineProperty(n.prototype,"current",{get:function(){return this.state.getValueOr({})},enumerable:!0,configurable:!0}),n}(A),Pn=function(){function e(e,n){this.UrlParamsHelper=e,this.$state=n}return e.prototype.updateIfDifferent=function(e,n){var t=this.getNewChecksum(e,n);this.isUninitialized()||(this.isIdDifferent(e.id)?(this.maintainUrlQueryState(e.id,null),this.clear()):this.isChecksumDifferent(t)&&this.maintainUrlQueryState(e.id,t)),this.set(e.id,t)},e.prototype.update=function(e,n){var t=this.getNewChecksum(e,n);this.set(e.id,t),this.maintainUrlQueryState(e.id,t)},e.prototype.setToQuery=function(e,n){var t=this.getNewChecksum(e,n);this.set(e.id,t),this.maintainUrlQueryState(e.id,null)},e.prototype.isQueryOutdated=function(e,n){var t=this.getNewChecksum(e,n);return this.isOutdated(e.id,t)},e.prototype.executeIfOutdated=function(e,n,t){(this.isUninitialized()||this.isOutdated(e,n))&&(this.set(e,n),t())},e.prototype.set=function(e,n){this.id=e,this.checksum=n},e.prototype.clear=function(){this.id=null,this.checksum=null,this.visibleChecksum=null},e.prototype.isUninitialized=function(){return!this.id&&!this.checksum},e.prototype.isIdDifferent=function(e){return this.id!==e},e.prototype.isChecksumDifferent=function(e){return this.checksum&&e!==this.checksum},e.prototype.isOutdated=function(e,n){var t=!!this.id,l=!!this.checksum,i=this.id!==e,o=n!==this.checksum,r=this.checksum&&!n&&this.visibleChecksum;return(t||l)&&(i||!i&&o&&(n||this.visibleChecksum)||!t&&r)},e.prototype.getNewChecksum=function(e,n){return this.UrlParamsHelper.encodeQueryJsonParams(e,_.pick(n,["page","perPage"]))},e.prototype.maintainUrlQueryState=function(e,n){this.visibleChecksum=n,this.$state.go(".",{query_props:n,query_id:e},{custom:{notify:!1}})},e}(),jn=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isValidationError=!1,n}return r.d(n,e),Object.defineProperty(n.prototype,"errorMessages",{get:function(){return this.isMultiErrorMessage()?this.errors.map(function(e){return e.message}):[this.message]},enumerable:!0,configurable:!0}),n.prototype.isMultiErrorMessage=function(){return"urn:openproject-org:api:v3:errors:MultipleErrors"===this.errorIdentifier},n.prototype.getInvolvedAttributes=function(){var e=this,n=[];return this.details?n=[{details:this.details}]:this.errors&&(n=this.errors),_.flatten(n.map(function(n){return"urn:openproject-org:api:v3:errors:MultipleErrors"===n.errorIdentifier?e.extractMultiError(n)[0]:n.details.attribute}))},n.prototype.getMessagesPerAttribute=function(){var e=this,n={};return this.details?n[this.details.attribute]=[this.message]:_.forEach(this.errors,function(t){if("urn:openproject-org:api:v3:errors:MultipleErrors"===t.errorIdentifier){var l=e.extractMultiError(t),i=l[0],o=l[1],r=n[i]||[];n[i]=r.concat(o)}else n[t.details.attribute]?n[t.details.attribute].push(t.message):n[t.details.attribute]=[t.message]}),n},n.prototype.extractMultiError=function(e){return[e.errors[0].details.attribute,e.errors.map(function(e){return e.message})]},n}(z),_n=t("xMyE");var Rn=function(){function e(e){this.indicator=e,this.indicatorTemplate='<div class="loading-indicator--background">\n      <div class="loading-indicator">\n        <div class="block-1"></div>\n        <div class="block-2"></div>\n        <div class="block-3"></div>\n        <div class="block-4"></div>\n        <div class="block-5"></div>\n      </div>\n    </div>\n   '}return Object.defineProperty(e.prototype,"promise",{set:function(e){var n=this;this.start();var t=function(){return n.delayedStop()};e.then(t).catch(t)},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.stop(),this.indicator.prepend(this.indicatorTemplate)},e.prototype.delayedStop=function(e){var n=this;void 0===e&&(e=25),setTimeout(function(){return n.stop()},e)},e.prototype.stop=function(){this.indicator.find(".loading-indicator--background").remove()},e}(),Sn=function(){function e(){}return Object.defineProperty(e.prototype,"table",{get:function(){return this.indicator("table")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wpDetails",{get:function(){return this.indicator("wpDetails")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this.indicator("modal")},enumerable:!0,configurable:!0}),e.prototype.indicator=function(e){return"string"==typeof e&&(e=this.getIndicatorAt(e)),new Rn(e)},e.prototype.getIndicatorAt=function(e){return jQuery(".loading-indicator--location").filter('[data-indicator-name="'+e+'"]')},e}();var xn="op:notifications:add",Tn=function(){function e(e){var n=this;this.configurationService=e,this.stack=Object(u.g)([]),jQuery(window).on(xn,function(e,t){n.add(t)})}return Object.defineProperty(e.prototype,"current",{get:function(){return this.stack},enumerable:!0,configurable:!0}),e.prototype.add=function(e,n){var t=this;return void 0===n&&(n=5e3),jQuery(".flash.notice").remove(),this.stack.doModify(function(n){var t=[e].concat(n);return _.remove(t,function(e,n){return n>0&&("success"===e.type||"error"===e.type)}),t}),"success"===e.type&&this.configurationService.autoHidePopups()&&setTimeout(function(){return t.remove(e)},n),e},e.prototype.addError=function(e,n){void 0===n&&(n=[]),Array.isArray(n)||(n=[n]);var t=this.createNotification(e,"error");return t.data=n,this.add(t)},e.prototype.addWarning=function(e){return this.add(this.createNotification(e,"warning"))},e.prototype.addSuccess=function(e){return this.add(this.createNotification(e,"success"))},e.prototype.addNotice=function(e){return this.add(this.createNotification(e,"info"))},e.prototype.addAttachmentUpload=function(e,n){return this.add(this.createAttachmentUploadNotification(e,n))},e.prototype.remove=function(e){this.stack.doModify(function(n){return _.remove(n,function(n){return n===e}),n})},e.prototype.clear=function(){this.stack.putValue([])},e.prototype.createNotification=function(e,n){return"string"==typeof e?{message:e,type:n}:(e.type=n,e)},e.prototype.createAttachmentUploadNotification=function(e,n){if(!n.length)throw new Error("Cannot create an upload notification without uploads!");var t=this.createNotification(e,"upload");return t.data=n,t},e}(),On=function(){function e(e,n,t,l,i,o){this.I18n=e,this.$state=n,this.wpCacheService=t,this.halResourceService=l,this.NotificationsService=i,this.loadingIndicator=o}return e.prototype.showSave=function(e,n){void 0===n&&(n=!1);var t={message:this.I18n.t("js.notice_successful_"+(n?"create":"update"))};this.$state.includes("work-packages.show")||(t.link=this.showInFullScreenLink(e)),this.NotificationsService.addSuccess(t)},e.prototype.handleRawError=function(e,n){if(console.error("Handling error message %O for work package %O",e,n),e instanceof jn)return this.handleErrorResponse(e,n);var t=this.retrieveError(e);if(t instanceof z)return this.handleErrorResponse(t,n);"string"!=typeof e?this.showGeneralError(t||e):this.NotificationsService.addError(e)},e.prototype.retrieveErrorMessage=function(e){var n=this.retrieveError(e);return n instanceof jn?n.message:"string"==typeof n?n:this.I18n.t("js.error.internal")},e.prototype.retrieveError=function(e){var n;return e instanceof L.f&&(n=e.message||e.error),"Error"===_.get(e,"data._type")&&(n=e.data),n&&"Error"===n._type?this.halResourceService.createHalResourceOfClass(jn,n):e},e.prototype.handleErrorResponse=function(e,n){return e instanceof jn?n?this.showError(e,n):void this.showApiErrorMessages(e):this.showGeneralError(e)},e.prototype.showError=function(e,n){this.showCustomError(e,n)||this.showApiErrorMessages(e)},e.prototype.showGeneralError=function(e){var n=this.I18n.t("js.error.internal");("string"==typeof e||_.has(e,"toString"))&&(n+=" "+e.toString()),this.NotificationsService.addError(n)},e.prototype.showEditingBlockedError=function(e){this.NotificationsService.addError(this.I18n.t("js.work_packages.error.edit_prohibited",{attribute:e}))},e.prototype.showCustomError=function(e,n){var t=this;if("urn:openproject-org:api:v3:errors:UpdateConflict"===e.errorIdentifier)return this.NotificationsService.addError({message:e.message,type:"error",link:{text:this.I18n.t("js.work_packages.error.update_conflict_refresh"),target:function(){return t.wpCacheService.require(n.id,!0)}}}),!0;if("urn:openproject-org:api:v3:errors:PropertyFormatError"===e.errorIdentifier){var l=n.schema[e.details.attribute].name,i="js.work_packages.error.format."+n.schema[e.details.attribute].type.toLowerCase();return void 0!==this.I18n.lookup(i)&&(this.NotificationsService.addError(this.I18n.t(i,{attribute:l})),!0)}return!1},e.prototype.showApiErrorMessages=function(e){var n=e.errorMessages;return n.length>1?this.NotificationsService.addError("",n):this.NotificationsService.addError(n[0]),!0},e.prototype.showInFullScreenLink=function(e){var n=this;return{target:function(){n.loadingIndicator.table.promise=n.$state.go("work-packages.show.activity",{workPackageId:e.id})},text:this.I18n.t("js.work_packages.message_successful_show_in_fullscreen")}},e}(),En=function(){function e(e,n,t,l,i,o,r){this.querySpace=e,this.wpTableHierarchies=n,this.wpTableColumns=t,this.wpNotificationsService=l,this.halResourceService=i,this.wpCacheService=o,this.wpRelations=r}return e.prototype.initialize=function(e){var n=this;Promise.all([this.requireInvolvedRelations(e.map(function(e){return e.id})),this.requireHierarchyElements(e)]).then(function(e){n.loadAdditional(_.flatten(e))})},e.prototype.loadAdditional=function(e){var n=this;this.wpCacheService.requireAll(e).then(function(){n.querySpace.additionalRequiredWorkPackages.putValue(null,"All required work packages are loaded")}).catch(function(e){n.querySpace.additionalRequiredWorkPackages.putValue(null,"Failure loading required work packages"),n.wpNotificationsService.handleRawError(e)})},e.prototype.requireInvolvedRelations=function(e){var n=this;return this.wpTableColumns.hasRelationColumns()?this.wpRelations.requireAll(e,!0).then(function(){var t=n.getInvolvedWorkPackages(e.map(function(e){return n.wpRelations.state(e).value}));return _.flatten(t)}):Promise.resolve([])},e.prototype.requireHierarchyElements=function(e){if(!this.wpTableHierarchies.isEnabled)return Promise.resolve([]);var n=_.flatten(e.map(function(e){return e.ancestorIds}));return Promise.resolve(n)},e.prototype.getInvolvedWorkPackages=function(e){var n=[];return _.each(e,function(e){_.each(e,function(e){n.push(e.ids.from,e.ids.to)})}),n},e}(),Dn=function(){function e(){this.links=Object(u.g)({})}return e.prototype.initModelAuth=function(e,n){this.links.doModify(function(t){var l=r.a({},t);return l[e]=n,l})},e.prototype.observeUntil=function(e){return this.links.values$().pipe(Object(D.a)(e))},e.prototype.can=function(e,n){var t=this.links.getValueOr({});return t[e]&&n in t[e]},e.prototype.cannot=function(e,n){return!this.can(e,n)},e}(),Fn=function(){function e(e,n,t,l,i,o,r,u,a,s,c,d,p,h,f,g){this.states=e,this.querySpace=n,this.wpTableColumns=t,this.wpTableGroupBy=l,this.wpTableSortBy=i,this.wpTableFilters=o,this.wpTableSum=r,this.wpTableTimeline=u,this.wpTableHierarchies=a,this.wpTableHighlighting=s,this.wpTableRelationColumns=c,this.wpTablePagination=d,this.wpTableAdditionalElements=p,this.wpCacheService=h,this.wpListChecksumService=f,this.authorisationService=g}return e.prototype.initialize=function(e,n){this.clearStates(),this.querySpace.query.putValue(e),this.initializeFromQuery(e,n),this.updateQuerySpace(e,n),this.updateChecksum(e,n)},e.prototype.updateStatesFromForm=function(e,n){var t=this,l=n.schema;_.each(l.filtersSchemas.elements,function(e){t.states.schemas.get(e.$href).putValue(e)}),this.wpTableFilters.initializeFilters(e,l),this.querySpace.queryForm.putValue(n),this.states.queries.columns.putValue(l.columns.allowedValues),this.states.queries.sortBy.putValue(l.sortBy.allowedValues),this.states.queries.groupBy.putValue(l.groupBy.allowedValues)},e.prototype.updateQuerySpace=function(e,n){var t=this;this.querySpace.additionalRequiredWorkPackages.clear("Clearing additional WPs before updating rows"),n.schemas&&_.each(n.schemas.elements,function(e){t.states.schemas.get(e.href).putValue(e)}),this.querySpace.query.putValue(e),this.querySpace.rows.putValue(n.elements),this.authorisationService.initModelAuth("work_packages",n.$links),n.elements.forEach(function(e){return t.wpCacheService.updateWorkPackage(e,!0)}),this.querySpace.results.putValue(n),this.querySpace.groups.putValue(n.groups),this.wpTablePagination.initialize(e,n),this.wpTableRelationColumns.initialize(e,n),this.wpTableAdditionalElements.initialize(n.elements)},e.prototype.updateChecksum=function(e,n){this.wpListChecksumService.updateIfDifferent(this.querySpace.query.value,this.wpTablePagination.current),this.authorisationService.initModelAuth("work_packages",n.$links)},e.prototype.initializeFromQuery=function(e,n){this.querySpace.query.putValue(e),this.wpTableSum.initialize(e),this.wpTableColumns.initialize(e,n),this.wpTableSortBy.initialize(e,n),this.wpTableGroupBy.initialize(e,n),this.wpTableTimeline.initialize(e,n),this.wpTableHierarchies.initialize(e,n),this.wpTableHighlighting.initialize(e,n),this.authorisationService.initModelAuth("query",e.$links),this.authorisationService.initModelAuth("work_packages",n.$links)},e.prototype.applyToQuery=function(e){this.wpTableFilters.applyToQuery(e),this.wpTableSum.applyToQuery(e),this.wpTableColumns.applyToQuery(e),this.wpTableSortBy.applyToQuery(e),this.wpTableGroupBy.applyToQuery(e),this.wpTableTimeline.applyToQuery(e),this.wpTableHighlighting.applyToQuery(e),this.wpTableHierarchies.applyToQuery(e)},e.prototype.clearStates=function(){var e="Clearing states before re-initialization.";this.querySpace.query.clear(e),this.querySpace.rows.clear(e),this.querySpace.columns.clear(e),this.querySpace.sortBy.clear(e),this.querySpace.groupBy.clear(e),this.querySpace.sum.clear(e),this.querySpace.results.clear(e),this.querySpace.groups.clear(e),this.querySpace.additionalRequiredWorkPackages.clear(e),this.querySpace.rendered.clear(e),this.querySpace.query.clear()},e}(),An=new l.InjectionToken("WpTableConfigurationModalPrependComponent"),Nn=function(e){function n(n,t,i,o,r,u,a,s,c,d,p,h,f,g,m){var v=e.call(this,n,f,m)||this;return v.locals=n,v.prependModalComponent=t,v.I18n=i,v.injector=o,v.appRef=r,v.componentFactoryResolver=u,v.loadingIndicator=a,v.querySpace=s,v.queryFormDm=c,v.wpStatesInitialization=d,v.wpNotificationsService=p,v.wpTableColumns=h,v.cdRef=f,v.ConfigurationService=g,v.elementRef=m,v.closeOnEscape=!1,v.closeOnOutsideClick=!1,v.text={title:v.I18n.t("js.work_packages.table_configuration.modal_title"),closePopup:v.I18n.t("js.close_popup_title"),columnsLabel:v.I18n.t("js.label_columns"),selectedColumns:v.I18n.t("js.description_selected_columns"),multiSelectLabel:v.I18n.t("js.work_packages.label_column_multiselect"),applyButton:v.I18n.t("js.modals.button_apply"),cancelButton:v.I18n.t("js.modals.button_cancel"),upsaleRelationColumns:v.I18n.t("js.modals.upsale_relation_columns"),upsaleRelationColumnsLink:v.I18n.t("js.modals.upsale_relation_columns_link")},v.onDataUpdated=new l.EventEmitter,v.selectedColumnMap={},v.wpTableConfigurationService=v.injector.get(sn,new sn(v.I18n)),v}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.tabPortalHost=new cn(this.wpTableConfigurationService.tabs,this.tabContentOutlet.nativeElement,this.componentFactoryResolver,this.appRef,this.injector),this.loadingIndicator.indicator("modal").promise=this.loadForm().then(function(){var n=e.locals.initialTab||e.availableTabs[0].name;e.switchTo(n)})},n.prototype.ngOnDestroy=function(){this.onDataUpdated.complete(),this.tabPortalHost.dispose()},Object.defineProperty(n.prototype,"availableTabs",{get:function(){return this.tabPortalHost.availableTabs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentTab",{get:function(){return this.tabPortalHost.currentTab},enumerable:!0,configurable:!0}),n.prototype.switchTo=function(e){this.tabPortalHost.switchTo(e)},n.prototype.saveChanges=function(){this.tabPortalHost.activeComponents.forEach(function(e){e.onSave()}),this.onDataUpdated.emit(),this.service.close()},n.prototype.onClose=function(){return this.afterFocusOn.focus(),!0},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),n.prototype.loadForm=function(){var e=this,n=this.querySpace.query.value;return this.queryFormDm.load(n).then(function(t){return e.wpStatesInitialization.updateStatesFromForm(n,t),t}).catch(function(n){return e.wpNotificationsService.handleRawError(n)})},n}(Le.a),Mn=t("IaZ+"),Vn=function(){function e(e){this.PathHelper=e,this.detect()}return Object.defineProperty(e.prototype,"inProjectContext",{get:function(){return void 0!==this.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.current?this.PathHelper.projectPath(this.current.identifier):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apiv3Path",{get:function(){return this.current?this.PathHelper.api.v3.projects.id(this.current.id).toString():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.getCurrent("id")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getCurrent("name")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.getCurrent("identifier")},enumerable:!0,configurable:!0}),e.prototype.getCurrent=function(e){return this.current&&this.current[e]?this.current[e].toString():null},e.prototype.detect=function(){var e=document.querySelector("meta[name=current_project]");e&&(this.current={id:e.dataset.projectId,name:e.dataset.projectName,identifier:e.dataset.projectIdentifier})},e}(),qn=function(){return function(e){var n=this;this.tableVisible=!0,this.compactTableStyle=!1,this.actionsColumnEnabled=!0,this.contextMenuEnabled=!0,this.columnMenuEnabled=!0,this.projectContext=!0,this.projectIdentifier=null,this.inlineCreateEnabled=!0,this.hierarchyToggleEnabled=!0,this.dragAndDropEnabled=!1,this.isEmbedded=!1,this.isCardView=!1,this.forcePerPageOption=!1,this.withFilters=!1,this.filtersExpanded=!1,this.showFilterButton=!1,this.filterButtonText=I18n.t("js.button_filter"),_.each(e,function(e,t){n[t]=e})}}(),Ln=t("q4SE"),$n=t("/PH2"),Hn=function(){function e(){}return Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return jQuery("meta[name=current_user]").length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return jQuery("meta[name=current_user]").data("id")},enumerable:!0,configurable:!0}),e}(),Bn=function(){function e(e,n,t,l,i){this.I18n=e,this.$state=n,this.CurrentProject=t,this.PathHelper=l,this.CurrentUserService=i,this.text={assignee:this.I18n.t("js.work_packages.properties.assignee"),author:this.I18n.t("js.work_packages.properties.author"),created_at:this.I18n.t("js.work_packages.properties.createdAt"),updated_at:this.I18n.t("js.work_packages.properties.updatedAt"),status:this.I18n.t("js.work_packages.properties.status"),work_packages:this.I18n.t("js.label_work_package_plural"),gantt:this.I18n.t("js.timelines.gantt_chart"),latest_activity:this.I18n.t("js.work_packages.default_queries.latest_activity"),created_by_me:this.I18n.t("js.work_packages.default_queries.created_by_me"),assigned_to_me:this.I18n.t("js.work_packages.default_queries.assigned_to_me"),recently_created:this.I18n.t("js.work_packages.default_queries.recently_created"),all_open:this.I18n.t("js.work_packages.default_queries.all_open"),summary:this.I18n.t("js.work_packages.default_queries.summary")}}return Object.defineProperty(e.prototype,"all",{get:function(){var e=[{identifier:"latest_activity",label:this.text.latest_activity,query_props:'{"c":["id","subject","type","status","assignee","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc","f":[{"n":"status","o":"o","v":[]}]}'},{identifier:"gantt",label:this.text.gantt,query_props:'{"c":["id","subject","startDate","dueDate"],"tv":true,"tzl":"years","hi":true,"g":"","t":"id:asc","t":"startDate:asc","f":[{"n":"status","o":"o","v":[]}]}'},{identifier:"recently_created",label:this.text.recently_created,query_props:'{"c":["id","subject","type","status","assignee","createdAt"],"hi":false,"g":"","t":"createdAt:desc","f":[{"n":"status","o":"o","v":[]}]}'},{identifier:"all_open",label:this.text.all_open,query_props:null}],n=this.CurrentProject.identifier;return n&&e.push({identifier:"summary",label:this.text.summary,static_link:this.PathHelper.projectWorkPackagesPath(n)+"/report"}),this.CurrentUserService.isLoggedIn&&(e=e.concat([{identifier:"created_by_me",label:this.text.created_by_me,query_props:'{"c":["id","subject","type","status","assignee","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc,id:asc","f":[{"n":"status","o":"o","v":[]},{"n":"author","o":"=","v":["me"]}]}'},{identifier:"assigned_to_me",label:this.text.assigned_to_me,query_props:'{"c":["id","subject","type","status","author","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc,id:asc","f":[{"n":"status","o":"o","v":[]},{"n":"assigneeOrGroup","o":"=","v":["me"]}]}'}])),e},enumerable:!0,configurable:!0}),e.prototype.getStaticName=function(e){if(this.$state.params.query_props){var n=JSON.parse(this.$state.params.query_props);delete n.pp,delete n.pa;var t=_.find(this.all,function(e){return e.query_props&&e.query_props===JSON.stringify(n)});if(t)return t.label}return 1===e.filters.length&&"status"===e.filters[0].id&&"o"===e.filters[0].operator.id?this.text.all_open:this.text.work_packages},e}(),zn=function(){function e(e){this.querySpace=e}return e.prototype.request=function(e,n){void 0===n&&(n={});var t=r.a({visible:!1,firstPage:!1},n);this.state.putValue(t,e)},e.prototype.clear=function(e){this.state.clear(e)},Object.defineProperty(e.prototype,"state",{get:function(){return this.querySpace.refreshRequired},enumerable:!0,configurable:!0}),e}(),Wn=function(){function e(e,n){this.halResourceService=e,this.queryFormDm=n}return e.prototype.restoreQuery=function(e,n){var t=this.queryFormDm.buildQueryResource(n);this.restoreFilters(e,t,n.schema),this.restoreColumns(e,t,n.schema),this.restoreSortBy(e,t,n.schema),this.restoreGroupBy(e,t,n.schema),this.restoreOtherProperties(e,t)},e.prototype.restoreFilters=function(e,n,t){var l=_.map(n.filters,function(e){var n=_.find(t.filtersSchemas.elements,function(n){return n.filter.allowedValues[0].$href===e.filter.$href});if(!n)return null;var l=n.getFilter(),i=_.find(n.operator.allowedValues,function(n){return n.$href===e.operator.$href});return i&&(l.operator=i),l.values.length=0,_.each(e.values,function(e){return l.values.push(e)}),l});l=_.compact(l),e.filters.length=0,_.each(l,function(n){return e.filters.push(n)})},e.prototype.restoreColumns=function(e,n,t){var l=_.map(n.columns,function(e){return _.find(t.columns.allowedValues,function(n){return n.$href===e.$href})});l=_.compact(l),e.columns.length=0,_.each(l,function(n){return e.columns.push(n)})},e.prototype.restoreSortBy=function(e,n,t){var l=_.map(n.sortBy,function(e){return _.find(t.sortBy.allowedValues,function(n){return n.$href===e.$href})});l=_.compact(l),e.sortBy.length=0,_.each(l,function(n){return e.sortBy.push(n)})},e.prototype.restoreGroupBy=function(e,n,t){var l=_.find(t.groupBy.allowedValues,function(e){return n.groupBy&&n.groupBy.$href===e.$href});e.groupBy=l},e.prototype.restoreOtherProperties=function(e,n){_.without(Object.keys(n.$source),"_links","filters").forEach(function(t){e[t]=n[t]}),_.without(Object.keys(n.$source._links),"columns","groupBy","sortBy").forEach(function(t){e[t]=n[t]})},e}(),Qn=t("0/uQ"),Un=t("15JJ"),Kn=t("psW0"),Gn=t("S1nX"),Yn=function(){function e(e,n,t,l,i,o,r,a,s,c,d,p){var h=this;this.NotificationsService=e,this.I18n=n,this.UrlParamsHelper=t,this.authorisationService=l,this.$state=i,this.QueryDm=o,this.QueryFormDm=r,this.states=a,this.querySpace=s,this.wpTablePagination=c,this.wpStatesInitialization=d,this.wpListInvalidQueryService=p,this.queryRequests=Object(u.g)(),this.queryLoading=this.queryRequests.values$().pipe(Object(Un.a)(function(e){return h.streamQueryRequest(e.queryParams,e.projectIdentifier)}),Object(Kn.a)(function(e){return h.conditionallyLoadForm(e),h.querySpace.ready.doAndTransition("Query loaded",function(){return h.wpStatesInitialization.initialize(e,e.results),h.querySpace.tableRendering.onQueryUpdated.valuesPromise()}).then(function(){return e})}),Object(Gn.a)())}return e.prototype.streamQueryRequest=function(e,n){var t=this,l=this.getCurrentQueryProps(e),i=this.UrlParamsHelper.buildV3GetQueryFromJsonParams(l);return this.QueryDm.stream(i,e.query_id,n).pipe(Object(H.a)(function(i){var o=t.UrlParamsHelper.buildV3GetQueryFromJsonParams(l);return Object(Qn.a)(t.handleQueryLoadingError(i,o,e.query_id,n))}))},e.prototype.fromQueryParams=function(e,n){return this.queryRequests.clear(),this.queryRequests.putValue({queryParams:e,projectIdentifier:n}),this.queryLoading.pipe(Object(F.a)(1))},e.prototype.getCurrentQueryProps=function(e){return e.query_props?decodeURIComponent(e.query_props):null},e.prototype.loadDefaultQuery=function(e){return this.fromQueryParams({},e).toPromise()},e.prototype.reloadQuery=function(e){var n=this,t=this.getPaginationInfo();t.offset=1;var l=this.QueryDm.reload(e,t);return this.updateStatesFromQueryOnPromise(l).then(function(e){return n.conditionallyLoadForm(e),e}).catch(function(t){var l=e.project&&e.project.id;return n.handleQueryLoadingError(t,{},e.id,l)})},e.prototype.loadResultsList=function(e,n){var t=this.QueryDm.loadResults(e,n);return this.updateStatesFromWPListOnPromise(e,t)},e.prototype.reloadCurrentResultsList=function(){var e=this.getPaginationInfo(),n=this.currentQuery;return this.loadResultsList(n,e)},e.prototype.loadCurrentResultsListFirstPage=function(){var e=this.getPaginationInfo();e.offset=1;var n=this.currentQuery;return this.loadResultsList(n,e)},e.prototype.loadCurrentQueryFromParams=function(e){return this.fromQueryParams(this.$state.params,e).toPromise()},e.prototype.loadForm=function(e){var n=this;return this.QueryFormDm.load(e).then(function(t){return n.wpStatesInitialization.updateStatesFromForm(e,t),t})},e.prototype.create=function(e,n){var t=this,l=this.querySpace.queryForm.value;e.name=n;var i=this.QueryDm.create(e,l);return i.then(function(e){return t.NotificationsService.addSuccess(t.I18n.t("js.notice_successful_create")),t.reloadQuery(e).then(function(){t.states.changes.queries.next(e.id)}),e}),i},e.prototype.delete=function(){var e=this,n=this.currentQuery,t=this.QueryDm.delete(n);return t.then(function(){var t;e.NotificationsService.addSuccess(e.I18n.t("js.notice_successful_delete")),n.project&&(t=n.project.$href.split("/").pop()),e.loadDefaultQuery(t),e.states.changes.queries.next(n.id)}),t},e.prototype.save=function(e){var n=this;e=e||this.currentQuery;var t=this.querySpace.queryForm.value,l=this.QueryDm.update(e,t).toPromise();return l.then(function(){n.NotificationsService.addSuccess(n.I18n.t("js.notice_successful_update")),n.$state.go(".",{query_id:e.id,query_props:null},{custom:{notify:!1}}),n.states.changes.queries.next(e.id)}).catch(function(e){n.NotificationsService.addError(e.message)}),l},e.prototype.toggleStarred=function(e){var n=this,t=this.QueryDm.toggleStarred(e);return t.then(function(e){n.querySpace.query.putValue(e),n.NotificationsService.addSuccess(n.I18n.t("js.notice_successful_update")),n.states.changes.queries.next(e.id)}),t},e.prototype.getPaginationInfo=function(){return this.wpTablePagination.paginationObject},e.prototype.conditionallyLoadForm=function(e){var n=this,t=this.querySpace.queryForm.value;t&&e.$links.update.$href===t.$href||setTimeout(function(){return n.loadForm(e)},0)},e.prototype.updateStatesFromQueryOnPromise=function(e){var n=this;return e.then(function(e){return n.querySpace.ready.doAndTransition("Query loaded",function(){return n.wpStatesInitialization.initialize(e,e.results),n.querySpace.tableRendering.onQueryUpdated.valuesPromise()}),e}),e},e.prototype.updateStatesFromWPListOnPromise=function(e,n){var t=this;return n.then(function(n){return t.querySpace.ready.doAndTransition("Query loaded",function(){return t.wpStatesInitialization.updateQuerySpace(e,n),t.wpStatesInitialization.updateChecksum(e,n),t.querySpace.tableRendering.onQueryUpdated.valuesPromise()}),n})},Object.defineProperty(e.prototype,"currentQuery",{get:function(){return this.querySpace.query.value},enumerable:!0,configurable:!0}),e.prototype.handleQueryLoadingError=function(e,n,t,l){var i=this;return this.NotificationsService.addError(this.I18n.t("js.work_packages.faulty_query.description"),e.message),new Promise(function(e,o){i.QueryFormDm.loadWithParams(n,t,l).then(function(r){i.QueryDm.findDefault({pageSize:0},l).then(function(l){i.wpListInvalidQueryService.restoreQuery(l,r),l.results.pageSize=n.pageSize,l.results.total=0,t&&(l.id=t),i.querySpace.ready.doAndTransition("Query loaded",function(){return i.wpStatesInitialization.initialize(l,l.results),i.wpStatesInitialization.updateStatesFromForm(l,r),i.querySpace.tableRendering.onQueryUpdated.valuesPromise()}),e(l)}).catch(o)}).catch(o)})},e}(),Zn=function(){function e(e){this.injector=e,this.$state=this.injector.get(h.G),this.states=this.injector.get(s),this.querySpace=this.injector.get(y),this.authorisationService=this.injector.get(Dn),this.wpTableRefresh=this.injector.get(zn),this.wpTableColumns=this.injector.get(qe),this.wpTableHighlighting=this.injector.get(un),this.wpTableSortBy=this.injector.get(We),this.wpTableGroupBy=this.injector.get($e),this.wpTableFilters=this.injector.get(en),this.wpTableSum=this.injector.get(Ue),this.wpTableTimeline=this.injector.get(M),this.wpTableHierarchies=this.injector.get(Qe),this.wpTablePagination=this.injector.get(Ce),this.wpListService=this.injector.get(Yn),this.wpListChecksumService=this.injector.get(Pn),this.loadingIndicatorService=this.injector.get(Sn),this.$transitions=this.injector.get(h.O),this.I18n=this.injector.get(B.a),this.wpStaticQueries=this.injector.get(Bn),this.QueryDm=this.injector.get(Ae),this.wpStatesInitialization=this.injector.get(Fn)}return e.prototype.ngOnInit=function(){this.setupQueryObservers(),this.setupRefreshObserver()},e.prototype.ngOnDestroy=function(){this.wpTableRefresh.clear("Table controller scope destroyed.")},e.prototype.setupQueryObservers=function(){var e=this;this.querySpace.ready.fireOnStateChange(this.wpTablePagination.state,"Query loaded").values$().pipe(Object(Ln.b)(this),Object($n.a)(this.querySpace.query.values$())).subscribe(function(n){var t=n[0],l=n[1];e.wpListChecksumService.isQueryOutdated(l,t)&&(e.wpListChecksumService.update(l,t),e.refresh(!0,!1))}),this.setupChangeObserver(this.wpTableFilters,!0),this.setupChangeObserver(this.wpTableGroupBy),this.setupChangeObserver(this.wpTableSortBy),this.setupChangeObserver(this.wpTableSum),this.setupChangeObserver(this.wpTableTimeline),this.setupChangeObserver(this.wpTableHierarchies),this.setupChangeObserver(this.wpTableColumns),this.setupChangeObserver(this.wpTableHighlighting)},e.prototype.setupChangeObserver=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.querySpace.query;this.querySpace.ready.fireOnStateChange(e.readonlyState,"Query loaded").values$().pipe(Object(Ln.b)(this),Object(g.a)(function(){return l.hasValue()&&e.hasChanged(l.value)})).subscribe(function(){var i=l.value,o=e.applyToQuery(i);t.querySpace.query.putValue(i),t.wpListChecksumService.updateIfDifferent(i,t.wpTablePagination.current),o&&t.wpTableRefresh.request("Query updated by user",{visible:!0,firstPage:n})})},e.prototype.setupRefreshObserver=function(){var e=this;this.wpTableRefresh.state.values$("Refresh listener in wp-set.component").pipe(Object(Ln.b)(this),Object(g.a)(function(n){return e.filterRefreshRequest(n)}),Object(hn.a)(20)).subscribe(function(n){Object(mn.a)("Refreshing work package results."),e.refresh(n.visible,n.firstPage)})},e.prototype.filterRefreshRequest=function(e){return!0},e}(),Jn=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.uniqueEmbeddedTableName="embedded-table-"+Date.now(),n.initialLoadingIndicator=!0,n.renderTable=!1,n.showTablePagination=!1,n.error=null,n.initialized=!1,n.QueryDm=n.injector.get(Ae),n.querySpace=n.injector.get(y),n.I18n=n.injector.get(B.a),n.urlParamsHelper=n.injector.get(Ee),n.loadingIndicatorService=n.injector.get(Sn),n.wpStatesInitialization=n.injector.get(Fn),n.currentProject=n.injector.get(Vn),n}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.configuration=new qn(this.providedConfiguration),this.configuration.isEmbedded=!0,this.initialized=!0},n.prototype.ngAfterViewInit=function(){this.loadQuery(!0,!1)},n.prototype.ngOnDestroy=function(){e.prototype.ngOnInit.call(this)},n.prototype.ngOnChanges=function(e){this.initialized&&(e.queryId||e.queryProps)&&this.loadQuery(this.initialLoadingIndicator,!1)},Object.defineProperty(n.prototype,"projectIdentifier",{get:function(){return(this.configuration.projectContext?this.currentProject.identifier:this.configuration.projectIdentifier)||void 0},enumerable:!0,configurable:!0}),n.prototype.buildQueryProps=function(){var e=this.querySpace.query.value;return this.wpStatesInitialization.applyToQuery(e),this.urlParamsHelper.buildV3GetQueryFromQueryResource(e)},n.prototype.setLoaded=function(){this.renderTable=this.configuration.tableVisible},n.prototype.refresh=function(e,n){var t=this;void 0===e&&(e=!0),void 0===n&&(n=!1);var l=this.querySpace.query.value,i=this.wpTablePagination.paginationObject;n&&(i.offset=1);var o=this.QueryDm.loadResults(l,i).then(function(e){return t.wpStatesInitialization.updateQuerySpace(l,e)});return e&&(this.loadingIndicator=o),o},Object.defineProperty(n.prototype,"isInitialized",{get:function(){return!!this.configuration},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"loadingIndicator",{set:function(e){this.configuration.tableVisible&&(this.loadingIndicatorService.indicator(this.uniqueEmbeddedTableName).promise=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"queryProjectScope",{get:function(){return this.configuration.projectContext?this.projectIdentifier:void 0},enumerable:!0,configurable:!0}),n}(Zn),Xn=t("yrbL"),et=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.queryProps={},n.tableActions=[],n.externalHeight=!1,n.onError=new l.EventEmitter,n.onQueryLoaded=new l.EventEmitter,n.QueryDm=n.injector.get(Ae),n.opModalService=n.injector.get(Mn.b),n.tableActionsService=n.injector.get(Te),n.wpTableTimeline=n.injector.get(M),n.wpTablePagination=n.injector.get(Ce),n.QueryFormDm=n.injector.get(dn),n}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.loadedQuery=this.querySpace.query.value},n.prototype.ngAfterViewInit=function(){var n,t=this;e.prototype.ngAfterViewInit.call(this),this.tableActions&&(n=this.tableActionsService).setActions.apply(n,this.tableActions),this.querySpace.ready.fireOnStateChange(this.wpTablePagination.state,"Query loaded").values$().pipe(Object(Ln.b)(this),Object(Xn.withLatestFrom)(this.querySpace.query.values$())).subscribe(function(e){e[0];var n=e[1];t.loadingIndicator=t.QueryDm.loadResults(n,t.wpTablePagination.paginationObject).then(function(e){return t.initializeStates(n,e)})})},n.prototype.openConfigurationModal=function(e){var n=this;this.querySpace.query.valuesPromise().then(function(){n.opModalService.show(Nn,n.injector).onDataUpdated.subscribe(e)})},n.prototype.initializeStates=function(e,n){var t=this;this.configuration.withFilters&&this.loadForm(e),this.querySpace.ready.doAndTransition("Query loaded",function(){return t.wpStatesInitialization.clearStates(),t.wpStatesInitialization.initializeFromQuery(e,n),t.wpStatesInitialization.updateQuerySpace(e,n),t.querySpace.tableRendering.onQueryUpdated.valuesPromise().then(function(){t.showTablePagination=n.total>n.count,t.setLoaded(),t.wpTableTimeline.isVisible&&(t.configuration=r.a({},t.configuration,{compactTableStyle:!1}))})})},n.prototype.loadForm=function(e){var n=this;return this.formPromise?this.formPromise:this.formPromise=this.QueryFormDm.load(e).then(function(t){return n.wpStatesInitialization.updateStatesFromForm(e,t),t}).catch(function(){return n.formPromise=void 0})},n.prototype.loadQuery=function(e,n){var t=this;if(void 0===e&&(e=!0),void 0===n&&(n=!1),this.formPromise=void 0,this.loadedQuery){var l=this.loadedQuery;return this.loadedQuery=void 0,this.initializeStates(l,l.results),Promise.resolve(this.loadedQuery)}this.configuration.tableVisible?this.configuration.forcePerPageOption&&(this.queryProps.pageSize=this.configuration.forcePerPageOption):this.queryProps.pageSize=1,n&&(this.queryProps.page=1),this.error=null;var i=this.QueryDm.find(this.queryProps,this.queryId,this.queryProjectScope).then(function(e){return t.initializeStates(e,e.results),t.onQueryLoaded.emit(e),e}).catch(function(e){t.error=t.I18n.t("js.error.embedded_table_loading",{message:_.get(e,"message",e)}),t.onError.emit(e)});return e&&(this.loadingIndicator=i),i},n}(Jn),nt=function(){function e(e,n){this.locals=e,this.cdRef=n}return e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.embeddedTable.openConfigurationModal(function(){e.service.detach(),e.locals.callback(e.embeddedTable.buildQueryProps())}),e.cdRef.detectChanges()})},Object.defineProperty(e.prototype,"service",{get:function(){return this.locals.service},enumerable:!0,configurable:!0}),e}(),tt=new l.InjectionToken("OpQueryConfigurationLocalsToken"),lt=function(){function e(e,n,t,l,i){this.componentFactoryResolver=e,this.FocusHelper=n,this.appRef=t,this.$transitions=l,this.injector=i}return e.prototype.setupListener=function(){var e=this;jQuery(window).on("op:queryconfiguration:trigger",function(n,t,l){return e.show(t,l),!1})},Object.defineProperty(e.prototype,"bodyPortalHost",{get:function(){if(!this._portalHostElement){var e=this._portalHostElement=document.createElement("div");e.classList.add("op-external-query-configuration--container"),document.body.appendChild(e),this._bodyPortalHost=new p.b(e,this.componentFactoryResolver,this.appRef,this.injector)}return this._bodyPortalHost},enumerable:!0,configurable:!0}),e.prototype.show=function(e,n,t){void 0===t&&(t={}),this.detach();var l=new p.a(this.externalQueryConfigurationComponent(),null,this.injectorFor({callback:n,currentQuery:e,disabledTabs:t}));this.bodyPortalHost.attach(l),this._portalHostElement.style.display="block"},e.prototype.detach=function(){this.bodyPortalHost.hasAttached()&&(this.bodyPortalHost.detach(),this._portalHostElement.style.display="none")},e.prototype.injectorFor=function(e){var n=new WeakMap;return e.service=this,n.set(tt,e),new p.c(this.injector,n)},e.prototype.externalQueryConfigurationComponent=function(){return nt},e}(),it=function(){function e(e,n,t,l){this.injector=e,this.I18n=n,this.wpTableFilters=t,this.ConfigurationService=l,this.relationFilterIds=["parent","precedes","follows","relates","duplicates","duplicated","blocks","blocked","partof","includes","requires","required"],this.availableRelationFilters=[],this.selectedRelationFilter=void 0,this.text={please_select:this.I18n.t("js.placeholders.selection"),first_part:this.I18n.t("js.work_packages.table_configuration.relation_filters.first_part"),second_part:this.I18n.t("js.work_packages.table_configuration.relation_filters.second_part"),parent:this.I18n.t("js.types.attribute_groups.filter_types.parent"),precedes:this.I18n.t("js.types.attribute_groups.filter_types.precedes"),follows:this.I18n.t("js.types.attribute_groups.filter_types.follows"),relates:this.I18n.t("js.types.attribute_groups.filter_types.relates"),duplicates:this.I18n.t("js.types.attribute_groups.filter_types.duplicates"),duplicated:this.I18n.t("js.types.attribute_groups.filter_types.duplicated"),blocks:this.I18n.t("js.types.attribute_groups.filter_types.blocks"),blocked:this.I18n.t("js.types.attribute_groups.filter_types.blocked"),requires:this.I18n.t("js.types.attribute_groups.filter_types.requires"),required:this.I18n.t("js.types.attribute_groups.filter_types.required"),partof:this.I18n.t("js.types.attribute_groups.filter_types.partof"),includes:this.I18n.t("js.types.attribute_groups.filter_types.includes")}}return e.prototype.ngOnInit=function(){var e=this;this.wpTableFilters.onReady().then(function(){e.availableRelationFilters=e.relationFiltersOf(e.wpTableFilters.availableFilters),e.setSelectedRelationFilter()})},e.prototype.setSelectedRelationFilter=function(){var e=this.relationFiltersOf(this.wpTableFilters.current);e.length>0?this.selectedRelationFilter=_.find(this.availableRelationFilters,{id:e[0].id}):this.selectedRelationFilter=this.availableRelationFilters[0],this.onRelationFilterSelected()},e.prototype.onRelationFilterSelected=function(){this.selectedRelationFilter&&(this.removeRelationFiltersFromCurrentState(),this.addFilterToCurrentState(this.selectedRelationFilter))},e.prototype.removeRelationFiltersFromCurrentState=function(){var e,n=this.relationFiltersOf(this.wpTableFilters.current);(e=this.wpTableFilters).remove.apply(e,n)},e.prototype.relationFiltersOf=function(e){var n=this;return _.filter(e,function(e){return _.includes(n.relationFilterIds,e.id)})},e.prototype.addFilterToCurrentState=function(e){var n=this.wpTableFilters.instantiate(e),t=this.getOperatorForId(n,"=");n.operator=t,n.values=[{href:"/api/v3/work_packages/{id}"}],this.wpTableFilters.add(n)},e.prototype.getOperatorForId=function(e,n){return _.find(e.schema.availableOperators,{id:n})},e.prototype.compareRelationFilters=function(e,n){return e&&n?e.id===n.id:e===n},e}(),ot=it,rt=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(nt),ut=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.externalQueryConfigurationComponent=function(){return rt},n}(lt),at=function(){function e(){this.hooks={}}return e.prototype.register=function(e,n){n&&(this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(n))},e.prototype.call=function(e){for(var n,t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];var i=[];if(this.hooks[e])for(var o=0;o<this.hooks[e].length;o++){var r=(n=this.hooks[e])[o].apply(n,t);r&&i.push(r)}return i},e}(),st=t("tG68"),ct=function(e){function n(n,t,l,i,o,r){var u=e.call(this,t,o,n)||this;return u.elementRef=n,u.locals=t,u.currentProject=l,u.workPackageDmService=i,u.cdRef=o,u.I18n=r,u.changed=!1,u.showClose=!0,u.closeOnEscape=!0,u.closeOnOutsideClick=!0,u.type="",u.classes="",u.text={title:u.I18n.t("js.editor.macro.work_package_button.button"),none:u.I18n.t("js.label_none"),selected_type:u.I18n.t("js.editor.macro.work_package_button.type"),button_style:u.I18n.t("js.editor.macro.work_package_button.button_style"),button_style_hint:u.I18n.t("js.editor.macro.work_package_button.button_style_hint"),button_save:u.I18n.t("js.button_save"),button_cancel:u.I18n.t("js.button_cancel"),close_popup:u.I18n.t("js.close_popup_title")},u.selectedType=u.type=u.locals.type,u.classes=u.locals.classes,u.buttonStyle="button"===u.classes,u.workPackageDmService.emptyCreateForm({},u.currentProject.identifier).then(function(e){u.availableTypes=e.schema.type.allowedValues}),u}return r.d(n,e),n.prototype.applyAndClose=function(e){this.changed=!0,this.classes=this.buttonStyle?"button":"",this.type=this.selectedType,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){this.typeSelect.nativeElement.focus()},n}(Le.a),dt=function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;return o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o.changed=!1,o.showClose=!0,o.closeOnEscape=!0,o.closeOnOutsideClick=!0,o.page="",o.text={title:o.I18n.t("js.editor.macro.wiki_page_include.button"),hint:o.I18n.t("js.editor.macro.wiki_page_include.hint"),page:o.I18n.t("js.editor.macro.wiki_page_include.page"),button_save:o.I18n.t("js.button_save"),button_cancel:o.I18n.t("js.button_cancel"),close_popup:o.I18n.t("js.close_popup_title")},o.selectedPage=o.page=o.locals.page,o}return r.d(n,e),n.prototype.applyAndClose=function(e){this.changed=!0,this.page=this.selectedPage,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){this.selectedPageInput.nativeElement.focus()},n}(Le.a),pt=function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o.changed=!1,o.showClose=!0,o.closeOnEscape=!0,o.closeOnOutsideClick=!0,o._language="",o.debouncedLanguageLoader=_.debounce(function(){return o.loadLanguageAsMode(o.language)},300),o.text={title:o.I18n.t("js.editor.macro.code_block.title"),language:o.I18n.t("js.editor.macro.code_block.language"),language_hint:o.I18n.t("js.editor.macro.code_block.language_hint"),button_save:o.I18n.t("js.button_save"),button_cancel:o.I18n.t("js.button_cancel"),close_popup:o.I18n.t("js.close_popup_title")},o.languageClass=t.languageClass||"language-text",o.content=t.content;var r=o.languageClass.match(/language-(\w+)/);return o.language=r?r[1]:"text",o}return r.d(n,e),n.prototype.applyAndClose=function(e){this.content=this.codeMirrorInstance.getValue();var n=this.language||"text";this.languageClass="language-"+n,this.changed=!0,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){var e=this;Promise.all([t.e(1),t.e(0)]).then(t.t.bind(null,"VrN/",7)).then(function(n){var t=n.default;e.codeMirrorInstance=t.fromTextArea(e.codeMirrorPane.nativeElement,{lineNumbers:!0,smartIndent:!0,autofocus:!0,value:e.content,mode:""})})},Object.defineProperty(n.prototype,"language",{get:function(){return this._language},set:function(e){this._language=e,this.debouncedLanguageLoader()},enumerable:!0,configurable:!0}),n.prototype.loadLanguageAsMode=function(e){var n=this;if(!e||"text"===e)return this.updateCodeMirrorMode("");t("ZXPj")("./"+e+"/"+e).then(function(){n.updateCodeMirrorMode(e)}).catch(function(t){console.error("Failed to load language "+e+": "+t),n.updateCodeMirrorMode("")})},n.prototype.updateCodeMirrorMode=function(e){var n=this.codeMirrorInstance;n&&n.setOption("mode",e)},n.prototype.updateLanguage=function(e){e?e.match(/^\w+$/)?this.language=e:console.error("Not updating non-matching language: "+e):this.language=""},n}(Le.a),ht=function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;return o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o.changed=!1,o.showClose=!0,o.closeOnEscape=!0,o.closeOnOutsideClick=!0,o.page="",o.includeParent=!1,o.text={title:o.I18n.t("js.editor.macro.child_pages.button"),hint:o.I18n.t("js.editor.macro.child_pages.hint"),page:o.I18n.t("js.editor.macro.child_pages.page"),include_parent:o.I18n.t("js.editor.macro.child_pages.include_parent"),button_save:o.I18n.t("js.button_save"),button_cancel:o.I18n.t("js.button_cancel"),close_popup:o.I18n.t("js.close_popup_title")},o.selectedPage=o.page=o.locals.page,o.selectedIncludeParent=o.includeParent=o.locals.includeParent,o}return r.d(n,e),n.prototype.applyAndClose=function(e){this.changed=!0,this.page=this.selectedPage,this.includeParent=this.selectedIncludeParent,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){this.selectedPageInput.nativeElement.focus()},n.prototype.updateIncludeParent=function(e){this.selectedIncludeParent=e},n}(Le.a),ft=function(){function e(e,n){this.opModalService=e,this.injector=n}return e.prototype.configureWorkPackageButton=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(ct,t.injector,{type:e,classes:n}).closingEvent.subscribe(function(e){e.changed&&l({type:e.type,classes:e.classes})})})},e.prototype.configureWikiPageInclude=function(e){var n=this;return new Promise(function(t,l){var i=e||"";n.opModalService.show(dt,n.injector,{page:i}).closingEvent.subscribe(function(e){e.changed&&t(e.page)})})},e.prototype.editCodeBlock=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(pt,t.injector,{content:e,languageClass:n}).closingEvent.subscribe(function(e){e.changed&&l({languageClass:e.languageClass,content:e.content})})})},e.prototype.configureChildPages=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(ht,t.injector,{page:e,includeParent:n}).closingEvent.subscribe(function(e){e.changed&&l({page:e.page,includeParent:e.includeParent})})})},e}(),gt=t("E+lO"),mt=t("26FU"),vt=function(){function e(){this.navigationEvents$=new mt.a("")}return e.prototype.onActivate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.navigationEvents$.pipe(Object(g.a)(function(n){return-1!==e.indexOf(n)}),Object(F.a)(1))},e.prototype.recreateToggler=function(){var e=this;jQuery("#main-menu .toggler").remove();var n=jQuery('<a class="toggler" href="#"><i class="icon6 icon-toggler icon-arrow-right3" aria-hidden="true"></i><span class="hidden-for-sighted"></span></a>').on("click",function(){var n=jQuery(this);if(n.hasClass("toggler")){jQuery("#sidebar").toggleClass("-hidden",!0),jQuery(".menu_root li").removeClass("open"),jQuery(".menu_root").removeClass("open").addClass("closed");var t=n.closest("li");t.addClass("open").find("li > a:first, .tree-menu--title:first").first().focus(),console.log("Activating "+t.data("name")),e.navigationEvents$.next(t.data("name"))}return!1});return n.attr("title",I18n.t("js.project_menu_details")),n},e.prototype.wrapMainItem=function(){var e=jQuery("#main-menu li > a").not("ul ul a");e.wrap(function(n){var t=e[n].id,l=jQuery('<div class="main-item-wrapper"/>');return t&&l.attr("id",t+"-wrapper"),l})},e.prototype.register=function(){this.wrapMainItem();var e=this.recreateToggler(),n=jQuery("#main-menu .menu_root > li.open").data("name"),t=jQuery("#main-menu .menu_root.open > li").data("name");function l(e){e.preventDefault();var n=jQuery(this);jQuery(n).parents("li").first().removeClass("open"),jQuery(".menu_root").removeClass("closed").addClass("open"),n.parents("li").first().find(".toggler").first().focus(),jQuery("#sidebar").toggleClass("-hidden",!1)}(n||t)&&this.navigationEvents$.next(n||t),jQuery("#main-menu li:has(ul) .main-item-wrapper > a").not("ul ul a").unbind("click").wrapInner('<span class="ellipsis"/>').after(e),jQuery("#main-menu ul.main-menu--children").each(function(e,n){var t=jQuery(n).parents("li").find(".main-item-wrapper .menu-item--title").contents()[0].textContent,i=jQuery(n).parents("li").find(".main-item-wrapper > a").attr("href"),o=jQuery('<div class="main-menu--children-menu-header"></div>'),r=jQuery('<a class="main-menu--arrow-left-to-project" href="#"><i class="icon-arrow-left1" aria-hidden="true"></i></a>'),u=jQuery('<a href="'+i+'" class="main-menu--parent-node ellipsis">'+t+"</a>");r.attr("title",I18n.t("js.label_up")),r.on("click",l),o.append(r),o.append(u),jQuery(n).before(o)}),jQuery(".menu_root").hasClass("closed")&&jQuery("#sidebar").toggleClass("-hidden",!0)},e}(),bt=new s,yt=function(){function e(){}return e.prototype.ngDoBootstrap=function(e){gt.DynamicBootstrapper.bootstrapOptionalDocument(e,document),e._injector.get(at).call("openProjectAngularBootstrap").forEach(function(n){gt.DynamicBootstrapper.bootstrapOptionalDocument(e,document,n)})},e}();function wt(e){return function(){var n=e.get(lt),t=e.get(ut),l=e.get(st.ModalWrapperAugmentService);e.get(ft);e.get(vt).register(),l.setupListener(),n.setupListener(),t.setupListener()}}var kt=t("VDQ+"),Ct=t("rL7S"),It=t("Ip0R"),Pt=t("gIcY"),jt=t("J9Dr"),_t=function(){function e(e,n,t){this.I18n=e,this.currentProject=n,this.pathHelper=t,this.required=!1,this.disabled=!1,this.finishedLoading=!1,this.id="",this.classes="",this.create=new l.EventEmitter,this.onChange=new l.EventEmitter,this.onKeydown=new l.EventEmitter,this.onOpen=new l.EventEmitter,this.onClose=new l.EventEmitter,this.onAfterViewInit=new l.EventEmitter,this.text={add_new_action:this.I18n.t("js.label_create")},this._createAllowed=!1,this._openDirectly=!1}return Object.defineProperty(e.prototype,"createAllowed",{get:function(){return this._createAllowed},set:function(e){var n=this;this._createAllowed=e,setTimeout(function(){n.openDirectly&&n.openSelect(),n.ngAfterViewInit()})},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.onAfterViewInit.emit(this)},e.prototype.openSelect=function(){if(this.createAllowed&&this.addAutoCompleter)this.addAutoCompleter.open();else{if(!this.autoCompleter)return;this.autoCompleter.open()}this.openDirectly=!1},e.prototype.closeSelect=function(){return this.createAllowed&&this.addAutoCompleter?this.addAutoCompleter.close():this.autoCompleter?this.autoCompleter.close():void 0},e.prototype.createNewElement=function(e){this.create.emit(e)},e.prototype.changeModel=function(e){this.onChange.emit(e)},e.prototype.opened=function(){this.onOpen.emit()},e.prototype.closed=function(){this.openDirectly=!1,this.onClose.emit()},e.prototype.keyPressed=function(e){this.onKeydown.emit(e)},Object.defineProperty(e.prototype,"openDirectly",{get:function(){return this._openDirectly},set:function(e){this._openDirectly=e,e&&this.openSelect()},enumerable:!0,configurable:!0}),e.prototype.focusInputField=function(){return this.createAllowed&&this.addAutoCompleter?this.addAutoCompleter.focus():this.autoCompleter?this.autoCompleter.focus():void 0},e}();gt.DynamicBootstrapper.register({selector:"add-attribute-autocompleter",cls:_t});var Rt=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function St(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"b",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](1,null,[": "," "]))],null,function(e,n){e(n,0,0,n.component.text.add_new_action),e(n,1,0,n.context.searchTerm)})}function xt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,21,"ng-select",[["bindLabel","name"],["class","ng-select"],["role","listbox"]],[[8,"id",0],[1,"required",0],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"open"],[null,"close"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,4).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(o.model=t)&&i);"change"===n&&(i=!1!==o.changeModel(t)&&i);"open"===n&&(i=!1!==o.opened()&&i);"close"===n&&(i=!1!==o.closed()&&i);"keydown"===n&&(i=!1!==o.keyPressed(t)&&i);return i},Ct.b,Ct.a)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](2,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275did"](4,4964352,[[1,4],["addActionAttributeSelect",4]],11,jt.a,[[8,null],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],bindLabel:[1,"bindLabel"],clearable:[2,"clearable"],appendTo:[3,"appendTo"],virtualScroll:[4,"virtualScroll"],addTag:[5,"addTag"]},{changeEvent:"change",openEvent:"open",closeEvent:"close"}),l["\u0275qud"](335544320,3,{optionTemplate:0}),l["\u0275qud"](335544320,4,{optgroupTemplate:0}),l["\u0275qud"](335544320,5,{labelTemplate:0}),l["\u0275qud"](335544320,6,{multiLabelTemplate:0}),l["\u0275qud"](335544320,7,{headerTemplate:0}),l["\u0275qud"](335544320,8,{footerTemplate:0}),l["\u0275qud"](335544320,9,{notFoundTemplate:0}),l["\u0275qud"](335544320,10,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,11,{loadingTextTemplate:0}),l["\u0275qud"](335544320,12,{tagTemplate:0}),l["\u0275qud"](603979776,13,{ngOptions:1}),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](17,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](19,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275and"](0,[[12,2]],null,1,null,St)),l["\u0275did"](21,16384,null,0,jt.h,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,1,0,t.classes),e(n,2,0,t.required);e(n,4,0,t.availableValues,"name",!t.required,t.appendTo,!0,t.createNewElement.bind(t)),e(n,17,0,t.disabled,t.model)},function(e,n){e(n,0,1,[n.component.id,l["\u0275nov"](n,2).required?"":null,!l["\u0275nov"](n,4).multiple,l["\u0275nov"](n,4).typeahead,l["\u0275nov"](n,4).multiple,l["\u0275nov"](n,4).addTag,l["\u0275nov"](n,4).searchable,l["\u0275nov"](n,4).isOpen,l["\u0275nov"](n,4).disabled,l["\u0275nov"](n,4).filtered,l["\u0275nov"](n,19).ngClassUntouched,l["\u0275nov"](n,19).ngClassTouched,l["\u0275nov"](n,19).ngClassPristine,l["\u0275nov"](n,19).ngClassDirty,l["\u0275nov"](n,19).ngClassValid,l["\u0275nov"](n,19).ngClassInvalid,l["\u0275nov"](n,19).ngClassPending])})}function Tt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,19,"ng-select",[["bindLabel","name"],["class","ng-select"],["role","listbox"]],[[8,"id",0],[1,"required",0],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"open"],[null,"close"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,4).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(o.model=t)&&i);"change"===n&&(i=!1!==o.changeModel(t)&&i);"open"===n&&(i=!1!==o.opened()&&i);"close"===n&&(i=!1!==o.closed()&&i);"keydown"===n&&(i=!1!==o.keyPressed(t)&&i);return i},Ct.b,Ct.a)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](2,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275did"](4,4964352,[[2,4],["actionAttributeSelect",4]],11,jt.a,[[8,null],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],bindLabel:[1,"bindLabel"],clearable:[2,"clearable"],appendTo:[3,"appendTo"],virtualScroll:[4,"virtualScroll"]},{changeEvent:"change",openEvent:"open",closeEvent:"close"}),l["\u0275qud"](335544320,14,{optionTemplate:0}),l["\u0275qud"](335544320,15,{optgroupTemplate:0}),l["\u0275qud"](335544320,16,{labelTemplate:0}),l["\u0275qud"](335544320,17,{multiLabelTemplate:0}),l["\u0275qud"](335544320,18,{headerTemplate:0}),l["\u0275qud"](335544320,19,{footerTemplate:0}),l["\u0275qud"](335544320,20,{notFoundTemplate:0}),l["\u0275qud"](335544320,21,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,22,{loadingTextTemplate:0}),l["\u0275qud"](335544320,23,{tagTemplate:0}),l["\u0275qud"](603979776,24,{ngOptions:1}),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](17,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](19,16384,null,0,Pt.i,[[4,Pt.h]],null,null)],function(e,n){var t=n.component;e(n,1,0,t.classes),e(n,2,0,t.required);e(n,4,0,t.availableValues,"name",!t.required,t.appendTo,!0),e(n,17,0,t.disabled,t.model)},function(e,n){e(n,0,1,[n.component.id,l["\u0275nov"](n,2).required?"":null,!l["\u0275nov"](n,4).multiple,l["\u0275nov"](n,4).typeahead,l["\u0275nov"](n,4).multiple,l["\u0275nov"](n,4).addTag,l["\u0275nov"](n,4).searchable,l["\u0275nov"](n,4).isOpen,l["\u0275nov"](n,4).disabled,l["\u0275nov"](n,4).filtered,l["\u0275nov"](n,19).ngClassUntouched,l["\u0275nov"](n,19).ngClassTouched,l["\u0275nov"](n,19).ngClassPristine,l["\u0275nov"](n,19).ngClassDirty,l["\u0275nov"](n,19).ngClassValid,l["\u0275nov"](n,19).ngClassInvalid,l["\u0275nov"](n,19).ngClassPending])})}function Ot(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{addAutoCompleter:0}),l["\u0275qud"](671088640,2,{autoCompleter:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,xt)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Tt)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.createAllowed&&t.finishedLoading),e(n,5,0,!t.createAllowed&&t.finishedLoading)},null)}var Et=l["\u0275ccf"]("create-autocompleter",_t,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"create-autocompleter",[],null,null,null,Ot,Rt)),l["\u0275did"](1,4243456,null,0,_t,[B.a,Vn,ve],null,null)],null,null)},{availableValues:"availableValues",appendTo:"appendTo",model:"model",required:"required",disabled:"disabled",finishedLoading:"finishedLoading",id:"id",classes:"classes",createAllowed:"createAllowed"},{create:"create",onChange:"onChange",onKeydown:"onKeydown",onOpen:"onOpen",onClose:"onClose",onAfterViewInit:"onAfterViewInit"},[]),Dt=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.createVersion=function(e){return this.halResourceService.post(this.pathHelper.api.v3.versions.path,e).toPromise()},e.prototype.emptyCreateForm=function(e){return this.halResourceService.post(this.pathHelper.api.v3.versions.form.toString(),e).toPromise()},e.prototype.one=function(e){return this.halResourceService.get(this.pathHelper.api.v3.versions.id(e).toString()).toPromise()},e.prototype.list=function(){return this.halResourceService.get(this.pathHelper.api.v3.versions.toString()).toPromise()},e.prototype.listForProject=function(e){return this.halResourceService.get(this.pathHelper.api.v3.projects.id(e).versions.toString()).toPromise()},e.prototype.listProjectsAvailableForVersions=function(){return this.halResourceService.get(this.pathHelper.api.v3.versions.availableProjects.toString()).toPromise()},e.prototype.patch=function(e,n){return this.halResourceService.patch(this.pathHelper.api.v3.versions.id(e.id).toString(),n).toPromise()},e}(),Ft=function(e){function n(n,t,i,o,r){var u=e.call(this,n,t,i)||this;return u.I18n=n,u.currentProject=t,u.pathHelper=i,u.versionDm=o,u.wpNotifications=r,u.onCreate=new l.EventEmitter,u.createAllowed=!1,u.loaded=!1,u}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.canCreateNewActionElements().then(function(n){e.loaded=!0,e.createAutocompleter.createAllowed=n})},n.prototype.ngAfterViewInit=function(){},n.prototype.afterViewinited=function(){this.onAfterViewInit.emit(this.createAutocompleter)},n.prototype.canCreateNewActionElements=function(){var e=this;return this.versionDm.listProjectsAvailableForVersions().then(function(n){return n.elements.some(function(n){return n.id===e.currentProject.id})}).catch(function(){return!1})},n.prototype.createNewVersion=function(e){var n=this;this.versionDm.createVersion(this.getVersionPayload(e)).then(function(e){n.onCreate.emit(e)}).catch(function(e){n.createAutocompleter.closeSelect(),n.wpNotifications.handleRawError(e)})},n.prototype.getVersionPayload=function(e){var n={};return n.name=e,n._links={definingProject:{href:this.pathHelper.api.v3.projects.id(this.currentProject.id).path}},n},n}(_t);gt.DynamicBootstrapper.register({selector:"version-autocompleter",cls:Ft});var At=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Nt(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{addAutoCompleter:0}),l["\u0275qud"](402653184,2,{autoCompleter:0}),l["\u0275qud"](402653184,3,{createAutocompleter:0}),(e()(),l["\u0275eld"](3,0,null,null,1,"create-autocompleter",[],null,[[null,"create"],[null,"onChange"],[null,"onOpen"],[null,"onClose"],[null,"onKeydown"],[null,"onAfterViewInit"]],function(e,n,t){var l=!0,i=e.component;"create"===n&&(l=!1!==i.createNewVersion(t)&&l);"onChange"===n&&(l=!1!==i.changeModel(t)&&l);"onOpen"===n&&(l=!1!==i.opened()&&l);"onClose"===n&&(l=!1!==i.closed()&&l);"onKeydown"===n&&(l=!1!==i.keyPressed(t)&&l);"onAfterViewInit"===n&&(l=!1!==i.afterViewinited()&&l);return l},Ot,Rt)),l["\u0275did"](4,4243456,[[3,4],["createAutocompleter",4]],0,_t,[B.a,Vn,ve],{availableValues:[0,"availableValues"],appendTo:[1,"appendTo"],model:[2,"model"],required:[3,"required"],disabled:[4,"disabled"],finishedLoading:[5,"finishedLoading"],id:[6,"id"],classes:[7,"classes"],createAllowed:[8,"createAllowed"]},{create:"create",onChange:"onChange",onKeydown:"onKeydown",onOpen:"onOpen",onClose:"onClose",onAfterViewInit:"onAfterViewInit"})],function(e,n){var t=n.component;e(n,4,0,t.availableValues,t.appendTo,t.model,t.required,t.disabled,t.loaded,t.id,t.classes,t.createAllowed)},null)}var Mt=l["\u0275ccf"]("version-autocompleter",Ft,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"version-autocompleter",[],null,null,null,Nt,At)),l["\u0275did"](1,4308992,null,0,Ft,[B.a,Vn,ve,Dt,On],null,null)],function(e,n){e(n,1,0)},null)},{availableValues:"availableValues",appendTo:"appendTo",model:"model",required:"required",disabled:"disabled",finishedLoading:"finishedLoading",id:"id",classes:"classes",createAllowed:"createAllowed"},{create:"create",onChange:"onChange",onKeydown:"onKeydown",onOpen:"onOpen",onClose:"onClose",onAfterViewInit:"onAfterViewInit",onCreate:"onCreate"},[]),Vt=t("f0Wu"),qt=function(){function e(e,n){this.ConfigurationService=e,this.I18n=n,this.setupLocale()}return e.prototype.setupLocale=function(){Vt.locale(I18n.locale)},e.prototype.parseDatetime=function(e,n){var t=Vt.utc(e,n);return this.ConfigurationService.isTimezoneSet()&&(t.local(),t.tz(this.ConfigurationService.timezone())),t},e.prototype.parseDate=function(e,n){return Vt(e,n)},e.prototype.parseLocalDateTime=function(e,n){var t;return n=n||this.getTimeFormat(),(t=this.ConfigurationService.isTimezoneSet()?Vt.tz(e,n,this.ConfigurationService.timezone()):Vt(e,n)).utc(),t},e.prototype.parseISODatetime=function(e){return this.parseDatetime(e,"YYYY-MM-DDTHH:mm:ssZ")},e.prototype.parseISODate=function(e){return this.parseDate(e,"YYYY-MM-DD")},e.prototype.formattedDate=function(e){return this.parseDate(e).format(this.getDateFormat())},e.prototype.inThePast=function(e){return this.daysFromToday(e)<=-1},e.prototype.daysFromToday=function(e){var n=this.parseDate(e),t=Vt().startOf("day");return n.diff(t,"days")},e.prototype.formattedTime=function(e){return this.parseDatetime(e).format(this.getTimeFormat())},e.prototype.formattedDatetime=function(e){var n=this.formattedDatetimeComponents(e);return n[0]+" "+n[1]},e.prototype.formattedDatetimeComponents=function(e){var n=this.parseDatetime(e);return[n.format(this.getDateFormat()),n.format(this.getTimeFormat())]},e.prototype.toHours=function(e){return Number(Vt.duration(e).asHours().toFixed(2))},e.prototype.formattedDuration=function(e){return this.I18n.t("js.units.hour",{count:this.toHours(e)})},e.prototype.formattedISODate=function(e){return this.parseDate(e).format("YYYY-MM-DD")},e.prototype.formattedISODateTime=function(e){return e.format()},e.prototype.isValidISODate=function(e){return this.isValid(e,"YYYY-MM-DD")},e.prototype.isValidISODateTime=function(e){return this.isValid(e,"YYYY-MM-DDTHH:mm:ssZ")},e.prototype.isValid=function(e,n){var t=n||this.getDateFormat();return Vt(e,[t],!0).isValid()},e.prototype.getDateFormat=function(){return this.ConfigurationService.dateFormatPresent()?this.ConfigurationService.dateFormat():"L"},e.prototype.getTimeFormat=function(){return this.ConfigurationService.timeFormatPresent()?this.ConfigurationService.timeFormat():"LT"},e}(),Lt=function(){function e(e){this.timezoneService=e}return e.prototype.ngOnInit=function(){var e=this.timezoneService.formattedDatetimeComponents(this.dateTimeValue);this.date=e[0],this.time=e[1]},e}(),$t=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ht(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"span",[],[[8,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\xa0"])),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](2,"",t.date," ",t.time,"")),e(n,1,0,t.date),e(n,4,0,t.time)})}var Bt=l["\u0275ccf"]("op-date-time",Lt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-date-time",[],null,null,null,Ht,$t)),l["\u0275did"](1,114688,null,0,Lt,[qt],null,null)],function(e,n){e(n,1,0)},null)},{dateTimeValue:"dateTimeValue"},{},[]),zt=function(){function e(e,n,t,l){this.NotificationsService=e,this.elementRef=n,this.I18n=t,this.ConfigurationService=l}return e.prototype.ngOnInit=function(){var e=this,n=this.elementRef.nativeElement;this.clickTarget=n.getAttribute("click-target"),this.clipboardTarget=n.getAttribute("clipboard-target"),jQuery(this.clickTarget).on("click",function(n){return e.onClick(n)}),n.classList.add("copy-to-clipboard"),this.target=jQuery(this.clipboardTarget?this.clipboardTarget:n)},e.prototype.addNotification=function(e,n){var t=this,l=this.NotificationsService[e](n);setTimeout(function(){return t.NotificationsService.remove(l)},5e3)},e.prototype.onClick=function(e){var n=document.queryCommandSupported&&document.queryCommandSupported("copy");if(e.preventDefault(),this.target.select().focus(),n)try{if(document.execCommand("copy"))return void this.addNotification("addSuccess",this.I18n.t("js.clipboard.copied_successful"))}catch(t){console.log("Your browser seems to support the clipboard API, but copying failed: "+t)}this.addNotification("addError",this.I18n.t("js.clipboard.browser_error"))},e}();gt.DynamicBootstrapper.register({selector:"copy-to-clipboard",cls:zt});var Wt=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Qt(e){return l["\u0275vid"](0,[],null,null)}var Ut=l["\u0275ccf"]("copy-to-clipboard",zt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"copy-to-clipboard",[],null,null,null,Qt,Wt)),l["\u0275did"](1,114688,null,0,zt,[Tn,l.ElementRef,B.a,Ne],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Kt=function(){return function(){this.iconTitle=""}}(),Gt=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Yt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","hidden-for-sighted"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.iconTitle)})}function Zt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"i",[["aria-hidden","true"]],[[8,"title",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Yt)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.iconClasses),e(n,3,0,t.iconTitle)},function(e,n){e(n,0,0,n.component.iconTitle)})}l["\u0275ccf"]("op-icon",Kt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],null,null)],null,null)},{iconClasses:"icon-classes",iconTitle:"icon-title"},{},[]);var Jt=function(){function e(e){this.I18n=e,this.onError=new l.EventEmitter,this.onSuccess=new l.EventEmitter,this.value=0,this.error=!1,this.completed=!1}return e.prototype.ngOnInit=function(){var e=this;this.file=this.upload[0],this.upload[1].pipe(Object(Ln.b)(this)).subscribe(function(n){switch(n.type){case L.g.Sent:return e.value=5,Object(mn.a)('Uploading file "'+e.file.name+'" of size '+e.file.size+".");case L.g.UploadProgress:return e.updateProgress(n);case L.g.Response:return Object(mn.a)("File "+e.fileName+" was fully uploaded."),e.value=100,e.completed=!0,e.onSuccess.emit();default:return}},function(n){return e.handleError(n)})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"fileName",{get:function(){return this.file&&this.file.name},enumerable:!0,configurable:!0}),e.prototype.updateProgress=function(e){e.total?this.value=Math.round(e.loaded/e.total*100):this.value=10},e.prototype.handleError=function(e){this.error=!0,this.onError.emit(e)},e}(),Xt=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function el(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,"icon-close")},null)}function nl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,"icon-checkmark")},null)}function tl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"span",[["class","upload-completed"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,el)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,nl)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.error),e(n,4,0,t.completed)},null)}function ll(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[["class","filename"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"progress",[["max","100"]],[[8,"hidden",0],[8,"value",0]],null,null,null,null)),(e()(),l["\u0275ted"](3,null,["","%"])),(e()(),l["\u0275and"](16777216,null,null,1,null,tl)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.completed||t.error)},function(e,n){var t=n.component;e(n,1,0,t.fileName),e(n,2,0,t.completed,t.value),e(n,3,0,t.value)})}l["\u0275ccf"]("notifications-upload-progress",Jt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notifications-upload-progress",[],null,null,null,ll,Xt)),l["\u0275did"](1,245760,null,0,Jt,[B.a],null,null)],function(e,n){e(n,1,0)},null)},{upload:"upload"},{onError:"onError",onSuccess:"onSuccess"},[]);var il=t("E5Dd"),ol=function(){function e(){this.stopEventPropagation=!0,this.onClick=new l.EventEmitter}return e.prototype.handleClick=function(e){"click"!==e.type&&e.which!==il.a.ENTER&&e.which!==il.a.SPACE||(this.stopEventPropagation&&(e.preventDefault(),e.stopPropagation()),this.onClick.emit(e))},e}(),rl=function(){function e(){this.execute=new l.EventEmitter}return e.prototype.handleClick=function(e){return this.isDisabled||this.execute.emit(e),!1},e}(),ul=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function al(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"a",[["href",""],["role","link"]],[[1,"disabled",0],[1,"title",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleClick(t)&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](2,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](3,0,null,null,2,"span",[],null,null,null,null,null)),l["\u0275did"](4,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275ncd"](null,0)],function(e,n){var t=n.component;e(n,1,0,t.linkClass),e(n,4,0,t.spanClass)},function(e,n){var t=n.component;e(n,0,0,t.isDisabled||void 0,t.linkTitle,t.linkAriaLabel)})}l["\u0275ccf"]("accessible-by-keyboard",rl,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"accessible-by-keyboard",[],null,null,null,al,ul)),l["\u0275did"](1,49152,null,0,rl,[],null,null)],null,null)},{isDisabled:"isDisabled",linkClass:"linkClass",linkTitle:"linkTitle",spanClass:"spanClass",linkAriaLabel:"linkAriaLabel"},{execute:"execute"},["*"]);var sl=function(){function e(e,n){this.I18n=e,this.notificationsService=n,this.text={close_popup:this.I18n.t("js.close_popup_title")},this.uploadCount=0,this.show=!1}return e.prototype.ngOnInit=function(){this.type=this.notification.type},Object.defineProperty(e.prototype,"data",{get:function(){return this.notification.data},enumerable:!0,configurable:!0}),e.prototype.canBeHidden=function(){return this.data&&this.data.length>5},e.prototype.removable=function(){return"upload"!==this.notification.type},e.prototype.remove=function(){this.notificationsService.remove(this.notification)},e.prototype.executeTarget=function(){this.notification.link&&(this.notification.link.target(),this.remove())},e.prototype.onUploadError=function(e){this.remove()},e.prototype.onUploadSuccess=function(){this.uploadCount+=1},Object.defineProperty(e.prototype,"uploadText",{get:function(){return this.I18n.t("js.label_upload_counter",{done:this.uploadCount,count:this.data.length})},enumerable:!0,configurable:!0}),e}(),cl=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function dl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"a",[["class","notification-box--target-link"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.executeTarget(t)&&l);return l},null,null))],null,function(e,n){e(n,0,0,n.component.notification.link.text)})}function pl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"a",[],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!=(i.show=!0)&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-arrow-right2"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"a",[],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!=(i.show=!1)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-arrow-down1"]],null,null,null,Zt,Gt)),l["\u0275did"](6,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"icon-arrow-right2");e(n,6,0,"icon-arrow-down1")},function(e,n){var t=n.component;e(n,1,0,t.show),e(n,4,0,!t.show),e(n,7,0,t.uploadText)})}function hl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notifications-upload-progress",[],null,[[null,"onSuccess"],[null,"onError"]],function(e,n,t){var l=!0,i=e.component;"onSuccess"===n&&(l=!1!==i.onUploadSuccess()&&l);"onError"===n&&(l=!1!==i.onUploadError(t)&&l);return l},ll,Xt)),l["\u0275did"](1,245760,null,0,Jt,[B.a],{upload:[0,"upload"]},{onError:"onError",onSuccess:"onSuccess"})],function(e,n){e(n,1,0,n.context.$implicit)},null)}function fl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","notification-box--uploads"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,hl)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.data)},null)}function gl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,fl)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.data&&t.data.length>0)},null)}function ml(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,pl)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,gl)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.canBeHidden()),e(n,4,0,t.show||!t.canBeHidden())},null)}function vl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function bl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"li",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.context.$implicit)})}function yl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"ul",[["class","notification-box--errors"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,bl)),l["\u0275did"](3,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.data)},null)}function wl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"accessible-by-keyboard",[["linkClass","notification-box--close icon-context icon-close"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.remove()&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"]},{execute:"execute"})],function(e,n){e(n,1,0,"notification-box--close icon-context icon-close",n.component.text.close_popup)},null)}function kl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,16,"div",[["tabindex","0"]],[[8,"className",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,13,"div",[["aria-atomic","true"],["class","notification-box--content"],["role","alert"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,dl)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,7,"div",[],null,null,null,null,null)),l["\u0275did"](8,16384,null,0,It.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ml)),l["\u0275did"](10,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,vl)),l["\u0275did"](12,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,yl)),l["\u0275did"](14,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,wl)),l["\u0275did"](16,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,6,0,t.notification.link),e(n,8,0,t.type);e(n,10,0,"upload");e(n,12,0,"success");e(n,14,0,"error"),e(n,16,0,t.removable())},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"notification-box -",t.type,"")),e(n,3,0,t.notification.message);e(n,4,0," ")})}l["\u0275ccf"]("notification",sl,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notification",[],null,null,null,kl,cl)),l["\u0275did"](1,114688,null,0,sl,[B.a,Tn],null,null)],function(e,n){e(n,1,0)},null)},{notification:"notification"},{},[]);var Cl=function(){function e(e){var n=this;this.notificationsService=e,this.stack=[],e.current.values$("Subscribing to changes in the notification stack").pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(e){return n.stack=e})}return e.prototype.ngOnDestroy=function(){},e}();gt.DynamicBootstrapper.register({selector:"notifications-container",cls:Cl});var Il=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Pl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notification",[],null,null,null,kl,cl)),l["\u0275did"](1,114688,null,0,sl,[B.a,Tn],{notification:[0,"notification"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function jl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","notification-box--wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","notification-box--casing"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Pl)),l["\u0275did"](3,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.stack)},null)}var _l=l["\u0275ccf"]("notifications-container",Cl,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notifications-container",[],null,null,null,jl,Il)),l["\u0275did"](1,180224,null,0,Cl,[Tn],null,null)],null,null)},{},{},[]),Rl=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.thead=this.$element.parent("colgroup").siblings("thead"),this.thead.on("mouseenter","th",function(n){e.$element.index()===jQuery(n.currentTarget).index()&&e.$element.addClass("hover")}),this.thead.on("mouseleave","th",function(n){e.$element.index()===jQuery(n.currentTarget).index()&&e.$element.removeClass("hover")})},e.prototype.ngOnDestroy=function(){this.thead.off("mouseenter mouseleave")},e}(),Sl={selector:"col[highlight-col]",cls:Rl},xl=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Tl(e){return l["\u0275vid"](0,[],null,null)}var Ol,El=l["\u0275ccf"]("col[highlight-col]",Rl,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](1,245760,null,0,Rl,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);!function(e){e.backgroundClass=function(e,n){return"__hl_background_"+e+"_"+n},e.inlineClass=function(e,n){return"__hl_inline_"+e+"_"+n},e.colorClass=function(e,n){return e?"__hl_inline_color_"+n+"_text":"__hl_inline_color_"+n+"_dot"},e.overdueDate=function(e){return 0===e?"__hl_date_due_today":e<=-1?"__hl_date_overdue":"__hl_date_not_overdue"},e.isBright=function(e,n,t){var l="--hl-"+n+"-"+t+"-dark";return""!==e.getPropertyValue(l)}}(Ol||(Ol={}));var Dl=function(){function e(e,n,t){this.elementRef=e,this.I18n=n,this.dynamicCssService=t,this.highlightTextInline=!1}return e.prototype.ngOnInit=function(){this.dynamicCssService.requireHighlighting(),this.setColorOptions(),this.updateInputField=document.getElementsByName(this.elementRef.nativeElement.dataset.updateInput)[0],this.highlightTextInline=JSON.parse(this.elementRef.nativeElement.dataset.highlightTextInline)},e.prototype.onModelChange=function(e){e&&this.updateInputField&&(this.updateInputField.value=e.value)},e.prototype.setColorOptions=function(){this.options=JSON.parse(this.elementRef.nativeElement.dataset.colors),this.options.unshift({name:this.I18n.t("js.label_no_color"),value:""}),this.selectedOption=this.options.find(function(e){return!0===e.selected}),this.selectedOption?this.selectedOption=this.selectedOption.value:(this.selectedColorId=this.elementRef.nativeElement.dataset.selectedColor,this.selectedOption=this.selectedColorId?this.selectedColorId:"")},e.prototype.highlightColor=function(e){if(""!==e.value)return(this.highlightTextInline?"__hl_inline_type_ ":"__hl_inline_ ")+Ol.colorClass(this.highlightTextInline,e.value)},e}();gt.DynamicBootstrapper.register({selector:"colors-autocompleter",cls:Dl});var Fl=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Al(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),(e()(),l["\u0275ted"](2,null,["",""]))],function(e,n){e(n,1,0,n.component.highlightColor(n.context.item))},function(e,n){e(n,2,0,n.context.item.name)})}function Nl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),(e()(),l["\u0275ted"](2,null,["",""]))],function(e,n){e(n,1,0,n.component.highlightColor(n.context.item))},function(e,n){e(n,2,0,n.context.item.name)})}function Ml(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,20,"ng-select",[["appendTo","body"],["bindLabel","name"],["bindValue","value"],["class","ng-select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(o.selectedOption=t)&&i);"change"===n&&(i=!1!==o.onModelChange(t)&&i);return i},Ct.b,Ct.a)),l["\u0275did"](1,4964352,null,11,jt.a,[[8,null],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],bindLabel:[1,"bindLabel"],bindValue:[2,"bindValue"],clearable:[3,"clearable"],appendTo:[4,"appendTo"],virtualScroll:[5,"virtualScroll"]},{changeEvent:"change"}),l["\u0275qud"](335544320,1,{optionTemplate:0}),l["\u0275qud"](335544320,2,{optgroupTemplate:0}),l["\u0275qud"](335544320,3,{labelTemplate:0}),l["\u0275qud"](335544320,4,{multiLabelTemplate:0}),l["\u0275qud"](335544320,5,{headerTemplate:0}),l["\u0275qud"](335544320,6,{footerTemplate:0}),l["\u0275qud"](335544320,7,{notFoundTemplate:0}),l["\u0275qud"](335544320,8,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,9,{loadingTextTemplate:0}),l["\u0275qud"](335544320,10,{tagTemplate:0}),l["\u0275qud"](603979776,11,{ngOptions:1}),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](14,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](16,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275and"](0,[[3,2]],null,1,null,Al)),l["\u0275did"](18,16384,null,0,jt.g,[l.TemplateRef],null,null),(e()(),l["\u0275and"](0,[[1,2]],null,1,null,Nl)),l["\u0275did"](20,16384,null,0,jt.f,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,1,0,t.options,"name","value",!1,"body",!0),e(n,14,0,t.selectedOption)},function(e,n){e(n,0,1,[!l["\u0275nov"](n,1).multiple,l["\u0275nov"](n,1).typeahead,l["\u0275nov"](n,1).multiple,l["\u0275nov"](n,1).addTag,l["\u0275nov"](n,1).searchable,l["\u0275nov"](n,1).isOpen,l["\u0275nov"](n,1).disabled,l["\u0275nov"](n,1).filtered,l["\u0275nov"](n,16).ngClassUntouched,l["\u0275nov"](n,16).ngClassTouched,l["\u0275nov"](n,16).ngClassPristine,l["\u0275nov"](n,16).ngClassDirty,l["\u0275nov"](n,16).ngClassValid,l["\u0275nov"](n,16).ngClassInvalid,l["\u0275nov"](n,16).ngClassPending])})}var Vl=l["\u0275ccf"]("colors-autocompleter",Dl,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"colors-autocompleter",[],null,null,null,Ml,Fl)),l["\u0275did"](1,114688,null,0,Dl,[l.ElementRef,B.a,rn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ql=function(){function e(e,n){this.paginationService=e,this.I18n=n,this.hideForSinglePageResults=!1,this.calculatePerPage=!1,this.updateResults=new l.EventEmitter,this.text={label_previous:this.I18n.t("js.pagination.pages.previous"),label_next:this.I18n.t("js.pagination.pages.next"),per_page:this.I18n.t("js.label_per_page"),no_other_page:this.I18n.t("js.pagination.no_other_page")},this.currentRange="",this.pageNumbers=[],this.postPageNumbers=[],this.prePageNumbers=[],this.perPageOptions=[]}return e.prototype.ngOnInit=function(){var e=this;this.paginationService.loadPaginationOptions().then(function(n){e.perPageOptions=n.perPageOptions,e.newPagination(n)})},e.prototype.newPagination=function(e){this.pagination=new V(1,parseInt(this.totalEntries),e.perPage)},e.prototype.update=function(){this.updateCurrentRangeLabel(),this.updatePageNumbers()},e.prototype.selectPerPage=function(e){this.pagination.perPage=e,this.paginationService.setPerPage(e),this.showPage(1)},e.prototype.showPage=function(e){this.pagination.page=e,this.updateCurrentRangeLabel(),this.updatePageNumbers(),this.onUpdatedPage()},e.prototype.onUpdatedPage=function(){this.updateResults.emit(this.pagination)},Object.defineProperty(e.prototype,"isVisible",{get:function(){return!this.hideForSinglePageResults||this.pagination.total>this.pagination.perPage},enumerable:!0,configurable:!0}),e.prototype.updateCurrentRangeLabel=function(){this.pagination.total?this.currentRange="("+this.pagination.getLowerPageBound()+"\xa0-\xa0"+this.pagination.getUpperPageBound(this.pagination.total)+"/"+this.pagination.total+")":this.currentRange="(0 - 0/0)"},e.prototype.updatePageNumbers=function(){var e=this.paginationService.getMaxVisiblePageOptions(),n=this.paginationService.getOptionsTruncationSize(),t=[],l=this.pagination.perPage,i=this.pagination.page;if(l){for(var o=1;o<=Math.ceil(this.pagination.total/l);o++)t.push(o);var r=i-2*n;0<=r&&r<=1?this.postPageNumbers=this.truncatePageNums(t,t.length>=e+2*n,e+n,t.length,0):(this.prePageNumbers=this.truncatePageNums(t,i>=e,0,Math.min(i-Math.ceil(e/2),t.length-e),n),this.postPageNumbers=this.truncatePageNums(t,t.length>=e+2*n,e,t.length,0))}this.pageNumbers=t},e.prototype.showPerPageOptions=function(){return!this.calculatePerPage&&this.perPageOptions.length>0&&this.pagination.total>this.perPageOptions[0]},e.prototype.truncatePageNums=function(e,n,t,l,i){if(n){var o=this.paginationService.getOptionsTruncationSize(),r=e.splice(t,l);return r.length>=2*o&&r.splice(i,r.length-o),r}return[]},e}(),Ll=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function $l(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","pagination--item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,ol,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function Hl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,$l)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\u2026"]))],function(e,n){e(n,2,0,n.component.prePageNumbers)},null)}function Bl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"em",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function zl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.parent.context.$implicit)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,ol,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,0,0,n.parent.context.$implicit)})}function Wl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-current":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Bl)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,zl)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit==t.pagination.page);e(n,1,0,"pagination--item pagination-number",l),e(n,4,0,n.context.$implicit==t.pagination.page),e(n,6,0,n.context.$implicit!=t.pagination.page)},null)}function Ql(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\u2026"]))],null,null)}function Ul(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Wl)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ql)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.pageNumbers),e(n,4,0,t.postPageNumbers.length)},null)}function Kl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,ol,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function Gl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Kl)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,n.component.postPageNumbers)},null)}function Yl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","hidden-for-sighted"],["id","pagination-empty-text"],["tabindex","0"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.no_other_page)})}function Zl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.selectPerPage(e.parent.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,ol,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function Jl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function Xl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","pagination--item"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-current":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Zl)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Jl)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit==t.pagination.perPage);e(n,1,0,"pagination--item",l),e(n,4,0,n.context.$implicit!=t.pagination.perPage),e(n,6,0,n.context.$implicit==t.pagination.perPage)},null)}function ei(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","pagination--options"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"li",[["class","pagination--label"]],[[8,"textContent",0],[8,"title",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Xl)),l["\u0275did"](4,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.perPageOptions)},function(e,n){var t=n.component;e(n,2,0,t.text.per_page,l["\u0275inlineInterpolate"](1,"",t.text.per_page,""))})}function ni(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,22,"div",[["class","pagination"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,19,"nav",[["class","pagination--pages"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,18,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"a",[["href",""],["id","pagination--prev-link"],["rel","prev start"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(o.pagination.page-1)&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275ted"](-1,null,["<"])),(e()(),l["\u0275and"](16777216,null,null,1,null,Hl)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ul)),l["\u0275did"](10,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Gl)),l["\u0275did"](12,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](13,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,2,"a",[["class","pagination--next-link"],["href",""],["id","pagination--next-link"],["rel","next"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,15).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,15).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(o.pagination.page+1)&&i);return i},null,null)),l["\u0275did"](15,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275ted"](-1,null,[">"])),(e()(),l["\u0275eld"](17,0,null,null,3,"li",[["class","pagination--range"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Yl)),l["\u0275did"](20,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ei)),l["\u0275did"](22,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.prePageNumbers.length>0),e(n,10,0,t.pageNumbers.length>1),e(n,12,0,t.postPageNumbers.length),e(n,20,0,1===t.pageNumbers.length),e(n,22,0,t.showPerPageOptions())},function(e,n){var t=n.component;e(n,3,0,1==t.pagination.page),e(n,4,0,t.text.label_previous),e(n,13,0,!(t.pagination.total&&t.pagination.page<t.pageNumbers[t.pageNumbers.length-1])),e(n,14,0,t.text.label_next),e(n,18,0,t.currentRange)})}function ti(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,ni)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.pagination&&t.isVisible&&t.pagination.total)},null)}var li=l["\u0275ccf"]("[tablePagination]",ql,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["tablePagination",""]],null,null,null,ti,Ll)),l["\u0275did"](1,114688,null,0,ql,[ke,B.a],null,null)],function(e,n){e(n,1,0)},null)},{totalEntries:"totalEntries",hideForSinglePageResults:"hideForSinglePageResults",calculatePerPage:"calculatePerPage"},{updateResults:"updateResults"},[]),ii=new l.InjectionToken("CONTEXT_MENU_LOCALS"),oi=function(){function e(e){this.locals=e,this.items=this.locals.items,this.service=this.locals.service}return e.prototype.handleClick=function(e,n){return!e.disabled&&!e.divider&&(!e.onClick(n)||(this.locals.service.close(),n.preventDefault(),n.stopPropagation(),!1))},e}(),ri=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ui(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"li",[["class","dropdown-divider"]],null,null,null,null,null))],null,null)}function ai(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,l["\u0275inlineInterpolate"](1,"icon-action-menu ",n.parent.parent.context.$implicit.icon,""))},null)}function si(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,l["\u0275inlineInterpolate"](1,"icon-action-menu-post ",n.parent.parent.context.$implicit.postIcon,""),n.parent.parent.context.$implicit.postIconTitle||"")},null)}function ci(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"a",[["tabindex","0"]],[[1,"href",4],[1,"aria-disabled",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleClick(e.parent.context.$implicit,t)&&i);return i},null,null)),l["\u0275did"](2,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{inactive:0}),l["\u0275did"](4,16384,null,0,ol,[],{stopEventPropagation:[0,"stopEventPropagation"]},{onClick:"accessibleClick"}),(e()(),l["\u0275and"](16777216,null,null,1,null,ai)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,si)),l["\u0275did"](9,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=l["\u0275inlineInterpolate"](1,"menu-item ",n.parent.context.$implicit.class,""),i=e(n,3,0,n.parent.context.$implicit.disabled);e(n,2,0,t,i);e(n,4,0,!1),e(n,6,0,n.parent.context.$implicit.icon),e(n,9,0,n.parent.context.$implicit.postIcon)},function(e,n){e(n,1,0,n.parent.context.$implicit.href||"",n.parent.context.$implicit.disabled,n.parent.context.$implicit.ariaLabel||n.parent.context.$implicit.linkText),e(n,7,0,n.parent.context.$implicit.linkText)})}function di(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ui)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ci)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,n.context.$implicit.divider&&!n.context.$implicit.hidden),e(n,4,0,!n.context.$implicit.divider&&!n.context.$implicit.hidden)},null)}function pi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","dropdown-relative dropdown -overflow-in-view"],["ng-class","{'dropdown-anchor-right': locals.showAnchorRight}"]],[[1,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"ul",[["class","dropdown-menu "],["role","menu"]],null,null,null,null,null)),l["\u0275did"](2,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"-empty":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,di)),l["\u0275did"](5,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,0===t.items.length);e(n,2,0,"dropdown-menu ",l),e(n,5,0,t.items)},function(e,n){e(n,0,0,n.component.locals.contextMenuId)})}var hi=l["\u0275ccf"]("ng-component",oi,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,pi,ri)),l["\u0275did"](1,49152,null,0,oi,[ii],null,null)],null,null)},{},{},[]),fi=function(){function e(e){this.I18n=e,this.text={activate:this.I18n.t("js.label_activate"),deactivate:this.I18n.t("js.label_deactivate"),label:this.labelKey?this.I18n.t(this.labelKey):"",buttonText:this.textKey?this.I18n.t(this.textKey):""}}return Object.defineProperty(e.prototype,"label",{get:function(){return this.text.label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonText",{get:function(){return this.text.buttonText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelKey",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textKey",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activationPrefix",{get:function(){return this.isActive()?"":this.text.activate+" "},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deactivationPrefix",{get:function(){return this.isActive()?this.text.deactivate+" ":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefix",{get:function(){return this.activationPrefix||this.deactivationPrefix},enumerable:!0,configurable:!0}),e.prototype.isToggle=function(){return!1},e}(),gi=(function(e){function n(n,t){var l=e.call(this,t)||this;return l.$state=n,l.I18n=t,l}r.d(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return this.activationPrefix+this.text.label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activeAccessKey",{get:function(){if(!this.isActive())return this.accessKey},enumerable:!0,configurable:!0}),n.prototype.isActive=function(){return this.$state.includes(this.activeState)}}(fi),t("k7+O")),mi=function(e){function n(n){var t=e.call(this,n)||this;t.I18n=n,t.buttonId="work-packages-zen-mode-toggle-button",t.buttonClass="toolbar-icon",t.iconClass="icon-zen-mode",t.activateLabel=n.t("js.zen_mode.button_activate"),t.deactivateLabel=n.t("js.zen_mode.button_deactivate");var l=t;return gi.enabled&&gi.onchange(function(){gi.isFullscreen||l.deactivateZenMode()}),t}return r.d(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return this.isActive()?this.deactivateLabel:this.activateLabel},enumerable:!0,configurable:!0}),n.prototype.isToggle=function(){return!0},n.prototype.isActive=function(){return n.inZenMode},n.prototype.deactivateZenMode=function(){n.inZenMode=!1,jQuery("body").removeClass("zen-mode"),this.disabled=!1,gi.enabled&&gi.isFullscreen&&gi.exit()},n.prototype.activateZenMode=function(){n.inZenMode=!0,jQuery("body").addClass("zen-mode"),gi.enabled&&gi.request()},n.prototype.performAction=function(e){return n.inZenMode?this.deactivateZenMode():this.activateZenMode(),e.preventDefault(),!1},n.inZenMode=!1,n}(fi);gt.DynamicBootstrapper.register({selector:"zen-mode-toggle-button",cls:mi});var vi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function bi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"button",[["type","button"]],[[8,"disabled",0],[1,"id",0],[1,"title",0],[1,"accesskey",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.performAction(t)&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-active":0}),l["\u0275did"](3,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](5,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component,i=l["\u0275inlineInterpolate"](1,"button ",t.buttonClass,""),o=e(n,2,0,t.isActive());e(n,1,0,i,o),e(n,5,0,l["\u0275inlineInterpolate"](1,"",t.iconClass," button--icon"))},function(e,n){var t=n.component;e(n,0,0,t.disabled||!t.isToggle()&&t.isActive(),t.buttonId,t.label,t.accessKey)})}var yi=l["\u0275ccf"]("zen-mode-toggle-button",mi,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,bi,vi)),l["\u0275did"](1,49152,null,0,mi,[B.a],null,null)],null,null)},{},{},[]),wi=function(){function e(e){this.elementRef=e,this.expanded=!1}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.sectionTitle=e.getAttribute("section-title"),"true"===e.getAttribute("initially-expanded")&&(this.expanded=!0);var n=e.nextElementSibling;this.sectionBody.nativeElement.appendChild(n),n.removeAttribute("hidden")},e.prototype.toggle=function(){this.expanded=!this.expanded},e}();gt.DynamicBootstrapper.register({selector:"collapsible-section-augment",cls:wi});var ki=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ci(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{sectionBody:0}),(e()(),l["\u0275eld"](1,0,null,null,6,"section",[["class","collapsible-section"]],null,null,null,null,null)),l["\u0275did"](2,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"-expanded":0}),(e()(),l["\u0275eld"](4,0,null,null,2,"accessible-by-keyboard",[["linkClass","collapsible-section--toggle-link"],["spanClass","collapsible-section--legend"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggle()&&l);return l},al,ul)),l["\u0275did"](5,49152,null,0,rl,[],{linkClass:[0,"linkClass"],spanClass:[1,"spanClass"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](6,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,[[1,0],["sectionBody",1]],null,0,"div",[["class","collapsible-section--body toggle-slide-animation"]],[[8,"hidden",0]],null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.expanded);e(n,2,0,"collapsible-section",l);e(n,5,0,"collapsible-section--toggle-link","collapsible-section--legend",t.sectionTitle)},function(e,n){var t=n.component;e(n,6,0,t.sectionTitle),e(n,7,0,!t.expanded)})}var Ii=l["\u0275ccf"]("collapsible-section-augment",wi,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"collapsible-section-augment",[],null,null,null,Ci,ki)),l["\u0275did"](1,114688,null,0,wi,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Pi=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n,"active_user_statuses",{get:function(){return["active","registered"]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.users.get(this.href)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showUserPath",{get:function(){return this.showUser.$link.href},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isActive",{get:function(){return n.active_user_statuses.indexOf(this.status)>=0},enumerable:!0,configurable:!0}),n}(z),ji=function(){function e(e,n,t,l){this.elementRef=e,this.ref=n,this.domSanitizer=t,this.pathHelper=l}return e.prototype.ngAfterViewInit=function(){var e=this.elementRef.nativeElement;this.user?(this.userId=this.user.id,this.userName=this.user.name):(this.userId=e.dataset.userId,this.userName=e.dataset.userName),this.classes=e.dataset.classList,this.useFallback=e.dataset.useFallback,this.userAvatarUrl=this.pathHelper.api.v3.users.id(this.userId).avatar.toString(),this.userInitials=this.getInitials(this.userName),this.colorCode=this.computeColor(this.userName),this.ref.detectChanges()},e.prototype.replaceWithDefault=function(){this.useFallback=!0,this.ref.detectChanges()},e.prototype.getInitials=function(e){var n=e.split(" "),t=n[0].substring(0,1).toUpperCase();return n.length>1&&(t+=n[n.length-1].substring(0,1).toUpperCase()),t},e.prototype.computeColor=function(e){for(var n=0,t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);return"hsl("+n%360+", 50%, 50%)"},e}();gt.DynamicBootstrapper.register({selector:"user-avatar",cls:ji});var _i=t("ZYjt"),Ri=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Si(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"img",[],[[8,"className",0],[1,"src",4],[1,"title",0],[8,"alt",0]],[[null,"error"]],function(e,n,t){var l=!0,i=e.component;"error"===n&&(l=!1!==i.replaceWithDefault()&&l);return l},null,null))],null,function(e,n){var t=n.component;e(n,0,0,"avatar--fallback "+t.classes,t.userAvatarUrl,t.userName,t.userName)})}function xi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[],[[8,"className",0],[8,"textContent",0],[4,"background",null]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,"avatar-default "+t.classes,t.userInitials,t.colorCode)})}function Ti(e){return l["\u0275vid"](2,[(e()(),l["\u0275and"](16777216,null,null,1,null,Si)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,xi)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.userAvatarUrl&&!t.useFallback),e(n,3,0,(!t.userAvatarUrl||t.useFallback)&&t.userInitials)},null)}var Oi=l["\u0275ccf"]("user-avatar",ji,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-avatar",[],null,null,null,Ti,Ri)),l["\u0275did"](1,4243456,null,0,ji,[l.ElementRef,l.ChangeDetectorRef,_i.DomSanitizer,ve],null,null)],null,null)},{user:"user"},{},[]),Ei=function(){function e(e,n){this.FocusHelper=e,this.elementRef=n,this.priority=0}return e.prototype.ngAfterViewInit=function(){this.updateFocus()},e.prototype.updateFocus=function(){if(this.condition){var e=jQuery(this.elementRef.nativeElement);this.FocusHelper.focusElement(e,this.priority)}},e}(),Di=function(){function e(e,n,t,i){this.elementRef=e,this.halResourceService=n,this.I18n=t,this.pathHelper=i,this.onChange=new l.EventEmitter,this.clearAfterSelection=!1,this.url=this.pathHelper.api.v3.users.path,this.allowEmpty=!1,this.initialSelection=null}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement.dataset.updateInput,n=this.elementRef.nativeElement.dataset.allowEmpty;e&&(this.updateInputField=document.getElementsByName(e)[0],this.setInitialSelection()),"true"===n&&(this.allowEmpty=!0),this.setAvailableUsers(this.url,"")},e.prototype.onModelChange=function(e){e&&(this.onChange.emit(e),this.setAvailableUsers(this.url,""),this.clearAfterSelection&&this.ngSelectComponent.clearItem(e),this.updateInputField&&(this.updateInputField.value=e.id))},e.prototype.onSearch=function(e){var n;if(e){var t=new se;t.add("name","~",[e]),n={filters:t.toJson()}}this.setAvailableUsers(this.url,n)},e.prototype.onFocus=function(){this.setAvailableUsers(this.url,"")},e.prototype.setAvailableUsers=function(e,n){var t=this;this.halResourceService.get(e,n).subscribe(function(e){t.options=e.elements.map(function(e){return{name:e.name,id:e.id,href:e.href,avatar:e.avatar}}),t.allowEmpty&&t.options.unshift({name:t.I18n.t("js.timelines.filter.noneSelection"),id:null})})},e.prototype.setInitialSelection=function(){if(this.updateInputField){var e=parseInt(this.updateInputField.value);this.initialSelection=isNaN(e)?null:e}},e}();gt.DynamicBootstrapper.register({selector:"user-autocompleter",cls:Di});var Fi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ai(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-avatar",[["data-class-list","avatar-mini"]],null,null,null,Ti,Ri)),l["\u0275did"](1,4243456,null,0,ji,[l.ElementRef,l.ChangeDetectorRef,_i.DomSanitizer,ve],{user:[0,"user"]},null)],function(e,n){e(n,1,0,n.parent.context.item)},null)}function Ni(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Ai)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275ted"](2,null,[" "," "]))],function(e,n){e(n,1,0,n.context.item)},function(e,n){e(n,2,0,n.context.item.name)})}function Mi(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{ngSelectComponent:0}),(e()(),l["\u0275eld"](1,0,null,null,19,"ng-select",[["bindLabel","name"],["bindValue","id"],["class","ng-select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"search"],[null,"change"],[null,"focus"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleKeyDown(t)&&i);"search"===n&&(i=!1!==o.onSearch(t)&&i);"change"===n&&(i=!1!==o.onModelChange(t)&&i);"focus"===n&&(i=!1!==o.onFocus()&&i);return i},Ct.b,Ct.a)),l["\u0275did"](2,4964352,[[1,4]],11,jt.a,[[8,null],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],bindLabel:[1,"bindLabel"],bindValue:[2,"bindValue"],virtualScroll:[3,"virtualScroll"]},{focusEvent:"focus",changeEvent:"change",searchEvent:"search"}),l["\u0275qud"](335544320,2,{optionTemplate:0}),l["\u0275qud"](335544320,3,{optgroupTemplate:0}),l["\u0275qud"](335544320,4,{labelTemplate:0}),l["\u0275qud"](335544320,5,{multiLabelTemplate:0}),l["\u0275qud"](335544320,6,{headerTemplate:0}),l["\u0275qud"](335544320,7,{footerTemplate:0}),l["\u0275qud"](335544320,8,{notFoundTemplate:0}),l["\u0275qud"](335544320,9,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,10,{loadingTextTemplate:0}),l["\u0275qud"](335544320,11,{tagTemplate:0}),l["\u0275qud"](603979776,12,{ngOptions:1}),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](15,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{model:[0,"model"]},null),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](17,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](18,4210688,null,0,Ei,[f.a,l.ElementRef],null,null),(e()(),l["\u0275and"](0,[[2,2]],null,1,null,Ni)),l["\u0275did"](20,16384,null,0,jt.f,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,2,0,t.options,"name","id",!0),e(n,15,0,t.initialSelection)},function(e,n){e(n,1,1,[!l["\u0275nov"](n,2).multiple,l["\u0275nov"](n,2).typeahead,l["\u0275nov"](n,2).multiple,l["\u0275nov"](n,2).addTag,l["\u0275nov"](n,2).searchable,l["\u0275nov"](n,2).isOpen,l["\u0275nov"](n,2).disabled,l["\u0275nov"](n,2).filtered,l["\u0275nov"](n,17).ngClassUntouched,l["\u0275nov"](n,17).ngClassTouched,l["\u0275nov"](n,17).ngClassPristine,l["\u0275nov"](n,17).ngClassDirty,l["\u0275nov"](n,17).ngClassValid,l["\u0275nov"](n,17).ngClassInvalid,l["\u0275nov"](n,17).ngClassPending])})}var Vi=l["\u0275ccf"]("user-autocompleter",Di,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-autocompleter",[],null,null,null,Mi,Fi)),l["\u0275did"](1,114688,null,0,Di,[l.ElementRef,Y,B.a,ve],null,null)],function(e,n){e(n,1,0)},null)},{clearAfterSelection:"clearAfterSelection",url:"url",allowEmpty:"allowEmpty",initialSelection:"initialSelection"},{onChange:"onChange"},[]),qi=function(e){function n(n,t,l,i,o){var r=e.call(this,t,l,n)||this;return r.elementRef=n,r.locals=t,r.cdRef=l,r.I18n=i,r.domSanitizer=o,r.closeOnEscape=!1,r.closeOnOutsideClick=!1,r.text={title:r.I18n.t("js.label_board_plural")},r}return r.d(n,e),n.prototype.teaserVideoUrl=function(){return this.domSanitizer.bypassSecurityTrustResourceUrl("https://player.vimeo.com/video/337280106")},n}(Le.a),Li=function(){function e(e,n,t,l){this.i18n=e,this.opModalService=n,this.injector=t,this.domSanitizer=l,this.text={newFeatures:this.i18n.t("js.label_new_features"),descriptionNewFeatures:this.i18n.t("js.homescreen.blocks.new_features.text_new_features"),currentNewFeatureHtml:this.i18n.t("js.homescreen.blocks.new_features.current_new_feature_html"),learnAbout:this.i18n.t("js.homescreen.blocks.new_features.learn_about"),imageAltText:this.i18n.t("js.homescreen.blocks.new_features.image_alt_text")}}return e.prototype.showBoardTeaserVideo=function(){this.opModalService.show(qi,this.injector)},e.prototype.boardTeaserWebsiteUrl=function(){return this.domSanitizer.bypassSecurityTrustResourceUrl("https://www.openproject.org/scrum-agile-boards")},e}();gt.DynamicBootstrapper.register({selector:"homescreen-new-features-block",cls:Li});var $i=[[".widget-box--description[_ngcontent-%COMP%]{display:flex}.widget-box--description[_ngcontent-%COMP%]   .widget-box--teaser-image[_ngcontent-%COMP%]{background-image:var(--board-teaser-image);min-width:170px;background-size:contain;background-repeat:no-repeat;background-position-x:right}"]],Hi=l["\u0275crt"]({encapsulation:0,styles:$i,data:{}});function Bi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"p",[["class","widget-box--additional-info"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,[" "," "])),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","widget-box--description"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"a",[["class","widget-box--teaser-image"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.showBoardTeaserVideo()&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"a",[["target","_blank"]],[[8,"href",4]],null,null,null,null)),(e()(),l["\u0275ted"](6,null,["",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.text.descriptionNewFeatures),e(n,3,0,t.text.currentNewFeatureHtml),e(n,5,0,t.boardTeaserWebsiteUrl()),e(n,6,0,t.text.learnAbout)})}var zi=l["\u0275ccf"]("homescreen-new-features-block",Li,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"homescreen-new-features-block",[],null,null,null,Bi,Hi)),l["\u0275did"](1,49152,null,0,Li,[B.a,Mn.b,l.Injector,_i.DomSanitizer],null,null)],null,null)},{},{},[]),Wi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Qi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","op-modal--portal"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","op-modal--modal-container"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"iframe",[["allow","autoplay; fullscreen"],["allowfullscreen",""],["class","boards--teaser-video"],["frameborder","0"],["height","500"],["width","800"]],[[8,"src",5]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,4,0,t.text.closePopup),e(n,5,0,t.text.title),e(n,6,0,t.teaserVideoUrl())})}var Ui=l["\u0275ccf"]("ng-component",qi,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Qi,Wi)),l["\u0275did"](1,245760,null,0,qi,[l.ElementRef,Mn.a,l.ChangeDetectorRef,B.a,_i.DomSanitizer],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ki=t("zHkY"),Gi="openproject-base",Yi=function(){return function(){}}();gt.DynamicBootstrapper.register({selector:Gi,cls:Yi});var Zi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ji(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","openproject-base--ui-view"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,16777216,null,null,1,"ui-view",[],null,null,null,kt.c,kt.a)),l["\u0275did"](2,245760,null,0,Ki.a,[h.P,"UIView.PARENT_INJECT",l.ViewContainerRef],null,null)],function(e,n){e(n,2,0)},null)}var Xi=l["\u0275ccf"]("openproject-base",Yi,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"openproject-base",[],null,null,null,Ji,Zi)),l["\u0275did"](1,49152,null,0,Yi,[],null,null)],null,null)},{},{},[]),eo=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement),t=new mt.a(!1);t.pipe(Object(D.a)(Object(Ln.a)(this)),Object(hn.a)(50)).subscribe(function(e){n.toggleClass("-focus",e)});n[0].addEventListener("focus",function(){t.next(!0)},!0);n[0].addEventListener("blur",function(){t.next(!1)},!0),setTimeout(function(){n.addClass("focus-within--trigger"),n.find(e.selector).addClass("focus-within--depending")},0)},e.prototype.ngOnDestroy=function(){},e}(),no=function(){function e(e,n,t){this.PathHelper=e,this.I18n=n,this.timezoneService=t}return e.prototype.ngOnInit=function(){this.createdOnTime=this.timezoneService.parseDatetime(this.createdOn),this.timeago=this.createdOnTime.fromNow(),this.time=this.createdOnTime.format("LLL"),this.userLink=this.PathHelper.userPath(this.author.idFromLink)},e.prototype.activityFromPath=function(e){var n=this.PathHelper.projectActivityPath(this.project);return e&&(n+="?from="+e),n},e}(),to=[['.timestamp[_ngcontent-%COMP%]:before{content:" ";white-space:pre}']],lo=l["\u0275crt"]({encapsulation:0,styles:to,data:{}});function io(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.author.name)})}function oo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"a",[],[[1,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.userLink,t.author.name)})}function ro(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","timestamp"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"a",[],[[1,"title",0],[1,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.time,t.activityFromPath(t.createdOnTime.format("YYYY-MM-DD")),t.timeago)})}function uo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","timestamp"]],[[8,"textContent",0],[1,"title",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.timeago,t.time)})}function ao(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","authoring-entry"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,io)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,oo)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ro)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,uo)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.showAuthorAsLink),e(n,4,0,!t.showAuthorAsLink),e(n,6,0,t.activity),e(n,8,0,!t.activity)},null)}l["\u0275ccf"]("authoring",no,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"authoring",[],null,null,null,ao,lo)),l["\u0275did"](1,114688,null,0,no,[ve,B.a,qt],null,null)],function(e,n){e(n,1,0)},null)},{createdOn:"createdOn",author:"author",showAuthorAsLink:"showAuthorAsLink",project:"project",activity:"activity"},{},[]);var so=function(){function e(e,n,t,l){var i=this;this.wpNotificationsService=e,this.I18n=n,this.states=t,this.pathHelper=l,this.text={dragHint:this.I18n.t("js.attachments.draggable_hint"),destroyConfirmation:this.I18n.t("js.text_attachment_destroy_confirmation"),removeFile:function(e){return i.I18n.t("js.label_remove_file",e)}}}return e.prototype.setDragData=function(e){var n=this.downloadPath,t=this.draggableHTML(n);e.dataTransfer.setData("text/plain",n),e.dataTransfer.setData("text/html",t.outerHTML),e.dataTransfer.setData("text/uri-list",n),e.dataTransfer.setDragImage(t,0,0)},e.prototype.draggableHTML=function(e){var n;return this.isImage?((n=document.createElement("img")).src=e,n.textContent=this.fileName):((n=document.createElement("a")).href=e,n.textContent=this.fileName),n},Object.defineProperty(e.prototype,"downloadPath",{get:function(){return this.pathHelper.attachmentDownloadPath(this.attachment.id,this.fileName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isImage",{get:function(){var n=this.fileName.split(".").pop()||"";return e.imageFileExtensions.indexOf(n.toLowerCase())>-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileName",{get:function(){var e=this.attachment;return e.fileName||e.customName||e.name},enumerable:!0,configurable:!0}),e.prototype.confirmRemoveAttachment=function(e){return window.confirm(this.text.destroyConfirmation)?(_.pull(this.resource.attachments.elements,this.attachment),this.states.forResource(this.resource).putValue(this.resource),this.selfDestroy&&this.resource.removeAttachment(this.attachment),!1):(e.stopImmediatePropagation(),e.preventDefault(),!1)},e.imageFileExtensions=["jpeg","jpg","gif","bmp","png"],e}(),co=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function po(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["class","form--selected-value--remover work-package--atachments--delete-button"],["href",""]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmRemoveAttachment(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-delete"]],null,null,null,Zt,Gt)),l["\u0275did"](2,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),l["\u0275pod"](3,{fileName:0})],function(e,n){var t=n.component,l=t.text.removeFile(e(n,3,0,t.attachment.fileName));e(n,2,0,"icon-delete",l)},null)}function ho(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"attachments[",t.index,"][id]"),l["\u0275inlineInterpolate"](1,"",t.attachment.id,""))})}function fo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"li",[["class","form--selected-value--container work-package--attachments--draggable-item"],["draggable","true"],["focus-within",""],["focusWithinSelector",".inplace-edit--icon-wrapper"]],[[8,"title",0]],[[null,"dragstart"]],function(e,n,t){var l=!0,i=e.component;"dragstart"===n&&(l=!1!==i.setDragData(t)&&l);return l},null,null)),l["\u0275did"](1,212992,null,0,eo,[l.ElementRef],null,null),(e()(),l["\u0275eld"](2,0,null,null,6,"span",[["class","form--selected-value"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-attachment"]],null,null,null,Zt,Gt)),l["\u0275did"](4,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,3,"a",[["class","work-package--attachments--filename"],["rel","noopener"],["target","_blank"]],[[1,"href",4]],null,null,null,null)),(e()(),l["\u0275ted"](6,null,[" "," "])),(e()(),l["\u0275eld"](7,0,null,null,1,"authoring",[["class","work-package--attachments--info"]],null,null,null,ao,lo)),l["\u0275did"](8,114688,null,0,no,[ve,B.a,qt],{createdOn:[0,"createdOn"],author:[1,"author"],showAuthorAsLink:[2,"showAuthorAsLink"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,po)),l["\u0275did"](10,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ho)),l["\u0275did"](12,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0);e(n,4,0,"icon-context icon-attachment");e(n,8,0,t.attachment.createdAt,t.attachment.author,!1),e(n,10,0,!!t.attachment.$links.delete),e(n,12,0,!t.attachment.container)},function(e,n){var t=n.component;e(n,0,0,t.text.dragHint),e(n,5,0,t.downloadPath||"#"),e(n,6,0,t.attachment.fileName||t.attachment.customName||t.attachment.name)})}l["\u0275ccf"]("attachment-list-item",so,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachment-list-item",[],null,null,null,fo,co)),l["\u0275did"](1,49152,null,0,so,[On,B.a,s,ve],null,null)],null,null)},{resource:"resource",attachment:"attachment",index:"index",selfDestroy:"selfDestroy"},{},[]);var go=function(){function e(e,n){this.elementRef=e,this.halResourceService=n,this.selfDestroy=!1}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.attachmentsUpdatable&&this.resource.attachments.updateElements()},e.prototype.ngOnChanges=function(){this.attachmentsUpdatable&&this.resource.attachments.updateElements()},Object.defineProperty(e.prototype,"attachmentsUpdatable",{get:function(){return this.resource.attachments&&this.resource.attachmentsBackend},enumerable:!0,configurable:!0}),e}();gt.DynamicBootstrapper.register({selector:"attachment-list",cls:go});var mo=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function vo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","form--selected-value--list"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"attachment-list-item",[],null,null,null,fo,co)),l["\u0275did"](2,49152,null,0,so,[On,B.a,s,ve],{resource:[0,"resource"],attachment:[1,"attachment"],index:[2,"index"],selfDestroy:[3,"selfDestroy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.resource,n.context.$implicit,n.context.index,t.selfDestroy)},null)}function bo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-package--attachments--files"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,vo)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.resource.attachments.elements)},null)}function yo(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,bo)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.resource)},null)}var wo=l["\u0275ccf"]("attachment-list",go,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachment-list",[],null,null,null,yo,mo)),l["\u0275did"](1,638976,null,0,go,[l.ElementRef,Y],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource",selfDestroy:"selfDestroy"},{},[]),ko=function(){function e(e,n,t,l,i){this.I18n=e,this.ConfigurationService=n,this.notificationsService=t,this.elementRef=l,this.halResourceService=i,this.draggingOver=!1,this.text={uploadLabel:e.t("js.label_add_attachments"),dropFiles:e.t("js.label_drop_files"),dropFilesHint:e.t("js.label_drop_files_hint"),foldersWarning:e.t("js.label_drop_folders_hint")}}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.ConfigurationService.api().then(function(n){e.maxFileSize=n.maximumAttachmentFileSize})},e.prototype.triggerFileInput=function(e){return this.filePicker.nativeElement.click(),e.preventDefault(),e.stopPropagation(),!1},e.prototype.onDropFiles=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault(),e.stopPropagation();for(var n=e.dataTransfer.files,t=n?n.length:0,l=[],i=0;i<t;i++)l.push(n[i]);this.uploadFiles(l),this.draggingOver=!1},e.prototype.onDragOver=function(e){this.containsFiles(e.dataTransfer)&&(e.dataTransfer.dropEffect="copy",this.draggingOver=!0),e.preventDefault(),e.stopPropagation()},e.prototype.onDragLeave=function(e){this.draggingOver=!1,e.preventDefault(),e.stopPropagation()},e.prototype.onFilePickerChanged=function(){var e=Array.from(this.filePicker.nativeElement.files);this.uploadFiles(e)},e.prototype.containsFiles=function(e){return e.types.contains?e.types.contains("Files"):e.types.indexOf("Files")>=0},e.prototype.uploadFiles=function(e){var n=(e=e||[]).length;0!==(e=this.filterFolders(e)).length?this.resource.uploadAttachments(e):n>0&&this.notificationsService.addNotice(this.text.foldersWarning)},e.prototype.filterFolders=function(e){return e.filter(function(e){return""!==e.type||(0!==e.size&&4096!==e.size||(console.warn("Skipping file because of file size ("+e.size+") %O",e),!1))})},e}(),Co=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Io(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","wp-attachment-upload hide-when-print"]],[[1,"aria-label",0]],[[null,"drop"],[null,"dragover"],[null,"dragleave"]],function(e,n,t){var l=!0,i=e.component;"drop"===n&&(l=!1!==i.onDropFiles(t)&&l);"dragover"===n&&(l=!1!==i.onDragOver(t)&&l);"dragleave"===n&&(l=!1!==i.onDragLeave(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,[[1,0],["hiddenFileInput",1]],null,0,"input",[["hidden",""],["id","attachment_files"],["multiple",""],["name","attachment_files"],["type","file"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.onFilePickerChanged()&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,10,"div",[["class","work-package--attachments--drop-box"],["tabindex","0"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.triggerFileInput(t)&&i);return i},null,null)),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](4,{"-dragging":0}),l["\u0275did"](5,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](6,0,null,null,6,"div",[["class","work-package--attachments--label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-attachment"]],null,null,null,Zt,Gt)),l["\u0275did"](8,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](9,0,null,null,3,"label",[["for","attachment_files"]],null,null,null,null,null)),(e()(),l["\u0275ted"](10,null,[" "," "])),(e()(),l["\u0275eld"](11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["\u0275ted"](12,null,[" "," "]))],function(e,n){var t=e(n,4,0,n.component.draggingOver);e(n,3,0,"work-package--attachments--drop-box",t);e(n,8,0,"icon-attachment")},function(e,n){var t=n.component;e(n,0,0,t.text.uploadLabel),e(n,10,0,t.text.dropFiles),e(n,12,0,t.text.dropFilesHint)})}function Po(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{filePicker:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Io)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.resource.canAddAttachments)},null)}var jo=l["\u0275ccf"]("attachments-upload",ko,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachments-upload",[],null,null,null,Po,Co)),l["\u0275did"](1,114688,null,0,ko,[B.a,Ne,Tn,l.ElementRef,Y],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource"},{},[]),_o=function(){function e(e,n,t,l){this.elementRef=e,this.I18n=n,this.states=t,this.halResourceService=l,this.text={attachments:this.I18n.t("js.label_attachments")}}return e.prototype.ngOnInit=function(){if(this.$element=jQuery(this.elementRef.nativeElement),!this.resource){var e=this.$element.data("resource");this.resource=this.halResourceService.createHalResource(e,!0)}this.allowUploading=this.$element.data("allow-uploading"),void 0!==this.$element.data("destroy-immediately")?this.destroyImmediately=this.$element.data("destroy-immediately"):this.destroyImmediately=!0,this.setupAttachmentDeletionCallback(),this.setupResourceUpdateListener()},e.prototype.setupAttachmentDeletionCallback=function(){var e=this;this.memoizeCurrentAttachments(),this.$formElement=this.$element.closest("form"),this.$formElement.on("submit.attachment-component",function(){e.destroyRemovedAttachments()})},e.prototype.setupResourceUpdateListener=function(){var e=this;this.states.forResource(this.resource).changes$().pipe(Object(D.a)(Object(Ln.a)(this)),Object(g.a)(function(e){return!!e})).subscribe(function(n){e.resource=n||e.resource,e.destroyImmediately&&(e.destroyRemovedAttachments(),e.memoizeCurrentAttachments())})},e.prototype.ngOnDestroy=function(){this.$formElement.off("submit.attachment-component")},e.prototype.showAttachments=function(){return this.allowUploading||_.get(this.resource,"attachments.count",0)>0},e.prototype.destroyRemovedAttachments=function(){var e=this,n=_.differenceBy(this.initialAttachments,this.resource.attachments.elements,function(e){return e.id});n.length&&n.forEach(function(n){e.resource.removeAttachment(n)})},e.prototype.memoizeCurrentAttachments=function(){this.initialAttachments=_.clone(this.resource.attachments.elements)},e}();gt.DynamicBootstrapper.register({selector:"attachments",cls:_o,embeddable:!0});var Ro=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function So(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachment-list",[],null,null,null,yo,mo)),l["\u0275did"](1,638976,null,0,go,[l.ElementRef,Y],{resource:[0,"resource"]},null)],function(e,n){e(n,1,0,n.component.resource)},null)}function xo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachments-upload",[["class","hide-when-print"]],null,null,null,Po,Co)),l["\u0275did"](1,114688,null,0,ko,[B.a,Ne,Tn,l.ElementRef,Y],{resource:[0,"resource"]},null)],function(e,n){e(n,1,0,n.component.resource)},null)}function To(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"legend",[["class","form--fieldset-legend"]],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,[" "," "])),(e()(),l["\u0275eld"](3,0,null,null,4,"div",[["id","attachments_fields"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,So)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,xo)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.resource.attachments),e(n,7,0,t.allowUploading)},function(e,n){e(n,2,0,n.component.text.attachments)})}function Oo(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,To)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.showAttachments())},null)}var Eo=l["\u0275ccf"]("attachments",_o,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachments",[],null,null,null,Oo,Ro)),l["\u0275did"](1,245760,null,0,_o,[l.ElementRef,B.a,s,Y],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource"},{},[]),Do=function(){function e(e){this.PathHelper=e}return e.prototype.create=function(e,n,t,l){void 0===l&&(l=null);var i="constrained"===e?window.OPConstrainedEditor:window.OPClassicEditor;n.classList.add("ckeditor-type-"+e);var o=null!==l,r=o?l:n;return i.createCustomized(r,{openProject:this.createConfig(t)}).then(function(e){return o&&n.appendChild(e.ui.element),jQuery(n).on("op:ckeditor:setData",function(n,t){return e.setData(t)}).on("op:ckeditor:clear",function(n){return e.setData(" ")}).on("op:ckeditor:getData",function(n,t){return t(e.getData({trim:!1}))}),e})},e.prototype.createConfig=function(e){return"none"===e.macros?e.macros=!1:"wp"===e.macros?e.macros=["OPMacroToc","OPMacroEmbeddedTable","OPMacroWpButton"]:e.macros=e.macros,{context:e,helpURL:this.PathHelper.textFormattingHelp(),pluginContext:window.OpenProject.pluginContext.value}},e}(),Fo=function(){function e(e,n,t,i,o){var r=this;this.elementRef=e,this.Notifications=n,this.I18n=t,this.configurationService=i,this.ckEditorSetup=o,this.ckEditorType="full",this.onInitialized=new l.EventEmitter,this.onContentChange=new l.EventEmitter,this.onInitializationFailed=new l.EventEmitter,this.error=null,this.allowManualMode=!1,this.manualMode=!1,this.text={errorTitle:this.I18n.t("js.editor.error_initialization_failed")},this.debouncedEmitter=_.debounce(function(){r.getTransformedContent(!1).then(function(e){r.onContentChange.emit(e)})},1e3,{leading:!0})}return e.prototype.getRawData=function(){return this.manualMode?this._content=this.codeMirrorInstance.getValue():this._content=this.ckEditorInstance.getData({trim:!1})},e.prototype.getTransformedContent=function(e){var n=this;if(void 0===e&&(e=!0),!this.initialized)throw"Tried to access CKEditor instance before initialization.";return new Promise(function(t,l){try{t(n.getRawData())}catch(o){console.error("Failed to save CKEditor content: "+o+".");var i=n.I18n.t("js.editor.error_saving_failed",{error:o||n.I18n.t("js.errors.internal")});e&&n.Notifications.addError(i),l(i)}})},Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){if(!this.initialized)throw"Tried to access CKEditor instance before initialization.";this._content=e,this.ckEditorInstance.setData(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return void 0!==this.ckEditorInstance},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){try{this.initializeEditor()}catch(e){console.error("Failed to setup CKEditor instance: "+e),this.error=e,this.onInitializationFailed.emit(e)}},e.prototype.initializeEditor=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement);var n=this.ckEditorSetup.create(this.ckEditorType,this.opCkeditorReplacementContainer.nativeElement,this.context,this.content).catch(function(e){throw e}).then(function(n){return e.ckEditorInstance=n,n.model.document.on("change",e.debouncedEmitter),n.on("op:source-code-enabled",function(){return e.enableManualMode()}),n.on("op:source-code-disabled",function(){return e.disableManualMode()}),e.onInitialized.emit(n),n});this.$element.data("editor",n)},e.prototype.disableManualMode=function(){var e=this.getRawData();this.ckEditorInstance.setData(e),this.codeMirrorInstance=null,this.manualMode=!1},e.prototype.enableManualMode=function(){var e=this,n=this.getRawData();Promise.all([Promise.all([t.e(1),t.e(0)]).then(t.t.bind(null,"VrN/",7)),t("ZXPj")("./gfm/gfm")]).then(function(t){var l=t[0].default;e.codeMirrorInstance=l(e.$element.find(".ck-editor__source")[0],{lineNumbers:!0,smartIndent:!0,value:n,mode:""}),e.codeMirrorInstance.on("change",e.debouncedEmitter),setTimeout(function(){return e.codeMirrorInstance.refresh()},100),e.manualMode=!0})},e}(),Ao=[[".op-ckeditor--mode-switch[_ngcontent-%COMP%]{text-align:right}.op-ckeditor--mode-switch[_ngcontent-%COMP%]   button.button[_ngcontent-%COMP%]{margin:0 0 5px}"]],No=l["\u0275crt"]({encapsulation:0,styles:Ao,data:{}});function Mo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.text.errorTitle),e(n,5,0,t.error)})}function Vo(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{opCkeditorReplacementContainer:0}),l["\u0275qud"](402653184,2,{codeMirrorPane:0}),(e()(),l["\u0275eld"](2,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Mo)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,[[1,0],["opCkeditorReplacementContainer",1]],null,0,"div",[["class","op-ckeditor-source-element"]],null,null,null,null,null))],function(e,n){e(n,4,0,n.component.error)},null)}l["\u0275ccf"]("op-ckeditor",Fo,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-ckeditor",[],null,null,null,Vo,No)),l["\u0275did"](1,245760,null,0,Fo,[l.ElementRef,Tn,B.a,Ne,Do],null,null)],function(e,n){e(n,1,0)},null)},{ckEditorType:"ckEditorType",context:"context",_content:"content"},{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"},[]);var qo=function(){function e(e,n,t,l,i,o,r){this.elementRef=e,this.pathHelper=n,this.halResourceService=t,this.Notifications=l,this.I18n=i,this.states=o,this.ConfigurationService=r,this.changed=!1,this.inFlight=!1}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.textareaSelector=this.$element.attr("textarea-selector"),this.previewContext=this.$element.attr("preview-context");var e=this.$element.data("resource");this.resource=e?this.halResourceService.createHalResource(e,!0):void 0,this.formElement=this.$element.closest("form"),this.wrappedTextArea=this.formElement.find(this.textareaSelector),this.wrappedTextArea.removeAttr("required").hide(),this.initialContent=this.wrappedTextArea.val(),this.$attachmentsElement=this.formElement.find("#attachments_fields"),this.context={resource:this.resource,previewContext:this.previewContext}},e.prototype.ngOnDestroy=function(){this.formElement.off("submit.ckeditor")},e.prototype.setup=function(e){var n=this;return this.resource&&this.resource.attachments&&(this.setupAttachmentAddedCallback(e),this.setupAttachmentRemovalSignal(e)),this.formElement.on("submit.ckeditor change.ckeditor",function(){try{n.wrappedTextArea.val(n.ckEditorInstance.getRawData())}catch(e){return console.error("Failed to save CKEditor body to textarea: "+e+"."),n.Notifications.addError(e||n.I18n.t("js.errors.internal")),!1}return n.addUploadedAttachmentsToForm(),!0}),this.setLabel(),e},e.prototype.setupAttachmentAddedCallback=function(e){var n=this;e.model.on("op:attachment-added",function(){n.states.forResource(n.resource).putValue(n.resource)})},e.prototype.setupAttachmentRemovalSignal=function(e){var n=this;this.attachments=_.clone(this.resource.attachments.elements),this.states.forResource(this.resource).changes$().pipe(Object(D.a)(Object(Ln.a)(this)),Object(g.a)(function(e){return!!e})).subscribe(function(t){var l=_.differenceBy(n.attachments,t.attachments.elements,function(e){return e.id}).map(function(e){return e.downloadLocation.$href});l.length&&e.model.fire("op:attachment-removed",l),n.attachments=_.clone(t.attachments.elements)})},e.prototype.setLabel=function(){var e=this.textareaSelector.substring(1),n=jQuery("label[for="+e+"]"),t=this.$element.find(".ck-content");t.attr("aria-label",null),t.attr("aria-labelledby",e),n.click(function(){t.focus()})},e.prototype.addUploadedAttachmentsToForm=function(){var e=this;if(this.resource&&this.resource.attachments&&!this.resource.id){var n=this.$attachmentsElement.find("input[type='file']").map(function(e,n){var t=(n.getAttribute("name")||"").match(/attachments\[(\d+)\]\[(?:file|id)\]/);return t?parseInt(t[1]):0}).toArray().sort().pop()||0,t=this.resource.attachments.elements||[];jQuery.each(t,function(t,l){e.$attachmentsElement.append('<input type="hidden" name="attachments['+(n+t+1)+'][id]" value="'+l.id+'">')})}},e}();gt.DynamicBootstrapper.register({selector:"ckeditor-augmented-textarea",cls:qo,embeddable:!0});var Lo=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function $o(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"attachments",[["data-allow-uploading","true"],["data-destroy-immediately","false"]],null,null,null,Oo,Ro)),l["\u0275did"](2,245760,null,0,_o,[l.ElementRef,B.a,s,Y],{resource:[0,"resource"]},null)],function(e,n){e(n,2,0,n.component.resource)},null)}function Ho(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{ckEditorInstance:0}),(e()(),l["\u0275eld"](1,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-ckeditor--wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"op-ckeditor",[["ckEditorType","full"]],null,[[null,"onInitialized"]],function(e,n,t){var l=!0,i=e.component;"onInitialized"===n&&(l=!1!==i.setup(t)&&l);return l},Vo,No)),l["\u0275did"](4,245760,[[1,4]],0,Fo,[l.ElementRef,Tn,B.a,Ne,Do],{ckEditorType:[0,"ckEditorType"],context:[1,"context"],_content:[2,"_content"]},{onInitialized:"onInitialized"}),(e()(),l["\u0275and"](16777216,null,null,1,null,$o)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,"full",t.context,t.initialContent),e(n,6,0,t.resource&&t.resource.attachments)},null)}var Bo=l["\u0275ccf"]("ckeditor-augmented-textarea",qo,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ckeditor-augmented-textarea",[],null,null,null,Ho,Lo)),l["\u0275did"](1,245760,null,0,qo,[l.ElementRef,ve,Y,Tn,B.a,s,Ne],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),zo=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Wo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function Qo(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{selectedPageInput:0}),(e()(),l["\u0275eld"](1,0,null,null,25,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,24,"div",[["class","op-modal--modal-container"],["tabindex","1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Wo)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,16,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,15,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);"submit"===n&&(i=!1!==o.applyAndClose(t)&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,Pt.t,[],null,null),l["\u0275did"](10,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](12,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](13,0,null,null,10,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,8,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-page"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,1,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,[[1,0],["selectedPageInput",1]],null,0,"input",[["class","form--select"],["id","selected-page"],["name","selected-page"],["tabindex","2"],["type","text"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.selectedPage=t.target.value)&&l);return l},null,null)),(e()(),l["\u0275eld"](20,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,1,"kbd",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["project-identifier:my-wiki-page"])),(e()(),l["\u0275eld"](24,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](26,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){e(n,5,0,n.component.showClose)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,14,0,t.text.page),e(n,16,0,t.text.page),e(n,19,0,t.selectedPage),e(n,20,0,t.text.hint),e(n,25,0,t.text.button_cancel,t.text.button_cancel),e(n,26,0,t.text.button_save,t.text.button_save)})}var Uo=l["\u0275ccf"]("ng-component",dt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Qo,zo)),l["\u0275did"](1,4440064,null,0,dt,[l.ElementRef,Mn.a,l.ChangeDetectorRef,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ko=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Go(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function Yo(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{codeMirrorPane:0}),(e()(),l["\u0275eld"](1,0,null,null,32,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,31,"div",[["class","op-modal--modal-container -wide"],["tabindex","1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Go)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,23,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,22,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,Pt.t,[],null,null),l["\u0275did"](10,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](12,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](13,0,[[1,0],["codeMirrorPane",1]],null,5,"textarea",[["id","codemirror-element"],["name","codemirror-element"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["\u0275nov"](e,14)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,14).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,14)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,14)._compositionEnd(t.target.value)&&i);return i},null,null)),l["\u0275did"](14,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](16,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},null),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](18,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](19,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,10,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-language"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,6,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,[["selectedLanguage",1]],null,5,"input",[["class","form--select"],["id","selected-language"],["name","selected-language"],["tabindex","2"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,25)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,25).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,25)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,25)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==o.updateLanguage(t)&&i);return i},null,null)),l["\u0275did"](25,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](27,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](29,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](30,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](31,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](33,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose);e(n,16,0,"codemirror-element",t.content);e(n,27,0,"selected-language",t.language)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,13,0,l["\u0275nov"](n,18).ngClassUntouched,l["\u0275nov"](n,18).ngClassTouched,l["\u0275nov"](n,18).ngClassPristine,l["\u0275nov"](n,18).ngClassDirty,l["\u0275nov"](n,18).ngClassValid,l["\u0275nov"](n,18).ngClassInvalid,l["\u0275nov"](n,18).ngClassPending),e(n,21,0,t.text.language),e(n,24,0,l["\u0275nov"](n,29).ngClassUntouched,l["\u0275nov"](n,29).ngClassTouched,l["\u0275nov"](n,29).ngClassPristine,l["\u0275nov"](n,29).ngClassDirty,l["\u0275nov"](n,29).ngClassValid,l["\u0275nov"](n,29).ngClassInvalid,l["\u0275nov"](n,29).ngClassPending),e(n,30,0,t.text.language_hint),e(n,32,0,t.text.button_cancel,t.text.button_cancel),e(n,33,0,t.text.button_save,t.text.button_save)})}var Zo=l["\u0275ccf"]("ng-component",pt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Yo,Ko)),l["\u0275did"](1,4440064,null,0,pt,[l.ElementRef,Mn.a,l.ChangeDetectorRef,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Jo=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Xo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function er(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{selectedPageInput:0}),(e()(),l["\u0275eld"](1,0,null,null,33,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,32,"div",[["class","op-modal--modal-container"],["tabindex","1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Xo)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,24,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,23,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);"submit"===n&&(i=!1!==o.applyAndClose(t)&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,Pt.t,[],null,null),l["\u0275did"](10,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](12,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](13,0,null,null,18,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,4,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-page"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,1,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,[[1,0],["selectedPageInput",1]],null,0,"input",[["class","form--select"],["id","selected-page"],["name","selected-page"],["placeholder","my-project:my-page"],["tabindex","2"],["type","text"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.selectedPage=t.target.value)&&l);return l},null,null)),(e()(),l["\u0275eld"](20,0,null,null,10,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,[["parentIncludedInput",1]],null,5,"input",[["class","form--check-box"],["id","include-parent"],["name","include-parent"],["tabindex","3"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,25).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,25).onTouched()&&i);"ngModelChange"===n&&(i=!1!==o.updateIncludeParent(t)&&i);return i},null,null)),l["\u0275did"](25,16384,null,0,Pt.b,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.b]),l["\u0275did"](27,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](29,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275ted"](30,null,[" "," "])),(e()(),l["\u0275eld"](31,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](33,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](34,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose);e(n,27,0,"include-parent",t.selectedIncludeParent)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,14,0,t.text.page),e(n,16,0,t.text.page),e(n,19,0,t.selectedPage),e(n,24,0,l["\u0275nov"](n,29).ngClassUntouched,l["\u0275nov"](n,29).ngClassTouched,l["\u0275nov"](n,29).ngClassPristine,l["\u0275nov"](n,29).ngClassDirty,l["\u0275nov"](n,29).ngClassValid,l["\u0275nov"](n,29).ngClassInvalid,l["\u0275nov"](n,29).ngClassPending),e(n,30,0,t.text.include_parent),e(n,31,0,t.text.hint),e(n,33,0,t.text.button_cancel,t.text.button_cancel),e(n,34,0,t.text.button_save,t.text.button_save)})}var nr=l["\u0275ccf"]("ng-component",ht,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,er,Jo)),l["\u0275did"](1,4440064,null,0,ht,[l.ElementRef,Mn.a,l.ChangeDetectorRef,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),tr=t("G4s3"),lr=function(){function e(){this.onDestroy=new a.a,this._onSubmitHandlers=[]}return e.prototype.onSubmit=function(){return Promise.all(this._onSubmitHandlers.map(function(e){return e()}))},e.prototype.registerOnSubmit=function(e){this._onSubmitHandlers.push(e)},e}(),ir=function(){function e(e,n,t,l,i){this.timezoneService=e,this.isReversed=n,this.activities=t,this.activity=l,this.index=i}return e.prototype.number=function(e){return void 0===e&&(e=!1),this.orderedIndex(this.index,e)},Object.defineProperty(e.prototype,"date",{get:function(){return this.activityDate(this.activity)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateOfPrevious",{get:function(){if(this.index>0)return this.activityDate(this.activities[this.index-1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"href",{get:function(){return this.activity.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this.activity.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNextDate",{get:function(){return this.date!==this.dateOfPrevious},enumerable:!0,configurable:!0}),e.prototype.isInitial=function(e){void 0===e&&(e=!1);var n=this.number(e);if(0!==this.activity._type.indexOf("Activity"))return!1;if(1===n)return!0;for(;--n>0;){var t=this.orderedIndex(n,e)-1,l=this.activities[t];if(!_.isNil(l)&&0===l._type.indexOf("Activity"))return!1}return!0},e.prototype.activityDate=function(e){return moment(e.createdAt).format("LL")},e.prototype.orderedIndex=function(e,n){return void 0===n&&(n=!1),n||this.isReversed?this.activities.length-e:e+1},e}(),or=function(){function e(){this.cacheDurationInSeconds=120,this.cache={id:null,state:Object(u.g)()}}return e.prototype.require=function(e,n){var t=this;void 0===n&&(n=!1);var l=e.id,i=this.cache.state;return(n||this.cache.id!==l)&&i.clear(),this.isCached(l)?Promise.resolve(i.value):(this.cache.id=l,this.cache.state.putFromPromiseIfPristine(function(){return t.load(e)}),this.cache.state.values$().pipe(Object(F.a)(1)).toPromise())},e.prototype.clear=function(e){this.cache.id===e&&this.cache.state.clear()},e.prototype.isCached=function(e){var n=this.cache.state;return this.cache.id===e&&n.hasValue()&&!n.isValueOlderThan(1e3*this.cacheDurationInSeconds)},e}(),rr=function(e){function n(n,t){var l=e.call(this)||this;return l.ConfigurationService=n,l.timezoneService=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"order",{get:function(){return this.isReversed?"desc":"asc"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReversed",{get:function(){return this.ConfigurationService.commentsSortedInDescendingOrder()},enumerable:!0,configurable:!0}),n.prototype.load=function(e){var n=this,t=[],l=[],i=function(e){t.push(e.elements)};return l.push(e.activities.$update().then(i)),e.revisions&&l.push(e.revisions.$update().then(i)),Promise.all(l).then(function(){return n.sortedActivityList(t)})},n.prototype.sortedActivityList=function(e,n){void 0===n&&(n="createdAt");var t=_.sortBy(_.flatten(e),n);return this.isReversed?t.reverse():t},n.prototype.info=function(e,n,t){return new ir(this.timezoneService,this.isReversed,e,n,t)},n}(or),ur=new l.InjectionToken("IWorkPackageCreateService"),ar=new l.InjectionToken("IWorkPackageEditingService"),sr=function(){function e(e,n,t){this.injector=e,this.workPackage=n,this.wpNotificationsService=this.injector.get(On),this.schemaCacheService=this.injector.get(gn),this.wpCacheService=this.injector.get(yn),this.wpCreate=this.injector.get(ur),this.wpEditing=this.injector.get(ar),this.wpActivity=this.injector.get(rr),this.halResourceService=this.injector.get(Y),this.changes={},this.inFlight=!1,this.form=t||null}return e.prototype.reset=function(e){delete this.changes[e],this.buildResource()},e.prototype.isChanged=function(e){return this.changes[e]},e.prototype.clear=function(){this.changes={},this.resetForm()},e.prototype.clearSome=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.forEach(function(n){delete e.changes[n]})},e.prototype.resetForm=function(){this.form=null},Object.defineProperty(e.prototype,"empty",{get:function(){return _.isEmpty(this.changes)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changedAttributes",{get:function(){return _.keys(this.changes)},enumerable:!0,configurable:!0}),e.prototype.value=function(e){return this.isOverridden(e)?this.changes[e]:this.workPackage[e]},e.prototype.setValue=function(e,n){this.changes[e]=n,!this.workPackage.isNew||"project"!==e&&"type"!==e||this.updateForm()},e.prototype.isOverridden=function(e){return this.changes.hasOwnProperty(e)},e.prototype.getForm=function(){return this.form?Promise.resolve(this.form):this.updateForm()},e.prototype.updateForm=function(){var e=this,n=this.buildPayloadFromChanges();return this.wpFormPromise||(this.wpFormPromise=this.workPackage.$links.update(n).then(function(n){return e.form=n,e.workPackage.isNew||e.schemaCacheService.state(e.workPackage).putValue(n.schema),e.rebuildDefaults(n.payload),e.buildResource(),e.wpFormPromise=null,n}).catch(function(n){throw e.resetForm(),e.wpFormPromise=null,n})),this.wpFormPromise},e.prototype.save=function(){var e=this;this.inFlight=!0;var n=this.workPackage.isNew,t=new Promise(function(t,l){e.updateForm().then(function(i){var o=e.buildPayloadFromChanges(),r=i.getErrors();if(null!==r)return l(r);e.workPackage.$links.updateImmediately(o).then(function(l){e.schemaCacheService.ensureLoaded(l).then(function(){e.wpActivity.clear(e.workPackage.id),l.retainFrom(e.workPackage),e.inFlight=!1,e.workPackage=l,e.wpCacheService.updateWorkPackage(e.workPackage,!0),n&&(e.workPackage.overriddenSchema=void 0,e.wpCreate.newWorkPackageCreated(e.workPackage)),e.workPackage.parent&&e.wpCacheService.loadWorkPackage(e.workPackage.parent.id.toString(),!0),e.resource=null,e.clear(),t(e.workPackage)})}).catch(function(n){e.buildResource(),l(n)}).catch(l)})});return t.catch(function(){return e.inFlight=!1}),t},e.prototype.rebuildDefaults=function(e){this.workPackage.isNew&&this.setValue("description",e.description)},e.prototype.mergeWithPayload=function(e){var n=this,t=this.workPackage.$source;return this.form&&(t=this.form.payload.$source),_.each(this.changes,function(l,i){var o=n.schema[i];"object"==typeof o&&!0===o.writable?t._links[i]?e._links[i]=n.getLinkedValue(l,o):e[i]=n.changes[i]:Object(mn.a)("Trying to write "+i+" but is not writable in schema")}),e},e.prototype.buildPayloadFromChanges=function(){var e;return this.workPackage.isNew?(e=this.form?this.form.payload.$source:this.workPackage.$source)._links.attachments=this.workPackage.attachments.elements.map(function(e){return{href:e.href}}):e=this.minimalPayload,this.mergeWithPayload(e)},Object.defineProperty(e.prototype,"minimalPayload",{get:function(){return{lockVersion:this.workPackage.lockVersion,_links:{}}},enumerable:!0,configurable:!0}),e.prototype.getLinkedValue=function(e,n){if(_.isNil(e))return{href:null};var t=(n.type||"").startsWith("[]"),l=!1;if((e.forEach||e.elements)&&(l=!0),l&&t){var i=[];if(e)(e.forEach&&e||e.elements).forEach(function(e){e.href&&i.push({href:e.href})});return i}return{href:_.get(e,"href",null)}},Object.defineProperty(e.prototype,"schema",{get:function(){return(this.form||this.workPackage).schema},enumerable:!0,configurable:!0}),e.prototype.isWritable=function(e){var n=this.getSchemaName(e),t=this.schema[n];return t&&t.writable},e.prototype.humanName=function(e){return this.schema[e].name||e},e.prototype.getSchemaName=function(e){return!this.schema.hasOwnProperty("date")||"startDate"!==e&&"dueDate"!==e?e:"date"},e.prototype.buildResource=function(){if(this.empty)return this.resource=null,void this.wpEditing.updateValue(this.workPackage.id,this);var e=r.a({},this.workPackage.$source),n=this.halResourceService.createHalResourceOfType("WorkPackage",this.mergeWithPayload(e));n.overriddenSchema=this.schema,this.resource=n,this.wpEditing.updateValue(this.workPackage.id,this)},e}(),cr=function(e){function n(){var n=e.call(this)||this;return n.name="WP-Changesets",n.changesets=Object(u.h)(),n.initializeMembers(),n}return r.d(n,e),n}(u.b),dr=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.wpCacheService=t,l.stateGroup=new cr,l}return r.d(n,e),n.prototype.changesetFor=function(e){var n=e.id,t=this.wpCacheService.state(n).getValueOr(e),l=this.multiState.get(n);l.isPristine()&&l.putValue(new sr(this.injector,t));var i=l.value;return i.workPackage=t,i},n.prototype.temporaryEditResource=function(e){var n=Object(u.c)(this.wpCacheService.state(e),this.state(e));return Object(u.e)(n,function(e){return e.pipe(Object(v.a)(function(e){var n=e[0],t=e[1];return n&&t&&t.resource?t.resource:n}))})},n.prototype.stopEditing=function(e){var n=this.multiState.get(e);n&&n.value&&n.value.clear()},n.prototype.load=function(e){var n=this;return this.wpCacheService.require(e).then(function(e){return new sr(n.injector,e)})},n.prototype.loadAll=function(e){var n=this;return Promise.all(e.map(function(e){return n.load(e)}))},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.stateGroup.changesets},enumerable:!0,configurable:!0}),n}(fn),pr=function(){function e(){}return Object.defineProperty(e.prototype,"displayName",{get:function(){return this.schema.name||this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.resource[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.constructor.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return!!this.schema.required},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){return!!this.schema.writable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDefault",{get:function(){return this.schema.hasDefault},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return!this.value},Object.defineProperty(e.prototype,"unknownAttribute",{get:function(){return this.isEmpty&&!this.schema},enumerable:!0,configurable:!0}),e}(),hr=new l.InjectionToken("wp-editing-portal--schema"),fr=new l.InjectionToken("wp-editing-portal--handler"),gr=new l.InjectionToken("wp-editing-portal--changeset"),mr=function(e){function n(n,t,l,i,o,r,u,a){var s=e.call(this)||this;return s.I18n=n,s.elementRef=t,s.wpEditing=l,s.changeset=i,s.schema=o,s.handler=r,s.cdRef=u,s.injector=a,s.self=s,s.schema=s.schema||s.changeset.schema[s.name],s.wpEditing.state(s.changeset.workPackage.id).values$().pipe(Object(Ln.b)(s)).subscribe(function(e){if(s.changeset.form){if(!e.schema[s.name])return r.deactivate(!1);s.changeset=e,s.schema=s.changeset.schema[s.name],s.initialize(),s.cdRef.markForCheck()}}),s}return r.d(n,e),n.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.initialize()},n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"overflowingSelector",{get:function(){return this.$element?this.$element.closest(".__overflowing_element_container").data("overflowingIdentifier"):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inFlight",{get:function(){return this.handler.inFlight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.changeset.value(this.name)},set:function(e){this.changeset.setValue(this.name,this.parseValue(e))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this.changeset.getSchemaName(this.handler.fieldName)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return"subject"===this.name?this.I18n.t("js.placeholders.subject"):""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"resource",{get:function(){return this.changeset.workPackage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groupName",{get:function(){return this.changeset.form.schema[this.name].attributeGroup},enumerable:!0,configurable:!0}),n.prototype.initialize=function(){},n.prototype.parseValue=function(e){return e},n}(pr);function vr(e,n,t,l){var i=new WeakMap;return i.set(gr,n),i.set(fr,t),i.set(hr,l),new p.c(e,i)}var br=function(){function e(){this.fields={},this.classes={}}return e.prototype.fieldType=function(e){return this.fields[e]},e.prototype.getClassFor=function(e,n){void 0===n&&(n="unknown");var t=this.fieldType(e)||this.fieldType(n)||this.defaultFieldType;return this.classes[t]},e.prototype.addFieldType=function(e,n,t){return e.fieldType=n,this.register(e,t),this},e.prototype.extendFieldType=function(e,n){var t=this.classes[e]||this.getClassFor(e);return this.addFieldType(t,e,n)},e.prototype.register=function(e,n){var t=this;void 0===n&&(n=[]);var l=e.fieldType;n.forEach(function(e){return t.fields[e]=l}),this.classes[l]=e},e}(),yr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(br),wr=function(){function e(e,n,t){this.injector=e,this.editField=n,this.elementRef=t,this.onEditFieldReady=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.editFieldHandler&&this.schemaInput?(this.handler=this.editFieldHandler,this.schema=this.schemaInput,this.changeset=this.changesetInput):(this.handler=this.injector.get(fr),this.schema=this.injector.get(hr),this.changeset=this.injector.get(gr)),this.componentClass=this.editField.getClassFor(this.handler.fieldName,this.schema.type),this.fieldInjector=vr(this.injector,this.changeset,this.handler,this.schema)},e.prototype.ngOnDestroy=function(){this.onEditFieldReady.complete()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.onEditFieldReady.emit()})},e}(),kr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Cr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Ir(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"div",[],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-error":0}),(e()(),l["\u0275eld"](3,0,null,null,9,"form",[["novalidate",""],["role","form"],["tabindex","-1"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,5).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,5).onReset()&&i);"submit"===n&&(i=!1!==o.handler.handleUserSubmit()&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Pt.t,[],null,null),l["\u0275did"](5,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](7,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](8,0,null,null,1,"label",[["class","hidden-for-sighted"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["\u0275ted"](9,null,[" "," "," "])),(e()(),l["\u0275and"](16777216,null,null,2,null,Cr)),l["\u0275did"](11,671744,null,0,It.NgComponentOutlet,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null),l["\u0275did"](12,16384,null,0,tr.g,[It.NgComponentOutlet],null,null)],function(e,n){var t=n.component,i=l["\u0275inlineInterpolate"](1,"wp-inline-edit--active-field wp-edit-field inplace-edit ",t.handler.fieldName,""),o=e(n,2,0,t.handler.isErrorenous);e(n,1,0,i,o),e(n,11,0,t.componentClass,t.fieldInjector)},function(e,n){var t=n.component;e(n,3,0,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending),e(n,8,0,t.handler.htmlId),e(n,9,0,t.handler.fieldLabel,t.handler.errorMessageOnLabel)})}function Pr(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Ir)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.handler)},null)}var jr=l["\u0275ccf"]("edit-form-portal",wr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-form-portal",[],null,null,null,Pr,kr)),l["\u0275did"](1,4440064,null,0,wr,[l.Injector,yr,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{schemaInput:"schemaInput",changesetInput:"changesetInput",editFieldHandler:"editFieldHandler"},{onEditFieldReady:"onEditFieldReady"},[]),_r=new l.InjectionToken("wp-display-portal--user"),Rr=new l.InjectionToken("wp-display-portal--multi-line");var Sr=function(){return function(e,n){this.injector=e,this.elementRef=n,this.users=this.injector.get(_r),this.multiLines=this.injector.get(Rr)}}(),xr=[[".-multi-line[_ngcontent-%COMP%]{display:block;margin-bottom:2px}user-avatar[_ngcontent-%COMP%]{margin-right:5px}"]],Tr=l["\u0275crt"]({encapsulation:0,styles:xr,data:{}});function Or(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[", "]))],null,null)}function Er(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"span",[],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pod"](2,{"-multi-line":0}),(e()(),l["\u0275eld"](3,0,null,null,1,"user-avatar",[["data-class-list","avatar-medium"]],null,null,null,Ti,Ri)),l["\u0275did"](4,4243456,null,0,ji,[l.ElementRef,l.ChangeDetectorRef,_i.DomSanitizer,ve],{user:[0,"user"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Or)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,t.multiLines);e(n,1,0,l),e(n,4,0,n.context.$implicit),e(n,7,0,!t.multiLines&&!n.context.last)},function(e,n){e(n,5,0,n.context.$implicit.name)})}function Dr(e){return l["\u0275vid"](2,[(e()(),l["\u0275and"](16777216,null,null,1,null,Er)),l["\u0275did"](1,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,1,0,n.component.users)},null)}var Fr=l["\u0275ccf"]("user-field-portal",Sr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-field-portal",[],null,null,null,Dr,Tr)),l["\u0275did"](1,49152,null,0,Sr,[l.Injector,l.ElementRef],null,null)],null,null)},{userResources:"userResources",multiLines:"multiLines"},{},[]),Ar=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Nr(e){return l["\u0275vid"](0,[],null,null)}var Mr=l["\u0275ccf"]("ng-component",mr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Nr,Ar)),l["\u0275did"](1,245760,null,0,mr,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Vr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.updateValue=function(e){this.value=e,this.handler.handleUserSubmit()},n}(mr),qr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Lr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"input",[["class","wp-inline-edit--field wp-inline-edit--boolean-field"],["type","checkbox"]],[[1,"aria-required",0],[8,"checked",0],[8,"disabled",0],[8,"id",0]],[[null,"change"],[null,"keydown"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateValue(!i.value)&&l);"keydown"===n&&(l=!1!==i.handler.handleUserKeydown(t)&&l);return l},null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.required,t.value,t.inFlight,t.handler.htmlId)})}var $r=l["\u0275ccf"]("ng-component",Vr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Lr,qr)),l["\u0275did"](1,245760,null,0,Vr,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Hr=function(){function e(e,n,t,l,i){this.ConfigurationService=e,this.timezoneService=n,this.datepickerElem=t,this.date=l,this.options=i,this.datepickerFormat="yy-mm-dd",this.datepickerCont=jQuery(this.datepickerElem),this.datepickerInstance=null,this.initialize(i)}return e.prototype.initialize=function(e){var n=this.ConfigurationService.startOfWeekPresent()?this.ConfigurationService.startOfWeek():jQuery.datepicker._defaults.firstDay,t=_.extend({},e,{firstDay:n,showWeeks:!0,changeMonth:!0,changeYear:!0,dateFormat:this.datepickerFormat,defaultDate:this.timezoneService.formattedISODate(this.date),showButtonPanel:!0});this.datepickerInstance=this.datepickerCont.datepicker(t),this.datepickerCont.attr("autocomplete","off")},e.prototype.clear=function(){this.datepickerInstance.datepicker("setDate",null)},e.prototype.destroy=function(){this.hide(),this.datepickerInstance.datepicker("destroy")},e.prototype.hide=function(){this.datepickerInstance.datepicker("hide"),this.datepickerCont.scrollParent().off("scroll")},e.prototype.show=function(){this.datepickerInstance.datepicker("show"),this.hideDuringScroll()},e.prototype.reshow=function(){this.datepickerInstance.datepicker("show")},e.prototype.hideDuringScroll=function(){var e=this,n=null;this.datepickerCont.scrollParent().scroll(function(){e.datepickerInstance.datepicker("hide"),n&&clearTimeout(n),n=setTimeout(function(){e.visibleAndActive()&&e.datepickerInstance.datepicker("show")},50)})},e.prototype.visibleAndActive=function(){var e=this.datepickerCont;return document.elementFromPoint(e.offset().left,e.offset().top)===e[0]&&document.activeElement===e[0]},e}(),Br=function(){function e(e,n,t){this.elementRef=e,this.ConfigurationService=n,this.timezoneService=t,this.onChange=new l.EventEmitter,this.onClose=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.input=this.$element.find("input"),this.setup()},e.prototype.ngOnDestroy=function(){this.datePickerInstance&&this.datePickerInstance.destroy()},e.prototype.setup=function(){var e=this;this.input.focus(function(){return e.showDatePicker()}),this.input.keydown(function(n){e.isEmpty()&&e.datePickerInstance.clear()})},e.prototype.isEmpty=function(){return""===this.currentValue().trim()},e.prototype.currentValue=function(){return this.input.val()},e.prototype.showDatePicker=function(){var e,n=this,t={onSelect:function(e){n.datePickerInstance.hide();var t=e;n.isEmpty()&&(t=null),n.input.val(t),n.input.trigger("change"),n.onChange.emit(t)},onClose:function(){return n.onClose.emit()}};e=this.isEmpty&&this.initialDate?this.timezoneService.parseISODate(this.initialDate).toDate():this.currentValue(),this.datePickerInstance=new Hr(this.ConfigurationService,this.timezoneService,this.input,e,t),this.datePickerInstance.show()},e}(),zr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Wr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),l["\u0275ncd"](null,0)],null,null)}l["\u0275ccf"]("op-date-picker",Br,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-date-picker",[],null,null,null,Wr,zr)),l["\u0275did"](1,245760,null,0,Br,[l.ElementRef,Ne,qt],null,null)],function(e,n){e(n,1,0)},null)},{initialDate:"initialDate"},{onChange:"onChange",onClose:"onClose"},["*"]);var Qr=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.injector.get(qt),n}return r.d(n,e),n.prototype.onValueSelected=function(e){this.value=this.parser(e),this.handler.handleUserSubmit()},n.prototype.parser=function(e){return C(e,"YYYY-MM-DD",!0).isValid()?e:null},n.prototype.formatter=function(e){if(C(e,"YYYY-MM-DD",!0).isValid()){var n=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(n)}return null},Object.defineProperty(n.prototype,"defaultDate",{get:function(){return"dueDate"===this.name?this.resource.startDate:""},enumerable:!0,configurable:!0}),n}(mr),Ur=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Kr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"op-date-picker",[["tabindex","-1"]],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.onValueSelected(t)&&l);return l},Wr,zr)),l["\u0275did"](1,245760,null,0,Br,[l.ElementRef,Ne,qt],{initialDate:[0,"initialDate"]},{onChange:"onChange"}),(e()(),l["\u0275eld"](2,0,null,0,5,"input",[["class","wp-inline-edit--field"],["type","text"]],[[1,"required",0],[1,"placeholder",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,3)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,3).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,3)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,3)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=o.parser(t))&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](3,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](5,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](7,16384,null,0,Pt.i,[[4,Pt.h]],null,null)],function(e,n){var t=n.component;e(n,1,0,t.defaultDate),e(n,5,0,t.inFlight,t.formatter(t.value))},function(e,n){var t=n.component;e(n,2,0,t.required,t.placeholder,t.handler.htmlId,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}var Gr=l["\u0275ccf"]("ng-component",Qr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Kr,Ur)),l["\u0275did"](1,245760,null,0,Qr,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Yr=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.TimezoneService=n.injector.get(qt),n}return r.d(n,e),n.prototype.parser=function(e){if(!isNaN(e)){var n=parseFloat(e);return C.duration(n,"hours")}return e},n.prototype.formatter=function(e){return Number(C.duration(e).asHours().toFixed(2))},n.prototype.parseValue=function(e){return null===e?null:e.toISOString()},n}(mr),Zr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Jr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"input",[["class","wp-inline-edit--field"],["step","0.01"],["type","number"]],[[1,"aria-required",0],[1,"required",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=o.parser(t))&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](2,16384,null,0,Pt.s,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.s]),l["\u0275did"](4,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](6,16384,null,0,Pt.i,[[4,Pt.h]],null,null)],function(e,n){var t=n.component;e(n,4,0,t.inFlight,t.formatter(t.value))},function(e,n){var t=n.component;e(n,0,0,t.required,t.required,t.handler.htmlId,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending)})}var Xr=l["\u0275ccf"]("ng-component",Yr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Jr,Zr)),l["\u0275did"](1,245760,null,0,Yr,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),eu=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.locale=I18n.locale,n}return r.d(n,e),n}(mr),nu=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function tu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"input",[["class","wp-inline-edit--field"],["step","any"],["type","number"]],[[1,"aria-required",0],[1,"required",0],[1,"lang",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](2,16384,null,0,Pt.s,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.s]),l["\u0275did"](4,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](6,16384,null,0,Pt.i,[[4,Pt.h]],null,null)],function(e,n){var t=n.component;e(n,4,0,t.inFlight,t.value)},function(e,n){var t=n.component;e(n,0,1,[t.required,t.required,t.locale,t.handler.htmlId,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending])})}var lu=l["\u0275ccf"]("ng-component",eu,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,tu,nu)),l["\u0275did"](1,245760,null,0,eu,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),iu=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.locale=I18n.locale,n}return r.d(n,e),n}(mr),ou=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ru(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"input",[["class","wp-inline-edit--field"],["type","number"]],[[1,"aria-required",0],[1,"required",0],[1,"lang",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](2,16384,null,0,Pt.s,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.s]),l["\u0275did"](4,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](6,16384,null,0,Pt.i,[[4,Pt.h]],null,null)],function(e,n){var t=n.component;e(n,4,0,t.inFlight,t.value)},function(e,n){var t=n.component;e(n,0,1,[t.required,t.required,t.locale,t.handler.htmlId,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending])})}var uu=l["\u0275ccf"]("ng-component",iu,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,ru,ou)),l["\u0275did"](1,245760,null,0,iu,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),au=function(){function e(){this.onSave=new l.EventEmitter,this.onCancel=new l.EventEmitter}return e.prototype.save=function(){this.onSave.emit()},e.prototype.cancel=function(){this.onCancel.emit()},e}(),su=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function cu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","inplace-edit--controls"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"accessible-by-keyboard",[["class","inplace-edit--control inplace-edit--control--save"]],[[1,"disabled",0]],[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.save()&&l);return l},al,ul)),l["\u0275did"](2,49152,null,0,rl,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275eld"](3,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark"]],null,null,null,Zt,Gt)),l["\u0275did"](4,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["\u0275eld"](5,0,null,null,3,"accessible-by-keyboard",[["class","inplace-edit--control inplace-edit--control--cancel"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.cancel()&&l);return l},al,ul)),l["\u0275did"](6,49152,null,0,rl,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275eld"](7,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close"]],null,null,null,Zt,Gt)),l["\u0275did"](8,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,2,0,t.saveTitle);e(n,4,0,"icon-checkmark",t.saveTitle),e(n,6,0,t.cancelTitle);e(n,8,0,"icon-close",t.cancelTitle)},function(e,n){var t=n.component;e(n,1,0,t.field.required&&t.field.isEmpty()||void 0)})}function du(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","inplace-edit--dashboard"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,cu)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.field.handler.active)},null)}l["\u0275ccf"]("edit-field-controls",au,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-field-controls",[],null,null,null,du,su)),l["\u0275did"](1,49152,null,0,au,[],null,null)],null,null)},{cancelTitle:"cancelTitle",saveTitle:"saveTitle",field:"fieldController"},{onSave:"onSave",onCancel:"onCancel"},[]);var pu=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.pathHelper=n.injector.get(ve),n.field=n,n.initializationError=!1,n.isPreview=!1,n.previewHtml="",n.text={},n}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.handler.registerOnSubmit(function(){return n.getCurrentValue()}),this.text={attachmentLabel:this.I18n.t("js.label_formattable_attachment_hint"),save:this.I18n.t("js.inplace.button_save",{attribute:this.schema.name}),cancel:this.I18n.t("js.inplace.button_cancel",{attribute:this.schema.name})}},n.prototype.onCkeditorSetup=function(e){this.resource.isNew||setTimeout(function(){return e.editing.view.focus()})},n.prototype.getCurrentValue=function(){var e=this;return this.instance.getTransformedContent().then(function(n){e.rawValue=n})},n.prototype.onContentChange=function(e){this.rawValue=e},n.prototype.handleUserSubmit=function(){var e=this;return this.getCurrentValue().then(function(){e.handler.handleUserSubmit()}),!1},Object.defineProperty(n.prototype,"ckEditorContext",{get:function(){return{resource:this.resource,macros:"none",previewContext:this.previewContext}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"editorType",{get:function(){return"description"===this.name?"full":"constrained"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"previewContext",{get:function(){return this.resource.isNew&&this.resource.project?this.resource.project.href:this.resource.isNew?void 0:this.pathHelper.api.v3.work_packages.id(this.resource.id).path},enumerable:!0,configurable:!0}),n.prototype.reset=function(){this.instance&&this.instance.initialized&&(this.instance.content=this.rawValue)},Object.defineProperty(n.prototype,"rawValue",{get:function(){return this.value&&this.value.raw?this.value.raw:""},set:function(e){this.value={raw:e}},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return!(this.value&&this.value.raw)},Object.defineProperty(n.prototype,"isFormattable",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.initialize=function(){this.resource.isNew&&this.instance&&this.reset()},n}(mr),hu=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function fu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.handler.handleUserSubmit()&&l);"onCancel"===n&&(l=!1!==i.handler.handleUserCancel()&&l);return l},du,su)),l["\u0275did"](1,49152,null,0,au,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,1,0,t.text.cancel,t.text.save,t.field)},null)}function gu(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{instance:0}),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","textarea-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-ckeditor--wrapper op-ckeditor-element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"op-ckeditor",[],null,[[null,"onContentChange"],[null,"onInitializationFailed"],[null,"onInitialized"]],function(e,n,t){var l=!0,i=e.component;"onContentChange"===n&&(l=!1!==i.onContentChange(t)&&l);"onInitializationFailed"===n&&(l=!1!=(i.initializationError=!0)&&l);"onInitialized"===n&&(l=!1!==i.onCkeditorSetup(t)&&l);return l},Vo,No)),l["\u0275did"](4,245760,[[1,4]],0,Fo,[l.ElementRef,Tn,B.a,Ne,Do],{ckEditorType:[0,"ckEditorType"],context:[1,"context"],_content:[2,"_content"]},{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"}),(e()(),l["\u0275and"](16777216,null,null,1,null,fu)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.editorType,t.ckEditorContext,t.rawValue),e(n,6,0,!(t.handler.inEditMode||t.initializationError))},null)}var mu=l["\u0275ccf"]("ng-component",pu,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,gu,hu)),l["\u0275did"](1,245760,null,0,pu,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),vu=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.I18n=n.injector.get(B.a),n.options=[],n.text={requiredPlaceholder:n.I18n.t("js.placeholders.selection"),placeholder:n.I18n.t("js.placeholders.default"),save:n.I18n.t("js.inplace.button_save",{attribute:n.schema.name}),cancel:n.I18n.t("js.inplace.button_cancel",{attribute:n.schema.name})},n.appendTo=null,n.hiddenOverflowContainer=".__hidden_overflow_container",n.currentValueInvalid=!1,n.requestFocus=!1,n}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;this.nullOption={name:this.text.placeholder,$href:null},this.handler.$onUserActivate.pipe(Object(Ln.b)(this)).subscribe(function(){n.requestFocus=0===n.options.length,n.requestFocus||n.openAutocompleteSelectField()}),e.prototype.ngOnInit.call(this),this.appendTo=this.overflowingSelector},Object.defineProperty(n.prototype,"value",{get:function(){var e=this.changeset.value(this.name);return e?e[0]:e},enumerable:!0,configurable:!0}),n.prototype.buildSelectedOption=function(){var e=this,n=this.changeset.value(this.name);return n?n.map(function(n){return e.findValueOption(n)}):[]},Object.defineProperty(n.prototype,"selectedOption",{get:function(){return this._selectedOption},set:function(e){var n=this;this._selectedOption=e;var t=_.castArray(e).map(function(e){return t=e,(l=_.find(n.options,function(e){return e.$href===t.$href})||n.nullOption)&&""===l.$href&&(l.$href=null),l;var t,l});this.changeset.setValue(this.name,t)},enumerable:!0,configurable:!0}),n.prototype.onOpen=function(){jQuery(this.hiddenOverflowContainer).addClass("-hidden-overflow")},n.prototype.onClose=function(){jQuery(this.hiddenOverflowContainer).removeClass("-hidden-overflow")},n.prototype.openAutocompleteSelectField=function(){var e=this;window.setTimeout(function(){e.ngSelectComponent.open()},0)},n.prototype.findValueOption=function(e){var n;return e&&(n=_.find(this.valueOptions,function(n){return n.$href===e.$href})),n||this.nullOption},n.prototype.setValues=function(e,n){void 0===n&&(n=!1),n&&e.sort(function(e,n){var t=e.name.toLowerCase(),l=n.name.toLowerCase();return t<l?-1:t>l?1:0}),this.options=e||[],this.valueOptions=this.options.map(function(e){return{name:e.name,$href:e.$href}}),this._selectedOption=this.buildSelectedOption(),this.checkCurrentValueValidity(),this.options.length>0&&this.requestFocus&&(this.openAutocompleteSelectField(),this.requestFocus=!1)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this.loadValues()},n.prototype.loadValues=function(){var e=this,n=this.schema.allowedValues;if(Array.isArray(n))this.setValues(n);else{if(this.schema.allowedValues)return this.schema.allowedValues.$load().then(function(n){n.count>0&&"Project"===n.elements[0]._type?e.setValues(n.elements,!0):e.setValues(n.elements)});this.setValues([])}return Promise.resolve()},n.prototype.checkCurrentValueValidity=function(){var e=this;this.value?this.currentValueInvalid=!_.some(this.value,function(n){return _.some(e.options,function(e){return e.$href===n.$href})}):this.currentValueInvalid=!!this.schema.required},n}(mr),bu=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function yu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.handler.handleUserSubmit()&&l);"onCancel"===n&&(l=!1!==i.handler.handleUserCancel()&&l);return l},du,su)),l["\u0275did"](1,49152,null,0,au,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,1,0,t.text.cancel,t.text.save,t.self)},null)}function wu(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{ngSelectComponent:0}),(e()(),l["\u0275eld"](1,0,null,null,22,"div",[["class","textarea-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,19,"ng-select",[["bindLabel","name"],["class","ng-select"],["role","listbox"]],[[8,"id",0],[1,"required",0],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"open"],[null,"close"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,6).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(o.selectedOption=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t,!0)&&i);"open"===n&&(i=!1!==o.onOpen()&&i);"close"===n&&(i=!1!==o.onClose()&&i);return i},Ct.b,Ct.a)),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](4,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275did"](6,4964352,[[1,4]],11,jt.a,[[8,null],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],bindLabel:[1,"bindLabel"],clearable:[2,"clearable"],dropdownPosition:[3,"dropdownPosition"],appendTo:[4,"appendTo"],closeOnSelect:[5,"closeOnSelect"],hideSelected:[6,"hideSelected"],virtualScroll:[7,"virtualScroll"],multiple:[8,"multiple"],clearSearchOnAdd:[9,"clearSearchOnAdd"]},{openEvent:"open",closeEvent:"close"}),l["\u0275qud"](335544320,2,{optionTemplate:0}),l["\u0275qud"](335544320,3,{optgroupTemplate:0}),l["\u0275qud"](335544320,4,{labelTemplate:0}),l["\u0275qud"](335544320,5,{multiLabelTemplate:0}),l["\u0275qud"](335544320,6,{headerTemplate:0}),l["\u0275qud"](335544320,7,{footerTemplate:0}),l["\u0275qud"](335544320,8,{notFoundTemplate:0}),l["\u0275qud"](335544320,9,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,10,{loadingTextTemplate:0}),l["\u0275qud"](335544320,11,{tagTemplate:0}),l["\u0275qud"](603979776,12,{ngOptions:1}),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](19,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](21,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,yu)),l["\u0275did"](23,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,"wp-inline-edit--field -multi-select"),e(n,4,0,t.required);e(n,6,0,t.valueOptions,"name",!t.required,"top",t.appendTo,!1,!0,!0,!0,!0),e(n,19,0,t.inFlight,t.selectedOption),e(n,23,0,!t.handler.inEditMode)},function(e,n){e(n,2,1,[n.component.handler.htmlId,l["\u0275nov"](n,4).required?"":null,!l["\u0275nov"](n,6).multiple,l["\u0275nov"](n,6).typeahead,l["\u0275nov"](n,6).multiple,l["\u0275nov"](n,6).addTag,l["\u0275nov"](n,6).searchable,l["\u0275nov"](n,6).isOpen,l["\u0275nov"](n,6).disabled,l["\u0275nov"](n,6).filtered,l["\u0275nov"](n,21).ngClassUntouched,l["\u0275nov"](n,21).ngClassTouched,l["\u0275nov"](n,21).ngClassPristine,l["\u0275nov"](n,21).ngClassDirty,l["\u0275nov"](n,21).ngClassValid,l["\u0275nov"](n,21).ngClassInvalid,l["\u0275nov"](n,21).ngClassPending])})}var ku=l["\u0275ccf"]("ng-component",vu,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,wu,bu)),l["\u0275did"](1,245760,null,0,vu,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Cu=t("g4QF"),Iu=function(){function e(){this.config={user:"name",project:"name"}}return e.prototype.sort=function(e,n){if(0===e.length)return e;var t=n||e[0]._type;if(!t)return e;var l=this.sortingProperty(t);return l?_.sortBy(e,function(e){return e[l].toLowerCase()}):e},e.prototype.sortingProperty=function(e){return e=e.toLowerCase().replace(/^\[\]/,""),this.config[e]},e.prototype.hasSortingProperty=function(e){return void 0!==this.sortingProperty(e)},e}(),Pu=function(){function e(){this._fields=[]}return e.prototype.register=function(e,n){this._fields.push({attribute:n,component:e})},e.prototype.getAutocompleterOfAttribute=function(e){var n=_.find(this._fields,function(n){return n.attribute===e});return n?n.component:void 0},e}(),ju=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.selectAutocompleterRegister=n.injector.get(Pu),n.template="/components/wp-edit/field-types/wp-edit-select-field.directive.html",n.appendTo=null,n.hiddenOverflowContainer=".__hidden_overflow_container",n.referenceOutputs={onCreate:function(e){return n.onCreate(e)},onChange:function(e){return n.onChange(e)},onKeydown:function(e){return n.handler.handleUserKeydown(e,!0)},onOpen:function(){return n.onOpen()},onClose:function(){return n.onClose()},onAfterViewInit:function(e){return n._autocompleterComponent=e}},n}return r.d(n,e),n.prototype.initialize=function(){var e=this;this.halSorting=this.injector.get(Iu),this.text={requiredPlaceholder:this.I18n.t("js.placeholders.selection"),placeholder:this.I18n.t("js.placeholders.default")};var n=this.loadValues();this.handler.$onUserActivate.pipe(Object(Ln.b)(this)).subscribe(function(){n.then(function(){e._autocompleterComponent.openDirectly=!0})})},n.prototype.autocompleterComponent=function(){var e=this.schema.type;return this.selectAutocompleterRegister.getAutocompleterOfAttribute(e)||_t},n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.appendTo=this.overflowingSelector},Object.defineProperty(n.prototype,"selectedOption",{get:function(){var e=this.value?this.value.$href:null;return _.find(this.valueOptions,function(n){return n.$href===e})},set:function(e){var n=_.find(this.options,function(n){return n.$href===e.$href});n&&""===n.$href&&(n.$href=null),this.value=n},enumerable:!0,configurable:!0}),n.prototype.setValues=function(e){this.options=this.halSorting.sort(e),this.addEmptyOption(),this.valueOptions=this.options.map(function(e){return{name:e.name,$href:e.$href}})},n.prototype.loadValues=function(){var e=this,n=this.schema.allowedValues;if(Array.isArray(n))this.setValues(n);else{if(n)return n.$load(!1).then(function(n){e.setValues(n.elements)});this.setValues([])}return Promise.resolve()},n.prototype.addValue=function(e){this.options.push(e),this.valueOptions.push({name:e.name,$href:e.$href})},Object.defineProperty(n.prototype,"currentValueInvalid",{get:function(){var e=this;return!!(this.value&&!_.some(this.options,function(n){return n.$href===e.value.$href})||!this.value&&this.schema.required)},enumerable:!0,configurable:!0}),n.prototype.onCreate=function(e){this.addValue(e),this.selectedOption={name:e.name,$href:e.$href},this.handler.handleUserSubmit()},n.prototype.onOpen=function(){jQuery(this.hiddenOverflowContainer).addClass("-hidden-overflow")},n.prototype.onClose=function(){jQuery(this.hiddenOverflowContainer).removeClass("-hidden-overflow")},n.prototype.onChange=function(e){this.selectedOption={name:e.name,$href:e.$href},this.handler.handleUserSubmit()},n.prototype.addEmptyOption=function(){var e=this;this.schema.required||void 0===_.find(this.options,function(n){return n.name===e.text.placeholder})&&this.options.unshift({name:this.text.placeholder,$href:""})},n}(mr),_u=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ru(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](1,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](3,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"],ndcDynamicOutputs:[1,"ndcDynamicOutputs"]},null),l["\u0275pod"](4,{availableValues:0,appendTo:1,model:2,required:3,disabled:4,id:5,createAllowed:6,finishedLoading:7,classes:8})],function(e,n){var t=n.component;e(n,1,0,t.autocompleterComponent());var l=e(n,4,0,t.valueOptions,t.appendTo,t.selectedOption?t.selectedOption:"",t.required,t.inFlight,t.handler.htmlId,!1,!0,"wp-inline-edit--field");e(n,3,0,l,t.referenceOutputs)},null)}var Su=l["\u0275ccf"]("ng-component",ju,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ru,_u)),l["\u0275did"](1,245760,null,0,ju,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),xu=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.shouldFocus="subject"===n.name,n}return r.d(n,e),n}(mr),Tu=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ou(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"input",[["class","wp-inline-edit--field"],["type","text"]],[[1,"aria-required",0],[1,"required",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](3,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](5,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](6,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null)],function(e,n){var t=n.component;e(n,3,0,t.inFlight,t.value),e(n,6,0,t.shouldFocus)},function(e,n){var t=n.component;e(n,0,0,t.required,t.required,t.handler.htmlId,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending)})}var Eu=l["\u0275ccf"]("ng-component",xu,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ou,Tu)),l["\u0275did"](1,245760,null,0,xu,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Du=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(mr),Fu=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Au(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"input",[["class","wp-inline-edit--field"],["disabled",""],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](3,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},null),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](5,16384,null,0,Pt.i,[[4,Pt.h]],null,null)],function(e,n){e(n,3,0,"",n.component.value)},function(e,n){e(n,0,0,n.component.handler.htmlId,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending)})}var Nu=l["\u0275ccf"]("ng-component",Du,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Au,Fu)),l["\u0275did"](1,245760,null,0,Du,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Mu=t("FC3Z"),Vu=t("Yh/3"),qu=t("6bXR"),Lu=function(){function e(e){this.wpCacheService=e,this.count=0}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.loadWorkPackage(this.wpId.toString()).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.count=_.size(n.watchers.elements)})},e.prototype.ngOnDestroy=function(){},e}(),$u=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Hu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","wp-tabs-count"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.count)})}function Bu(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Hu)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.count>0)},null)}l["\u0275ccf"]("wp-watchers-count",Lu,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watchers-count",[],null,null,null,Bu,$u)),l["\u0275did"](1,245760,null,0,Lu,[yn],null,null)],function(e,n){e(n,1,0)},null)},{wpId:"wpId"},{},[]);var zu=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.updateElements=function(){var e=this;return this.$href?this.$load().then(function(n){return e.elements=n.elements}):Promise.resolve()},n}(z),Wu=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.$initialize=function(n){e.prototype.$initialize.call(this,n),this.elements=this.elements||[]},n}(zu),Qu=function(){function e(e,n){this.http=e,this.halResource=n}return e.prototype.uploadAndMapResponse=function(e,n,t){void 0===t&&(t="post");var l=this.upload(e,n);return{uploads:l.uploads,finished:l.finished.then(function(e){return e.map(function(e){return{response:e,uploadUrl:e.staticDownloadLocation.href}})})}},e.prototype.upload=function(e,n,t){var l=this;void 0===t&&(t="post"),n=_.filter(n,function(e){return"directory"!==e.type});var i=_.map(n,function(n){return l.uploadSingle(e,n,t)});return{uploads:i,finished:this.whenFinished(i)}},e.prototype.uploadSingle=function(e,n,t,l){void 0===t&&(t="post"),void 0===l&&(l="json");var i=new FormData,o={description:n.description,fileName:n.customName||n.name};return i.append("metadata",JSON.stringify(o)),i.append("file",n,o.fileName),[n,this.http.request(t,e,{body:i,observe:"events",withCredentials:!0,responseType:l,reportProgress:!0}).pipe(Object(Gn.a)())]},e.prototype.whenFinished=function(e){var n=this,t=e.map(function(e){e[0];return e[1].pipe(Object(g.a)(function(e){return e.type===L.g.Response}),Object(v.a)(function(e){return n.halResource.createHalResource(e.body)})).toPromise()});return Promise.all(t)},e}();function Uu(e){return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"canAddAttachments",{get:function(){return!!this.$links.addAttachment||this.isNew},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasAttachments",{get:function(){return _.get(this.attachments,"elements.length",0)>0},enumerable:!0,configurable:!0}),n.prototype.lookupDownloadLocationByName=function(e){if(!this.attachments||!this.attachments.elements)return null;var n=_.find(this.attachments.elements,function(n){return n.name===e});return _.get(n,"staticDownloadLocation.href",null)},n.prototype.removeAttachment=function(e){var n=this;return _.pull(this.attachments.elements,e),e.$isHal?e.delete().then(function(){n.attachmentsBackend?n.updateAttachments():n.attachments.count=Math.max(n.attachments.count-1,0)}).catch(function(t){n.wpNotificationsService.handleRawError(t,n),n.attachments.elements.push(e)}):Promise.resolve()},n.prototype.uploadAttachments=function(e){var n=this,t=this.performUpload(e),l=t.uploads,i=t.finished,o=I18n.t("js.label_upload_notification",this),r=this.NotificationsService.addAttachmentUpload(o,l);return i.then(function(e){return setTimeout(function(){return n.NotificationsService.remove(r)},700),n.attachmentsBackend&&!n.isNew?n.updateAttachments():(n.attachments.count+=e.length,e.forEach(function(e){n.attachments.elements.push(e.response)})),e}).catch(function(e){var t;return console.error("Error while uploading: %O",e),t=e.error instanceof ErrorEvent?n.I18n.t("js.error_attachment_upload",{error:e}):"Error"===_.get(e,"error._type")?e.error.message:e.error,n.wpNotificationsService.handleRawError(t),t||I18n.t("js.error.internal")})},n.prototype.performUpload=function(e){var n="";return n=!this.isNew&&this.id&&this.attachmentsBackend?this.addAttachment.$link.href:this.pathHelper.api.v3.attachments.path,this.opFileUpload.uploadAndMapResponse(n,e)},n.prototype.$initialize=function(n){this.NotificationsService=this.injector.get(Tn),this.wpNotificationsService=this.injector.get(On),this.opFileUpload=this.injector.get(Qu),this.pathHelper=this.injector.get(ve),e.prototype.$initialize.call(this,n);var t=this.attachments||{$source:{},elements:[]};this.attachments=new Wu(this.injector,t,!1,this.halInitializer,"HalResource")},n}(e)}var Ku=Uu(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.I18n=n.injector.get(B.a),n.states=n.injector.get(s),n.workPackageDmService=n.injector.get(vn),n.wpCacheService=n.injector.get(yn),n.schemaCacheService=n.injector.get(gn),n.NotificationsService=n.injector.get(Tn),n.wpNotificationsService=n.injector.get(On),n.pathHelper=n.injector.get(ve),n.opFileUpload=n.injector.get(Qu),n.attachmentsBackend=!0,n}return r.d(n,e),Object.defineProperty(n.prototype,"ancestorIds",{get:function(){return this.ancestors.map(function(e){return e.id})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReadonly",{get:function(){return this.status&&this.status.isReadonly},enumerable:!0,configurable:!0}),n.prototype.subjectWithType=function(e){return void 0===e&&(e=40),""+(this.type?this.type.name+": ":"")+this.subjectWithId(e)},n.prototype.subjectWithId=function(e){void 0===e&&(e=40);var n=this.isNew?"":" (#"+this.id+")";return""+_.truncate(this.subject,{length:e})+n},Object.defineProperty(n.prototype,"isNew",{get:function(){return"new"===this.id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isMilestone",{get:function(){return this.schema.hasOwnProperty("date")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLeaf",{get:function(){var e=this.$links.children;return!(e&&e.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEditable",{get:function(){return this.isNew||!!this.$links.update},enumerable:!0,configurable:!0}),n.prototype.isAttributeEditable=function(e){return this.isEditable&&(!this.isReadonly||"status"===e)},n.prototype.performUpload=function(e){var n="";return n=this.isNew?this.pathHelper.api.v3.attachments.path:this.attachments.$href,this.opFileUpload.uploadAndMapResponse(n,e)},n.prototype.getSchemaName=function(e){return!this.isMilestone||"startDate"!==e&&"dueDate"!==e?e:"date"},n.prototype.isParentOf=function(e){return e.parent.$links.self.$link.href===this.$links.self.$link.href},n.prototype.updateLinkedResources=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var l={};n.forEach(function(n){var t=e[n];l[n]=t?t.$update():Promise.reject(void 0)});var i=Promise.all(_.values(l));return i.then(function(){e.wpCacheService.touch(e.id)}),i},n.prototype.updateAttachments=function(){return this.updateLinkedResources("activities","attachments").then(function(e){return e.attachments})},n.prototype.initializeNewResource=function(e){var n=this;this.overriddenSchema=e.schema,this.form=Promise.resolve(e),this.$source.id="new",this.__initialized_at=Date.now(),this.update=this.$links.update=e.$links.self,this.updateImmediately=this.$links.updateImmediately=function(e){return n.workPackageDmService.createWorkPackage(e)}},n.prototype.retainFrom=function(e){this.__initialized_at=e.__initialized_at},n.prototype.$initialize=function(n){e.prototype.$initialize.call(this,n);var t=this.attachments||{$source:{},elements:[]};this.attachments=new Wu(this.injector,_.get(t,"$source",t),!1,this.halInitializer,"HalResource")},n.prototype.$linkableKeys=function(){return _.without(e.prototype.$linkableKeys.call(this),"schema")},Object.defineProperty(n.prototype,"schema",{get:function(){if(this.hasOverriddenSchema)return this.overriddenSchema;var e=this.schemaCacheService.state(this);if(!e.hasValue())throw"Accessing schema of "+this.id+" without it being loaded.";return e.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasOverriddenSchema",{get:function(){return null!=this.overriddenSchema},enumerable:!0,configurable:!0}),n}(z)),Gu=t("F/XL"),Yu=t("Gi3i"),Zu=t("ad02"),Ju=function(){function e(e,n,t,i,o,r,u,s){var c=this;this.querySpace=e,this.pathHelper=n,this.wpNotificationsService=t,this.CurrentProject=i,this.halResourceService=o,this.schemaCacheService=r,this.cdRef=u,this.I18n=s,this.text={placeholder:this.I18n.t("js.relations_autocomplete.placeholder")},this.inputPlaceholder=this.text.placeholder,this.additionalFilters=[],this.appendToContainer="body",this.onCancel=new l.EventEmitter,this.onReferenced=new l.EventEmitter,this.onEmptySelected=new l.EventEmitter,this.isLoading=!1,this.searchInput$=new a.a,this.results$=this.searchInput$.pipe(Object(Yu.a)(250),Object(Zu.a)(),Object(_n.a)(function(){return c.isLoading=!0}),Object(Un.a)(function(e){return c.autocompleteWorkPackages(e)}))}return e.prototype.ngAfterContentInit=function(){var e=this;this.ngSelectComponent&&setTimeout(function(){e.ngSelectComponent.focus()},25)},e.prototype.cancel=function(){this.onCancel.emit()},e.prototype.onWorkPackageSelected=function(e){var n=this;e&&this.schemaCacheService.ensureLoaded(e).then(function(){n.onReferenced.emit(e),n.ngSelectComponent.close()})},e.prototype.autocompleteWorkPackages=function(e){var n=this;return 0===e.length?(this.isLoading=!1,Object(Gu.a)([])):(e=e.replace(/^#/,""),Object(Qn.a)(this.workPackage.availableRelationCandidates.$link.$fetch({query:e,filters:JSON.stringify(this.additionalFilters),type:this.filterCandidatesFor||this.selectedRelationType})).pipe(Object(v.a)(function(e){return e.elements}),Object(H.a)(function(e){return n.wpNotificationsService.handleRawError(e),Object(Gu.a)([])}),Object(_n.a)(function(){return n.isLoading=!1})))},e}(),Xu=[["ng-select.wp-inline-create--reference-autocompleter{border:none}ng-select.wp-inline-create--reference-autocompleter .ng-clear-wrapper{display:none}"]],ea=l["\u0275crt"]({encapsulation:2,styles:Xu,data:{}});function na(e){return l["\u0275vid"](0,[(e()(),l["\u0275ted"](0,null,[" "," #"," "," "]))],null,function(e,n){e(n,0,0,n.context.item.type.name,n.context.item.id,n.context.item.subject)})}function ta(e){return l["\u0275vid"](0,[(e()(),l["\u0275ted"](0,null,[" "," #"," "," "]))],null,function(e,n){e(n,0,0,n.context.item.type.name,n.context.item.id,n.context.item.subject)})}function la(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{ngSelectComponent:0}),(e()(),l["\u0275eld"](1,0,null,null,20,"div",[["class","wp-relations--autocomplete"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,19,"ng-select",[["class","ng-select"],["ngClass","wp-inline-create--reference-autocompleter"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null]],[[null,"close"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleKeyDown(t)&&i);"close"===n&&(i=!1!==o.cancel()&&i);"change"===n&&(i=!1!==o.onWorkPackageSelected(t)&&i);return i},Ct.b,Ct.a)),l["\u0275prd"](5120,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](4,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](5,4964352,[[1,4]],11,jt.a,[[8,null],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],placeholder:[1,"placeholder"],appendTo:[2,"appendTo"],loading:[3,"loading"],closeOnSelect:[4,"closeOnSelect"],typeahead:[5,"typeahead"],multiple:[6,"multiple"]},{changeEvent:"change",closeEvent:"close"}),l["\u0275qud"](335544320,2,{optionTemplate:0}),l["\u0275qud"](335544320,3,{optgroupTemplate:0}),l["\u0275qud"](335544320,4,{labelTemplate:0}),l["\u0275qud"](335544320,5,{multiLabelTemplate:0}),l["\u0275qud"](335544320,6,{headerTemplate:0}),l["\u0275qud"](335544320,7,{footerTemplate:0}),l["\u0275qud"](335544320,8,{notFoundTemplate:0}),l["\u0275qud"](335544320,9,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,10,{loadingTextTemplate:0}),l["\u0275qud"](335544320,11,{tagTemplate:0}),l["\u0275qud"](603979776,12,{ngOptions:1}),l["\u0275pid"](131072,It.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275and"](0,[[4,2]],null,1,null,na)),l["\u0275did"](19,16384,null,0,jt.g,[l.TemplateRef],null,null),(e()(),l["\u0275and"](0,[[2,2]],null,1,null,ta)),l["\u0275did"](21,16384,null,0,jt.f,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,4,0,"wp-inline-create--reference-autocompleter");e(n,5,0,l["\u0275unv"](n,5,0,l["\u0275nov"](n,17).transform(t.results$)),t.inputPlaceholder,t.appendToContainer,t.isLoading,!0,t.searchInput$,!1)},function(e,n){e(n,2,0,!l["\u0275nov"](n,5).multiple,l["\u0275nov"](n,5).typeahead,l["\u0275nov"](n,5).multiple,l["\u0275nov"](n,5).addTag,l["\u0275nov"](n,5).searchable,l["\u0275nov"](n,5).isOpen,l["\u0275nov"](n,5).disabled,l["\u0275nov"](n,5).filtered)})}l["\u0275ccf"]("wp-relations-autocomplete",Ju,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-autocomplete",[],null,null,null,la,ea)),l["\u0275did"](1,1097728,null,0,Ju,[y,ve,On,Vn,Y,gn,l.ChangeDetectorRef,B.a],null,null)],null,null)},{inputPlaceholder:"inputPlaceholder",workPackage:"workPackage",selectedRelationType:"selectedRelationType",filterCandidatesFor:"filterCandidatesFor",additionalFilters:"additionalFilters",appendToContainer:"appendToContainer"},{onCancel:"onCancel",onReferenced:"onReferenced",onEmptySelected:"onEmptySelected"},[]);var ia=function(){function e(e,n,t,l,i,o){this.$state=e,this.states=n,this.wpTableRefresh=t,this.wpNotificationsService=l,this.pathHelper=i,this.wpCacheService=o}return e.prototype.changeParent=function(e,n){var t=this,l={lockVersion:e.lockVersion};return l._links=n?{parent:{href:this.pathHelper.api.v3.work_packages.id(n).toString()}}:{parent:{href:null}},e.changeParent(l).then(function(l){return t.wpCacheService.updateWorkPackage(l),t.wpNotificationsService.showSave(l),t.wpTableRefresh.request("Changed parent of "+e.id+" to "+n,{visible:!0}),l}).catch(function(n){return t.wpNotificationsService.handleRawError(n,e),Promise.reject(n)})},e.prototype.removeParent=function(e){return this.changeParent(e,null)},e.prototype.addExistingChildWp=function(e,n){var t=this;return this.wpCacheService.require(n).then(function(n){return t.changeParent(n,e.id).then(function(n){return t.wpCacheService.loadWorkPackage(e.id,!0),t.wpTableRefresh.request("Added new child to "+e.id,{visible:!0}),n})})},e.prototype.addNewChildWp=function(e){var n=this;e.project.$load().then(function(){var t,l=["work-packages.list.new",{parent_id:e.id}];n.$state.includes("work-packages.show")&&(l[0]="work-packages.new"),(t=n.$state).go.apply(t,l)})},e.prototype.removeChild=function(e){var n=this;return e.$load().then(function(){var t=e.parent;return e.changeParent({_links:{parent:{href:null}},lockVersion:e.lockVersion}).then(function(e){n.wpCacheService.loadWorkPackage(t.id,!0),n.wpCacheService.updateWorkPackage(e)}).catch(function(t){return n.wpNotificationsService.handleRawError(t,e),Promise.reject(t)})})},e}(),oa=function(){function e(e,n,t){this.I18n=e,this.wpRelationsHierarchy=n,this.wpNotifications=t,this.onSwitch=new l.EventEmitter,this.isSaving=!1,this.text={edit_parent:this.I18n.t("js.relation_buttons.change_parent"),set_or_remove_parent:this.I18n.t("js.relations_autocomplete.parent_placeholder"),remove_parent:this.I18n.t("js.relation_buttons.remove_parent"),set_parent:this.I18n.t("js.relation_buttons.set_parent")}}return e.prototype.canModifyParent=function(){return!!this.workPackage.changeParent},Object.defineProperty(e.prototype,"parent",{get:function(){return this.workPackage&&this.workPackage.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this.editing},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.toggle(!1)},e.prototype.open=function(){this.toggle(!0)},e.prototype.updateParent=function(e){var n=this;this.close();var t=e?e.id:null;_.get(this.parent,"id",null)!==t&&(this.isSaving=!0,this.wpRelationsHierarchy.changeParent(this.workPackage,t).catch(function(e){n.wpNotifications.handleRawError(e,n.workPackage)}).then(function(){return n.isSaving=!1}))},e.prototype.toggle=function(e){this.editing!==e&&(this.editing=e,this.onSwitch.emit(this.editing))},e}(),ra=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ua(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"a",[["class","wp-breadcrumb-parent breadcrumb-project-title nocut"],["uiSref","work-packages.show.activity"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,2).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Mu.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](2,737280,null,0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](3,{workPackageId:0}),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=e(n,3,0,n.component.parent.id);e(n,2,0,"work-packages.show.activity",t)},function(e,n){var t=n.component;e(n,0,0,t.parent.name),e(n,4,0,t.parent.name)})}function aa(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.set_parent)})}function sa(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.open()&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275and"](16777216,null,0,1,null,aa)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,l["\u0275inlineInterpolate"](1,"wp-relation--parent-change -no-decoration hide-when-print icon-small ",t.parent?"icon-edit icon5":"icon-add icon4",""),t.parent?t.text.edit_parent:t.text.set_parent),e(n,3,0,!t.parent)},null)}function ca(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"accessible-by-keyboard",[["linkClass","wp-relation--parent-remove hide-when-print -no-decoration icon-small icon-remove icon4"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.updateParent(null)&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"]},{execute:"execute"})],function(e,n){e(n,1,0,"wp-relation--parent-remove hide-when-print -no-decoration icon-small icon-remove icon4",n.component.text.remove_parent)},null)}function da(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ua)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,sa)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ca)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.parent),e(n,4,0,t.canModifyParent()),e(n,6,0,t.canModifyParent()&&t.parent)},null)}function pa(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-autocomplete",[["filterCandidatesFor","parent"]],null,[[null,"onCancel"],[null,"onReferenced"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.close()&&l);"onReferenced"===n&&(l=!1!==i.updateParent(t)&&l);return l},la,ea)),l["\u0275did"](1,1097728,null,0,Ju,[y,ve,On,Vn,Y,gn,l.ChangeDetectorRef,B.a],{inputPlaceholder:[0,"inputPlaceholder"],workPackage:[1,"workPackage"],filterCandidatesFor:[2,"filterCandidatesFor"]},{onCancel:"onCancel",onReferenced:"onReferenced"})],function(e,n){var t=n.component;e(n,1,0,t.text.set_or_remove_parent,t.workPackage,"parent")},null)}function ha(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,da)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,pa)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.active),e(n,3,0,t.active)},null)}l["\u0275ccf"]("wp-breadcrumb-parent",oa,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-breadcrumb-parent",[],null,null,null,ha,ra)),l["\u0275did"](1,49152,null,0,oa,[B.a,ia,On],null,null)],null,null)},{workPackage:"workPackage"},{onSwitch:"onSwitch"},[]);var fa=function(){function e(e){this.I18n=e,this.text={parent:this.I18n.t("js.relations_hierarchy.parent_headline"),hierarchy:this.I18n.t("js.relations_hierarchy.hierarchy_headline")},this.inputActive=!1}return Object.defineProperty(e.prototype,"hierarchyCount",{get:function(){return this.workPackage.ancestors.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hierarchyLabel",{get:function(){return 1===this.hierarchyCount?this.text.parent:this.text.hierarchy},enumerable:!0,configurable:!0}),e}(),ga=[[".active-parent-select[_ngcontent-%COMP%]{width:100%}"]],ma=l["\u0275crt"]({encapsulation:0,styles:ga,data:{}});function va(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","wp-breadcrumb--ellipsed"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"icon4 icon-small icon-arrow-right5":0}),(e()(),l["\u0275eld"](3,0,null,null,3,"a",[["class","breadcrumb-project-title nocut"],["uiSref","work-packages.show.activity"]],[[1,"title",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,5).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Mu.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](5,737280,null,0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](6,{workPackageId:0})],function(e,n){var t=e(n,2,0,!n.parent.context.first);e(n,1,0,"wp-breadcrumb--ellipsed",t);var l=e(n,6,0,n.parent.context.$implicit.id);e(n,5,0,"work-packages.show.activity",l)},function(e,n){e(n,3,0,n.parent.context.$implicit.name,n.parent.context.$implicit.name)})}function ba(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,va)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,!n.context.last)},null)}function ya(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](3,null,["",": "])),(e()(),l["\u0275and"](16777216,null,null,1,null,ba)),l["\u0275did"](5,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,5,0,n.component.workPackage.ancestors)},function(e,n){e(n,3,0,n.component.hierarchyLabel)})}function wa(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","wp-breadcrumb -show"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"ul",[["class","breadcrumb"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ya)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](4,0,null,null,4,"li",[],null,null,null,null,null)),l["\u0275did"](5,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pod"](6,{"active-parent-select":0,"icon4 icon-small icon-arrow-right5":1}),(e()(),l["\u0275eld"](7,0,null,null,1,"wp-breadcrumb-parent",[],null,[[null,"onSwitch"]],function(e,n,t){var l=!0,i=e.component;"onSwitch"===n&&(l=!1!=(i.inputActive=!i.inputActive)&&l);return l},ha,ra)),l["\u0275did"](8,49152,null,0,oa,[B.a,ia,On],{workPackage:[0,"workPackage"]},{onSwitch:"onSwitch"})],function(e,n){var t=n.component;e(n,3,0,!t.inputActive&&t.hierarchyCount>0);var l=e(n,6,0,t.inputActive,!t.inputActive&&t.hierarchyCount>1);e(n,5,0,l),e(n,8,0,t.workPackage)},null)}function ka(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,wa)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("wp-breadcrumb",fa,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-breadcrumb",[],null,null,null,ka,ma)),l["\u0275did"](1,49152,null,0,fa,[B.a],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var Ca,Ia=function(){function e(e,n,t){this.querySpace=e,this.states=n,this.wpCacheService=t,this.selectionState=e.selection,this.selectionState.isPristine()&&this.reset()}return e.prototype.isSelected=function(e){return this.currentState.selected[e]},e.prototype.selectAll=function(e){var n=this._emptyState;e.forEach(function(e){e.workPackageId&&(n.selected[e.workPackageId]=!0)}),this.selectionState.putValue(n)},e.prototype.getSelectedWorkPackages=function(){var e=this.states.workPackages;return this.getSelectedWorkPackageIds().map(function(n){return e.get(n).value})},e.prototype.getSelectedWorkPackageIds=function(){var e=[];return _.each(this.currentState.selected,function(n,t){n&&e.push(t)}),e},e.prototype.reset=function(){this.selectionState.putValue(this._emptyState)},Object.defineProperty(e.prototype,"currentState",{get:function(){return this.selectionState.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.selectionCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionCount",{get:function(){return _.size(this.currentState.selected)},enumerable:!0,configurable:!0}),e.prototype.toggleRow=function(e){var n=this.currentState.selected[e];this.setRowState(e,!n)},e.prototype.setRowState=function(e,n){var t=this.currentState;t.selected[e]=n,this.selectionState.putValue(t)},e.prototype.setSelection=function(e,n){var t={selected:{},activeRowIndex:n};t.selected[e]=!0,this.selectionState.putValue(t)},e.prototype.setMultiSelectionFrom=function(e,n,t){var l=this.currentState;if(0===this.selectionCount||null===l.activeRowIndex)l.selected[n]=!0,l.activeRowIndex=t;else{var i=Math.min(t,l.activeRowIndex),o=Math.max(t,l.activeRowIndex);e.forEach(function(e,n){e.workPackageId&&(l.selected[e.workPackageId]=n>=i&&n<=o)})}this.selectionState.putValue(l)},Object.defineProperty(e.prototype,"_emptyState",{get:function(){return{selected:{},activeRowIndex:null}},enumerable:!0,configurable:!0}),e}(),Pa=function(){function e(e,n){this.querySpace=e,this.wpTableSelection=n,this.state=e.focusedWorkPackage,this.observeToUpdateFocused()}return e.prototype.isFocused=function(e){return this.focusedWorkPackage===e},e.prototype.ifShouldFocus=function(e){var n=this.state.value;n&&n.focusAfterRender&&(e(n.workPackageId),n.focusAfterRender=!1,this.state.putValue(n,"Setting focus to false after callback."))},Object.defineProperty(e.prototype,"focusedWorkPackage",{get:function(){var e=this.state.value;return e?e.workPackageId:null},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.state.clear()},e.prototype.whenChanged=function(){return this.state.values$().pipe(Object(v.a)(function(e){return e.workPackageId}),Object(Zu.a)())},e.prototype.updateFocus=function(e,n){void 0===n&&(n=!1),this.wpTableSelection.isEmpty&&this.wpTableSelection.setRowState(e,!0),this.state.putValue({workPackageId:e,focusAfterRender:n})},e.prototype.observeToUpdateFocused=function(){var e=this;this.querySpace.rendered.values$().pipe(Object(v.a)(function(e){return _.find(e,function(e){return e.workPackageId})}),Object(g.a)(function(n){return!!n&&e.wpTableSelection.isEmpty})).subscribe(function(n){e.updateFocus(n.workPackageId)})},e}();!function(e){e.setPosition=function(e,n){try{e.setSelectionRange(n,n)}catch(t){Object(mn.a)("Failed to set click position for edit field.",t)}},e.getPosition=function(e){var n=e.originalEvent;try{if(document.caretRangeFromPoint)return document.caretRangeFromPoint(e.clientX,e.clientY).startOffset;if(n.rangeParent){var t=document.createRange();return t.setStart(n.rangeParent,n.rangeOffset),t.startOffset}return 0}catch(l){return Object(mn.a)("Failed to get click position for edit field.",l),0}}}(Ca||(Ca={}));var ja=function(e){function n(n,t,l,i,o,r){var u=e.call(this)||this;return u.injector=n,u.form=t,u.fieldName=l,u.schema=i,u.element=o,u.withErrors=r,u.FocusHelper=u.injector.get(f.a),u.ConfigurationService=u.injector.get(Ne),u.I18n=u.injector.get(B.a),u.$onUserActivate=new a.a,u.editContext=t.editContext,void 0!==r&&u.setErrors(r),u}return r.d(n,e),n.prototype.stopPropagation=function(e){return e.stopPropagation(),!1},Object.defineProperty(n.prototype,"inEditMode",{get:function(){return this.form.editMode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inFlight",{get:function(){return this.form.changeset.inFlight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"context",{get:function(){return this.form.editContext},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.focus=function(e){var n=this.element.querySelector(".wp-inline-edit--field");n?(n.focus(),e&&"INPUT"===n.tagName&&Ca.setPosition(n,e)):Object(mn.a)("Tried to focus on "+this.fieldName+", but element does not (yet) exist.")},n.prototype.setErrors=function(e){this.errors=e,this.element.classList.toggle("-error",this.isErrorenous)},n.prototype.handleUserSubmit=function(){var e=this;return this.form.changeset.inFlight||this.form.editMode?Promise.resolve():this.onSubmit().then(function(){return e.form.submit()})},n.prototype.handleUserKeydown=function(e,n){return void 0===n&&(n=!1),this.inEditMode&&!n?e.which!==il.a.ENTER||(this.form.submit(),!1):e.which!==il.a.ESCAPE||(this.handleUserCancel(),!1)},n.prototype.handleUserCancel=function(){this.reset()},n.prototype.reset=function(){this.form.changeset.reset(this.fieldName),this.deactivate(!0)},n.prototype.deactivate=function(e){void 0===e&&(e=!1),delete this.form.activeFields[this.fieldName],this.onDestroy.next(),this.onDestroy.complete(),this.editContext.reset(this.workPackage,this.fieldName,e)},Object.defineProperty(n.prototype,"isErrorenous",{get:function(){return this.errors.length>0},enumerable:!0,configurable:!0}),n.prototype.isChanged=function(){return this.form.changeset.isOverridden(this.fieldName)},Object.defineProperty(n.prototype,"workPackage",{get:function(){return this.form.workPackage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"project",{get:function(){return this.form.changeset.value("project")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"htmlId",{get:function(){return"wp-"+this.workPackage.id+"-inline-edit--field-"+this.fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fieldLabel",{get:function(){return this.schema.name||this.fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errorMessageOnLabel",{get:function(){return this.isErrorenous?this.I18n.t("js.inplace.errors.messages_on_field",{messages:this.errors.join(" ")}):""},enumerable:!0,configurable:!0}),n}(lr),_a=function(){function e(e,n){this.appRef=e,this.componentFactoryResolver=n}return e.prototype.create=function(e,n,t,l,i,o){var r=this.createDomOutlet(e,n),u=new ja(n,t,i,l,e,o);u.onDestroy.pipe(Object(F.a)(1)).subscribe(function(){return r.detach()});var a=vr(n,t.changeset,u,l),s=new p.a(wr,null,a);return e.innerHTML="",r.attachComponentPortal(s).instance.onEditFieldReady.pipe(Object(F.a)(1)).toPromise().then(function(){return u})},e.prototype.createDomOutlet=function(e,n){return new p.b(e,this.componentFactoryResolver,this.appRef,n)},e}(),Ra=function(){function e(e,n){this.injector=e,this.fieldGroup=n,this.wpTableRefresh=this.injector.get(zn),this.states=this.injector.get(s),this.FocusHelper=this.injector.get(f.a),this.$state=this.injector.get(h.G),this.wpNotificationsService=this.injector.get(On),this.wpEditingPortalService=this.injector.get(_a),this.wpTableSelection=this.injector.get(Ia)}return e.prototype.activateField=function(e,n,t,l){return r.b(this,void 0,void 0,function(){var i=this;return r.e(this,function(o){return[2,this.fieldCtrl(t).then(function(o){o.active=!0;var r=o.editContainer.nativeElement;return i.wpEditingPortalService.create(r,i.injector,e,n,t,l)})]})})},e.prototype.reset=function(e,n,t){return void 0===t&&(t=!1),r.b(this,void 0,void 0,function(){var l;return r.e(this,function(i){switch(i.label){case 0:return[4,this.fieldCtrl(n)];case 1:return(l=i.sent()).reset(e),l.deactivate(t),[2]}})})},e.prototype.onSaved=function(e,n){this.fieldGroup.stopEditingAndLeave(n,e)},e.prototype.requireVisible=function(e){var n=this;return new Promise(function(t){var l=setInterval(function(){void 0!==n.fieldGroup.fields[e]&&(clearInterval(l),t())},50)})},e.prototype.firstField=function(e){return"subject"},e.prototype.fieldCtrl=function(e){return this.fieldGroup.waitForField(e)},e}(),Sa=function(){function e(e,n,t){void 0===t&&(t=!1);var l=this;this.injector=e,this.workPackage=n,this.editMode=t,this.states=this.injector.get(s),this.wpCacheService=this.injector.get(yn),this.wpEditing=this.injector.get(ar),this.wpTableRefresh=this.injector.get(zn),this.wpNotificationsService=this.injector.get(On),this.activeFields={},this.errorsPerAttribute={},this.wpSubscription=this.wpCacheService.state(n.id).values$().subscribe(function(e){l.workPackage=e})}return e.createInContext=function(n,t,l,i){void 0===i&&(i=!1);var o=new e(n,l,i);return o.editContext=t,o},e.prototype.hasActiveFields=function(){return!_.isEmpty(this.activeFields)},Object.defineProperty(e.prototype,"changeset",{get:function(){return this.wpEditing.changesetFor(this.workPackage)},enumerable:!0,configurable:!0}),e.prototype.activate=function(e,n){var t=this;return void 0===n&&(n=!1),this.loadFieldSchema(e,n).then(function(l){return l.writable||n?t.renderField(e,l):(t.wpNotificationsService.showEditingBlockedError(l.name||e),Promise.reject())})},e.prototype.activateWhenNeeded=function(e){var n=this,t=this.activeFields[e];return t?Promise.resolve(t.element):this.editContext.requireVisible(e).then(function(){return n.activate(e,!0)})},e.prototype.activateMissingFields=function(){var e=this;this.changeset.getForm().then(function(n){_.each(n.validationErrors,function(n,t){"id"!==t&&e.activateWhenNeeded(t)})})},e.prototype.submit=function(){return r.b(this,void 0,void 0,function(){var e,n,t=this;return r.e(this,function(l){switch(l.label){case 0:return e=this.workPackage.isNew,this.changeset.empty&&!e?(this.closeEditFields(),[2,Promise.resolve(this.workPackage)]):(this.errorsPerAttribute={},n=_.keys(this.activeFields),[4,Promise.all(_.map(this.activeFields,function(e){return e.onSubmit()}))]);case 1:return l.sent(),[2,new Promise(function(l,i){t.changeset.save().then(function(i){t.closeEditFields(n),l(i),t.wpNotificationsService.showSave(i,e),t.editMode=!1,t.editContext.onSaved(e,i),t.wpTableRefresh.request("Saved work package "+i.id)}).catch(function(e){t.wpNotificationsService.handleRawError(e,t.workPackage),e instanceof jn&&(t.handleSubmissionErrors(e),i())})})]}})})},e.prototype.destroy=function(){this.wpSubscription.unsubscribe(),_.each(this.activeFields,function(e){e&&e.deactivate()})},e.prototype.closeEditFields=function(e){var n=this;e||(e=_.keys(this.activeFields)),e.forEach(function(e){var t=n.activeFields[e];t&&t.deactivate(),n.changeset.reset(e)})},e.prototype.handleSubmissionErrors=function(e){this.handleErroneousAttributes(e)},e.prototype.handleErroneousAttributes=function(e){var n=e.getInvolvedAttributes();if(this.errorsPerAttribute=e.getMessagesPerAttribute(),0!==n.length)return this.setErrorsForFields(n)},e.prototype.setErrorsForFields=function(e){var n=this,t=e.map(function(e){return n.editContext.requireVisible(e).then(function(){return n.activeFields[e]&&n.activeFields[e].setErrors(n.errorsPerAttribute[e]||[]),n.activateWhenNeeded(e)})});Promise.all(t).then(function(){setTimeout(function(){jQuery(".wp-inline-edit--active-field.-error .wp-inline-edit--field").first().focus()})}).catch(function(){console.error("Failed to activate all erroneous fields.")})},e.prototype.loadFieldSchema=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.changeset.getSchemaName(e);return new Promise(function(e,i){t.loadFormAndCheck(l,n);var o=t.changeset.schema[l];if(!o)throw new Error;e(o)})},e.prototype.loadFormAndCheck=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.changeset.getSchemaName(e);this.changeset.getForm().then(function(i){var o=i.schema[l];o.writable||n||(t.wpNotificationsService.showEditingBlockedError(o.name||e),t.closeEditFields([e]))}).catch(function(n){console.error("Failed to build edit field: %o",n),t.wpNotificationsService.handleRawError(n,t.workPackage),t.closeEditFields([e])})},e.prototype.renderField=function(e,n){var t=this;return this.editContext.activateField(this,n,e,this.errorsPerAttribute[e]||[]).then(function(n){return t.activeFields[e]=n,n}).catch(function(e){console.error("Failed to render edit field:"+e),t.wpNotificationsService.handleRawError(e)})},e}(),xa=function(){function e(e,n,t,l){void 0===l&&(l=[]),this.injector=e,this.changeset=n,this.filters=t,this.excluded=l,this.currentUser=this.injector.get(Hn),this.halResourceService=this.injector.get(Y)}return e.prototype.applyDefaultsFromFilters=function(){var e=this;_.each(this.filters,function(n){if("="===n.operator.id&&-1===e.excluded.indexOf(n.id)){var t=n.values[0];t&&e.setValueFor(n.id,t)}})},e.prototype.setValueFor=function(e,n){var t=this.findSpecialValue(n,e)||n;t&&(this.changeset.setValue(e,t),this.changeset.workPackage[e]=t)},e.prototype.findSpecialValue=function(e,n){return"parent"===n?e:e instanceof z&&"/api/v3/users/me"===e.$href&&this.currentUser.isLoggedIn?this.halResourceService.fromSelfLink("/api/v3/users/"+this.currentUser.userId):void 0},e}(),Ta=function(){function e(e,n,t,l,i,o,r){this.injector=e,this.hooks=n,this.wpCacheService=t,this.halResourceService=l,this.wpEditing=i,this.querySpace=o,this.workPackageDmService=r,this.newWorkPackageCreatedSubject=new a.a}return e.prototype.newWorkPackageCreated=function(e){this.form=void 0,this.newWorkPackageCreatedSubject.next(e)},e.prototype.onNewWorkPackage=function(){return this.newWorkPackageCreatedSubject.asObservable()},e.prototype.createNewWorkPackage=function(e){var n=this;return this.getEmptyForm(e).then(function(e){return n.fromCreateForm(e)})},e.prototype.createNewTypedWorkPackage=function(e,n){var t=this;return this.workPackageDmService.typedCreateForm(n,e).then(function(e){return t.fromCreateForm(e)})},e.prototype.fromCreateForm=function(e){var n=this.halResourceService.createHalResourceOfType("WorkPackage",e.payload.$plain());n.initializeNewResource(e);var t=new sr(this.injector,n,e);return this.hooks.call("workPackageNewInitialization",t),t},e.prototype.copyWorkPackage=function(e){var n=this,t=e.workPackage.$source;return this.workPackageDmService.emptyCreateForm(t).then(function(e){return n.fromCreateForm(e)})},e.prototype.copyFrom=function(e){var n=this.halResourceService.createHalResourceOfType("WorkPackage",e.payload.$plain());return n.initializeNewResource(e),new sr(this.injector,n,e)},e.prototype.getEmptyForm=function(e){return this.form||(this.form=this.workPackageDmService.emptyCreateForm({},e)),this.form},e.prototype.cancelCreation=function(){this.wpEditing.stopEditing("new"),this.wpCacheService.clearSome("new"),this.form=void 0},e.prototype.changesetUpdates$=function(){return this.wpEditing.state("new").values$()},e.prototype.createOrContinueWorkPackage=function(e,n){var t=this,l=this.continueExistingEdit(n);return l||(l=this.createNewWithDefaults(e,n)),l.then(function(e){return t.wpEditing.updateValue("new",e),t.wpCacheService.updateWorkPackage(e.workPackage),e})},e.prototype.continueExistingEdit=function(e){var n=this.wpEditing.state("new").value;if(void 0!==n){var t=n.workPackage.type,l=!n.empty,i=!t&&!e,o=e&&t&&t.idFromLink===e.toString();if(l&&(i||o))return Promise.resolve(n)}return null},e.prototype.createNewWithDefaults=function(e,n){var t=this;return(n?this.createNewTypedWorkPackage(e,n):this.createNewWorkPackage(e)).then(function(e){if(!e)throw"No new work package was created";var l=[];return n&&(l=["type"]),t.applyDefaults(e,e.workPackage,l),e})},e.prototype.applyDefaults=function(e,n,t){var l=this.querySpace.query.value;l&&new xa(this.injector,e,l.filters,t).applyDefaultsFromFilters()},e}(),Oa=function(){function e(e,n,t,l,i,o,r,a,s,c,d){var p=this;this.states=e,this.injector=n,this.wpCreate=t,this.wpEditing=l,this.wpNotificationsService=i,this.wpTableSelection=o,this.wpTableFocus=r,this.$transitions=a,this.ConfigurationService=s,this.$state=c,this.I18n=d,this.initializeEditMode=!1,this.fields={},this.registeredFields=Object(u.g)();var h=d.t("js.work_packages.confirm_edit_cancel"),f=s.warnOnLeavingUnsaved();this.unregisterListener=a.onStart({},function(e){if(p.editing){var n=e.to(),t=e.from(),l=e.params("from"),i=e.params("to");if(!p.allowedStateChange(n,i,t,l)){if(f&&!window.confirm(h))return!1;p.stop()}return!0}})}return e.prototype.ngOnDestroy=function(){this.unregisterListener(),this.form.destroy()},e.prototype.ngOnInit=function(){var e=this,n=new Ra(this.injector,this);this.form=Sa.createInContext(this.injector,n,this.workPackage,this.initializeEditMode),this.states.workPackages.get(this.workPackage.id).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){_.each(e.fields,function(t){return e.updateDisplayField(t,n)})}),this.initializeEditMode&&this.start(),this.initializeEditMode&&this.workPackage.isNew&&this.wpCreate.onNewWorkPackage().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.form.editMode=!1,e.stopEditingAndLeave(n,!0)})},Object.defineProperty(e.prototype,"editing",{get:function(){return this.editMode||this.form.hasActiveFields()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editMode",{get:function(){return this.form.editMode},enumerable:!0,configurable:!0}),e.prototype.register=function(e){var n=this;this.fields[e.fieldName]=e,this.registeredFields.putValue(_.keys(this.fields)),this.editMode&&!this.skipField(e)||this.form.activeFields[e.fieldName]?e.activateOnForm(!0):this.states.workPackages.get(this.workPackage.id).valuesPromise().then(function(t){return n.updateDisplayField(e,t)})},e.prototype.waitForField=function(e){var n=this;return this.registeredFields.values$().pipe(Object(g.a)(function(n){return n.indexOf(e)>=0}),Object(F.a)(1),Object(v.a)(function(){return n.fields[e]})).toPromise()},e.prototype.start=function(){var e=this;_.each(this.fields,function(n){return e.form.activate(n.fieldName)})},e.prototype.stop=function(){this.form.editMode=!1,this.wpEditing.stopEditing(this.workPackage.id),this.form.destroy(),this.workPackage.isNew&&this.wpCreate.cancelCreation()},e.prototype.saveWorkPackage=function(){var e=this,n=this.workPackage.isNew;return this.form.submit().then(function(t){e.stopEditingAndLeave(t,n)})},e.prototype.stopEditingAndLeave=function(e,n){var t=this;this.stop(),this.successState&&this.$state.go(this.successState,{workPackageId:e.id}).then(function(){t.wpTableFocus.updateFocus(e.id),t.wpNotificationsService.showSave(e,n)})},e.prototype.updateDisplayField=function(e,n){e.workPackage=n,e.render()},e.prototype.skipField=function(e){var n=e.fieldName;if(!("status"===n||"type"===n))return!1;var t=this.workPackage[n],l=this.form.changeset.isChanged(n);return t&&!l},e.prototype.allowedStateChange=function(e,n,t,l){return t.name.match(/\.(new|copy)$/)?e.data&&e.data.allowMovingInEditMode:void 0!==n.workPackageId&&n.workPackageId===l.workPackageId},e}(),Ea=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Da(e){return l["\u0275vid"](0,[l["\u0275ncd"](null,0)],null,null)}l["\u0275ccf"]("wp-edit-field-group,[wp-edit-field-group]",Oa,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-edit-field-group",[],null,null,null,Da,Ea)),l["\u0275did"](1,245760,null,0,Oa,[s,l.Injector,ur,ar,On,Ia,Pa,h.O,Ne,h.G,B.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",successState:"successState",initializeEditMode:"inEditMode"},{},["*"]);var Fa,Aa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.getField=function(e,n,t,l){return new(this.getClassFor(n,t.type))(e,n,t,l)},n}(br),Na=function(e){function n(n,t,l,i){var o=e.call(this)||this;return o.resource=n,o.name=t,o.schema=l,o.context=i,o.mode=null,o.changeset=null,o.I18n=o.$injector.get(B.a),o.texts={empty:o.I18n.t("js.work_packages.no_value"),placeholder:o.I18n.t("js.placeholders.default")},o}return r.d(n,e),Object.defineProperty(n.prototype,"isFormattable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"$injector",{get:function(){return this.context.injector},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.changeset?this.changeset.value(this.name):this.attribute:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"attribute",{get:function(){return this.resource[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this.constructor.type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return"-"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.schema.name||this.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.isFormattable?null:this.valueString},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){e.textContent=n},n.prototype.renderEmpty=function(e){var n=document.createElement("div");n.setAttribute("title",this.texts.empty),n.textContent=this.texts.placeholder,n.classList.add("custom-option","-empty"),e.appendChild(n)},n}(pr),Ma=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.isEmpty=function(){return _.isEmpty(this.value)},Object.defineProperty(n.prototype,"value",{get:function(){var e=this.resource[this.name];return this.schema&&e?e.elements?e.elements.map(function(e){return e.name}):e.map?e.map(function(e){return e.name}):e.name?[e.name]:["error: "+JSON.stringify(e)]:[]},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){var t=this.value;e.innerHTML="",e.setAttribute("title",t.join(", ")),0===t.length?this.renderEmpty(e):this.renderValues(t,e)},n.prototype.renderValues=function(e,n){var t=document.createDocumentFragment(),l=this.optionDiv(this.valueAbridged(e));if(t.appendChild(l),e.length>2){var i=this.optionDiv(e.length.toString(),"badge","-secondary");t.appendChild(i)}n.appendChild(t)},n.prototype.optionDiv=function(e){for(var n,t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];var i=document.createElement("div"),o=document.createElement("span");return i.classList.add("custom-option"),(n=o.classList).add.apply(n,t),o.textContent=e,i.appendChild(o),i},n.prototype.valueAbridged=function(e){var n=_.take(e,2);return e.length>2&&n.push("... "),n.join(", ")},n}(Na),Va=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.render=function(e,n){var t=this.value;e.setAttribute("title",n),e.textContent=n,e.innerHTML="",0===t.length?this.renderEmpty(e):this.renderValues(t,e)},n.prototype.renderValues=function(e,n){e.forEach(function(e){var t=document.createElement("div");t.classList.add("custom-option","-multiple-lines"),t.setAttribute("title",e),t.textContent=e,n.appendChild(t)})},n}(Ma),qa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.resource[this.name]||0:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"percentLabel",{get:function(){return this.roundedProgress+"%"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"roundedProgress",{get:function(){return Math.round(Number(this.value))||0},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){e.setAttribute("title",n),e.innerHTML='\n      <span>\n        <span style="width: 80px" class="progress-bar">\n          <span style="width: '+this.roundedProgress+'%" class="inner-progress closed"></span>\n          <span style="width: 0%" class="inner-progress done"></span>\n        </span>\n        <span class="progress-bar-legend">'+this.percentLabel+"</span>\n      </span>\n    "},n}(Na),La=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.render=function(e,n){var t=this.percentLabel;e.setAttribute("title",t),e.innerHTML="",e.textContent=t},n}(qa),$a=function(){function e(){this.portalCallbacks=[]}return e.prototype.add=function(e){this.portalCallbacks.push(e)},e.prototype.clear=function(){this.portalCallbacks.forEach(function(e){return e()}),this.portalCallbacks=[]},e}(),Ha=function(){function e(e,n,t){this.appRef=e,this.componentFactoryResolver=n,this.injector=t}return e.prototype.create=function(e,n,t){void 0===t&&(t=!1);var l=new p.b(e,this.componentFactoryResolver,this.appRef,this.injector),i=function(e,n,t){var l=new WeakMap;return l.set(_r,n),l.set(Rr,t),new p.c(e,l)}(this.injector,n,t),o=new p.a(Sr,null,i);return setTimeout(function(){return l.attachComponentPortal(o)}),l},e}(),Ba=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.userDisplayPortal=n.$injector.get(Ha),n.portalCleanup=n.$injector.get($a),n}return r.d(n,e),n.prototype.render=function(e,n){var t=this.attribute;e.setAttribute("title",n),e.textContent=n,e.innerHTML="",0===t.length?this.renderEmpty(e):this.renderValues(t,e)},n.prototype.renderValues=function(e,n){var t=this;this.outlet=this.userDisplayPortal.create(n,e,!0),this.portalCleanup.add(function(){return t.outlet.dispose()})},n}(Ma),za="wp-edit-field--container",Wa=function(){function e(e,n,t){void 0===t&&(t={}),this.injector=e,this.container=n,this.options=t,this.displayFieldService=this.injector.get(Aa),this.I18n=this.injector.get(B.a)}return e.prototype.render=function(e,n,t,l){void 0===l&&(l="-");var i=this.renderFieldValue(e,n,t,l),o=i[0],r=i[1];return null===o?r:(this.setSpanAttributes(r,o,n,e),r)},e.prototype.renderFieldValue=function(e,n,t,l){void 0===l&&(l="-");var i=document.createElement("span"),o=e.getSchemaName(n),r=e.schema[o];if(!r)return[null,i];var u=this.getField(e,r,o,t);u.render(i,this.getText(u,l));var a=u.title;return a&&i.setAttribute("title",a),i.setAttribute("aria-label",this.getAriaLabel(u,e)),[u,i]},e.prototype.getField=function(e,n,t,l){var i=this.getFieldForCurrentContext(e,n,t);return i.changeset=l,i},e.prototype.getFieldForCurrentContext=function(e,n,t){var l={container:this.container,injector:this.injector,options:this.options},i=["[]CustomOption"].indexOf(n.type)>=0;if("single-view"===this.container&&i)return new Va(e,t,n,l);var o=["[]User"].indexOf(n.type)>=0;return"single-view"===this.container&&o?new Ba(e,t,n,l):"timeline"===this.container&&"percentageDone"===t?new La(e,t,n,l):this.displayFieldService.getField(e,t,n,l)},e.prototype.getText=function(e,n){return e.isEmpty()?n:e.valueString},e.prototype.setSpanAttributes=function(e,n,t,l){e.classList.add("wp-table--cell-span","wp-edit-field--display-field","inplace-edit","wp-edit-field",t),e.dataset.fieldName=t,e.setAttribute("tabindex","id"===t?"-1":"0"),n.required&&e.classList.add("-required"),n.isEmpty()&&e.classList.add("-placeholder"),n.writable&&l.isAttributeEditable(n.name)?(e.classList.add("-editable"),e.setAttribute("role","button")):e.classList.add("-read-only")},e.prototype.getAriaLabel=function(e,n){var t,l=this.getLabelContent(e);if(e.isFormattable&&!e.isEmpty())try{t=_.escape(jQuery("<div>"+l+"</div>").text())}catch(i){console.error("Failed to parse formattable labelContent"),t="Label for "+e.displayName}else t=l;return e.writable&&n.isAttributeEditable(e.name)?this.I18n.t("js.inplace.button_edit",{attribute:e.displayName+" "+t}):e.displayName+" "+t},e.prototype.getLabelContent=function(e){return e.isEmpty()?this.I18n.t("js.inplace.null_value_label"):e.valueString},e}();!function(e){e.hasSelectionWithin=function(e){try{var n=window.getSelection().toString().length>0,t=e.contains(getSelection().anchorNode);return n&&t}catch(l){return console.error("Failed to test whether in selection ",l),!1}}}(Fa||(Fa={}));var Qa=function(){function e(e,n,t,l,i){var o=this;this.componentFactoryResolver=e,this.FocusHelper=n,this.appRef=t,this.$transitions=l,this.injector=i,this.active=null,this.isOpening=!1;var r=this.portalHostElement=document.createElement("div");r.classList.add("op-context-menu--overlay"),document.body.appendChild(r),this.bodyPortalHost=new p.b(r,this.componentFactoryResolver,this.appRef,this.injector),l.onStart({},function(){return o.close()}),jQuery(window).on("keydown",function(e){return o.active&&e.which===il.a.ESCAPE&&o.close(),!0}),jQuery(window).on("click",function(e){o.active&&2!==e.button&&!o.portalHostElement.contains(e.target)&&o.close()})}return e.prototype.show=function(e,n,t){var l=this;void 0===t&&(t=oi),this.close(),this.isOpening=!0;var i=new p.a(t,null,this.injectorFor(e.locals));this.bodyPortalHost.attach(i),this.portalHostElement.style.display="block",this.active=e,setTimeout(function(){l.reposition(n),l.active&&l.active.onOpen(l.activeMenu),l.isOpening=!1})},e.prototype.isActive=function(e){return this.active&&this.active===e},e.prototype.close=function(){this.isOpening||(this.bodyPortalHost.detach(),this.portalHostElement.style.display="none",this.active&&this.active.onClose(),this.active=null)},e.prototype.reposition=function(e){this.active&&this.activeMenu.position(this.active.positionArgs(e)).css("visibility","visible")},Object.defineProperty(e.prototype,"activeMenu",{get:function(){return jQuery(this.portalHostElement).find(".dropdown")},enumerable:!0,configurable:!0}),e.prototype.injectorFor=function(e){var n=new WeakMap;return e.service=this,n.set(ii,e),new p.c(this.injector,n)},e}(),Ua=function(){function e(e,n,t,l,i,o,r,u,a,s,c){this.states=e,this.injector=n,this.elementRef=t,this.wpNotificationsService=l,this.ConfigurationService=i,this.opContextMenu=o,this.wpEditing=r,this.wpCacheService=u,this.wpEditFieldGroup=a,this.NotificationsService=s,this.I18n=c,this.displayFieldOptions={},this.isDropTarget=!1,this.editFieldContainerClass=za,this.active=!1,this.rendered=!1}return e.prototype.ngOnInit=function(){this.fieldRenderer=new Wa(this.injector,"single-view",this.displayFieldOptions),this.$element=jQuery(this.elementRef.nativeElement),this.wpEditFieldGroup.register(this)},e.prototype.startDragOverActivation=function(e){return!(this.isDropTarget&&this.isEditable&&!this.active)||(this.handleUserActivate(null),e.preventDefault(),!1)},e.prototype.render=function(){var e=this.fieldRenderer.render(this.resource,this.fieldName,null,this.displayPlaceholder);this.displayContainer.nativeElement.innerHTML="",this.displayContainer.nativeElement.appendChild(e),this.rendered=!0},e.prototype.deactivate=function(e){var n=this;void 0===e&&(e=!1),this.editContainer.nativeElement.innerHTML="",this.editContainer.nativeElement.hidden=!0,this.active=!1,e&&setTimeout(function(){return n.$element.find(".wp-edit-field--display-field").focus()},20)},Object.defineProperty(e.prototype,"resource",{get:function(){return this.wpEditing.temporaryEditResource(this.workPackageId).getValueOr(this.workPackage)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEditable",{get:function(){var e=this.resource.schema[this.fieldName];return this.resource.isAttributeEditable(this.fieldName)&&e&&e.writable},enumerable:!0,configurable:!0}),e.prototype.activateIfEditable=function(e){return Fa.hasSelectionWithin(e.target)?(Object(mn.a)("Not activating "+this.fieldName+" because of active selection within"),!0):jQuery(e.target).closest("a,macro",this.displayContainer.nativeElement).length>0||(this.isEditable&&this.handleUserActivate(e),this.opContextMenu.close(),e.preventDefault(),e.stopImmediatePropagation(),!1)},e.prototype.overflowingSelector=function(){return this.$element.closest(".attributes-group").data("groupIdentifier")},e.prototype.activateOnForm=function(e){var n=this;return void 0===e&&(e=!1),this.active=!0,this.wpEditFieldGroup.form.activate(this.fieldName,e).catch(function(){return n.deactivate(!0)})},e.prototype.handleUserActivate=function(e){var n=0;return e&&(n=Ca.getPosition(e)),this.activateOnForm().then(function(e){e&&(e.$onUserActivate.next(),e.focus(n))}),!1},e.prototype.reset=function(e){this.workPackage=e,this.render(),this.deactivate()},e}(),Ka=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ga(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{displayContainer:0}),l["\u0275qud"](402653184,2,{editContainer:0}),(e()(),l["\u0275eld"](2,0,null,null,5,"div",[],null,[[null,"dragover"]],function(e,n,t){var l=!0,i=e.component;"dragover"===n&&(l=!1!==i.startDragOverActivation(t)&&l);return l},null,null)),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pad"](4,4),(e()(),l["\u0275eld"](5,0,[[2,0],["editContainer",1]],null,0,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,[[1,0],["displayContainer",1]],null,1,"div",[["tabindex","-1"]],[[8,"hidden",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,7).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,7).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.activateIfEditable(t)&&i);return i},null,null)),l["\u0275did"](7,16384,null,0,ol,[],{stopEventPropagation:[0,"stopEventPropagation"]},{onClick:"accessibleClick"})],function(e,n){var t=n.component,l=e(n,4,0,t.editFieldContainerClass,t.fieldName,t.active?"-active":"",t.wrapperClasses||"-small");e(n,3,0,l);e(n,7,0,!1)},function(e,n){var t=n.component;e(n,5,0,!t.active),e(n,6,0,t.active)})}l["\u0275ccf"]("wp-edit-field",Ua,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](1,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],null,null)],function(e,n){e(n,1,0)},null)},{fieldName:"fieldName",workPackageId:"workPackageId",wrapperClasses:"wrapperClasses",displayFieldOptions:"displayFieldOptions",displayPlaceholder:"displayPlaceholder",isDropTarget:"isDropTarget"},{},[]);function Ya(e){void 0===e&&(e=16);for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",l=0,i=new Array(e);l<i.length;l++){i[l];t+=n.charAt(Math.floor(Math.random()*n.length))}return t}var Za=function(){function e(e,n){this.uiRouterGlobals=e,this.wpCacheService=n,this.uniqueElementIdentifier="work-packages--subject-type-row-"+Ya(16)}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){var e=this;this.workPackage||this.wpCacheService.loadWorkPackage(this.uiRouterGlobals.params.workPackageId).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.workPackage=n})},e}(),Ja=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Xa(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","work-packages--subject-type-row __overflowing_element_container"]],[[1,"data-overflowing-identifier",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","work-packages--type-selector work-packages--subject-element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](4,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,2,"div",[["class","work-packages--details--subject work-packages--subject-element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](7,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"]},null)],function(e,n){var t=n.component;e(n,1,0,"work-packages--subject-type-row __overflowing_element_container","__overflowing_"+t.uniqueElementIdentifier);e(n,4,0,"type",t.workPackage.id,"work-packages--type-selector work-packages--subject-element -no-label");e(n,7,0,"subject",t.workPackage.id,"work-packages--details--subject work-packages--subject-element -no-label")},function(e,n){e(n,0,0,".__overflowing_"+n.component.uniqueElementIdentifier)})}function es(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Xa)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("wp-subject",Za,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-subject",[],null,null,null,es,Ja)),l["\u0275did"](1,245760,null,0,Za,[h.Q,yn],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var ns=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.load=function(e){return e.watchers.$update().then(function(e){return e.elements})},n}(or),ts=function(){function e(e,n,t){this.I18n=e,this.wpWatchersService=n,this.wpCacheService=t,this.showText=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.workPackage=n,e.setWatchStatus()})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"isWatched",{get:function(){return this.workPackage.hasOwnProperty("unwatch")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayWatchButton",{get:function(){return this.isWatched||this.workPackage.hasOwnProperty("watch")},enumerable:!0,configurable:!0}),e.prototype.toggleWatch=function(){var e=this,n=this.nextStateLink();n(n.$link.payload).then(function(){e.wpWatchersService.clear(e.workPackage.id),e.wpCacheService.loadWorkPackage(e.workPackage.id,!0)})},e.prototype.nextStateLink=function(){var e=this.isWatched?"unwatch":"watch";return this.workPackage[e]},e.prototype.setWatchStatus=function(){this.isWatched?(this.buttonTitle=this.I18n.t("js.label_unwatch_work_package"),this.buttonText=this.I18n.t("js.label_unwatch"),this.buttonClass="-active",this.buttonId="unwatch-button",this.watchIconClass="icon-watched"):(this.buttonTitle=this.I18n.t("js.label_watch_work_package"),this.buttonText=this.I18n.t("js.label_watch"),this.buttonClass="",this.buttonId="watch-button",this.watchIconClass="icon-unwatched")},e}(),ls=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function is(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.buttonText)})}function os(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"button",[["class","button toolbar-icon"]],[[1,"title",0],[8,"disabled",0],[8,"id",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleWatch()&&l);return l},null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,is)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,"button toolbar-icon",t.buttonClass),e(n,3,0,l["\u0275inlineInterpolate"](1,"button--icon ",t.watchIconClass,"")),e(n,5,0,t.showText)},function(e,n){var t=n.component;e(n,0,0,t.buttonTitle,t.disabled,t.buttonId)})}function rs(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,os)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.displayWatchButton)},null)}var us;l["\u0275ccf"]("wp-watcher-button",ts,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watcher-button",[],null,null,null,rs,ls)),l["\u0275did"](1,245760,null,0,ts,[B.a,ns,yn],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",showText:"showText",disabled:"disabled"},{},[]);!function(e){e.isClickedWithModifier=function(e){var n=e.ctrlKey||e.shiftKey||e.metaKey,t=1===e.button;return n||t}}(us||(us={}));var as=function(){function e(e,n,t,l,i,o,r){this.http=e,this.$state=n,this.PathHelper=t,this.UrlParamsHelper=l,this.NotificationsService=i,this.I18n=o,this.wpTableRefresh=r,this.text={successful_delete:this.I18n.t("js.work_packages.message_successful_bulk_delete")}}return e.prototype.performBulkDelete=function(e,n){var t=this,l={"ids[]":e},i=this.http.delete(this.PathHelper.workPackagesBulkDeletePath(),{params:l}).toPromise();return n&&i.then(function(){t.NotificationsService.addSuccess(t.text.successful_delete),t.wpTableRefresh.request("Bulk delete removed elements",{visible:!0}),t.$state.includes("**.list.details.**")&&e.indexOf(t.$state.params.workPackageId)>-1&&t.$state.go("work-packages.list",t.$state.params)}).catch(function(){var e=t.UrlParamsHelper.buildQueryString(l);window.location.href=t.PathHelper.workPackagesBulkDeletePath()+"?"+e}),i},e}(),ss=function(){function e(e){this.injector=e,this.$state=this.injector.get(h.G),this.keepTab=this.injector.get(_e)}return e.prototype.goBack=function(e){void 0===e&&(e=!1),this.backRoute?this.keepTab.isDetailsState(this.backRoute.parent)?e?this.$state.go("work-packages.list",this.$state.params):this.$state.go(this.keepTab.currentDetailsState,this.$state.params):this.$state.go(this.backRoute.name,this.backRoute.params):this.$state.go("work-packages.list",this.$state.params)},e.prototype.sync=function(e){var n=e.from(),t=e.to();if(n.name&&n.data&&t.data&&n.data.parent!==t.data.parent){var l=r.a({},e.params("from"));this.backRoute={name:n.name,params:l,parent:n.data.parent}}},Object.defineProperty(e.prototype,"backRoute",{get:function(){return this._backRoute},set:function(e){this._backRoute=e},enumerable:!0,configurable:!0}),e}(),cs=function(e){function n(n,t,l,i,o,r,u,a,s,c,d,p){var h=e.call(this,l,o,n)||this;return h.elementRef=n,h.WorkPackageService=t,h.locals=l,h.I18n=i,h.cdRef=o,h.$state=r,h.states=u,h.wpTableFocus=a,h.wpListService=s,h.wpNotificationsService=c,h.notificationsService=d,h.backRoutingService=p,h.busy=!1,h.childrenDeletionConfirmed=!1,h.text={label_visibility_settings:h.I18n.t("js.label_visibility_settings"),button_save:h.I18n.t("js.modals.button_save"),confirm:h.I18n.t("js.button_confirm"),warning:h.I18n.t("js.label_warning"),cancel:h.I18n.t("js.button_cancel"),close:h.I18n.t("js.close_popup_title"),label_confirm_children_deletion:h.I18n.t("js.modals.destroy_work_package.confirm_deletion_children")},h}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.workPackages=this.locals.workPackages,this.workPackageLabel=this.I18n.t("js.units.workPackage",{count:this.workPackages.length}),1===this.workPackages.length&&(this.singleWorkPackage=this.workPackages[0],this.singleWorkPackageChildren=this.singleWorkPackage.children),this.text.title=this.I18n.t("js.modals.destroy_work_package.title",{label:this.workPackageLabel}),this.text.text=this.I18n.t("js.modals.destroy_work_package.text",{label:this.workPackageLabel,count:this.workPackages.length}),this.text.childCount=function(e){var t=n.children(e).length;return n.I18n.t("js.units.child_work_packages",{count:t})},this.text.hasChildren=function(e){return n.I18n.t("js.modals.destroy_work_package.has_children",{childUnits:n.text.childCount(e)})},this.text.deletesChildren=this.I18n.t("js.modals.destroy_work_package.deletes_children")},Object.defineProperty(n.prototype,"blockedDueToUnconfirmedChildren",{get:function(){return this.mustConfirmChildren&&!this.childrenDeletionConfirmed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mustConfirmChildren",{get:function(){if(this.singleWorkPackage&&this.singleWorkPackageChildren)this.singleWorkPackageChildren.length;return!!_.find(this.workPackages,function(e){return e.children&&e.children.length>0})},enumerable:!0,configurable:!0}),n.prototype.confirmDeletion=function(e){var n=this;return!this.busy&&!this.blockedDueToUnconfirmedChildren&&(this.busy=!0,this.WorkPackageService.performBulkDelete(this.workPackages.map(function(e){return e.id}),!0).then(function(){n.busy=!1,n.closeMe(e),n.wpTableFocus.clear(),"work-packages.list"!==n.$state.current.name&&n.backRoutingService.goBack(!0)}).catch(function(){n.busy=!1}),!1)},n.prototype.children=function(e){return e.hasOwnProperty("children")?e.children:[]},n}(Le.a),ds=function(){function e(e){this.opContextMenu=e,this.items=[]}return e.prototype.onClose=function(){this.afterFocusOn.focus()},e.prototype.onOpen=function(e){e.find(".menu-item").first().focus()},e.prototype.positionArgs=function(e){return{my:"left top",at:"right bottom",of:e,collision:"flipfit"}},Object.defineProperty(e.prototype,"locals",{get:function(){return{items:this.items}},enumerable:!0,configurable:!0}),e.prototype.open=function(e){this.opContextMenu.show(this,e)},Object.defineProperty(e.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),e}(),ps=function(e){function n(n,t){var l=e.call(this,t)||this;return l.elementRef=n,l.opContextMenu=t,l.items=[],l}return r.d(n,e),n.prototype.ngAfterViewInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.$element.on("click",function(n){return n.preventDefault(),n.stopPropagation(),e.opContextMenu.isActive(e)?(e.opContextMenu.close(),!1):(e.open(n),!1)}),Mousetrap(this.$element[0]).bind("shift+alt+f10",function(n){e.open(n)})},n.prototype.positionArgs=function(e){return{my:"left top",at:"left bottom",of:this.$element,collision:"flipfit"}},n}(ds),hs=[{key:"log_time",link:"logTime",resource:"workPackage"},{key:"move",link:"move",resource:"workPackage"},{key:"copy",link:"copy",resource:"workPackage"},{key:"delete",link:"delete",resource:"workPackage"},{key:"export-pdf",link:"pdf",resource:"workPackage"},{key:"export-atom",link:"atom",resource:"workPackage"}],fs=function(){function e(e,n,t){this.workPackage=e,this.PathHelper=n,this.$state=t,this.project=e.project}return Object.defineProperty(e.prototype,"allActions",{get:function(){return{workPackage:this.workPackage,project:this.project}},enumerable:!0,configurable:!0}),e.prototype.copyLink=function(){return 0===this.$state.current.name.indexOf("work-packages.list.details")?this.PathHelper.workPackageDetailsCopyPath(this.project.identifier,this.workPackage.id):this.PathHelper.workPackageCopyPath(this.workPackage.id)},e.prototype.linkForAction=function(e){return"copy"===e.key?e.link=this.copyLink():e.link=this.allActions[e.resource][e.link].href,e},e.prototype.isPermitted=function(e){return void 0!==this.allActions[e.resource]&&void 0!==this.allActions[e.resource][e.link]},e.prototype.permittedActionKeys=function(e){var n=this,t=_.filter(e,function(e){return n.isPermitted(e)});return _.map(t,function(e){return e.key})},e.prototype.permittedActionsWithLinks=function(e){var n=this,t=_.filter(_.cloneDeep(e),function(e){return n.isPermitted(e)});return _.map(t,function(e){return n.linkForAction(e)})},e}(),gs=function(e){function n(n,t,l,i,o,r,u,a){var s=e.call(this,o,u)||this;return s.HookService=n,s.$state=t,s.injector=l,s.PathHelper=i,s.elementRef=o,s.opModalService=r,s.opContextMenuService=u,s.authorisationService=a,s}return r.d(n,e),n.prototype.open=function(e){var n=this;this.workPackage.project.$load().then(function(){n.authorisationService.initModelAuth("work_package",n.workPackage.$links);var t=new fs(n.workPackage,n.PathHelper,n.$state),l=n.getPermittedActions(t);n.buildItems(l),n.opContextMenu.show(n,e)})},n.prototype.triggerContextMenuAction=function(e,n){var t=e.link;switch(n){case"copy":this.$state.go("work-packages.copy",{copiedFromWorkPackageId:this.workPackage.id});break;case"delete":this.opModalService.show(cs,this.injector,{workPackages:[this.workPackage]});break;default:window.location.href=t}},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.getPermittedActions=function(e){var n=e.permittedActionsWithLinks(hs);return _.each(this.getPermittedPluginActions(e),function(e){var t=e.indexBy?e.indexBy(n):n.length;n.splice(t,0,e)}),n},n.prototype.getPermittedPluginActions=function(e){var n=this.HookService.call("workPackageSingleContextMenu");return e.permittedActionsWithLinks(n)},n.prototype.buildItems=function(e){var n=this,t=this.workPackage.configureForm;return this.items=e.map(function(e){var t=e.key;return{disabled:!1,linkText:I18n.t("js.button_"+t),href:e.link,icon:e.icon||"icon-"+t,onClick:function(l){return(!e.link||!us.isClickedWithModifier(l))&&(n.triggerContextMenuAction(e,t),!0)}}}),t&&this.items.push({href:t.href,icon:"icon-settings3",linkText:I18n.t("js.button_configure-form"),onClick:function(){return!1}}),this.items},n}(ps),ms=function(){return function(e,n){this.I18n=e,this.wpEditing=n,this.text={button_more:this.I18n.t("js.button_more")}}}(),vs=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function bs(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","work-packages--details-toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-watcher-button",[],null,null,null,rs,ls)),l["\u0275did"](2,245760,null,0,ts,[B.a,ns,yn],{workPackage:[0,"workPackage"],showText:[1,"showText"]},null),(e()(),l["\u0275eld"](3,0,null,null,4,"button",[["class","button dropdown-relative"],["wpSingleContextMenu",""]],[[1,"accesskey",0]],null,null,null,null)),l["\u0275did"](4,4210688,null,0,gs,[at,h.G,l.Injector,ve,l.ElementRef,Mn.b,Qa,Dn],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--dropdown-indicator"]],null,null,null,Zt,Gt)),l["\u0275did"](7,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,t.workPackage,!0),e(n,4,0,t.workPackage);e(n,7,0,"button--dropdown-indicator")},function(e,n){var t=n.component;e(n,3,0,7),e(n,5,0,t.text.button_more)})}l["\u0275ccf"]("wp-details-toolbar",ms,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-details-toolbar",[],null,null,null,bs,vs)),l["\u0275did"](1,49152,null,0,ms,[B.a,ar],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var ys=t("dzgT"),ws=function(){function e(e,n){this.wpCacheService=e,this.wpRelations=n,this.count=0}return e.prototype.ngOnInit=function(){var e=this;this.wpRelations.require(this.wpId.toString()),Object(ys.a)(this.wpRelations.state(this.wpId.toString()).values$(),this.wpCacheService.loadWorkPackage(this.wpId.toString()).values$()).pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){var t=n[0],l=n[1],i=_.size(t),o=_.size(l.children);e.count=i+o})},e.prototype.ngOnDestroy=function(){},e}(),ks=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Cs(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","wp-tabs-count"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.count)})}function Is(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Cs)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.count>0)},null)}l["\u0275ccf"]("wp-relations-count",ws,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-count",[],null,null,null,Is,ks)),l["\u0275did"](1,245760,null,0,ws,[yn,Cn],null,null)],function(e,n){e(n,1,0)},null)},{wpId:"wpId"},{},[]);var Ps=function(){function e(){this.mobileWidthTreshold=680}return Object.defineProperty(e.prototype,"isMobile",{get:function(){return window.innerWidth<this.mobileWidthTreshold},enumerable:!0,configurable:!0}),e}(),js=function(){function e(e,n,t){this.I18n=e,this.injector=n,this.deviceService=t,this.localStorageKey="openProject-mainMenuWidth",this.defaultWidth=230,this.currentProject=this.injector.get(Vn),this.global=window,this.htmlNode=document.getElementsByTagName("html")[0],this.mainMenu=jQuery("#main-menu")[0],this.hideElements=jQuery(".can-hide-navigation"),this.titleData=new mt.a(""),this.titleData$=this.titleData.asObservable(),this.changeData=new mt.a({}),this.changeData$=this.changeData.asObservable()}return e.prototype.initializeMenu=function(){if(this.mainMenu){this.elementWidth=parseInt(window.OpenProject.guardedLocalStorage(this.localStorageKey)),this.elementWidth?this.setWidth():this.saveWidth(this.mainMenu.offsetWidth);var e=this.injector.get(Vn);(jQuery(document.body).hasClass("controller-my")&&0==this.elementWidth||null===e.id)&&this.saveWidth(this.defaultWidth),this.deviceService.isMobile&&this.closeMenu()}},e.prototype.toggleNavigation=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.showNavigation?this.closeMenu():this.deviceService.isMobile?(this.setWidth(window.innerWidth),this.setupAutocloseMainMenu()):this.saveWidth(this.defaultWidth),this.addRemoveClassHidden(),this.setToggleTitle(),setTimeout(function(){jQuery('#main-menu [class*="-menu-item"]:visible').first().focus()},500)},e.prototype.closeMenu=function(){this.deviceService.isMobile?this.saveWidth(0):this.setWidth(0),this.hideElements.addClass("hidden-navigation")},e.prototype.closeWhenOnMobile=function(){this.deviceService.isMobile&&this.closeMenu()},e.prototype.setToggleTitle=function(){this.showNavigation?this.toggleTitle=this.I18n.t("js.label_hide_project_menu"):this.toggleTitle=this.I18n.t("js.label_expand_project_menu"),this.titleData.next(this.toggleTitle)},e.prototype.addRemoveClassHidden=function(){this.hideElements.toggleClass("hidden-navigation",!this.showNavigation)},e.prototype.saveWidth=function(e){var n=this,t=window.innerWidth-520;null!=e&&e>t&&(e=t),this.setWidth(e),window.OpenProject.guardedLocalStorage(this.localStorageKey,String(this.elementWidth)),this.setToggleTitle();var l=jQuery.Event("change");jQuery("#content-wrapper").on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){n.changeData.next(l)})},e.prototype.setWidth=function(e){null!=e&&(this.elementWidth=e),this.snapBack(),this.ensureContentVisibility(),this.global.showNavigation=this.showNavigation,this.addRemoveClassHidden(),this.htmlNode.style.setProperty("--main-menu-width",this.elementWidth+"px")},e.prototype.setupAutocloseMainMenu=function(){var e=this;jQuery("#main-menu").off("focusout.main_menu"),jQuery("#main-menu").on("focusout.main_menu",function(n){e.showNavigation&&document.getElementById("main-menu-toggle")!==n.relatedTarget&&setTimeout(function(){jQuery.contains(document.getElementById("main-menu"),document.activeElement)||document.getElementById("main-menu-toggle")===document.activeElement||e.closeMenu()},0)})},e.prototype.snapBack=function(){this.elementWidth<=10&&(this.elementWidth=0)},e.prototype.ensureContentVisibility=function(){var e=document.documentElement.clientWidth;this.elementWidth>=e-150&&(this.elementWidth=e-150)},Object.defineProperty(e.prototype,"showNavigation",{get:function(){return this.elementWidth>10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGlobalPage",{get:function(){return!this.currentProject.id},enumerable:!0,configurable:!0}),e}(),_s=function(){function e(e){this.documentElement=e}return Object.defineProperty(e.prototype,"isMobile",{get:function(){return this.hasBodyClass("-browser-mobile")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEdge",{get:function(){return this.hasBodyClass("-browser-edge")},enumerable:!0,configurable:!0}),e.prototype.hasBodyClass=function(e){return this.documentElement.body.classList.contains(e)},e}(),Rs=function(){function e(e,n,t,l){this.toggleService=e,this.elementRef=n,this.$transitions=t,this.browserDetector=l,this.moving=!1}return e.prototype.ngOnInit=function(){var e=this;this.resizingElement=document.getElementsByClassName(this.elementClass)[0];var n=window.OpenProject.guardedLocalStorage(this.localStorageKey);this.elementFlex=n?parseInt(n,10):this.resizingElement.offsetWidth,0===this.elementFlex&&this.resizingElement.parentElement&&(this.elementFlex=this.resizingElement.parentElement.offsetWidth/2),this.resizingElement.style.flexBasis=this.elementFlex+"px",jQuery(document).ready(function(){e.applyColumnLayout(e.resizingElement,e.elementFlex)}),this.element=this.elementRef.nativeElement,this.toggleService.changeData$.pipe(Object(Zu.a)(),Object(Ln.b)(this)).subscribe(function(n){e.toggleFullscreenColumns()});var t=this;jQuery(window).resize(function(){t.toggleFullscreenColumns()})},e.prototype.ngOnDestroy=function(){this.resizingElement.style.flexBasis=null},e.prototype.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),1!==e.buttons&&1!==e.which||(this.oldPosition=e.clientX,this.moving=!0,this.mouseMoveHandler=this.resizeElement.bind(this,this.resizingElement),document.getElementsByTagName("body")[0].setAttribute("style","cursor: col-resize !important"),window.addEventListener("mousemove",this.mouseMoveHandler),window.addEventListener("touchmove",this.mouseMoveHandler,{passive:!1}))},e.prototype.handleTouchEnd=function(e){window.removeEventListener("touchmove",this.mouseMoveHandler);var n=window.OpenProject.guardedLocalStorage(this.localStorageKey);n&&(this.elementFlex=parseInt(n,10))},e.prototype.handleMouseUp=function(e){if(!this.moving)return!0;window.removeEventListener("mousemove",this.mouseMoveHandler),document.body.style.cursor="auto";var n=window.OpenProject.guardedLocalStorage(this.localStorageKey);n&&(this.elementFlex=parseInt(n,10)),this.moving=!1;var t=new Event(this.resizeEvent);return window.dispatchEvent(t),!1},e.prototype.resizeElement=function(e,n){n.preventDefault(),n.stopPropagation();var t=this.oldPosition-(n.clientX||n.pageX);this.oldPosition=n.clientX||n.pageX,this.elementFlex=this.elementFlex+t;var l=this.elementFlex<500?500:this.elementFlex;window.OpenProject.guardedLocalStorage(this.localStorageKey,String(l)),this.applyColumnLayout(e,l),e.style.flexBasis=l+"px"},e.prototype.applyColumnLayout=function(e,n){e===jQuery(".work-packages-full-view--split-right")[0]?this.toggleFullscreenColumns():this.toggleColumns(e,700)},e.prototype.toggleColumns=function(e,n){void 0===n&&(n=750),e&&!this.browserDetector.isEdge&&jQuery(e).toggleClass("-can-have-columns",e.offsetWidth>n)},e.prototype.toggleFullscreenColumns=function(){var e=jQuery(".work-packages-full-view--split-left")[0];this.toggleColumns(e)},e}(),Ss=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function xs(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","work-packages--resizer icon-resizer-vertical-lines"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-resizer",Rs,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;return"mousedown"===n&&(i=!1!==l["\u0275nov"](e,1).handleMouseDown(t)&&i),"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,1).handleTouchEnd(t)&&i),"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,1).handleMouseUp(t)&&i),i},xs,Ss)),l["\u0275did"](1,245760,null,0,Rs,[js,l.ElementRef,h.O,_s],null,null)],function(e,n){e(n,1,0)},null)},{elementClass:"elementClass",resizeEvent:"resizeEvent",localStorageKey:"localStorageKey"},{},[]);var Ts=function(){function e(){}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!this.name},enumerable:!0,configurable:!0}),e.prototype.setIfFirst=function(e,n){this.isEmpty&&e&&(this.name=e,this.params=n)},e}(),Os=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){return this.halResourceService.get(this.pathHelper.api.v3.projects.id(e).toString()).toPromise()},e}(),Es=function(e){function n(n,t){var l=e.call(this)||this;return l.states=n,l.projectDmService=t,l}return r.d(n,e),n.prototype.loadAll=function(e){var n=this;return Promise.all(e.map(function(e){return n.load(e)})).then(function(e){})},n.prototype.load=function(e){return this.projectDmService.load(e)},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.projects},enumerable:!0,configurable:!0}),n}(fn),Ds=function(){function e(e){this.titleService=e}return Object.defineProperty(e.prototype,"current",{get:function(){return this.titleService.getTitle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleParts",{get:function(){return this.current.split(" | ")},enumerable:!0,configurable:!0}),e.prototype.setFirstPart=function(e){var n=this.titleParts;n[0]=e,this.titleService.setTitle(n.join(" | "))},e}(),Fs=function(){function e(e,n){this.injector=e,this.workPackageId=n,this.wpCacheService=this.injector.get(yn),this.states=this.injector.get(s),this.I18n=this.injector.get(B.a),this.keepTab=this.injector.get(_e),this.PathHelper=this.injector.get(ve),this.wpTableRefresh=this.injector.get(zn),this.wpEditing=this.injector.get(ar),this.wpTableFocus=this.injector.get(Pa),this.projectCacheService=this.injector.get(Es),this.authorisationService=this.injector.get(Dn),this.text={},this.titleService=this.injector.get(Ds),this.initializeTexts()}return e.prototype.ngOnDestroy=function(){},e.prototype.observeWorkPackage=function(){var e=this;this.wpCacheService.loadWorkPackage(this.workPackageId).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.workPackage=n,e.init()})},e.prototype.initializeTexts=function(){var e=this;this.text.tabs={},["overview","activity","relations","watchers"].forEach(function(n){e.text.tabs[n]=e.I18n.t("js.work_packages.tabs."+n)})},e.prototype.init=function(){var e=this;this.projectCacheService.require(this.workPackage.project.idFromLink).then(function(){e.projectIdentifier=e.workPackage.project.identifier}),this.authorisationService.initModelAuth("work_package",this.workPackage.$links),this.titleService.setFirstPart(this.workPackage.subjectWithType(20)),this.showStaticPagePath=this.PathHelper.workPackagePath(this.workPackageId),this.keepTab.observable.pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.updateFocusAnchorLabel(n.active)})},e.prototype.updateFocusAnchorLabel=function(e){var n=this.I18n.t("js.label_work_package_details_you_are_here",{tab:this.I18n.t("js.work_packages.tabs."+e),type:this.workPackage.type.name,subject:this.workPackage.subject});return this.focusAnchorLabel=n},e.prototype.canViewWorkPackageWatchers=function(){return!(!this.workPackage||!this.workPackage.watchers)},Object.defineProperty(e.prototype,"isEditable",{get:function(){return this.workPackage.isEditable},enumerable:!0,configurable:!0}),e}(),As=function(e){function n(n,t,l,i,o,r,u){var a=e.call(this,n,u.params.workPackageId)||this;a.injector=n,a.states=t,a.firstRoute=l,a.keepTab=i,a.wpTableSelection=o,a.wpTableFocus=r,a.$state=u,a.observeWorkPackage();var s=u.params.workPackageId;if(a.wpTableFocus.focusedWorkPackage)a.wpTableFocus.updateFocus(s,!1);else{var c="work-packages.list.details.overview"===l.name,d=l.params&&s===l.params.workPackageI;a.wpTableFocus.updateFocus(s,c&&d)}return a.wpTableSelection.isEmpty&&a.wpTableSelection.setRowState(s,!0),a.wpTableFocus.whenChanged().pipe(Object(D.a)(Object(Ln.a)(a))).subscribe(function(e){!(s.toString()===e.toString())&&u.includes("work-packages.list.details")&&u.go(u.current.name,{workPackageId:e,focus:!1})}),a}return r.d(n,e),n.prototype.close=function(){this.$state.go("work-packages.list",this.$state.params)},n.prototype.switchToFullscreen=function(){this.$state.go(this.keepTab.currentShowState,this.$state.params)},Object.defineProperty(n.prototype,"shouldFocus",{get:function(){return!0===this.$state.params.focus},enumerable:!0,configurable:!0}),n.prototype.initializeTexts=function(){e.prototype.initializeTexts.call(this),this.text.closeDetailsView=this.I18n.t("js.button_close_details"),this.text.goTofullScreen=this.I18n.t("js.work_packages.message_successful_show_in_fullscreen")},n}(Fs),Ns=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ms(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"li",[["uiSref","work-packages.list.details.watchers"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,1).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](1,737280,[[4,4]],0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["\u0275did"](2,1196032,null,1,Vu.a,[h.Q],null,null),l["\u0275qud"](603979776,4,{_srefs:1}),l["\u0275did"](4,147456,null,0,qu.a,[Vu.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"wp-watchers-count",[],null,null,null,Bu,$u)),l["\u0275did"](7,245760,null,0,Lu,[yn],{wpId:[0,"wpId"]},null)],function(e,n){var t=n.component;e(n,1,0,"work-packages.list.details.watchers");e(n,4,0,"selected"),e(n,7,0,t.workPackage.id)},function(e,n){e(n,5,0,n.component.text.tabs.watchers)})}function Vs(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","work-packages--details-content work-packages-tab-view--overflow"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"span",[["class","hidden-for-sighted"],["focus","shouldFocus"],["tabindex","-1"]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](2,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"wp-breadcrumb",[],null,null,null,ka,ma)),l["\u0275did"](4,49152,null,0,fa,[B.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](5,0,null,null,5,"wp-edit-field-group",[],null,null,null,Da,Ea)),l["\u0275did"](6,245760,null,0,Oa,[s,l.Injector,ur,ar,On,Ia,Pa,h.O,Ne,h.G,B.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,0,1,"wp-subject",[],null,null,null,es,Ja)),l["\u0275did"](8,245760,null,0,Za,[h.Q,yn],null,null),(e()(),l["\u0275eld"](9,16777216,null,0,1,"div",[["class","work-package-details-tab"],["ui-view",""]],null,null,null,kt.c,kt.a)),l["\u0275did"](10,245760,null,0,Ki.a,[h.P,"UIView.PARENT_INJECT",l.ViewContainerRef],{_name:[0,"_name"]},null)],function(e,n){var t=n.component;e(n,2,0,"shouldFocus"),e(n,4,0,t.workPackage),e(n,6,0,t.workPackage),e(n,8,0);e(n,10,0,"")},function(e,n){e(n,1,0,n.component.focusAnchorLabel)})}function qs(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-packages--details-toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-details-toolbar",[],null,null,null,bs,vs)),l["\u0275did"](2,49152,null,0,ms,[B.a,ar],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,2,0,n.component.workPackage)},null)}function Ls(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,37,"div",[["class","work-packages--details loading-indicator--location"],["data-indicator-name","wpDetails"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,29,"div",[["id","tabs"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,28,"ul",[["class","tabrow"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,5,"li",[["uiSref","work-packages.list.details.overview"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,4).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](4,737280,[[1,4]],0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["\u0275did"](5,1196032,null,1,Vu.a,[h.Q],null,null),l["\u0275qud"](603979776,1,{_srefs:1}),l["\u0275did"](7,147456,null,0,qu.a,[Vu.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](8,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,5,"li",[["uiSref","work-packages.list.details.activity"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,10).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](10,737280,[[2,4]],0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["\u0275did"](11,1196032,null,1,Vu.a,[h.Q],null,null),l["\u0275qud"](603979776,2,{_srefs:1}),l["\u0275did"](13,147456,null,0,qu.a,[Vu.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](14,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,7,"li",[["uiSref","work-packages.list.details.relations"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,16).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](16,737280,[[3,4]],0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["\u0275did"](17,1196032,null,1,Vu.a,[h.Q],null,null),l["\u0275qud"](603979776,3,{_srefs:1}),l["\u0275did"](19,147456,null,0,qu.a,[Vu.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](20,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,1,"wp-relations-count",[],null,null,null,Is,ks)),l["\u0275did"](22,245760,null,0,ws,[yn,Cn],{wpId:[0,"wpId"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ms)),l["\u0275did"](24,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](25,0,null,null,2,"li",[["class","tab-icon"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,1,"accessible-by-keyboard",[["linkClass","work-packages--details-fullscreen-icon"],["spanClass","icon-context icon-to-fullscreen"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.switchToFullscreen()&&l);return l},al,ul)),l["\u0275did"](27,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],spanClass:[2,"spanClass"],linkAriaLabel:[3,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](28,0,null,null,2,"li",[["class","tab-icon"]],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,1,"accessible-by-keyboard",[["linkClass","work-packages--details-close-icon"],["spanClass","icon-context icon-close"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.close()&&l);return l},al,ul)),l["\u0275did"](30,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],spanClass:[2,"spanClass"],linkAriaLabel:[3,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275and"](16777216,null,null,1,null,Vs)),l["\u0275did"](32,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,qs)),l["\u0275did"](34,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](35,0,null,null,2,"div",[["class","work-packages--details--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](36,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,37).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,37).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,37).handleMouseUp(t)&&i);return i},xs,Ss)),l["\u0275did"](37,245760,null,0,Rs,[js,l.ElementRef,h.O,_s],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,4,0,"work-packages.list.details.overview");e(n,7,0,"selected");e(n,10,0,"work-packages.list.details.activity");e(n,13,0,"selected");e(n,16,0,"work-packages.list.details.relations");e(n,19,0,"selected"),e(n,22,0,t.workPackage.id),e(n,24,0,t.canViewWorkPackageWatchers());e(n,27,0,"work-packages--details-fullscreen-icon",t.text.goTofullScreen,"icon-context icon-to-fullscreen",t.text.goTofullScreen);e(n,30,0,"work-packages--details-close-icon",t.text.closeDetailsView,"icon-context icon-close",t.text.closeDetailsView),e(n,32,0,t.workPackage),e(n,34,0,t.workPackage);e(n,37,0,"work-packages-split-view--details-side","openProject-splitViewFlexBasis")},function(e,n){var t=n.component;e(n,8,0,t.text.tabs.overview),e(n,14,0,t.text.tabs.activity),e(n,20,0,t.text.tabs.relations)})}function $s(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Ls)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var Hs=l["\u0275ccf"]("wp-split-view-entry",As,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-split-view-entry",[],null,null,null,$s,Ns)),l["\u0275did"](1,180224,null,0,As,[l.Injector,s,Ts,_e,Ia,Pa,h.G],null,null)],null,null)},{},{},[]),Bs=function(e){function n(n,t,l,i,o){var r=e.call(this,n,t)||this;return r.elementRef=n,r.opContextMenu=t,r.browserDetector=l,r.$state=i,r.wpCreate=o,r}return r.d(n,e),n.prototype.ngAfterViewInit=function(){var n=this;e.prototype.ngAfterViewInit.call(this),this.active&&(this.browserDetector.isMobile&&(this.stateName="work-packages.new"),this.loadingPromise=this.wpCreate.getEmptyForm(this.projectIdentifier).then(function(e){return n.buildItems(e.schema.type.allowedValues)}))},n.prototype.open=function(e){var n=this;this.loadingPromise.then(function(){n.opContextMenu.show(n,e)})},Object.defineProperty(n.prototype,"locals",{get:function(){return{items:this.items,contextMenuId:"types-context-menu"}},enumerable:!0,configurable:!0}),n.prototype.buildItems=function(e){var n=this;this.items=e.map(function(e){return{disabled:!1,linkText:e.name,href:n.$state.href(n.stateName,{type:e.id}),ariaLabel:e.name,class:Ol.inlineClass("type",e.id),onClick:function(t){return!us.isClickedWithModifier(t)&&(n.$state.go(n.stateName,{type:e.id}),!0)}}})},n}(ps),zs=function(){function e(e,n,t){this.$state=e,this.currentProject=n,this.I18n=t,this.text={createWithDropdown:this.I18n.t("js.work_packages.create.button"),createButton:this.I18n.t("js.label_work_package"),explanation:this.I18n.t("js.label_create_work_package")}}return e.prototype.ngOnInit=function(){this.projectIdentifier=this.currentProject.identifier},e.prototype.createWorkPackage=function(){this.$state.go(this.stateName,{projectPath:this.projectIdentifier})},e.prototype.isDisabled=function(){return!this.allowed||this.$state.includes("**.new")},e}(),Ws=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Qs(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","wp-create-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"button",[["class","button -alt-highlight add-work-package"],["opTypesCreateDropdown",""]],[[8,"disabled",0],[1,"aria-label",0]],null,null,null,null)),l["\u0275did"](2,4210688,null,0,Bs,[l.ElementRef,Qa,_s,h.G,ur],{projectIdentifier:[0,"projectIdentifier"],stateName:[1,"stateName"],active:[2,"active"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-add"]],null,null,null,Zt,Gt)),l["\u0275did"](4,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[["aria-hidden","true"],["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-small icon-pulldown"]],null,null,null,Zt,Gt)),l["\u0275did"](7,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,t.projectIdentifier,t.stateName,t.allowed);e(n,4,0,"button--icon icon-add");e(n,7,0,"button--icon icon-small icon-pulldown")},function(e,n){var t=n.component;e(n,1,0,t.isDisabled(),t.text.explanation),e(n,5,0,t.text.createWithDropdown)})}l["\u0275ccf"]("wp-create-button",zs,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-create-button",[],null,null,null,Qs,Ws)),l["\u0275did"](1,114688,null,0,zs,[h.G,Vn,B.a],null,null)],function(e,n){e(n,1,0)},null)},{stateName:"stateName",allowed:"allowed"},{},[]);var Us=function(e){function n(n,t,l,i,o,r,u,a){var s=e.call(this,n,t)||this;return s.elementRef=n,s.opContextMenu=t,s.$state=l,s.wpNotificationsService=i,s.notificationService=o,s.wpEditing=r,s.I18n=u,s.wpTableRefresh=a,s}return r.d(n,e),n.prototype.open=function(e){var n=this,t=this.wpEditing.changesetFor(this.workPackage);t.getForm().then(function(l){var i=l.schema.status.allowedValues;n.buildItems(i),t.isWritable("status")?n.opContextMenu.show(n,e):n.notificationService.addError(n.I18n.t("js.work_packages.message_work_package_status_blocked"))})},Object.defineProperty(n.prototype,"locals",{get:function(){return{items:this.items,contextMenuId:"wp-status-context-menu"}},enumerable:!0,configurable:!0}),n.prototype.updateStatus=function(e){var n=this,t=this.wpEditing.changesetFor(this.workPackage);t.setValue("status",e),this.workPackage.isNew||t.save().then(function(){n.wpNotificationsService.showSave(n.workPackage),n.wpTableRefresh.request("Altered work package status via button")})},n.prototype.buildItems=function(e){var n=this;this.items=e.map(function(e){return{disabled:!1,linkText:e.name,postIcon:e.isReadonly?"icon-locked":null,postIconTitle:n.I18n.t("js.work_packages.message_work_package_read_only"),class:Ol.inlineClass("status",e.id),onClick:function(){return n.updateStatus(e),!0}}})},n}(ps),Ks=function(){function e(e,n,t,l,i){this.I18n=e,this.cdRef=n,this.wpCacheService=t,this.schemaCacheService=l,this.wpEditing=i,this.text={explanation:this.I18n.t("js.label_edit_status"),workPackageReadOnly:this.I18n.t("js.work_packages.message_work_package_read_only"),workPackageStatusBlocked:this.I18n.t("js.work_packages.message_work_package_status_blocked")}}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.observe(this.workPackage.id).pipe(Object(Ln.b)(this)).subscribe(function(n){e.workPackage=n,e.cdRef.detectChanges(),e.workPackage.status.$load()}),this.schemaCacheService.state(this.workPackage).changes$().pipe(Object(Ln.b)(this)).subscribe(function(){e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"buttonTitle",{get:function(){return this.workPackage.isReadonly?this.text.workPackageReadOnly:this.workPackage.isEditable&&this.isDisabled?this.text.workPackageStatusBlocked:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusHighlightClass",{get:function(){var e=this.status;if(e)return Ol.backgroundClass("status",e.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){if(this.wpEditing)return this.changeset.value("status")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowed",{get:function(){return this.workPackage.isAttributeEditable("status")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){var e=this.changeset.isWritable("status");return!this.allowed||!e||this.changeset.inFlight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeset",{get:function(){return this.wpEditing.changesetFor(this.workPackage)},enumerable:!0,configurable:!0}),e}(),Gs=[[".wp-status-button[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;padding:5px;margin-bottom:0;background-color:var(--status-selector-bg-color);border:none;color:#fff;white-space:nowrap;max-width:100%}.wp-status-button[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button--text[_ngcontent-%COMP%]{margin:0 5px}.wp-status-button.-small[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:12px;padding:4px;margin-right:0}"]],Ys=l["\u0275crt"]({encapsulation:0,styles:Gs,data:{}});function Zs(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","button--text"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-locked"]],null,null,null,Zt,Gt)),l["\u0275did"](2,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"button--icon icon-locked")},null)}function Js(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"div",[["class","wp-status-button"]],[[1,"title",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275eld"](2,0,null,null,7,"button",[["class","button"],["wpStatusDropdown",""]],[[8,"disabled",0],[1,"aria-label",0]],null,null,null,null)),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275did"](4,4210688,null,0,Us,[l.ElementRef,Qa,h.G,On,Tn,ar,B.a,zn],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Zs)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[["aria-hidden","true"],["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-small icon-pulldown"]],null,null,null,Zt,Gt)),l["\u0275did"](9,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,1,0,"wp-status-button",t.containerClass);e(n,3,0,"button",t.statusHighlightClass),e(n,4,0,t.workPackage),e(n,6,0,t.workPackage.isReadonly);e(n,9,0,"button--icon icon-small icon-pulldown")},function(e,n){var t=n.component;e(n,0,0,t.buttonTitle),e(n,2,0,t.isDisabled,t.text.explanation),e(n,7,0,t.status.name)})}function Xs(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Js)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.status)},null)}l["\u0275ccf"]("wp-status-button",Ks,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-status-button",[],null,null,null,Xs,Ys)),l["\u0275did"](1,245760,null,0,Ks,[B.a,l.ChangeDetectorRef,yn,gn,ar],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",containerClass:"containerClass"},{},[]);var ec=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.loadAll=function(){return this.halResourceService.get(this.pathHelper.api.v3.help_texts.toString()).toPromise()},e.prototype.load=function(e){return this.halResourceService.get(this.pathHelper.api.v3.help_texts.id(e).toString()).toPromise()},e}(),nc=function(){function e(e){this.helpTextDm=e,this.helpTexts=Object(u.g)()}return e.prototype.require=function(e,n){var t=this;return this.helpTexts.putFromPromiseIfPristine(function(){return t.helpTextDm.loadAll().then(function(e){return e.elements})}),new Promise(function(l,i){t.helpTexts.valuesPromise().then(function(){return l(t.find(e,n))})})},e.prototype.find=function(e,n){var t=this.helpTexts.getValueOr([]);return _.find(t,function(t){return t.scope===n&&t.attribute===e})},e}(),tc=function(e){function n(n,t,l,i){var o=e.call(this,n,l,i)||this;return o.locals=n,o.I18n=t,o.cdRef=l,o.elementRef=i,o.closeOnEscape=!0,o.closeOnOutsideClick=!1,o.text={edit:o.I18n.t("js.button_edit"),close:o.I18n.t("js.button_close")},o.helpText=o.locals.helpText,o}return r.d(n,e),Object.defineProperty(n.prototype,"helpTextLink",{get:function(){return this.helpText.editText?this.helpText.editText.$link.href:""},enumerable:!0,configurable:!0}),n}(Le.a),lc=function(){function e(e,n,t,l,i,o){this.elementRef=e,this.helpTextDm=n,this.attributeHelpTexts=t,this.opModalService=l,this.injector=i,this.I18n=o,this.exists=!1,this.text={open_dialog:this.I18n.t("js.help_texts.show_modal"),edit:this.I18n.t("js.button_edit"),close:this.I18n.t("js.button_close")}}return e.prototype.ngOnInit=function(){var e=this;this.helpTextId?this.exists=!0:this.load().then(function(n){return e.exists=!!n,n})},e.prototype.handleClick=function(){var e=this;this.load().then(function(n){e.opModalService.show(tc,e.injector,{helpText:n})})},e.prototype.load=function(){return this.helpTextId?this.helpTextDm.load(this.helpTextId):this.attributeHelpTexts.require(this.attribute,this.attributeScope)},e}(),ic=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function oc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.handleClick()&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-help1"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](4,0,[" ","\n"]))],function(e,n){var t=n.component;e(n,1,0,l["\u0275inlineInterpolate"](1,"icon help-text--entry help-text--for-",t.attribute,""),t.text.open_dialog);e(n,3,0,"icon icon-help1")},function(e,n){e(n,4,0,n.component.additionalLabel)})}function rc(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,oc)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.exists)},null)}l["\u0275ccf"]("attribute-help-text",lc,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attribute-help-text",[],null,null,null,rc,ic)),l["\u0275did"](1,114688,null,0,lc,[l.ElementRef,ec,nc,Mn.b,l.Injector,B.a],null,null)],function(e,n){e(n,1,0)},null)},{attribute:"attribute",additionalLabel:"additionalLabel",attributeScope:"attributeScope",helpTextId:"helpTextId"},{},[]);var uc=function(){function e(e,n){this.pathHelper=e,this.I18n=n}return e.prototype.ngOnInit=function(){this.href=this.pathHelper.userPath(this.user.idFromLink),this.name=this.user.name,this.label=this.I18n.t("js.label_author",{user:this.name})},e}(),ac=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function sc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"a",[],[[1,"href",4],[1,"title",0],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.href,t.label,t.user.name)})}l["\u0275ccf"]("user-link",uc,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-link",[],null,null,null,sc,ac)),l["\u0275did"](1,114688,null,0,uc,[ve,B.a],null,null)],function(e,n){e(n,1,0)},null)},{user:"user"},{},[]);var cc=function(){function e(e,n){this.wpEditFieldGroup=e,this.elementRef=n}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement)},e.prototype.activate=function(e){if(jQuery(e.target).closest(".help-text--entry").length)return!0;var n=this.wpEditFieldGroup.fields[this.fieldName];return n&&n.handleUserActivate(null),!1},e}(),dc=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","wp-replacement-label"],["tabindex","-1"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.activate(t)&&l);return l},null,null)),l["\u0275ncd"](null,0)],null,null)}l["\u0275ccf"]("wp-replacement-label",cc,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-replacement-label",[],null,null,null,pc,dc)),l["\u0275did"](1,114688,null,0,cc,[Oa,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{fieldName:"fieldName"},{},["*"]);var hc=t("umFc"),fc=t("goJk"),gc=function(){function e(e,n,t,l){this.state=e,this.I18n=n,this.injector=t,this.pathHelper=l,this.text={}}return Object.defineProperty(e.prototype,"viewpoints",{get:function(){return this._viewpoints},set:function(e){this._viewpoints=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.viewpoints=this.workPackage.bcf.viewpoints.map(function(n){return{id:n.id,fileName:n.file_name,fullPath:e.pathHelper.attachmentDownloadPath(n.id,n.file_name)}}),this.galleryOptions=[{width:"100%",height:"400px",thumbnailsColumns:4,imageAnimation:"",previewCloseOnEsc:!0,previewKeyboardNavigation:!0,imageSize:"contain",imageArrowsAutoHide:!0,thumbnailsArrowsAutoHide:!0,thumbnailsAutoHide:!0,thumbnailsMargin:5,thumbnailMargin:5,previewDownload:!0,arrowPrevIcon:"icon-arrow-left2",arrowNextIcon:"icon-arrow-right2",closeIcon:"icon-close",downloadIcon:"icon-download",previewCloseOnClick:!0},{breakpoint:800,width:"100%",height:"300px",imagePercent:80,thumbnailsPercent:20,thumbnailsMargin:5,thumbnailMargin:5,imageSize:"contain"},{breakpoint:400,height:"200px"}],this.galleryImages=this.viewpoints.map(function(e){return{small:e.fullPath,medium:e.fullPath,big:e.fullPath}})},e.prototype.galleryPreviewOpen=function(){console.log("preview open"),jQuery("#top-menu")[0].style.zIndex="10"},e.prototype.gallleryPreviewClose=function(){console.log("preview close"),jQuery("#top-menu")[0].style.zIndex=""},e.prototype.ngOnDestroy=function(){},e}(),mc=[[".bcf--viewpoints[_ngcontent-%COMP%]{clear:both}.bcf--viewpoints[_ngcontent-%COMP%]   ngx-gallery[_ngcontent-%COMP%]{background:var(--primary-color);padding:5px}.bcf--snapshot-preview[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:5px;float:left}.bcf--snapshot-preview.-tiny[_ngcontent-%COMP%]{display:inline-block;float:initial;width:initial;height:100px;margin-right:5px}.bcf--snapshot-preview.-tiny[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}"]],vc=l["\u0275crt"]({encapsulation:0,styles:mc,data:{}});function bc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"h3",[["class","attributes-groupe header-text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["BCF"])),(e()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","bcf--viewpoints"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"ngx-gallery",[],[[4,"width",null],[4,"height",null],[4,"left",null]],[[null,"previewOpen"],[null,"previewClose"],["window","resize"]],function(e,n,t){var i=!0,o=e.component;"window:resize"===n&&(i=!1!==l["\u0275nov"](e,5).onResize()&&i);"previewOpen"===n&&(i=!1!==o.galleryPreviewOpen()&&i);"previewClose"===n&&(i=!1!==o.gallleryPreviewClose()&&i);return i},hc.b,hc.a)),l["\u0275prd"](4608,null,fc.NgxGalleryHelperService,fc.NgxGalleryHelperService,[l.Renderer]),l["\u0275did"](5,4571136,null,0,fc.NgxGalleryComponent,[l.ElementRef],{options:[0,"options"],images:[1,"images"]},{previewOpen:"previewOpen",previewClose:"previewClose"})],function(e,n){var t=n.component;e(n,5,0,t.galleryOptions,t.galleryImages)},function(e,n){e(n,3,0,l["\u0275nov"](n,5).width,l["\u0275nov"](n,5).height,l["\u0275nov"](n,5).left)})}l["\u0275ccf"]("bcf-wp-single-view",gc,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"bcf-wp-single-view",[],null,null,null,bc,vc)),l["\u0275did"](1,245760,null,0,gc,[h.G,B.a,l.Injector,ve],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var yc=function(){function e(e,n,t,l){this.HookService=e,this.UrlParamsHelper=n,this.wpTableTimeline=t,this.PathHelper=l,this.BULK_ACTIONS=[{text:I18n.t("js.work_packages.bulk_actions.edit"),key:"edit",link:"update",href:this.PathHelper.staticBase+"/work_packages/bulk/edit"},{text:I18n.t("js.work_packages.bulk_actions.move"),key:"move",link:"move",href:this.PathHelper.staticBase+"/work_packages/move/new"},{text:I18n.t("js.work_packages.bulk_actions.copy"),key:"copy",link:"copy",href:this.PathHelper.staticBase+"/work_packages/move/new?copy=true"},{text:I18n.t("js.work_packages.bulk_actions.delete"),key:"delete",link:"delete",href:this.PathHelper.staticBase+"/work_packages/bulk?_method=delete"}]}return e.prototype.getPermittedActionLinks=function(e,n){var t=[],l=this.getAllowedActions(e,n);return l=l.concat(this.getAllowedRelationActions(e)),_.each(l,function(n){t.push({key:n.key,text:n.text,icon:n.icon,link:e[n.link].href})}),t},e.prototype.getIntersectOfPermittedActions=function(e){var n=this,t=[],l=_.filter(this.BULK_ACTIONS,function(t){return _.every(e,function(e){return n.getAllowedActions(e,[t]).length>=1})});return _.each(l,function(l){t.push({key:l.key,text:l.text,link:n.getBulkActionLink(l,e)})}),t},e.prototype.getBulkActionLink=function(e,n){var t={"ids[]":n.map(function(e){return e.id})},l=this.UrlParamsHelper.buildQueryString(t),i=e.href.split("?");return i.shift()+"?"+i.concat(new Array(l)).join("&")},e.prototype.getAllowedActions=function(e,n){var t=[];return _.each(n,function(n){e.hasOwnProperty(n.link)&&(n.text=n.text||I18n.t("js.button_"+n.key),t.push(n))}),_.each(this.HookService.call("workPackageTableContextMenu"),function(n){if(e.hasOwnProperty(n.link)){var l=n.indexBy?n.indexBy(t):t.length;t.splice(l,0,n)}}),t},e.prototype.getAllowedRelationActions=function(e){var n=[];return e.addRelation&&this.wpTableTimeline.isVisible&&(n.push({key:"relation-precedes",text:I18n.t("js.relation_buttons.add_predecessor"),link:"addRelation"}),n.push({key:"relation-follows",text:I18n.t("js.relation_buttons.add_follower"),link:"addRelation"})),e.addChild&&n.push({key:"relation-new-child",text:I18n.t("js.relation_buttons.add_new_child"),link:"addChild"}),n},e.prototype.getPermittedActions=function(e,n){return 1===e.length?this.getPermittedActionLinks(e[0],n):this.getIntersectOfPermittedActions(e)},e}(),wc=function(){function e(e){this.injector=e,this.I18n=this.injector.get(B.a),this.authorisationService=this.injector.get(Dn),this.referenceComponentClass=null,this.referenceTarget=null,this.buttonTexts={reference:"",create:this.I18n.t("js.label_create_work_package")},this.newInlineWorkPackageCreated=new a.a,this.newInlineWorkPackageReferenced=new a.a}return Object.defineProperty(e.prototype,"canAdd",{get:function(){return this.canCreateWorkPackages||this.authorisationService.can("work_package","addChild")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canReference",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canCreateWorkPackages",{get:function(){return this.authorisationService.can("work_packages","createWorkPackage")&&this.authorisationService.can("work_packages","editWorkPackage")},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.newInlineWorkPackageCreated.complete(),this.newInlineWorkPackageReferenced.complete()},e}();function kc(e,n){return"click"!==e.type&&("keydown"!==e.type||e.which!==il.a.ENTER)||(n(),!1)}var Cc=function(){function e(){}return e.prototype.handleEvent=function(e,n){var t=this;kc(n,function(){return t.processEvent(e,n)})},e}();function Ic(e){return"wp-row-"+e+"-table"}function Pc(e){return jQuery("."+Ic(e))}function jc(e){try{var n=Pc(e),t=n.scrollParent(),l=t.scrollTop(),i=l+t.height(),o=n[0].offsetTop,r=o+n.height();o<l?t[0].scrollTop=o:r>i&&(t[0].scrollTop=r-t.height())}catch(u){console.warn("Can't scroll row element into view: "+u)}}var _c="wp-table--cell-td",Rc=function(){function e(e){this.injector=e,this.fieldRenderer=new Wa(this.injector,"table")}return e.prototype.build=function(e,n){var t=document.createElement("td");t.classList.add(_c,"wp-table--cell-td",n),"subject"===n&&t.classList.add("-max");var l=document.createElement("span");l.classList.add("wp-table--cell-container",za,n);var i=this.fieldRenderer.render(e,n,null);return l.appendChild(i),t.appendChild(l),t},e.prototype.refresh=function(e,n,t){var l=this.fieldRenderer.render(n,t,null);e.innerHTML="",e.appendChild(l)},e}(),Sc=function(){function e(e){this.injector=e,this.states=this.injector.get(s),this.wpRelations=this.injector.get(Cn),this.wpTableRelationColumns=this.injector.get(In)}return e.prototype.build=function(e,n){var t=document.createElement("td");t.classList.add(_c,"wp-table--relation-cell-td",n.id),t.dataset.columnId=n.id;var l=this.wpTableRelationColumns.getExpandFor(e.id)===n.id,i=this.wpRelations.state(e.id).value,o=this.wpTableRelationColumns.relationsForColumn(e,i,n),r=this.renderIndicator(),u=this.renderBadge(o);return l&&t.classList.add("-expanded"),o.length>0&&(t.appendChild(u),t.appendChild(r)),t},e.prototype.renderIndicator=function(){var e=document.createElement("span");return e.classList.add("wp-table--relation-indicator"),e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","0"),e},e.prototype.renderBadge=function(e){var n=document.createElement("span");return n.classList.add("wp-table--relation-count"),n.textContent=""+e.length,n.classList.add("badge","-border-only"),n},e}(),xc=function(){function e(e){this.injector=e,this.tableActionsService=this.injector.get(Te)}return e.prototype.build=function(e){var n=document.createElement("td");n.classList.add("wp-table--cell-td","wp-table--context-menu-td","hide-when-print");var t=document.createElement("span");return t.classList.add("wp-table--context-menu-span"),this.tableActionsService.render(e).forEach(function(e){t.appendChild(e)}),n.appendChild(t),n},e}(),Tc=function(){function e(){}return e.prototype.build=function(e){var n=document.createElement("td");n.classList.add("wp-table--cell-td","wp-table--sort-td","hide-when-print");var t=document.createElement("span");return t.classList.add("wp-table--drag-and-drop-handle","icon-toggle"),n.appendChild(t),n},e}(),Oc={id:"__internal-sorthandle"},Ec={id:"__internal-contextMenu"},Dc=function(){function e(e,n){this.injector=e,this.workPackageTable=n,this.wpTableSelection=this.injector.get(Ia),this.wpTableColumns=this.injector.get(qe),this.I18n=this.injector.get(B.a),this.cellBuilder=new Rc(this.injector),this.relationCellBuilder=new Sc(this.injector),this.contextLinkBuilder=new xc(this.injector),this.dragDropHandleBuilder=new Tc,this.augmentedColumns=this.buildAugmentedColumns()}return Object.defineProperty(e.prototype,"columns",{get:function(){return this.wpTableColumns.getColumns()},enumerable:!0,configurable:!0}),e.prototype.buildAugmentedColumns=function(){var e=this.columns.concat([Ec]);return this.workPackageTable.configuration.dragAndDropEnabled&&e.unshift(Oc),e},e.prototype.buildCell=function(e,n){if(Ve(n))return this.relationCellBuilder.build(e,n);switch(n.id){case Oc.id:return this.dragDropHandleBuilder.build(e);case Ec.id:if(this.workPackageTable.configuration.actionsColumnEnabled)return this.contextLinkBuilder.build(e);if(this.workPackageTable.configuration.columnMenuEnabled){var t=document.createElement("td");return t.classList.add("hide-when-print"),t}return null;default:return this.cellBuilder.build(e,n.id)}},e.prototype.buildEmpty=function(e){var n=this.createEmptyRow(e);return this.buildEmptyRow(e,n)},e.prototype.createEmptyRow=function(e){var n=this.classIdentifier(e),t=document.createElement("tr");return t.setAttribute("tabindex","0"),t.dataset.workPackageId=e.id,t.dataset.classIdentifier=n,t.classList.add("wp-table--row","wp--row",n,n+"-table","issue"),t},Object.defineProperty(e.prototype,"placeholderRow",{get:function(){var e=document.createElement("tr"),n=document.createElement("td");return e.classList.add("wp--placeholder-row"),n.colSpan=this.augmentedColumns.length,e.appendChild(n),e},enumerable:!0,configurable:!0}),e.prototype.classIdentifier=function(e){return"wp-row-"+e.id},e.prototype.refreshRow=function(e,n){var t=this,l=n.find(".wp-table--cell-td").detach(),i=[];return this.augmentedColumns.forEach(function(n){var o=l.filter("td."+n.id);if(t.isColumnBeingEdited(e,n))i.push(o[0]);else{var r=t.buildCell(e,n);r&&i.push(r)}}),n.prepend(i),n},e.prototype.isColumnBeingEdited=function(e,n){var t=this.workPackageTable.editing.forms[e.id];return t&&t.activeFields[n.id]},e.prototype.buildEmptyRow=function(e,n){var t,l=this,i=this.workPackageTable.editing.changeset(e.id),o={};if(i&&!i.empty){var r=(t=this.classIdentifier(e),jQuery("."+t+"-table"));i.changedAttributes.forEach(function(e){o[e]=r.find(".wp-table--cell-td."+e)})}return this.augmentedColumns.forEach(function(t){var i,r=o[t.id];r&&r.length?(Object(mn.a)("Rendering previous open column "+t.id+" on "+e.id),jQuery(n).append(r)):(i=l.buildCell(e,t))&&n.appendChild(i)}),this.wpTableSelection.isSelected(e.id)&&n.classList.add("-checked"),[n,!1]},e}(),Fc=function(){function e(e,n){this.injector=e,this.workPackageTable=n,this.states=this.injector.get(s)}return e.prototype.isApplicable=function(e){return!0},e}();function Ac(e){return e._links.groupBy.href.split("/").pop()}function Nc(e){return"__row-group-"+e}function Mc(e){return"group-"+e.identifier}var Vc=function(){function e(e){this.injector=e,this.I18n=this.injector.get(B.a),this.text={collapse:this.I18n.t("js.label_collapse"),expand:this.I18n.t("js.label_expand")}}return e.prototype.buildGroupRow=function(e,n){var t,l,i=document.createElement("tr");return e.collapsed?(l=this.text.expand,t="icon-plus"):(l=this.text.collapse,t="icon-minus2"),i.classList.add("wp-table--group-header",Mc(e)),i.id="wp-table-rowgroup-"+e.index,i.dataset.groupIndex=e.index.toString(),i.dataset.groupIdentifier=e.identifier,i.innerHTML='\n      <td colspan="'+n+'" class="-no-highlighting">\n        <div class="expander icon-context '+t+'">\n          <span class="hidden-for-sighted">'+_.escape(l)+'</span>\n        </div>\n        <div class="group--value">\n          '+_.escape(function(e){var n=e.value;return null===n?"-":n}(e))+'\n          <span class="count">\n            ('+e.count+")\n          </span>\n        </div>\n      </td>\n    ",i},e}();function qc(e){return"__relations-expanded-from-"+e}var Lc=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.workPackageTable=t,l.states=l.injector.get(s),l.I18n=l.injector.get(B.a),l}return r.d(n,e),n.prototype.buildCell=function(n,t){return Ve(t)?this.emptyRelationCell(t):e.prototype.buildCell.call(this,n,t)},n.prototype.buildEmptyRelationRow=function(n,t,l){var i=t.denormalized(n),o=this.states.workPackages.get(i.targetId).value,r=this.createEmptyRelationRow(n,o),u=e.prototype.buildEmptyRow.call(this,o,r),a=u[0];u[1];return[a,o]},n.prototype.createEmptyRelationRow=function(e,n){var t=this.relationClassIdentifier(e,n),l=document.createElement("tr");return l.dataset.workPackageId=n.id,l.dataset.classIdentifier=t,l.classList.add("wp--row","wp-table--row","issue","wp-table--relations-aditional-row",t,t+"-table",qc(e.id)),l},n.prototype.relationClassIdentifier=function(e,n){return t=n.id,"wp-relation-row-"+e.id+"-to-"+t;var t},n.prototype.appendRelationLabel=function(e,n,t,l,i){var o=t.denormalized(n),r="";("toType"===i&&(r=this.I18n.t("js.relation_labels."+o.reverseRelationType)),"ofType"===i)&&(r=this.states.workPackages.get(o.target.id).value.type.name);var u=document.createElement("span");u.classList.add("relation-row--type-label"),u.textContent=r;document.createTextNode(o.target.name);e.find(".wp-table--relation-cell-td").empty(),e.find(".wp-table--relation-cell-td."+l).append(u)},n.prototype.emptyRelationCell=function(e){var n=document.createElement("td");return n.classList.add("wp-table--relation-cell-td","wp-table--cell-td",e.id),n},n}(Dc),$c=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t,this.wpRelations=this.injector.get(Cn),this.wpTableColumns=this.injector.get(qe),this.wpTableRelationColumns=this.injector.get(In),this.relationRowBuilder=new Lc(e,n)}return e.prototype.render=function(){var e=this;this.isApplicable&&_.clone(this.tablePass.renderedOrder).forEach(function(n,t){if(n.workPackage){var l=n.workPackage,i=l.id,o=e.wpRelations.state(i);o.hasValue()&&0!==_.size(o.value)&&e.wpTableRelationColumns.relationsToExtendFor(l,o.value,function(t,o,r){var u,a=e.relationRowBuilder.buildEmptyRelationRow(l,t,r),s=a[0],c=a[1];(u=s.classList).add.apply(u,n.additionalClasses),e.relationRowBuilder.appendRelationLabel(jQuery(s),l,t,o.id,r),e.tablePass.spliceRow(s,"."+e.relationRowBuilder.classIdentifier(l)+",."+qc(i),{classIdentifier:e.relationRowBuilder.relationClassIdentifier(l,c),additionalClasses:n.additionalClasses.concat(["wp-table--relations-aditional-row"]),workPackage:c,belongsTo:l,renderType:"relations",hidden:n.hidden,data:{relation:t,columnId:o.id,relationType:r}})})}})},e.prototype.refreshRelationRow=function(e,n,t){var l=this.relationRowBuilder.refreshRow(n,t);return this.relationRowBuilder.appendRelationLabel(l,e.belongsTo,e.data.relation,e.data.columnId,e.data.relationType),l},Object.defineProperty(e.prototype,"isApplicable",{get:function(){return this.wpTableColumns.hasRelationColumns()},enumerable:!0,configurable:!0}),e}(),Hc=function(){function e(e,n){this.injector=e,this.workPackageTable=n,this.states=this.injector.get(s),this.wpTableTimeline=this.injector.get(M),this.wpCacheService=this.injector.get(yn)}return e.prototype.build=function(e){var n=document.createElement("div");return n.classList.add("wp-timeline-cell","wp--row"),e&&(n.dataset.workPackageId=e),n},e.prototype.insert=function(e,n,t){var l;void 0===t&&(t=[]);var i=this.build(e);(l=i.classList).add.apply(l,t),n.appendChild(i)},e}(),Bc=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t}return e.prototype.render=function(){var e=this;this.timelineBody=document.createDocumentFragment(),this.timelineBuilder=new Hc(this.injector,this.table),this.tablePass.renderedOrder.forEach(function(n){var t,l=n.workPackage?n.workPackage.id:null,i=e.timelineBuilder.build(l);(t=i.classList).add.apply(t,[n.classIdentifier,n.classIdentifier+"-timeline"].concat(n.additionalClasses)),e.timelineBody.appendChild(i)})},e}(),zc=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t,this.wpTableHighlighting=this.injector.get(un),this.querySpace=this.injector.get(y)}return e.prototype.render=function(){var e=this;if(this.isApplicable){var n=this.wpTableHighlighting.current.mode;window.getComputedStyle(document.body);this.tablePass.renderedOrder.forEach(function(t,l){if(t.workPackage){var i=t.workPackage[n];if(i){var o=i.id;e.tablePass.tableBody.children[l].classList.add(Ol.backgroundClass(n,o))}}})}},Object.defineProperty(e.prototype,"isApplicable",{get:function(){return!(this.wpTableHighlighting.isInline||this.wpTableHighlighting.isDisabled)},enumerable:!0,configurable:!0}),e}(),Wc=function(){function e(e,n,t){this.injector=e,this.workPackageTable=n,this.rowBuilder=t,this.wpEditing=this.injector.get(ar),this.states=this.injector.get(s),this.I18n=this.injector.get(B.a)}return e.prototype.render=function(){var e=this;return Object(mn.b)("Primary render pass",function(){e.prepare(),e.doRender(),e.postRender()}),this.highlighting.render(),Object(mn.b)("Relations render pass",function(){e.relations.render()}),Object(mn.b)("Timelines render pass",function(){e.timeline.render()}),this},e.prototype.refresh=function(e,n,t){var l=jQuery(t).find("."+e.classIdentifier),i=null;switch(e.renderType){case"primary":i=this.rowBuilder.refreshRow(n,l);break;case"relations":i=this.relations.refreshRelationRow(e,n,l)}null!==i&&l.length&&l.replaceWith(i)},Object.defineProperty(e.prototype,"result",{get:function(){return this.renderedOrder.map(function(e){return{classIdentifier:e.classIdentifier,workPackageId:e.workPackage?e.workPackage.id:null,hidden:e.hidden}})},enumerable:!0,configurable:!0}),e.prototype.spliceRow=function(e,n,t){var l=jQuery(this.tableBody).find(n).last();l.after(e);var i=l.index();this.renderedOrder.splice(i+1,0,t)},e.prototype.prepare=function(){this.timeline=new Bc(this.injector,this.workPackageTable,this),this.relations=new $c(this.injector,this.workPackageTable,this),this.highlighting=new zc(this.injector,this.workPackageTable,this),this.tableBody=document.createDocumentFragment(),this.renderedOrder=[]},e.prototype.postRender=function(){0===this.renderedOrder.length&&this.workPackageTable.renderPlaceholderRow&&this.tableBody.appendChild(this.rowBuilder.placeholderRow)},e.prototype.appendRow=function(e,n,t,l){void 0===t&&(t=[]),void 0===l&&(l=!1),this.tableBody.appendChild(n),this.renderedOrder.push({classIdentifier:this.rowBuilder.classIdentifier(e),additionalClasses:t,workPackage:e,renderType:"primary",hidden:l})},e.prototype.appendNonWorkPackageRow=function(e,n,t,l){void 0===t&&(t=[]),void 0===l&&(l=!1),e.classList.add(n),this.tableBody.appendChild(e),this.renderedOrder.push({classIdentifier:n,additionalClasses:t,workPackage:null,renderType:"primary",hidden:l})},e}(),Qc=function(e){function n(n,t,l){var i=e.call(this,n,t,l)||this;return i.injector=n,i.workPackageTable=t,i.rowBuilder=l,i}return r.d(n,e),n.prototype.doRender=function(){var e=this;this.workPackageTable.originalRows.forEach(function(n){var t=e.workPackageTable.originalRowIndex[n],l=e.rowBuilder.buildEmpty(t.object)[0];t.element=l,e.appendRow(t.object,l),e.tableBody.appendChild(l)})},n}(Wc),Uc=function(e){function n(n,t,l,i,o){var r=e.call(this,n,t,new Dc(n,t))||this;return r.injector=n,r.workPackageTable=t,r.groups=l,r.headerBuilder=i,r.colspan=o,r}return r.d(n,e),n.prototype.doRender=function(){var e=this,n=null;this.workPackageTable.originalRows.forEach(function(t){var l=e.workPackageTable.originalRowIndex[t],i=e.matchingGroup(l.object);if(i&&n!==i){var o=Mc(i),r=e.headerBuilder.buildGroupRow(i,e.colspan);e.appendNonWorkPackageRow(r,o),n=i}l.group=n,e.buildSingleRow(l)})},n.prototype.matchingGroup=function(e){var n=this;return _.find(this.groups,function(t){var l=e[Ac(t)];if(void 0===l&&(l=null),_.isArray(l))return n.matchesMultiValue(l,t);if(l&&l.$href)return!!_.find(t._links.valueLink,function(e){return l.$href===e.href});var i=""===t.value?null:t.value;return i&&(i=i.replace("%","")),i==l})},n.prototype.matchesMultiValue=function(e,n){if(e.length!==n.href.length)return!1;var t=function(e){return _.map(e,function(e){return e.href}).sort().join(", ")};return _.isEqualWith(e,n.href,function(e,n){return t(e)===t(n)})},n.prototype.buildSingleRow=function(e){var n,t=e.group,l=t.collapsed,i=[],o=this.rowBuilder.buildEmpty(e.object),r=o[0];o[1];i.push(Nc(t.index)),l&&i.push("-collapsed"),e.element=r,(n=r.classList).add.apply(n,i),this.appendRow(e.object,r,i,l)},n}(Qc),Kc=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.querySpace=l.injector.get(y),l.states=l.injector.get(s),l.wpTableColumns=l.injector.get(qe),l.I18n=l.injector.get(B.a),l}return r.d(n,e),n.prototype.isApplicable=function(e){return!_.isEmpty(this.groups)},Object.defineProperty(n.prototype,"groups",{get:function(){return this.querySpace.groups.value||[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"collapsedGroups",{get:function(){return this.querySpace.collapsedGroups.value||{}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"colspan",{get:function(){return this.wpTableColumns.columnCount+1},enumerable:!0,configurable:!0}),n.prototype.buildRows=function(){var e=new Vc(this.injector);return new Uc(this.injector,this.workPackageTable,this.getGroupData(),e,this.colspan).render()},n.prototype.refreshExpansionState=function(){var e=this.getGroupData(),n=this.wpTableColumns.columnCount+1,t=this.querySpace.rendered.value,l=new Vc(this.injector);jQuery(this.workPackageTable.container).find(".wp-table--group-header").each(function(i,o){var r=jQuery(o).data("groupIndex"),u=e[r],a=l.buildGroupRow(u,n);o.parentNode&&o.parentNode.replaceChild(a,o);var s=jQuery("."+Nc(r));s.toggleClass("-collapsed",!!u.collapsed),s.filter(".wp-table--row").each(function(e,n){var l=jQuery(n).index();t[l].hidden=!!u.collapsed})}),this.querySpace.rendered.putValue(t,"Updated hidden state of rows after group change.")},n.prototype.getGroupData=function(){var e=this;return this.groups.map(function(n,t){return n.index=t,n._links&&n._links.valueLink&&(n.href=n._links.valueLink),n.identifier=function(e){var n=e.value||"nullValue";if(e.href)try{n+=e.href.map(function(e){return e.href}).join("-")}catch(t){console.error("Failed to extract group identifier for "+e.value)}return n=n.toLowerCase().replace(/[^a-z0-9]+/g,"-"),Ac(e)+"-"+n}(n),n.collapsed=e.collapsedGroups[n.identifier],n})},n}(Fc);function Gc(e){return"__collapsed-group-"+e}function Yc(e){return"__hierarchy-group-"+e}function Zc(e){return"__hierarchy-root-"+e}function Jc(e,n){return!e.isLeaf&&!!_.find(n.originalRows,function(t){return n.originalRowIndex[t].object.ancestorIds.indexOf(e.id)>=0})}var Xc="wp-table--hierarchy-aditional-row",ed=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.workPackageTable=t,l.wpTableHierarchies=l.injector.get(Qe),l.states=l.injector.get(s),l.text={leaf:function(e){return l.I18n.t("js.work_packages.hierarchy.leaf",{level:e})},expanded:function(e){return l.I18n.t("js.work_packages.hierarchy.children_expanded",{level:e})},collapsed:function(e){return l.I18n.t("js.work_packages.hierarchy.children_collapsed",{level:e})}},l}return r.d(n,e),n.prototype.refreshRow=function(n,t){var l=e.prototype.refreshRow.call(this,n,t);return l.find(".wp-table--hierarchy-span").remove(),this.appendHierarchyIndicator(n,l),l},n.prototype.buildEmpty=function(n){var t=e.prototype.buildEmpty.call(this,n),l=t[0],i=t[1],o=this.wpTableHierarchies.currentState;return n.ancestors.forEach(function(e){l.classList.add("__hierarchy-group-"+e.id),o.collapsed[e.id]&&(i=!0,l.classList.add(Gc(e.id)))}),l.classList.add("__hierarchy-root-"+n.id),this.appendHierarchyIndicator(n,jQuery(l)),[l,i]},n.prototype.buildAncestorRow=function(e,n,t){var l=this.states.workPackages.get(e.id).value,i=this.buildEmpty(l),o=i[0],r=i[1];return o.classList.add(Xc),[o,r]},n.prototype.appendHierarchyIndicator=function(e,n,t){var l=void 0===t?e.ancestors.length:t,i=this.buildHierarchyIndicator(e,n,l);n.find("td.subject").addClass("-with-hierarchy").prepend(i),n.find("td.subject").css("minWidth",125+20*l+"px")},n.prototype.buildHierarchyIndicator=function(e,n,t){var l=document.createElement("span"),i=this.wpTableHierarchies.collapsed(e.id),o=25+20*t+"px";if(l.classList.add("wp-table--hierarchy-span"),l.style.width=o,Jc(e,this.workPackageTable)){var r=i?"-hierarchy-collapsed":"";l.innerHTML='\n            <a href tabindex="0" role="button" class="wp-table--hierarchy-indicator '+r+'">\n              <span class="wp-table--hierarchy-indicator-icon" aria-hidden="true"></span>\n              <span class="wp-table--hierarchy-indicator-expanded hidden-for-sighted">'+this.text.expanded(t)+'</span>\n              <span class="wp-table--hierarchy-indicator-collapsed hidden-for-sighted">'+this.text.collapsed(t)+"</span>\n            </a>\n        "}else l.innerHTML='\n            <span tabindex="0" class="wp-table--leaf-indicator">\n              <span class="hidden-for-sighted">'+this.text.leaf(t)+"</span>\n            </span>\n        ";return l},n}(Dc),nd=function(e){function n(n,t,l){var i=e.call(this,n,t,l)||this;return i.injector=n,i.workPackageTable=t,i.rowBuilder=l,i.querySpace=i.injector.get(y),i.states=i.injector.get(s),i.wpCacheService=i.injector.get(yn),i}return r.d(n,e),n.prototype.prepare=function(){e.prototype.prepare.call(this),this.hierarchies=this.querySpace.hierarchies.value,this.rendered={},this.additionalParents={},this.deferred={}},n.prototype.doRender=function(){var e=this;this.workPackageTable.originalRows.forEach(function(n){var t=e.workPackageTable.originalRowIndex[n],l=t.object;if(!e.deferInsertion(l)){if(l.ancestors.length)e.buildWithHierarchy(t);else{var i=e.rowBuilder.buildEmpty(l),o=i[0],r=i[1];t.element=o,e.tableBody.appendChild(o),e.markRendered(l,r)}e.renderAllDeferredChildren(l)}})},n.prototype.deferInsertion=function(e){var n=this,t=e.ancestors;if(0===t.length)return!1;for(var l=t.concat([e]),i=l.length-2;i>=0;--i){var o=l[i],r=(l[i+1],this.workPackageTable.originalRowIndex[o.id]);if(this.rendered[o.id])return!1;if(r){var u=this.deferred[o.id]||[],a=l.slice(i+1,l.length);return a=a.map(function(e){return n.wpCacheService.state(e.id).value}),u=u.concat(a),this.deferred[o.id]=_.uniqBy(u,function(e){return e.id}),!0}}return!1},n.prototype.renderAllDeferredChildren=function(e){var n=this,t=e.id;(this.deferred[t]||[]).forEach(function(e){n.insertUnderParent(n.getOrBuildRow(e),e.parent),n.renderAllDeferredChildren(e)})},n.prototype.getOrBuildRow=function(e){var n=this.workPackageTable.originalRowIndex[e.id];return n||(n={object:e}),n},n.prototype.buildWithHierarchy=function(e){var n=this,t=e.object.ancestors,l=[];t.forEach(function(e,i){var o=n.states.workPackages.get(e.id).value;if(!n.rendered[o.id]){var r=n.rowBuilder.buildAncestorRow(o,l,i),u=r[0],a=r[1];if(0===i)n.tableBody.appendChild(u),n.markRendered(o,a,!0);else{var s=t[i-1];n.insertAtExistingHierarchy(o,u,s,a,!0)}n.additionalParents[o.id]=o}l.push(Yc(o.id)),t.slice(0,i).forEach(function(e){l.push(Yc(e.id))})});var i=_.last(t);this.insertUnderParent(e,i)},n.prototype.insertUnderParent=function(e,n){var t=this.rowBuilder.buildEmpty(e.object),l=t[0],i=t[1];e.element=l,this.insertAtExistingHierarchy(e.object,l,n,i,!1)},n.prototype.markRendered=function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t=!1),this.rendered[e.id]=!0,this.renderedOrder.push(this.buildRenderInfo(e,n,t))},n.prototype.ancestorClasses=function(e){var n=this,t=[Zc(e.id)];return _.isArray(e.ancestors)&&e.ancestors.forEach(function(e){t.push(Yc(e.id)),n.hierarchies.collapsed[e.id]&&t.push(Gc(e.id))}),t},n.prototype.insertAtExistingHierarchy=function(e,n,t,l,i){var o=".__hierarchy-root-"+t.id,r=".__hierarchy-group-"+t.id;this.spliceRow(n,o+","+r,this.buildRenderInfo(e,l,i)),this.rendered[e.id]=!0},n.prototype.buildRenderInfo=function(e,n,t){var l={workPackage:e,renderType:"primary",hidden:n};return t?(l.additionalClasses=[Xc].concat(this.ancestorClasses(e)),l.classIdentifier="wp-ancestor-row-"+e.id):(l.additionalClasses=this.ancestorClasses(e),l.classIdentifier=this.rowBuilder.classIdentifier(e)),l},n}(Wc),td=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.workPackageTable=t,l.states=l.injector.get(s),l.wpTableColumns=l.injector.get(qe),l.wpTableHierarchies=l.injector.get(Qe),l}return r.d(n,e),n.prototype.isApplicable=function(e){return this.wpTableHierarchies.isEnabled},n.prototype.buildRows=function(){var e=new ed(this.injector,this.workPackageTable);return new nd(this.injector,this.workPackageTable,e).render()},n}(Fc),ld=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.I18n=l.injector.get(B.a),l}return r.d(n,e),n.prototype.buildRows=function(){var e=new Dc(this.injector,this.workPackageTable);return new Qc(this.injector,this.workPackageTable,e).render()},n}(Fc),id=function(){function e(e,n,t,l){this.table=e,this.injector=n,this.workPackageId=t,this.classIdentifier=l,this.wpTableRefresh=this.injector.get(zn),this.wpTableColumns=this.injector.get(qe),this.states=this.injector.get(s),this.FocusHelper=this.injector.get(f.a),this.wpEditingPortalService=this.injector.get(_a),this.cellBuilder=new Rc(this.injector)}return e.prototype.findContainer=function(e){return this.rowContainer.find("."+_c+"."+e+" .wp-table--cell-container").first()},e.prototype.findCell=function(e){return this.rowContainer.find("."+_c+"."+e).first()},e.prototype.activateField=function(e,n,t,l){var i=this;return this.waitForContainer(t).then(function(o){var r=i.findCell(t),u=r.css("width");return u=parseInt(u)>150?u:"150px",r.css("max-width",u),r.css("width",u),i.wpEditingPortalService.create(o,i.injector,e,n,t,l)})},e.prototype.reset=function(e,n,t){var l=this.findContainer(n);l.length&&(this.findCell(n).css("width",""),this.findCell(n).css("max-width",""),this.cellBuilder.refresh(l[0],e,n),t&&this.FocusHelper.focusElement(l))},e.prototype.requireVisible=function(e){return this.wpTableColumns.addColumn(e),this.waitForContainer(e)},e.prototype.firstField=function(e){return"subject"},e.prototype.onSaved=function(e,n){},e.prototype.waitForContainer=function(e){var n=this;return new Promise(function(t,l){var i=setInterval(function(){var l=n.findContainer(e);l.length>0&&(clearInterval(i),t(l[0]))},100)})},Object.defineProperty(e.prototype,"rowContainer",{get:function(){return jQuery(this.table.container).find("."+this.classIdentifier+"-table")},enumerable:!0,configurable:!0}),e}(),od=function(){function e(e,n){this.table=e,this.injector=n,this.wpEditing=this.injector.get(ar),this.forms={}}return e.prototype.reset=function(){_.each(this.forms,function(e){return e.destroy()}),this.forms={}},e.prototype.changeset=function(e){return this.wpEditing.state(e).value},e.prototype.stopEditing=function(e){this.wpEditing.stopEditing(e);var n=this.forms[e];n&&(n.destroy(),delete this.forms[e])},e.prototype.startEditing=function(e,n){var t=e.id,l=this.forms[t];if(l)return l;var i=new id(this.table,this.injector,t,n);return this.forms[t]=Sa.createInContext(this.injector,i,e,!1)},e}(),rd=function(){function e(e,n,t,l,i,o){this.injector=e,this.container=n,this.tbody=t,this.timelineBody=l,this.timelineController=i,this.configuration=o,this.querySpace=this.injector.get(y),this.wpCacheService=this.injector.get(yn),this.states=this.injector.get(s),this.I18n=this.injector.get(B.a),this.portalCleanupService=this.injector.get($a),this.originalRows=[],this.originalRowIndex={},this.builders=[new td(this.injector,this),new Kc(this.injector,this),new ld(this.injector,this)],this.lastRenderPass=null,this.editing=new od(this,this.injector)}return Object.defineProperty(e.prototype,"renderedRows",{get:function(){return this.querySpace.rendered.getValueOr([])},enumerable:!0,configurable:!0}),e.prototype.findRenderedRow=function(e){var n=_.findIndex(this.renderedRows,function(n){return n.classIdentifier===e});return[n,this.renderedRows[n]]},Object.defineProperty(e.prototype,"rowBuilder",{get:function(){var e=this;return _.find(this.builders,function(n){return n.isApplicable(e)})},enumerable:!0,configurable:!0}),e.prototype.buildIndex=function(e){var n=this;this.originalRowIndex={},this.originalRows=e.map(function(e,t){var l=e.id;return n.originalRowIndex[l]={object:e,workPackageId:l,position:t},l})},e.prototype.initialSetup=function(e){this.buildIndex(e),this.redrawTableAndTimeline()},e.prototype.redrawTableAndTimeline=function(){var e=this.performRenderPass();this.timelineBody.innerHTML="",this.timelineBody.appendChild(e.timeline.timelineBody),this.querySpace.rendered.putValue(e.result)},e.prototype.redrawTable=function(){var e=this.performRenderPass();this.querySpace.rendered.putValue(e.result)},e.prototype.refreshRows=function(e){var n=this,t=this.lastRenderPass;t?_.each(t.renderedOrder,function(l){l.workPackage&&l.workPackage.id===e.id&&(Object(mn.a)("Refreshing rendered row "+l.classIdentifier),l.workPackage=e,t.refresh(l,e,n.tbody))}):Object(mn.a)("Trying to refresh a singular row without a previous render pass.")},Object.defineProperty(e.prototype,"renderPlaceholderRow",{get:function(){return this.configuration.dragAndDropEnabled},enumerable:!0,configurable:!0}),e.prototype.performRenderPass=function(){this.portalCleanupService.clear(),this.editing.reset();var e=this.lastRenderPass=this.rowBuilder.buildRows();return this.tbody.innerHTML="",this.tbody.appendChild(e.tableBody),e},e}(),ud=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.states=l.injector.get(s),l.wpTableSelection=l.injector.get(Ia),l.wpTableColumns=l.injector.get(qe),l.I18n=l.injector.get(B.a),l.text={cancelButton:l.I18n.t("js.button_cancel")},l}return r.d(n,e),n.prototype.buildCell=function(n,t){switch(t.id){case Ec.id:return this.buildCancelButton();default:return e.prototype.buildCell.call(this,n,t)}},n.prototype.buildNew=function(e,n){var t=this.buildEmpty(e);return[t[0],t[1]]},n.prototype.createEmptyRow=function(e){var n=this.classIdentifier(e),t=document.createElement("tr");return t.id=Ic(e.id),t.dataset.workPackageId=e.id,t.dataset.classIdentifier=n,t.classList.add("wp-inline-create-row","wp--row","wp-table--row","issue",n,n+"-table"),t},n.prototype.buildCancelButton=function(){var e=document.createElement("td");return e.classList.add("wp-table--cell-td","wp-table--cancel-create-td"),e.innerHTML='\n    <a\n       href="#"\n       class="wp-table--cancel-create-link icon icon-cancel"\n       aria-label="'+this.text.cancelButton+'">\n    </a>\n   ',e},n}(Dc),ad=function(){function e(e,n,t,l,i,o,r,u,a,s,c){this.injector=e,this.elementRef=n,this.FocusHelper=t,this.I18n=l,this.querySpace=i,this.currentUser=o,this.wpCreate=r,this.wpInlineCreate=u,this.wpTableColumns=a,this.wpTableFocus=s,this.authorisationService=c,this.mode="inactive",this.focus=!1,this.text=this.wpInlineCreate.buttonTexts}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement)},Object.defineProperty(e.prototype,"isActive",{get:function(){return"inactive"!==this.mode},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){_.isNil(this.table)||(jQuery(this.table.timelineBody).addClass("-inline-create-mirror"),this.registerCreationCallback(),this.refreshOnColumnChanges(),this.registerCancelHandler())},e.prototype.registerCancelHandler=function(){var e=this;this.$element.on("click keydown",".wp-table--cancel-create-link",function(n){return kc(n,function(){e.resetRow()}),n.stopImmediatePropagation(),!1})},e.prototype.refreshOnColumnChanges=function(){var e=this;this.querySpace.columns.values$().pipe(Object(g.a)(function(){return e.isActive}),Object(Ln.b)(this)).subscribe(function(){return e.refreshRow()})},e.prototype.registerCreationCallback=function(){var e=this;this.wpCreate.onNewWorkPackage().pipe(Object(Ln.b)(this)).subscribe(function(n){e.currentWorkPackage&&e.currentWorkPackage.__initialized_at===n.__initialized_at?(e.resetRow(),e.table.configuration.isEmbedded||e.wpTableFocus.updateFocus(n.id),e.wpInlineCreate.newInlineWorkPackageCreated.next(n.id)):(e.wpCreate.cancelCreation(),e.removeWorkPackageRow(),e.showRow())})},e.prototype.handleAddRowClick=function(){return this.addWorkPackageRow(),!1},e.prototype.handleReferenceClick=function(){return this.mode="reference",!1},Object.defineProperty(e.prototype,"referenceClass",{get:function(){return this.wpInlineCreate.referenceComponentClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasReferenceClass",{get:function(){return!!this.referenceClass},enumerable:!0,configurable:!0}),e.prototype.addWorkPackageRow=function(){var e=this;this.wpCreate.createOrContinueWorkPackage(this.projectIdentifier).then(function(n){var t=e.currentWorkPackage=n.workPackage;e.editingSubscription=e.wpCreate.changesetUpdates$().pipe(Object(g.a)(function(n){return!!e.currentWorkPackage&&!!n.form})).subscribe(function(n){e.isActive?(e.currentWorkPackage.overriddenSchema=n.schema,e.refreshRow()):e.insertRow(t)})})},e.prototype.insertRow=function(e){var n=this,t=this.workPackageEditForm=this.renderInlineCreateRow(e);setTimeout(function(){t.activateMissingFields(),n.hideRow()})},e.prototype.refreshRow=function(){var e=new ud(this.injector,this.table),n=this.$element.find(".wp-inline-create-row");n.length&&this.currentWorkPackage&&e.refreshRow(this.currentWorkPackage,n)},e.prototype.renderInlineCreateRow=function(e){var n=new ud(this.injector,this.table),t=this.table.editing.startEditing(e,n.classIdentifier(e)),l=n.buildNew(e,t)[0];return this.$element.append(l),t},e.prototype.resetRow=function(){var e=this;this.focus=!0,this.removeWorkPackageRow(),setTimeout(function(){e.showRow()},50)},e.prototype.removeWorkPackageRow=function(){this.wpCreate.cancelCreation(),this.currentWorkPackage=null,this.$element.find(".wp-row-new").remove(),this.editingSubscription&&this.editingSubscription.unsubscribe()},e.prototype.showRow=function(){this.mode="inactive"},e.prototype.hideRow=function(){this.mode="create"},Object.defineProperty(e.prototype,"colspan",{get:function(){return this.wpTableColumns.columnCount+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canReference",{get:function(){return this.hasReferenceClass&&this.wpInlineCreate.canReference},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canAdd",{get:function(){return this.wpInlineCreate.canAdd},enumerable:!0,configurable:!0}),e}(),sd=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.RELATION_TYPES=function(e){void 0===e&&(e=!0);var n=["relates","duplicates","duplicated","blocks","blocked","precedes","follows","includes","partof","requires","required"];return e&&n.push("parent","children"),n},n.LOCALIZED_RELATION_TYPES=function(e){return void 0===e&&(e=!0),n.RELATION_TYPES(e).map(function(e){return{name:e,label:I18n.t("js.relation_labels."+e)}})},n.DEFAULT=function(){return"relates"},n.prototype.normalizedType=function(e){return this.denormalized(e).relationType},n.prototype.denormalized=function(e){var n=this.to.href===e.$href?"from":"to";return{target:this[n],targetId:this[n].id,relationType:"from"===n?this.reverseType:this.type,reverseRelationType:"from"===n?this.type:this.reverseType}},n.prototype.isInvolved=function(e){return _.values(this.ids).indexOf(e.toString())>=0},Object.defineProperty(n.prototype,"ids",{get:function(){return{from:Ku.idFromLink(this.from.href),to:Ku.idFromLink(this.to.href)}},enumerable:!0,configurable:!0}),n.prototype.updateDescription=function(e){return this.$links.updateImmediately({description:e})},n.prototype.updateType=function(e){return this.$links.updateImmediately({type:e})},n}(z),cd=function(){function e(e,n,t,l,i,o,r,u,a){this.parent=e,this.wpInlineCreate=n,this.wpCacheService=t,this.wpRelations=l,this.wpNotificationsService=i,this.wpTableRefresh=o,this.urlParamsHelper=r,this.querySpace=u,this.I18n=a,this.isDisabled=!1,this.queryFilters=this.buildQueryFilters(),this.text={save:this.I18n.t("js.relation_buttons.save"),abort:this.I18n.t("js.relation_buttons.abort")}}return e.prototype.addExisting=function(){var e=this;if(!_.isNil(this.selectedWpId)){var n=this.selectedWpId;this.isDisabled=!0,this.wpInlineCreate.add(this.workPackage,n).then(function(){e.wpCacheService.loadWorkPackage(e.workPackage.id,!0),e.wpTableRefresh.request("Added relation "+n,{visible:!0}),e.isDisabled=!1,e.wpInlineCreate.newInlineWorkPackageReferenced.next(n),e.cancel()}).catch(function(n){e.wpNotificationsService.handleRawError(n,e.workPackage),e.isDisabled=!1,e.cancel()})}},e.prototype.onReferenced=function(e){e&&(this.selectedWpId=e.id,this.addExisting())},Object.defineProperty(e.prototype,"relationType",{get:function(){return this.wpInlineCreate.relationType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"workPackage",{get:function(){return this.wpInlineCreate.referenceTarget},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this.parent.resetRow()},e.prototype.buildQueryFilters=function(){var e=this,n=this.querySpace.query.value;if(!n)return[];var t=sd.RELATION_TYPES(!0),l=n.filters.filter(function(n){var l=e.urlParamsHelper.buildV3GetFilterIdFromFilter(n);return-1===t.indexOf(l)});return this.urlParamsHelper.buildV3GetFilters(l)},e}(),dd=function(e){function n(n,t){var l=e.call(this,n)||this;return l.injector=n,l.wpRelationsHierarchyService=t,l.referenceComponentClass=cd,l.relationType="children",l.referenceTarget=null,l.buttonTexts={reference:l.I18n.t("js.relation_buttons.add_existing_child"),create:l.I18n.t("js.relation_buttons.add_new_child")},l}return r.d(n,e),n.prototype.add=function(e,n){return this.wpRelationsHierarchyService.addExistingChildWp(e,n)},n.prototype.remove=function(e,n){return this.wpRelationsHierarchyService.removeChild(n)},Object.defineProperty(n.prototype,"canAdd",{get:function(){return!!(this.referenceTarget&&this.canCreateWorkPackages&&this.canAddChild)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canReference",{get:function(){return!(!this.referenceTarget||!this.canAddChild)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canAddChild",{get:function(){var e=this.referenceTarget;return e&&!e.isMilestone&&e.changeParent},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},n}(wc),pd=function(e){function n(n){var t=e.call(this,n)||this;return t.injector=n,t.wpRelations=t.injector.get(Cn),t.referenceComponentClass=cd,t.relationType="",t.referenceTarget=null,t.buttonTexts={reference:t.I18n.t("js.relation_buttons.add_existing"),create:t.I18n.t("js.relation_buttons.create_new")},t}return r.d(n,e),n.prototype.add=function(e,n){return this.wpRelations.addCommonRelation(n,this.relationType,e.id)},n.prototype.remove=function(e,n){var t=this.wpRelations.find(n,e,this.relationType);return void 0!==t?this.wpRelations.removeRelation(t):Promise.reject()},Object.defineProperty(n.prototype,"canAdd",{get:function(){return!!(this.referenceTarget&&this.canCreateWorkPackages&&this.referenceTarget.addRelation)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canReference",{get:function(){return!!this.canAdd},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},n}(wc),hd=t("XlPw"),fd=function(){function e(e,n,t,l){this.states=e,this.pathHelper=n,this.queryDm=t,this.wpNotifications=l}return e.prototype.move=function(e,n,t){var l=e.findIndex(function(e){return e===n});return e.splice(l,1),e.splice(t,0,n),e},e.prototype.remove=function(e,n){return _.remove(e,function(e){return e===n}),e},e.prototype.add=function(e,n,t){return void 0===t&&(t=-1),-1===t?e.push(n):e.splice(t,0,n),e},e.prototype.saveOrderInQuery=function(e,n){var t=this;if(e&&e.updateOrderedWorkPackages){var l=n.map(function(e){return t.pathHelper.api.v3.work_packages.id(e).toString()});return Object(mn.a)("New order: "+n.join(", ")),this.queryDm.patch(e.id,{orderedWorkPackages:l})}return Object(hd.a)("Query not writable")},e}(),gd=function(){return function(e,n,t){this.elementRef=e,this.querySpace=n,this.injector=t,Object(mn.a)("Opening isolated query space %O in %O",t,e.nativeElement)}}(),md=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(z),vd=function(){function e(e,n,t,l){this.halResourceService=e,this.wpCacheService=n,this.wpActivity=t,this.wpNotificationsService=l}return e.prototype.fetchAction=function(){var e=this;this.halResourceService.get(this.action.href).toPromise().then(function(n){e.action=n})},e.prototype.update=function(){var e=this,n={lockVersion:this.workPackage.lockVersion,_links:{workPackage:{href:this.workPackage.href}}};this.halResourceService.post(this.action.href+"/execute",n).toPromise().then(function(n){e.wpNotificationsService.showSave(n,!1),e.workPackage=n,e.wpActivity.clear(e.workPackage.id),e.wpCacheService.updateWorkPackage(n)}).catch(function(n){e.wpNotificationsService.handleRawError(n,e.workPackage)})},e.prototype.onMouseEnter=function(){this.fetchAction()},e}(),bd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function yd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","custom-action--button button -narrow hide-when-print"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.update()&&l);return l},null,null)),(e()(),l["\u0275ted"](1,null,[" ","\n"]))],null,function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.action.description?t.action.description:t.action.name,"")),e(n,1,0,t.action.name)})}l["\u0275ccf"]("wp-custom-action",vd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-custom-action",[],null,[[null,"mouseenter"]],function(e,n,t){var i=!0;return"mouseenter"===n&&(i=!1!==l["\u0275nov"](e,1).onMouseEnter()&&i),i},yd,bd)),l["\u0275did"](1,49152,null,0,vd,[Y,yn,rr,On],null,null)],null,null)},{workPackage:"workPackage",action:"action"},{},[]);var wd=function(){function e(){}return Object.defineProperty(e.prototype,"actions",{get:function(){return this.workPackage.customActions},enumerable:!0,configurable:!0}),e}(),kd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Cd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-custom-action",[["class","custom-action"]],null,[[null,"mouseenter"]],function(e,n,t){var i=!0;"mouseenter"===n&&(i=!1!==l["\u0275nov"](e,1).onMouseEnter()&&i);return i},yd,bd)),l["\u0275did"](1,49152,null,0,vd,[Y,yn,rr,On],{workPackage:[0,"workPackage"],action:[1,"action"]},null)],function(e,n){e(n,1,0,n.component.workPackage,n.context.$implicit)},null)}function Id(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Cd)),l["\u0275did"](1,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,1,0,n.component.actions)},null)}l["\u0275ccf"]("wp-custom-actions",wd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-custom-actions",[],null,null,null,Id,kd)),l["\u0275did"](1,49152,null,0,wd,[],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var Pd=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.$initialize=function(n){var t=this;e.prototype.$initialize.call(this,n),this.filters=this.filters.map(function(e){return new Je(t.injector,e,!0,t.halInitializer,"QueryFilterInstance")})},n}(z),jd=function(){function e(e,n,t,l,i,o,r,a,s,c,d,p,h,f){this.I18n=e,this.currentProject=n,this.PathHelper=t,this.states=l,this.dynamicCssService=i,this.wpEditing=o,this.halResourceService=r,this.displayFieldService=a,this.wpCacheService=s,this.hook=c,this.injector=d,this.elementRef=p,this.cleanupService=h,this.browserDetector=f,this.showProject=!1,this.groupedFields=[],this.resourceContextChange=Object(u.g)(),this.text={attachments:{label:this.I18n.t("js.label_attachments")},project:{required:this.I18n.t("js.project.required_outside_context"),context:this.I18n.t("js.project.context"),switchTo:this.I18n.t("js.project.click_to_switch_context")},fields:{description:this.I18n.t("js.work_packages.properties.description")},description:{placeholder:this.I18n.t("js.work_packages.placeholders.description")},infoRow:{createdBy:this.I18n.t("js.label_created_by"),lastUpdatedOn:this.I18n.t("js.label_last_updated_on")}},this.firstTimeFocused=!1}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.workPackage.attachments&&this.workPackage.attachments.updateElements(),this.dynamicCssService.requireHighlighting(),this.resourceContextChange.values$().pipe(Object(D.a)(Object(Ln.a)(this)),Object(Zu.a)(function(e,n){return _.isEqual(e,n)}),Object(v.a)(function(){return e.wpEditing.temporaryEditResource(e.workPackage.id).value})).subscribe(function(n){var t=e.workPackage.isNew;n.project?e.projectContext={href:e.PathHelper.projectWorkPackagePath(n.project.idFromLink,e.workPackage.id),matches:n.project.href===e.currentProject.apiv3Path}:e.projectContext={matches:!1,href:null},!t||e.currentProject.inProjectContext&&!e.showProject||(e.projectContext.field=e.getFields(n,["project"]));var l=n.schema._attributeGroups;e.groupedFields=e.rebuildGroupedFields(n,l)}),this.wpEditing.temporaryEditResource(this.workPackage.id).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.resourceContextChange.putValue(e.contextFrom(n))})},e.prototype.ngOnDestroy=function(){this.cleanupService.clear()},e.prototype.shouldHideGroup=function(e){var n=0===e.members.length,t=this.workPackage.isNew&&!!e.query;return n||t},e.prototype.trackByName=function(e,n){return n.name},e.prototype.attributeGroupComponent=function(e){return this.hook.call("attributeGroupComponent",e,this.workPackage).pop()||null},e.prototype.attachmentListComponent=function(){return this.hook.call("workPackageAttachmentListComponent",this.workPackage).pop()||null},e.prototype.attachmentUploadComponent=function(){return this.hook.call("workPackageAttachmentUploadComponent",this.workPackage).pop()||null},Object.defineProperty(e.prototype,"idLabel",{get:function(){return"#"+this.workPackage.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectContextText",{get:function(){var e=this.workPackage.project.idFromLink,n='<a href="'+this.PathHelper.projectPath(e)+'">'+this.workPackage.project.name+"<a>";return this.I18n.t("js.project.work_package_belongs_to",{projectname:n})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableTwoColumnLayout",{get:function(){return this.workPackage.isNew&&!this.browserDetector.isEdge},enumerable:!0,configurable:!0}),e.prototype.rebuildGroupedFields=function(e,n){var t=this;return n?n.map(function(n){var l=t.getAttributesGroupId(n);return"WorkPackageFormAttributeGroup"===n._type?{name:n.name,id:l||Ya(16),members:t.getFields(e,n.attributes),type:n._type,isolated:!1}:{name:n.name,id:l||Ya(16),query:t.halResourceService.createHalResourceOfClass(Pd,n._embedded.query),relationType:n.relationType,members:[n._embedded.query],type:n._type,isolated:!0}}):[]},e.prototype.getFields=function(e,n){var t=this,l=[];return n.forEach(function(n){if("date"!==n)if(e.schema[n]){var i=t.displayField(e,n);l.push({name:n,label:i.label,multiple:!1,spanAll:i.isFormattable,field:i})}else Object(mn.a)("Unknown field for current schema",n);else l.push(t.getDateField(e))}),l},e.prototype.getDateField=function(e){var n={name:"date",label:this.I18n.t("js.work_packages.properties.date"),multiple:!1};return e.schema.hasOwnProperty("date")?n.field=this.displayField(e,"date"):(n.fields=[this.displayField(e,"startDate"),this.displayField(e,"dueDate")],n.multiple=!0),n},e.prototype.contextFrom=function(e){var n=e.schema,t=null,l=e.project&&e.project.href;return t=n.baseSchema?n.baseSchema.href:n.href,{isNew:e.isNew,schema:t,project:l}},e.prototype.displayField=function(e,n){return this.displayFieldService.getField(e,n,e.schema[n],{container:"single-view",injector:this.injector,options:{}})},e.prototype.getAttributesGroupId=function(e){var n=this.$element.find("[data-group-name='"+e.name+"']").data("overflowingIdentifier");return n?n.replace(".__overflowing_",""):""},e}(),_d=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Rd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","wp-new--subject-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](2,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"]},null)],function(e,n){e(n,2,0,"subject",n.component.workPackage.id,"-no-label")},null)}function Sd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-status-button",[],null,null,null,Xs,Ys)),l["\u0275did"](1,245760,null,0,Ks,[B.a,l.ChangeDetectorRef,yn,gn,ar],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}function xd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attribute-help-text",[],null,null,null,rc,ic)),l["\u0275did"](1,114688,null,0,lc,[l.ElementRef,ec,nc,Mn.b,l.Injector,B.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null)],function(e,n){e(n,1,0,"status","WorkPackage")},null)}function Td(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,14,"div",[["class","work-packages--info-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[": "])),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\xa0"])),(e()(),l["\u0275eld"](6,0,null,null,1,"user-link",[["class","user-link"]],null,null,null,sc,ac)),l["\u0275did"](7,114688,null,0,uc,[ve,B.a],{user:[0,"user"]},null),(e()(),l["\u0275ted"](-1,null,[". "])),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\xa0"])),(e()(),l["\u0275eld"](12,0,null,null,1,"op-date-time",[],null,null,null,Ht,$t)),l["\u0275did"](13,114688,null,0,Lt,[qt],{dateTimeValue:[0,"dateTimeValue"]},null),(e()(),l["\u0275ted"](-1,null,[". "]))],function(e,n){var t=n.component;e(n,7,0,t.workPackage.author),e(n,13,0,t.workPackage.updatedAt)},function(e,n){var t=n.component;e(n,1,0,t.idLabel),e(n,3,0,t.text.infoRow.createdBy),e(n,9,0,t.text.infoRow.lastUpdatedOn)})}function Od(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["*"]))],null,null)}function Ed(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[["class","attributes-key-value"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-span-all-columns":0}),(e()(),l["\u0275eld"](3,0,null,null,7,"div",[["class","attributes-key-value--key"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,4,"wp-replacement-label",[],null,null,null,pc,dc)),l["\u0275did"](5,114688,null,0,cc,[Oa,l.ElementRef],{fieldName:[0,"fieldName"]},null),(e()(),l["\u0275ted"](6,0,[" "," "])),(e()(),l["\u0275and"](16777216,null,0,1,null,Od)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](9,0,null,null,1,"attribute-help-text",[],null,null,null,rc,ic)),l["\u0275did"](10,114688,null,0,lc,[l.ElementRef,ec,nc,Mn.b,l.Injector,B.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null),(e()(),l["\u0275eld"](11,0,null,null,2,"div",[["class","attributes-key-value--value-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](13,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit.spanAll);e(n,1,0,"attributes-key-value",l),e(n,5,0,n.context.$implicit.name),e(n,8,0,n.context.$implicit.field.required&&n.context.$implicit.field.writable);e(n,10,0,n.context.$implicit.name,"WorkPackage"),e(n,13,0,n.context.$implicit.name,t.workPackage.id)},function(e,n){e(n,6,0,n.context.$implicit.label)})}function Dd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","attributes-group -project-context __overflowing_element_container __overflowing_project_context"],["data-overflowing-identifier",".__overflowing_project_context"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"p",[["class","wp-project-context--warning"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ed)),l["\u0275did"](4,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,4,0,t.projectContext.field,t.trackByName)},function(e,n){e(n,2,0,n.component.text.project.required)})}function Fd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","attributes-group -project-context hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"a",[["class","project-context--switch-link"]],[[1,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.projectContextText),e(n,5,0,t.projectContext.href,t.text.project.switchTo)})}function Ad(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"bcf-wp-single-view",[],null,null,null,bc,vc)),l["\u0275did"](2,245760,null,0,gc,[h.G,B.a,l.Injector,ve],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,2,0,n.component.workPackage)},null)}function Nd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,36,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](31,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275eld"](32,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](33,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](35,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["\u0275pod"](36,{workPackage:0,group:1,query:2}),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,33,0,t.attributeGroupComponent(n.parent.context.$implicit));var l=e(n,36,0,t.workPackage,n.parent.context.$implicit,n.parent.context.$implicit.query);e(n,35,0,l)},null)}function Md(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](5,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"],ndcDynamicInjector:[1,"ndcDynamicInjector"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](7,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["\u0275pod"](8,{workPackage:0,group:1}),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,5,0,t.attributeGroupComponent(n.parent.context.$implicit),t.injector);var l=e(n,8,0,t.workPackage,n.parent.context.$implicit);e(n,7,0,l)},function(e,n){e(n,3,0,n.parent.context.$implicit.name)})}function Vd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","attributes-group __overflowing_element_container"]],[[8,"hidden",0],[1,"data-group-name",0],[1,"data-overflowing-identifier",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Nd)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Md)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,"attributes-group __overflowing_element_container","__overflowing_"+n.context.$implicit.id),e(n,3,0,n.context.$implicit.isolated),e(n,5,0,!n.context.$implicit.isolated)},function(e,n){e(n,0,0,n.component.shouldHideGroup(n.context.$implicit),n.context.$implicit.name,".__overflowing_"+n.context.$implicit.id)})}function qd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,28,"div",[["class","work-package--single-view"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-can-have-columns":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Rd)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,null,null,8,"div",[["class","wp-info-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Sd)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,xd)),l["\u0275did"](9,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Td)),l["\u0275did"](11,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](12,0,null,null,1,"wp-custom-actions",[["class","custom-actions"]],null,null,null,Id,kd)),l["\u0275did"](13,49152,null,0,wd,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Dd)),l["\u0275did"](15,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Fd)),l["\u0275did"](17,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ad)),l["\u0275did"](19,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](20,0,null,null,6,"div",[["class","attributes-group description-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](24,0,null,null,2,"div",[["class","single-attribute work-packages--details--description"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,1,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](26,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayPlaceholder:[3,"displayPlaceholder"],isDropTarget:[4,"isDropTarget"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Vd)),l["\u0275did"](28,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component,l=e(n,2,0,t.enableTwoColumnLayout);e(n,1,0,"work-package--single-view",l),e(n,4,0,t.workPackage.isNew),e(n,7,0,!t.workPackage.isNew),e(n,9,0,!t.workPackage.isNew),e(n,11,0,!t.workPackage.isNew),e(n,13,0,t.workPackage),e(n,15,0,t.projectContext.field),e(n,17,0,!t.workPackage.isNew&&!t.projectContext.matches),e(n,19,0,t.workPackage.bcf);e(n,26,0,"description",t.workPackage.id,"-no-label",t.text.description.placeholder,!0),e(n,28,0,t.groupedFields,t.trackByName)},function(e,n){e(n,23,0,n.component.text.fields.description)})}function Ld(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,14,"div",[["class","work-packages--attachments attributes-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,13,"div",[["class","work-packages--atachments-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](6,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](8,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["\u0275pod"](9,{resource:0,selfDestroy:1}),(e()(),l["\u0275eld"](10,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](11,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](13,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["\u0275pod"](14,{resource:0})],function(e,n){var t=n.component;e(n,6,0,t.attachmentListComponent());var l=e(n,9,0,t.workPackage,!0);e(n,8,0,l),e(n,11,0,t.attachmentUploadComponent());var i=e(n,14,0,t.workPackage);e(n,13,0,i)},function(e,n){e(n,4,0,n.component.text.attachments.label)})}function $d(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,qd)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ld)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage),e(n,3,0,t.workPackage.canAddAttachments||t.workPackage.hasAttachments)},null)}l["\u0275ccf"]("wp-single-view",jd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"wp-single-view",[],null,null,null,$d,_d)),l["\u0275prd"](512,null,$a,$a,[]),l["\u0275did"](2,245760,null,0,jd,[B.a,Vn,ve,s,rn,ar,Y,Aa,yn,at,l.Injector,l.ElementRef,$a,_s],null,null)],function(e,n){e(n,2,0)},null)},{workPackage:"workPackage",showProject:"showProject"},{},[]);var Hd=function(e){function n(n,t,l,i,o,r,u){var a=e.call(this,n,u.params.workPackageId)||this;return a.injector=n,a.states=t,a.firstRoute=l,a.keepTab=i,a.wpTableSelection=o,a.wpTableFocus=r,a.$state=u,a.backRoutingService=a.injector.get(ss),a.observeWorkPackage(),a}return r.d(n,e),n.prototype.initializeTexts=function(){e.prototype.initializeTexts.call(this),this.text.full_view={button_more:this.I18n.t("js.button_more")}},n.prototype.init=function(){e.prototype.init.call(this),this.wpTableFocus.updateFocus(this.workPackage.id),this.setWorkPackageScopeProperties(this.workPackage),this.text.goBack=this.I18n.t("js.button_back")},n.prototype.goBack=function(){this.backRoutingService.goBack()},n.prototype.setWorkPackageScopeProperties=function(e){this.isWatched=e.hasOwnProperty("unwatch"),this.displayWatchButton=e.hasOwnProperty("unwatch")||e.hasOwnProperty("watch"),e.watchers&&(this.watchers=e.watchers.elements),this.type=e.type,this.author=e.author,this.authorPath=this.author.showUserPath,this.authorActive=this.author.isActive,this.attachments=e.attachments.elements},n}(Fs),Bd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function zd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-watcher-button",[],null,null,null,rs,ls)),l["\u0275did"](2,245760,null,0,ts,[B.a,ns,yn],{workPackage:[0,"workPackage"],showText:[1,"showText"]},null)],function(e,n){e(n,2,0,n.component.workPackage,!1)},null)}function Wd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"li",[["uiSref","work-packages.show.watchers"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,1).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](1,737280,[[3,4]],0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](2,{workPackageId:0}),l["\u0275did"](3,1196032,null,1,Vu.a,[h.Q],null,null),l["\u0275qud"](603979776,3,{_srefs:1}),l["\u0275did"](5,147456,null,0,qu.a,[Vu.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"wp-watchers-count",[],null,null,null,Bu,$u)),l["\u0275did"](8,245760,null,0,Lu,[yn],{wpId:[0,"wpId"]},null)],function(e,n){var t=n.component,l=e(n,2,0,t.workPackage.id);e(n,1,0,"work-packages.show.watchers",l);e(n,5,0,"selected"),e(n,8,0,t.workPackage.id)},function(e,n){e(n,6,0,n.component.text.tabs.watchers)})}function Qd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,64,"div",[["class","work-packages--show-view"],["wp-edit-field-group",""]],null,null,null,Da,Ea)),l["\u0275did"](1,245760,null,0,Oa,[s,l.Injector,ur,ar,On,Ia,Pa,h.O,Ne,h.G,B.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](2,0,null,0,1,"wp-breadcrumb",[],null,null,null,ka,ma)),l["\u0275did"](3,49152,null,0,fa,[B.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](4,0,null,0,25,"div",[["class","toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,24,"div",[["id","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,9,"div",[["class","wp-show--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,4,"div",[["class","wp-show--back-button hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,3,"accessible-by-keyboard",[["linkClass","work-packages-back-button button"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.goBack()&&l);return l},al,ul)),l["\u0275did"](9,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](10,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-back-up"]],null,null,null,Zt,Gt)),l["\u0275did"](11,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](12,0,null,null,3,"ul",[["class","subject-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,2,"li",[["class","subject-header-inner"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,1,"wp-subject",[],null,null,null,es,Ja)),l["\u0275did"](15,245760,null,0,Za,[h.Q,yn],null,null),(e()(),l["\u0275eld"](16,0,null,null,13,"ul",[["class","toolbar-items hide-when-print"],["id","toolbar-items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,1,"wp-create-button",[["stateName","work-packages.new"]],null,null,null,Qs,Ws)),l["\u0275did"](19,114688,null,0,zs,[h.G,Vn,B.a],{stateName:[0,"stateName"],allowed:[1,"allowed"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,zd)),l["\u0275did"](21,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](22,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,bi,vi)),l["\u0275did"](24,49152,null,0,mi,[B.a],null,null),(e()(),l["\u0275eld"](25,0,null,null,4,"li",[["class","toolbar-item action_menu_main"],["id","action-show-more-dropdown-menu"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,3,"button",[["class","button dropdown-relative toolbar-icon"],["wpSingleContextMenu",""]],[[1,"title",0]],null,null,null,null)),l["\u0275did"](27,4210688,null,0,gs,[at,h.G,l.Injector,ve,l.ElementRef,Mn.b,Qa,Dn],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](28,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-show-more"]],null,null,null,Zt,Gt)),l["\u0275did"](29,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](30,0,null,0,34,"div",[["class","work-packages-full-view--split-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](31,0,null,null,4,"div",[["class","work-packages-full-view--split-left"]],null,null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,3,"div",[["class","work-packages--panel-inner"]],null,null,null,null,null)),(e()(),l["\u0275eld"](33,0,null,null,2,"wp-single-view",[],null,null,null,$d,_d)),l["\u0275prd"](512,null,$a,$a,[]),l["\u0275did"](35,245760,null,0,jd,[B.a,Vn,ve,s,rn,ar,Y,Aa,yn,at,l.Injector,l.ElementRef,$a,_s],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](36,0,null,null,28,"div",[["class","work-packages-full-view--split-right work-packages-tab-view--overflow"]],null,null,null,null,null)),(e()(),l["\u0275eld"](37,0,null,null,24,"div",[["class","work-packages--panel-inner"]],null,null,null,null,null)),(e()(),l["\u0275eld"](38,0,null,null,1,"span",[["class","hidden-for-sighted"],["focus",""],["tabindex","-1"]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](39,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](40,0,null,null,19,"div",[["id","tabs"]],null,null,null,null,null)),(e()(),l["\u0275eld"](41,0,null,null,18,"ul",[["class","tabrow"]],null,null,null,null,null)),(e()(),l["\u0275eld"](42,0,null,null,6,"li",[["uiSref","work-packages.show.activity"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,43).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](43,737280,[[1,4]],0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](44,{workPackageId:0}),l["\u0275did"](45,1196032,null,1,Vu.a,[h.Q],null,null),l["\u0275qud"](603979776,1,{_srefs:1}),l["\u0275did"](47,147456,null,0,qu.a,[Vu.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](48,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](49,0,null,null,8,"li",[["uiSref","work-packages.show.relations"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,50).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](50,737280,[[2,4]],0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](51,{workPackageId:0}),l["\u0275did"](52,1196032,null,1,Vu.a,[h.Q],null,null),l["\u0275qud"](603979776,2,{_srefs:1}),l["\u0275did"](54,147456,null,0,qu.a,[Vu.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](55,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](56,0,null,null,1,"wp-relations-count",[],null,null,null,Is,ks)),l["\u0275did"](57,245760,null,0,ws,[yn,Cn],{wpId:[0,"wpId"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Wd)),l["\u0275did"](59,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](60,16777216,null,null,1,"div",[["class","tabcontent"],["ui-view",""]],null,null,null,kt.c,kt.a)),l["\u0275did"](61,245760,null,0,Ki.a,[h.P,"UIView.PARENT_INJECT",l.ViewContainerRef],{_name:[0,"_name"]},null),(e()(),l["\u0275eld"](62,0,null,null,2,"div",[["class","work-packages-full-view--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](63,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,64).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,64).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,64).handleMouseUp(t)&&i);return i},xs,Ss)),l["\u0275did"](64,245760,null,0,Rs,[js,l.ElementRef,h.O,_s],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage),e(n,3,0,t.workPackage);e(n,9,0,"work-packages-back-button button",t.text.goBack,t.text.goBack);e(n,11,0,"button--icon icon-back-up"),e(n,15,0);e(n,19,0,"work-packages.new",!(!t.workPackage.addChild&&!t.workPackage.$links.copy)),e(n,21,0,t.displayWatchButton),e(n,27,0,t.workPackage);e(n,29,0,"button--icon icon-show-more"),e(n,35,0,t.workPackage);e(n,39,0,"");var l=e(n,44,0,t.workPackage.id);e(n,43,0,"work-packages.show.activity",l);e(n,47,0,"selected");var i=e(n,51,0,t.workPackage.id);e(n,50,0,"work-packages.show.relations",i);e(n,54,0,"selected"),e(n,57,0,t.workPackage.id),e(n,59,0,t.canViewWorkPackageWatchers());e(n,61,0,"");e(n,64,0,"work-packages-full-view--split-right","openProject-fullViewFlexBasis")},function(e,n){var t=n.component;e(n,26,0,t.text.full_view.button_more),e(n,38,0,t.focusAnchorLabel),e(n,48,0,t.text.tabs.activity),e(n,55,0,t.text.tabs.relations)})}function Ud(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Qd)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var Kd=l["\u0275ccf"]("wp-full-view-entry",Hd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-full-view-entry",[["class","work-packages-page--ui-view"]],null,null,null,Ud,Bd)),l["\u0275did"](1,180224,null,0,Hd,[l.Injector,s,Ts,_e,Ia,Pa,h.G],null,null)],null,null)},{},{},[]),Gd=function(){function e(){}return e.prototype.ngOnInit=function(){this.activityHtmlId="activity-"+this.activityNo,this.activityLabel="#"+this.activityNo},e}();var Yd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Zd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["uiSref","work-packages.show.activity"]],[[8,"id",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,2).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Mu.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](2,737280,null,0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](3,{workPackageId:0,"#":1})],function(e,n){var t=n.component,l=e(n,3,0,t.workPackage.id,t.activityHtmlId);e(n,2,0,"work-packages.show.activity",l)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.activityHtmlId,"-link"),t.activityLabel)})}l["\u0275ccf"]("activity-link",Gd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"activity-link",[],null,null,null,Zd,Yd)),l["\u0275did"](1,114688,null,0,Gd,[],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activityNo:"activityNo"},{},[]);var Jd=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){var n=this.pathHelper.api.v3.users.id(e).toString();return this.halResourceService.get(n).toPromise()},e}(),Xd=function(e){function n(n,t){var l=e.call(this)||this;return l.states=n,l.userDmService=t,l}return r.d(n,e),n.prototype.load=function(e){return this.userDmService.load(e)},n.prototype.loadAll=function(e){var n=this,t=e.map(function(e){return n.load(e)});return Promise.all(t).then(function(){})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.users},enumerable:!0,configurable:!0}),n}(fn),ep=function(){function e(e,n,t){this.I18n=e,this.timezoneService=n,this.userCacheService=t}return e.prototype.ngOnInit=function(){this.loadAuthor(),this.project=this.workPackage.project,this.revision=this.activity.identifier,this.message=this.activity.message.html;var e=this.activity.showRevision.$link.href,n=this.activity.formattedIdentifier,t=document.createElement("a");t.href=e,t.title=this.revision,t.textContent=this.I18n.t("js.label_committed_link",{revision_identifier:n}),this.revisionLink=this.I18n.t("js.label_committed_at",{committed_revision_link:t.outerHTML,date:this.timezoneService.formattedDatetime(this.activity.createdAt)})},e.prototype.loadAuthor=function(){var e=this;void 0===this.activity.author?this.userName=this.activity.authorName:this.userCacheService.require(this.activity.author.idFromLink).then(function(n){e.userId=n.id,e.userName=n.name,e.userActive=n.isActive,e.userAvatar=n.avatar,e.userPath=n.showUser.href,e.userLabel=e.I18n.t("js.label_author",{user:e.userName})})},e}(),np=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function tp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-avatar",[["data-class-list","avatar"]],[[1,"data-user-name",0],[1,"data-user-id",0]],null,null,Ti,Ri)),l["\u0275did"](1,4243456,null,0,ji,[l.ElementRef,l.ChangeDetectorRef,_i.DomSanitizer,ve],null,null)],null,function(e,n){var t=n.component;e(n,0,0,t.userName,t.userId)})}function lp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-avatar",[["data-class-list","avatar"]],[[1,"data-user-name",0],[1,"data-use-fallback",0]],null,null,Ti,Ri)),l["\u0275did"](1,4243456,null,0,ji,[l.ElementRef,l.ChangeDetectorRef,_i.DomSanitizer,ve],null,null)],null,function(e,n){e(n,0,0,n.component.userName,!0)})}function ip(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"a",[],[[1,"href",4],[1,"aria-label",0],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.userPath,t.userLabel,t.userName)})}function op(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","user"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.userName)})}function rp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,14,"div",[["class","work-package-details-activities-activity-contents"],["tabindex","0"]],[[1,"aria-label",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","comments-number"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"activity-link",[],null,null,null,Zd,Yd)),l["\u0275did"](3,114688,null,0,Gd,[],{workPackage:[0,"workPackage"],activityNo:[1,"activityNo"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,tp)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,lp)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ip)),l["\u0275did"](9,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,op)),l["\u0275did"](11,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](12,0,null,null,0,"span",[["class","revision-activity--revision-link date"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,1,"span",[["class","user-comment wiki"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"span",[["class","message"]],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,t.workPackage,t.activityNo),e(n,5,0,t.activity.author&&t.userName),e(n,7,0,!t.activity.author&&t.userName),e(n,9,0,t.userActive),e(n,11,0,!t.userActive)},function(e,n){var t=n.component;e(n,0,0,t.activityLabel),e(n,12,0,t.revisionLink),e(n,14,0,t.message)})}function up(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,rp)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("revision-activity",ep,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"revision-activity",[],null,null,null,up,np)),l["\u0275did"](1,114688,null,0,ep,[B.a,qt,Xd],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",activityLabel:"activityLabel"},{},[]);var ap=function(){function e(e,n,t){this.I18n=e,this.wpNotificationsService=n,this.NotificationsService=t,this.quoteEvents=new a.a}return e.prototype.createComment=function(e,n){var t=this;return e.addComment({comment:n},{"Content-Type":"application/json; charset=UTF-8"}).catch(function(n){return t.errorAndReject(n,e)})},e.prototype.updateComment=function(e,n){var t=this;JSON.stringify({comment:n});return e.update({comment:n},{"Content-Type":"application/json; charset=UTF-8"}).then(function(e){return t.NotificationsService.addSuccess(t.I18n.t("js.work_packages.comment_updated")),e}).catch(function(e){return t.errorAndReject(e)})},e.prototype.errorAndReject=function(e,n){return this.wpNotificationsService.handleRawError(e,n),Promise.reject(e)},e}(),sp=function(e){function n(n,t){var l=e.call(this)||this;return l.elementRef=n,l.injector=t,l.fieldName="comment",l.handler=l,l.inEdit=!1,l.inEditMode=!1,l.inFlight=!1,l.onDestroy=new a.a,l}return r.d(n,e),n.prototype.ngOnInit=function(){this.changeset=new sr(this.injector,this.workPackage)},n.prototype.reset=function(e){void 0===e&&(e=""),e.length>0&&(e+="\n"),this.changeset.setValue("comment",{raw:e})},Object.defineProperty(n.prototype,"schema",{get:function(){return{name:I18n.t("js.label_comment"),writable:!0,required:!1,type:"_comment",hasDefault:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rawComment",{get:function(){return _.get(this.commentValue,"raw","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commentValue",{get:function(){return this.changeset.value("comment")},enumerable:!0,configurable:!0}),n.prototype.handleUserCancel=function(){this.deactivate(!0)},Object.defineProperty(n.prototype,"active",{get:function(){return this.inEdit},enumerable:!0,configurable:!0}),n.prototype.activate=function(e){this.inEdit=!0,this.reset(e)},n.prototype.deactivate=function(e){this.inEdit=!1,this.onDestroy.next(),this.onDestroy.complete()},n.prototype.focus=function(){var e=this.elementRef.nativeElement.querySelector(".inplace-editing--trigger-container");e&&e.focus()},n.prototype.handleUserKeydown=function(e,n){},n.prototype.isChanged=function(){return!1},n.prototype.stopPropagation=function(e){return!1},n}(lr),cp=function(e){function n(n,t,l,i,o,r,u,a,s){var c=e.call(this,n,t)||this;return c.elementRef=n,c.injector=t,c.PathHelper=l,c.wpLinkedActivities=i,c.commentService=o,c.wpCacheService=r,c.ConfigurationService=u,c.userCacheService=a,c.I18n=s,c.userCanEdit=!1,c.userCanQuote=!1,c.details=[],c.focused=!1,c.text={label_created_on:c.I18n.t("js.label_created_on"),label_updated_on:c.I18n.t("js.label_updated_on"),quote_comment:c.I18n.t("js.label_quote_comment"),edit_comment:c.I18n.t("js.label_edit_comment")},c}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.isComment="Activity::Comment"===this.activity._type,this.$element=jQuery(this.elementRef.nativeElement),this.reset(),this.userCanEdit=!!this.activity.update,this.userCanQuote=!!this.workPackage.addComment,this.postedComment?this.fieldLabel=this.I18n.t("js.label_activity_with_comment_no",{activityNo:this.activityNo}):this.fieldLabel=this.I18n.t("js.label_activity_no",{activityNo:this.activityNo}),this.$element.bind("focusin",this.focus.bind(this)),this.$element.bind("focusout",this.blur.bind(this)),_.each(this.activity.details,function(e){n.details.push(e.html)}),this.userCacheService.require(this.activity.user.idFromLink).then(function(e){n.userId=e.id,n.userName=e.name,n.userActive=e.isActive,n.userAvatar=e.avatar,n.userPath=e.showUser.href,n.userLabel=n.I18n.t("js.label_author",{user:n.userName})})},n.prototype.shouldHideIcons=function(){return!(this.isComment&&this.focussing())},Object.defineProperty(n.prototype,"postedComment",{get:function(){return this.activity.comment.html},enumerable:!0,configurable:!0}),n.prototype.ngAfterViewInit=function(){window.location.hash==="activity-"+this.activityNo&&this.elementRef.nativeElement.scrollIntoView(!0)},n.prototype.activate=function(){e.prototype.activate.call(this,this.activity.comment.raw)},n.prototype.handleUserSubmit=function(){return this.changeset.inFlight||!this.rawComment?Promise.resolve():this.updateComment()},n.prototype.quoteComment=function(){this.commentService.quoteEvents.next(this.quotedText(this.activity.comment.raw))},n.prototype.updateComment=function(){return r.b(this,void 0,void 0,function(){var e=this;return r.e(this,function(n){switch(n.label){case 0:return[4,this.onSubmit()];case 1:return n.sent(),[2,this.commentService.updateComment(this.activity,this.rawComment||"").then(function(){e.wpLinkedActivities.require(e.workPackage,!0),e.wpCacheService.updateWorkPackage(e.workPackage),e.deactivate(!0)})]}})})},n.prototype.focusEditIcon=function(){jQuery(".edit-activity--"+this.activityNo+" a").focus()},n.prototype.focus=function(){var e=this;setTimeout(function(){return e.focused=!0})},n.prototype.blur=function(){var e=this;setTimeout(function(){return e.focused=!1})},n.prototype.focussing=function(){return this.focused},n.prototype.quotedText=function(e){var n=e.split("\n").map(function(e){return"\n> "+e}).join("");return this.userName+" wrote:\n"+n},Object.defineProperty(n.prototype,"htmlId",{get:function(){return"user_activity_edit_field_"+this.activityNo},enumerable:!0,configurable:!0}),n.prototype.deactivate=function(n){e.prototype.deactivate.call(this,n),n&&this.focusEditIcon()},n}(sp),dp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-avatar",[["data-class-list","avatar"]],[[1,"data-user-name",0],[1,"data-user-id",0]],null,null,Ti,Ri)),l["\u0275did"](1,4243456,null,0,ji,[l.ElementRef,l.ChangeDetectorRef,_i.DomSanitizer,ve],null,null)],null,function(e,n){var t=n.component;e(n,0,0,t.userName,t.userId)})}function hp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"a",[],[[1,"href",4],[1,"aria-label",0],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.userPath,t.userLabel,t.userName)})}function fp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.userName)})}function gp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.quoteComment()&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","action-icon icon-quote"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.quote_comment);e(n,3,0,"action-icon icon-quote",t.text.quote_comment)},null)}function mp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"accessible-by-keyboard",[],[[8,"className",0]],[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.activate()&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","action-icon icon-edit"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.edit_comment);e(n,3,0,"action-icon icon-edit",t.text.edit_comment)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"edit-activity--",t.activityNo,""))})}function vp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","inplace-edit"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","user-comment--form inplace-edit--write-value"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"edit-form-portal",[],null,null,null,Pr,kr)),l["\u0275did"](3,4440064,null,0,wr,[l.Injector,yr,l.ElementRef],{schemaInput:[0,"schemaInput"],changesetInput:[1,"changesetInput"],editFieldHandler:[2,"editFieldHandler"]},null)],function(e,n){var t=n.component;e(n,3,0,t.schema,t.changeset,t.handler)},null)}function bp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","message"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.postedComment)})}function yp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[["class","message"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function wp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","work-package-details-activities-messages"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,yp)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.details)},null)}function kp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,27,"div",[["class","work-package-details-activities-activity-contents"],["tabindex","0"]],[[1,"aria-label",0]],[[null,"mouseenter"],[null,"mouseleave"]],function(e,n,t){var l=!0,i=e.component;"mouseenter"===n&&(l=!1!==i.focus()&&l);"mouseleave"===n&&(l=!1!==i.blur()&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,pp)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,hp)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,fp)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,3,"span",[["class","date"]],null,null,null,null,null)),(e()(),l["\u0275ted"](8,null,[" "," "])),(e()(),l["\u0275eld"](9,0,null,null,1,"op-date-time",[],null,null,null,Ht,$t)),l["\u0275did"](10,114688,null,0,Lt,[qt],{dateTimeValue:[0,"dateTimeValue"]},null),(e()(),l["\u0275eld"](11,0,null,null,7,"div",[["class","comments-number"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"activity-link",[],null,null,null,Zd,Yd)),l["\u0275did"](13,114688,null,0,Gd,[],{workPackage:[0,"workPackage"],activityNo:[1,"activityNo"]},null),(e()(),l["\u0275eld"](14,0,null,null,4,"div",[["class","comments-icons"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,gp)),l["\u0275did"](16,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,mp)),l["\u0275did"](18,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](19,0,null,null,8,"div",[["class","user-comment"]],null,null,null,null,null)),l["\u0275did"](20,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](21,{wiki:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,vp)),l["\u0275did"](23,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,bp)),l["\u0275did"](25,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,wp)),l["\u0275did"](27,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.userName),e(n,4,0,t.userActive),e(n,6,0,!t.userActive),e(n,10,0,t.activity.createdAt),e(n,13,0,t.workPackage,t.activityNo),e(n,16,0,t.userCanQuote),e(n,18,0,t.userCanEdit);var l=e(n,21,0,!t.inEdit);e(n,20,0,"user-comment",l),e(n,23,0,t.inEdit),e(n,25,0,!t.inEdit&&t.isComment),e(n,27,0,!t.isInitial)},function(e,n){var t=n.component;e(n,0,0,t.fieldLabel||t.activityLabel),e(n,8,0,t.isInitial?t.text.label_created_on:t.text.label_updated_on),e(n,14,0,t.shouldHideIcons())})}function Cp(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,kp)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("user-activity",cp,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-activity",[],null,null,null,Cp,dp)),l["\u0275did"](1,4308992,null,0,cp,[l.ElementRef,l.Injector,ve,rr,ap,yn,Ne,Xd,B.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",activityLabel:"activityLabel",isInitial:"isInitial"},{},[]);var Ip=function(){function e(e,n){this.PathHelper=e,this.I18n=n}return e.prototype.ngOnInit=function(){this.projectId=this.workPackage.project.idFromLink,this.activityType=this.activity._type,this.activityLabel=this.I18n.t("js.label_activity_no",{activityNo:this.activityNo})},e}(),Pp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function jp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"revision-activity",[],null,null,null,up,np)),l["\u0275did"](1,114688,null,0,ep,[B.a,qt,Xd],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],activityLabel:[3,"activityLabel"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,t.activity,t.activityNo,t.activityLabel)},null)}function _p(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-activity",[],null,null,null,Cp,dp)),l["\u0275did"](1,4308992,null,0,cp,[l.ElementRef,l.Injector,ve,rr,ap,yn,Ne,Xd,B.a],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],activityLabel:[3,"activityLabel"],isInitial:[4,"isInitial"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,t.activity,t.activityNo,t.activityLabel,t.isInitial)},null)}function Rp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[],null,null,null,null,null)),l["\u0275did"](2,16384,null,0,It.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,jp)),l["\u0275did"](4,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,_p)),l["\u0275did"](6,16384,null,0,It.NgSwitchDefault,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],null,null)],function(e,n){e(n,2,0,n.component.activityType);e(n,4,0,"Revision")},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"activity-",t.activityNo,""))})}l["\u0275ccf"]("activity-entry",Ip,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"activity-entry",[],null,null,null,Rp,Pp)),l["\u0275did"](1,114688,null,0,Ip,[ve,B.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",isInitial:"isInitial"},{},[]);var Sp=function(e){function n(n,t,l,i,o,r,u,a,s,c){var d=e.call(this,n,t)||this;return d.elementRef=n,d.injector=t,d.commentService=l,d.wpLinkedActivities=i,d.ConfigurationService=o,d.loadingIndicator=r,d.wpCacheService=u,d.wpNotificationsService=a,d.NotificationsService=s,d.I18n=c,d.text={editTitle:d.I18n.t("js.label_add_comment_title"),addComment:d.I18n.t("js.label_add_comment"),cancelTitle:d.I18n.t("js.label_cancel_comment"),placeholder:d.I18n.t("js.label_add_comment_title")},d.fieldLabel=d.text.editTitle,d.inFlight=!1,d}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canAddComment=!!this.workPackage.addComment,this.showAbove=this.ConfigurationService.commentsSortedInDescendingOrder(),this.commentService.quoteEvents.pipe(Object(Ln.b)(this)).subscribe(function(e){n.activate(e),n.commentContainer.nativeElement.scrollIntoView()})},n.prototype.startDragOverActivation=function(e){return!!this.active||(this.activate(),e.preventDefault(),!1)},n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"htmlId",{get:function(){return"wp-comment-field"},enumerable:!0,configurable:!0}),n.prototype.activate=function(n){e.prototype.activate.call(this,n),this.showAbove||this.scrollToBottom()},n.prototype.deactivate=function(e){e&&this.focus(),this.inEdit=!1},n.prototype.handleUserSubmit=function(){return r.b(this,void 0,void 0,function(){var e=this;return r.e(this,function(n){switch(n.label){case 0:return this.inFlight||!this.rawComment?[2,Promise.resolve()]:(this.inFlight=!0,[4,this.onSubmit()]);case 1:return n.sent(),[2,this.loadingIndicator.wpDetails.promise=this.commentService.createComment(this.workPackage,this.commentValue).then(function(){e.inEdit=!1,e.NotificationsService.addSuccess(e.I18n.t("js.work_packages.comment_added")),e.wpLinkedActivities.require(e.workPackage,!0),e.wpCacheService.updateWorkPackage(e.workPackage),e.inFlight=!1,e.focus()}).catch(function(n){e.inFlight=!1,n instanceof jn?e.wpNotificationsService.showError(n,e.workPackage):e.NotificationsService.addError(e.I18n.t("js.work_packages.comment_send_failed"))})]}})})},n.prototype.scrollToBottom=function(){var e=jQuery(this.elementRef.nativeElement).scrollParent()[0];e&&setTimeout(function(){e.scrollTop=e.scrollHeight},400)},n}(sp),xp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Tp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,1,null,null,null,null,null,null,null)),l["\u0275did"](1,540672,null,0,It.NgTemplateOutlet,[l.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,1,0,n.component.template)},null)}function Op(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-form-portal",[],null,null,null,Pr,kr)),l["\u0275did"](1,4440064,null,0,wr,[l.Injector,yr,l.ElementRef],{schemaInput:[0,"schemaInput"],changesetInput:[1,"changesetInput"],editFieldHandler:[2,"editFieldHandler"]},null)],function(e,n){var t=n.component;e(n,1,0,t.schema,t.changeset,t.handler)},null)}function Ep(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","inplace-edit--read"]],null,[[null,"dragover"]],function(e,n,t){var l=!0,i=e.component;"dragover"===n&&(l=!1!==i.startDragOverActivation(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"accessible-by-keyboard",[["class","inplace-editing--trigger-container"],["linkClass","inplace-editing--trigger-link"],["spanClass","inplace-editing--container wp-edit-field--display-field"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.activate()&&l);return l},al,ul)),l["\u0275did"](2,49152,null,0,rl,[],{linkClass:[0,"linkClass"],spanClass:[1,"spanClass"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](3,0,null,0,1,"span",[["class","inplace-edit--read-value -default"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,0,2,"span",[["class","inplace-edit--icon-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-edit"]],null,null,null,Zt,Gt)),l["\u0275did"](7,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,2,0,"inplace-editing--trigger-link","inplace-editing--container wp-edit-field--display-field",t.text.editTitle);e(n,7,0,"icon-edit",t.text.editTitle)},function(e,n){e(n,4,0,n.component.text.placeholder)})}function Dp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,[[1,0],["commentContainer",1]],null,5,"div",[["class","work-package--details--long-field work-packages--activity--add-comment hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"div",[["class","wp-edit-field inplace-edit"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Op)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ep)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.active),e(n,5,0,!t.active)},null)}function Fp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,1,null,null,null,null,null,null,null)),l["\u0275did"](1,540672,null,0,It.NgTemplateOutlet,[l.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,1,0,n.component.template)},null)}function Ap(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{commentContainer:0}),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["id","work-package-activites-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,6,"div",[["id","work-package-comment-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Tp)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Dp)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Fp)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,!t.showAbove),e(n,6,0,t.canAddComment),e(n,8,0,t.showAbove)},null)}l["\u0275ccf"]("work-package-comment",Sp,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"work-package-comment",[],null,null,null,Ap,xp)),l["\u0275did"](1,245760,null,1,Sp,[l.ElementRef,l.Injector,ap,rr,Ne,Sn,yn,On,Tn,B.a],null,null),l["\u0275qud"](335544320,1,{template:0})],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var Np,Mp=function(){function e(e,n,t){this.wpCacheService=e,this.I18n=n,this.wpActivity=t,this.unfilteredActivities=[],this.visibleActivities=[],this.onlyComments=!1,this.text={commentsOnly:this.I18n.t("js.label_activity_show_only_comments"),showAll:this.I18n.t("js.label_activity_show_all")},this.reverse=t.isReversed,this.togglerText=this.text.commentsOnly}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.observe(this.workPackageId).pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.workPackage=n,e.wpActivity.require(e.workPackage).then(function(n){e.updateActivities(n)})})},e.prototype.ngOnDestroy=function(){},e.prototype.updateActivities=function(e){var n=this;this.unfilteredActivities=e;var t=this.getVisibleActivities();this.visibleActivities=t.map(function(e,t){return n.info(e,t)}),this.showToggler=this.shouldShowToggler()},e.prototype.shouldShowToggler=function(){var e=this.unfilteredActivities.length,n=this.getActivitiesWithComments().length;return e>1&&n>0&&n<this.unfilteredActivities.length},e.prototype.getVisibleActivities=function(){return this.onlyComments?this.getActivitiesWithComments():this.unfilteredActivities},e.prototype.getActivitiesWithComments=function(){return this.unfilteredActivities.filter(function(e){return!!_.get(e,"comment.html")})},e.prototype.toggleComments=function(){this.onlyComments=!this.onlyComments,this.updateActivities(this.unfilteredActivities),this.onlyComments?this.togglerText=this.text.showAll:this.togglerText=this.text.commentsOnly},e.prototype.info=function(e,n){return this.wpActivity.info(this.unfilteredActivities,e,n)},e}();!function(e){function n(e){return function(n,t){return!n&&!t||!!n&&!!t&&n[e]===t[e]}}function t(e,n){return!e&&!n||!!e&&!!n&&e.$href===n.$href}e.halHref=function(e,n){return n.$href},e.compareByName=function(e,t){return n("name")(e,t)},e.compareByAttribute=n,e.trackByName=function(e,n){return _.get(n,"name")},e.trackByHref=function(e,n){return _.get(n,"href")},e.trackByHrefAndProperty=function(e){return function(n,t){var l=_.get(t,"href"),i=_.get(t,e,"none");return l+"#"+e+"="+i}},e.trackByTrackingIdentifier=function(e,n){return _.get(n,"trackingIdentifier",n&&n.href)},e.compareByHref=t,e.compareByHrefOrString=function(e,n){return e instanceof z&&n instanceof z?t(e,n):!e&&!n||e===n}}(Np||(Np={}));var Vp=function(e){function n(n,t,l,i){var o=e.call(this,n,l,i)||this;return o.wpCacheService=n,o.$transition=t,o.I18n=l,o.wpActivity=i,o.tabName=o.I18n.t("js.work_packages.tabs.activity"),o.trackByHref=Np.trackByHrefAndProperty("version"),o.workPackageId=o.$transition.params("to").workPackageId,o}return r.d(n,e),n.prototype.ngOnDestroy=function(){},n}(Mp),qp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Lp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"accessible-by-keyboard",[["linkClass","activity-comments--toggler button -small -transparent"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggleComments()&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,1,0,"activity-comments--toggler button -small -transparent",n.component.togglerText)},function(e,n){e(n,2,0,n.component.togglerText)})}function $p(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"h3",[["class","activity-date"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-with-toggler":0}),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","activity-date--label"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,[[1,2]],null,1,null,Lp)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.parent.context.first&&t.showToggler);e(n,1,0,"activity-date",l),e(n,5,0,n.parent.context.first&&t.showToggler)},function(e,n){e(n,3,0,n.parent.context.$implicit.date)})}function Hp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","work-package-details-activities-activity"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,[[1,2]],null,1,null,$p)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"activity-entry",[],null,null,null,Rp,Pp)),l["\u0275did"](4,114688,null,0,Ip,[ve,B.a],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],isInitial:[3,"isInitial"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.first||n.context.$implicit.isNextDate);var l=t.workPackage,i=n.context.$implicit.activity,o=n.context.$implicit.number(n.context.$implicit.isReversed),r=n.context.$implicit.isInitial();e(n,4,0,l,i,o,r)},null)}function Bp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","detail-activity"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","work-package-details-activities-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,[[1,2]],null,1,null,Hp)),l["\u0275did"](3,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,3,0,t.visibleActivities,t.trackByHref)},null)}function zp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"work-package-comment",[],null,null,null,Ap,xp)),l["\u0275did"](1,245760,null,1,Sp,[l.ElementRef,l.Injector,ap,rr,Ne,Sn,yn,On,Tn,B.a],{workPackage:[0,"workPackage"]},null),l["\u0275qud"](603979776,1,{template:0}),(e()(),l["\u0275and"](0,[[1,2]],null,0,null,Bp))],function(e,n){e(n,1,0,n.component.workPackage)},null)}var Wp=l["\u0275ccf"]("wp-activity-tab",Vp,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-activity-tab",[],null,null,null,zp,qp)),l["\u0275did"](1,245760,null,0,Vp,[yn,h.J,B.a,rr],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Qp=function(){function e(e,n,t,l,i,o){this.wpCacheService=e,this.wpNotificationsService=n,this.wpRelations=t,this.wpTableRefresh=l,this.I18n=i,this.PathHelper=o,this.showRelationInfo=!1,this.showEditForm=!1,this.userInputs={newRelationText:"",showDescriptionEditForm:!1,showRelationTypesForm:!1,showRelationInfo:!1},this.fieldController={handler:{active:!0},required:!1},this.text={cancel:this.I18n.t("js.button_cancel"),save:this.I18n.t("js.button_save"),removeButton:this.I18n.t("js.relation_buttons.remove"),description_label:this.I18n.t("js.relation_buttons.update_description"),toggleDescription:this.I18n.t("js.relation_buttons.toggle_description"),updateRelation:this.I18n.t("js.relation_buttons.update_relation"),placeholder:{description:this.I18n.t("js.placeholders.relation_description")}}}return e.prototype.ngOnInit=function(){var e=this;this.relation=this.relatedWorkPackage.relatedBy,this.userInputs.newRelationText=this.relation.description||"",this.availableRelationTypes=sd.LOCALIZED_RELATION_TYPES(!1),this.selectedRelationType=_.find(this.availableRelationTypes,{name:this.relation.normalizedType(this.workPackage)}),this.wpCacheService.observe(this.relatedWorkPackage.id).pipe(Object(Ln.b)(this)).subscribe(function(n){e.relatedWorkPackage=n})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"normalizedRelationType",{get:function(){var e=this.relation.normalizedType(this.workPackage);return this.I18n.t("js.relation_labels."+e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relationReady",{get:function(){return this.relatedWorkPackage&&this.relatedWorkPackage.$loaded},enumerable:!0,configurable:!0}),e.prototype.startDescriptionEdit=function(){var e=this;this.userInputs.showDescriptionEditForm=!0,setTimeout(function(){var n=jQuery(e.relationDescriptionTextarea.nativeElement),t=n.val().length;n.focus(),n.prop("selectionStart",t),n.prop("selectionEnd",t)})},e.prototype.handleDescriptionKey=function(e){27===e.which&&this.cancelDescriptionEdit()},e.prototype.cancelDescriptionEdit=function(){this.userInputs.showDescriptionEditForm=!1,this.userInputs.newRelationText=this.relation.description||""},e.prototype.saveDescription=function(){var e=this;this.wpRelations.updateRelation(this.relation,{description:this.userInputs.newRelationText}).then(function(n){e.relation=n,e.relatedWorkPackage.relatedBy=n,e.userInputs.showDescriptionEditForm=!1,e.wpTableRefresh.request("Updated relation "+e.relatedWorkPackage.id,{visible:!0}),e.wpNotificationsService.showSave(e.relatedWorkPackage)})},Object.defineProperty(e.prototype,"showDescriptionInfo",{get:function(){return this.userInputs.showRelationInfo||this.relation.description},enumerable:!0,configurable:!0}),e.prototype.activateRelationTypeEdit=function(){this.groupByWorkPackageType&&(this.userInputs.showRelationTypesForm=!0)},e.prototype.cancelRelationTypeEditOnEscape=function(e){this.userInputs.showRelationTypesForm=!1},e.prototype.saveRelationType=function(){var e=this;this.wpRelations.updateRelationType(this.workPackage,this.relatedWorkPackage,this.relation,this.selectedRelationType.name).then(function(n){e.wpNotificationsService.showSave(e.relatedWorkPackage),e.relatedWorkPackage.relatedBy=n,e.relation=n,e.userInputs.showRelationTypesForm=!1}).catch(function(n){return e.wpNotificationsService.handleRawError(n,e.workPackage)})},e.prototype.toggleUserDescriptionForm=function(){this.userInputs.showDescriptionEditForm=!this.userInputs.showDescriptionEditForm},e.prototype.removeRelation=function(){var e=this;this.wpRelations.removeRelation(this.relation).then(function(){e.wpTableRefresh.request("Removed relation "+e.relatedWorkPackage.id,{visible:!0}),e.wpCacheService.updateWorkPackage(e.relatedWorkPackage),e.wpNotificationsService.showSave(e.relatedWorkPackage)}).catch(function(n){return e.wpNotificationsService.handleRawError(n,e.relatedWorkPackage)})},e}(),Up=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Kp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.normalizedRelationType)})}function Gp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.relatedWorkPackage.type.name)})}function Yp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"span",[["class","relation-row--type"],["tabindex","0"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.activateRelationTypeEdit()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275and"](16777216,null,null,1,null,Kp)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Gp)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"span",[["class","hidden-for-sighted"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,t.groupByWorkPackageType),e(n,5,0,!t.groupByWorkPackageType)},function(e,n){e(n,6,0,n.component.text.updateRelation)})}function Zp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[2,Pt.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.label)})}function Jp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"div",[["class","wp-edit-field inplace-edit"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"select",[["class","wp-inline-edit--field form--select"],["focus",""],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown.escape"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedRelationType=t)&&i);"change"===n&&(i=!1!==o.saveRelationType()&&i);"keydown.escape"===n&&(i=!1!==o.cancelRelationTypeEditOnEscape(t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Pt.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.p]),l["\u0275did"](4,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](6,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](7,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Zp)),l["\u0275did"](9,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.selectedRelationType);e(n,7,0,""),e(n,9,0,t.availableRelationTypes)},function(e,n){e(n,1,0,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending)})}function Xp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","grid-content medium-5 collapse"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"a",[["class","wp-relations--subject-field"],["uiSref","work-packages.show.relations"]],[[8,"textContent",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,3).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Mu.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](3,737280,null,0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](4,{workPackageId:0})],function(e,n){var t=e(n,4,0,n.component.relatedWorkPackage.id);e(n,3,0,"work-packages.show.relations",t)},function(e,n){var t=n.component;e(n,1,0,t.relatedWorkPackage.subjectWithId(),t.normalizedRelationType+" "+t.relatedWorkPackage.subjectWithId())})}function eh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"wp-edit-field-group",[],null,null,null,Da,Ea)),l["\u0275did"](1,245760,null,0,Oa,[s,l.Injector,ur,ar,On,Ia,Pa,h.O,Ne,h.G,B.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](2,0,null,0,1,"wp-edit-field",[["fieldName","status"]],null,null,null,Ga,Ka)),l["\u0275did"](3,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.relatedWorkPackage);e(n,3,0,"status",t.relatedWorkPackage.id)},null)}function nh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","relation-row--remove-btn"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.removeRelation(i.relation)&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove -padded wp-relations--icon"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"relation-row--remove-btn",t.text.removeButton,t.text.removeButton);e(n,3,0,"icon-remove -padded wp-relations--icon",t.text.removeButton)},null)}function th(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","wp-relation--description-read-value"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.startDescriptionEdit()&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-placeholder":0}),l["\u0275did"](3,16384,null,0,ol,[],null,{onClick:"accessibleClick"})],function(e,n){var t=e(n,2,0,!n.component.relation.description);e(n,1,0,"wp-relation--description-read-value",t)},function(e,n){var t=n.component;e(n,0,0,t.relation.description||t.text.placeholder.description)})}function lh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","wp-relation--description-wrapper textarea-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,[[1,0],["relationDescriptionTextarea",1]],null,5,"textarea",[["autofocus",""],["class","wp-relation--description-textarea"],["name","description"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionEnd(t.target.value)&&i);"keyup"===n&&(i=!1!==o.handleDescriptionKey(t)&&i);"ngModelChange"===n&&(i=!1!==(o.userInputs.newRelationText=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](4,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](6,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](7,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.saveDescription()&&l);"onCancel"===n&&(l=!1!==i.cancelDescriptionEdit()&&l);return l},du,su)),l["\u0275did"](8,49152,null,0,au,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,4,0,"description",t.userInputs.newRelationText),e(n,8,0,t.text.cancel,t.text.save,t.fieldController)},function(e,n){e(n,1,0,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending)})}function ih(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","grid-block hierarchy-item description-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,th)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,lh)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.userInputs.showDescriptionEditForm),e(n,4,0,t.userInputs.showDescriptionEditForm)},null)}function oh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,23,"div",[["focus-within","'.wp-relations-controls-section accessible-by-keyboard'"]],[[8,"className",0]],null,null,null,null)),l["\u0275did"](1,212992,null,0,eo,[l.ElementRef],null,null),(e()(),l["\u0275eld"](2,0,null,null,19,"div",[["class","grid-block hierarchy-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,4,"div",[["class","grid-content medium-2 collapse"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Yp)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Jp)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Xp)),l["\u0275did"](9,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](10,0,null,null,2,"div",[["class","grid-content medium-3 collapse wp-relations-status-field"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,eh)),l["\u0275did"](12,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](13,0,null,null,8,"div",[["class","grid-content medium-2 collapse wp-relations-controls-section"],["ng-class","{'-expanded': userInputs.showRelationInfo }"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,5,"accessible-by-keyboard",[["linkClass","wp-relations--description-btn"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!=(i.userInputs.showRelationInfo=!i.userInputs.showRelationInfo)&&l);return l},al,ul)),l["\u0275did"](15,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pod"](16,{"-visible":0}),l["\u0275did"](17,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](18,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 -padded wp-relations--icon wp-relations--description-icon"],["icon-title","text.toggleDescription"]],null,null,null,Zt,Gt)),l["\u0275did"](19,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,nh)),l["\u0275did"](21,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ih)),l["\u0275did"](23,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0),e(n,5,0,!t.userInputs.showRelationTypesForm),e(n,7,0,t.userInputs.showRelationTypesForm),e(n,9,0,t.relatedWorkPackage),e(n,12,0,t.relatedWorkPackage);var l=e(n,16,0,t.showDescriptionInfo);e(n,15,0,l);e(n,17,0,"wp-relations--description-btn",t.text.description_label,t.text.description_label);e(n,19,0,"icon-info1 -padded wp-relations--icon wp-relations--description-icon","text.toggleDescription"),e(n,21,0,t.relation.delete),e(n,23,0,t.userInputs.showRelationInfo)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"relation-row relation-row-",t.relatedWorkPackage.id,""))})}function rh(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{relationDescriptionTextarea:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,oh)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.workPackage&&t.relatedWorkPackage)},null)}l["\u0275ccf"]("wp-relation-row",Qp,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relation-row",[],null,null,null,rh,Up)),l["\u0275did"](1,245760,null,0,Qp,[yn,On,Cn,zn,B.a,ve],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",relatedWorkPackage:"relatedWorkPackage",groupByWorkPackageType:"groupByWorkPackageType"},{},[]);var uh=function(){function e(e){this.I18n=e,this.onToggleGroupBy=new l.EventEmitter,this.text={groupByType:this.I18n.t("js.relation_buttons.group_by_wp_type"),groupByRelation:this.I18n.t("js.relation_buttons.group_by_relation_type")}}return Object.defineProperty(e.prototype,"togglerText",{get:function(){return this.groupByWorkPackageType?this.text.groupByRelation:this.text.groupByType},enumerable:!0,configurable:!0}),e.prototype.toggleButton=function(){var e=this;this.onToggleGroupBy.emit(),setTimeout(function(){e.toggleElement.nativeElement.focus()},20)},e}(),ah=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function sh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","attributes-group--header-toggle"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,[[1,0],["wpRelationGroupByToggler",1]],null,5,"div",[["class","panel-toggler ng-scope ng-isolate-scope hide-when-print"],["id","wp-relation-group-by-toggle"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"accessible-by-keyboard",[["linkClass","button -transparent"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggleButton()&&l);return l},al,ul)),l["\u0275did"](3,49152,null,0,rl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](4,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-small icon-group-by icon4"]],null,null,null,Zt,Gt)),l["\u0275did"](5,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](6,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"button -transparent");e(n,5,0,"icon-small icon-group-by icon4")},function(e,n){e(n,6,0,n.component.togglerText)})}function ch(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relation-row",[],null,null,null,rh,Up)),l["\u0275did"](1,245760,null,0,Qp,[yn,On,Cn,zn,B.a,ve],{workPackage:[0,"workPackage"],relatedWorkPackage:[1,"relatedWorkPackage"],groupByWorkPackageType:[2,"groupByWorkPackageType"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,n.context.$implicit,t.groupByWorkPackageType)},null)}function dh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","content"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ch)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.relatedWorkPackages)},null)}function ph(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{toggleElement:0}),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","attributes-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"h3",[["class","attributes-group--header-text relation-group--header"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,sh)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,dh)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,6,0,t.firstGroup),e(n,8,0,t.relatedWorkPackages)},function(e,n){e(n,4,0,n.component.header)})}l["\u0275ccf"]("wp-relations-group",uh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-group",[],null,null,null,ph,ah)),l["\u0275did"](1,49152,null,0,uh,[B.a],null,null)],null,null)},{relatedWorkPackages:"relatedWorkPackages",workPackage:"workPackage",header:"header",firstGroup:"firstGroup",groupByWorkPackageType:"groupByWorkPackageType"},{onToggleGroupBy:"onToggleGroupBy"},[]);var hh=function(){function e(e,n,t,l,i){this.I18n=e,this.wpRelations=n,this.wpNotificationsService=t,this.wpTableRefresh=l,this.wpCacheService=i,this.showRelationsCreateForm=!1,this.selectedRelationType=sd.DEFAULT(),this.relationTypes=sd.LOCALIZED_RELATION_TYPES(!1),this.isDisabled=!1,this.text={save:this.I18n.t("js.relation_buttons.save"),abort:this.I18n.t("js.relation_buttons.abort"),relationType:this.I18n.t("js.relation_buttons.relation_type"),addNewRelation:this.I18n.t("js.relation_buttons.add_new_relation")}}return e.prototype.createRelation=function(){var e=this;this.selectedRelationType&&this.selectedWpId&&(this.isDisabled=!0,this.createCommonRelation().catch(function(){return e.isDisabled=!1}).then(function(){return e.isDisabled=!1}))},e.prototype.onReferenced=function(e){e&&(this.selectedWpId=e.id)},e.prototype.createCommonRelation=function(){var e=this;return this.wpRelations.addCommonRelation(this.workPackage.id,this.selectedRelationType,this.selectedWpId).then(function(n){e.wpTableRefresh.request("Added relation "+n.id,{visible:!0}),e.wpNotificationsService.showSave(e.workPackage),e.toggleRelationsCreateForm()}).catch(function(n){e.wpNotificationsService.handleRawError(n,e.workPackage),e.toggleRelationsCreateForm()})},e.prototype.toggleRelationsCreateForm=function(){var e=this;this.showRelationsCreateForm=!this.showRelationsCreateForm,setTimeout(function(){e.showRelationsCreateForm||(e.selectedWpId="",e.focusAfterSave.nativeElement.focus())})},e}(),fh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function gh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","wp-relations-create-button hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"div",[["class","grid-block"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,5,"div",[["class","grid-content collapse wp-inline-create-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,[[1,0],["focusAfterSave",1]],null,4,"a",[["class","wp-inline-create--add-link relation-create"],["href",""],["id","relation--add-relation"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.toggleRelationsCreateForm()&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-add"]],null,null,null,Zt,Gt)),l["\u0275did"](6,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,6,0,"icon icon-add")},function(e,n){e(n,7,0,n.component.text.addNewRelation)})}function mh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[2,Pt.p]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.name),e(n,2,0,n.context.$implicit.name)},function(e,n){e(n,0,0,n.context.$implicit.label)})}function vh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,23,"div",[["class","v-align wp-relations-create--form"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,10,"div",[["class","grid-content collapse medium-3"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"label",[["class","hidden-for-sighted"],["for","relation-type--select"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,8,"select",[["class","form--select relationTypeSelect"],["focus",""],["id","relation-type--select"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,4).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedRelationType=t)&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Pt.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.p]),l["\u0275did"](6,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](8,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](9,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,mh)),l["\u0275did"](11,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](12,0,null,null,2,"div",[["class","grid-content medium-7"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,1,"wp-relations-autocomplete",[],null,[[null,"onReferenced"]],function(e,n,t){var l=!0,i=e.component;"onReferenced"===n&&(l=!1!==i.onReferenced(t)&&l);return l},la,ea)),l["\u0275did"](14,1097728,null,0,Ju,[y,ve,On,Vn,Y,gn,l.ChangeDetectorRef,B.a],{workPackage:[0,"workPackage"],selectedRelationType:[1,"selectedRelationType"],appendToContainer:[2,"appendToContainer"]},{onReferenced:"onReferenced"}),(e()(),l["\u0275eld"](15,0,null,null,8,"div",[["class","grid-content medium-2 collapse wp-relations-controls-section relation-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--save"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.createRelation()&&l);return l},al,ul)),l["\u0275did"](17,49152,null,0,rl,[],{isDisabled:[0,"isDisabled"],linkClass:[1,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](18,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark -padded"]],null,null,null,Zt,Gt)),l["\u0275did"](19,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["\u0275eld"](20,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--cancel"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggleRelationsCreateForm()&&l);return l},al,ul)),l["\u0275did"](21,49152,null,0,rl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](22,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove -padded"]],null,null,null,Zt,Gt)),l["\u0275did"](23,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,6,0,t.selectedRelationType);e(n,9,0,""),e(n,11,0,t.relationTypes);e(n,14,0,t.workPackage,t.selectedRelationType,".work-packages-tab-view--overflow");e(n,17,0,t.isDisabled||!t.selectedWpId,"wp-create-relation--save");e(n,19,0,"icon-checkmark -padded",t.text.save);e(n,21,0,"wp-create-relation--cancel");e(n,23,0,"icon-remove -padded",t.text.abort)},function(e,n){e(n,2,0,n.component.text.relationType),e(n,3,0,l["\u0275nov"](n,8).ngClassUntouched,l["\u0275nov"](n,8).ngClassTouched,l["\u0275nov"](n,8).ngClassPristine,l["\u0275nov"](n,8).ngClassDirty,l["\u0275nov"](n,8).ngClassValid,l["\u0275nov"](n,8).ngClassInvalid,l["\u0275nov"](n,8).ngClassPending)})}function bh(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{focusAfterSave:0}),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","wp-relations-create"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,gh)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","loading-indicator--location"],["data-indicator-name","relationAddDynamic"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,vh)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,!t.showRelationsCreateForm),e(n,6,0,t.showRelationsCreateForm)},null)}l["\u0275ccf"]("wp-relations-create",hh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-create",[],null,null,null,bh,fh)),l["\u0275did"](1,49152,null,0,hh,[B.a,Cn,On,zn,yn],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var yh=function(){function e(e,n){void 0===n&&(n=250);var t=this;this.emitter=new l.EventEmitter,this.debouncer=new a.a,this.debouncer.pipe(Object(Yu.a)(n),Object(D.a)(e)).subscribe(function(e){return t.emitter.emit(e)})}return e.prototype.emit=function(e){this.debouncer.next(e)},e.prototype.subscribe=function(e,n,t){return this.emitter.subscribe(e,n,t)},e}(),wh=function(){function e(e){this.I18n=e,this.shouldFocus=!1,this.filterChanged=new yh(Object(Ln.a)(this))}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"value",{get:function(){return parseInt(this.filter.values[0])},set:function(e){this.filter.values="number"==typeof e?[e.toString()]:[],this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unit",{get:function(){switch(this.filter.schema.filter.allowedValues[0].id){case"startDate":case"dueDate":case"updatedAt":case"createdAt":return this.I18n.t("js.work_packages.time_relative.days");default:return""}},enumerable:!0,configurable:!0}),e}(),kh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ch(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"input",[["class","advanced-filters--number-field"],["min","0"],["required",""],["type","number"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,3).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["\u0275nov"](e,3).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](3,16384,null,0,Pt.s,[l.Renderer2,l.ElementRef],null,null),l["\u0275did"](4,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.s]),l["\u0275did"](7,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](9,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](10,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](11,0,null,null,0,"label",[["class","advanced-filters--affix"]],[[8,"htmlFor",0],[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,4,0,""),e(n,7,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]"),t.value),e(n,10,0,t.shouldFocus)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,1,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),l["\u0275nov"](n,4).required?"":null,l["\u0275nov"](n,9).ngClassUntouched,l["\u0275nov"](n,9).ngClassTouched,l["\u0275nov"](n,9).ngClassPristine,l["\u0275nov"](n,9).ngClassDirty,l["\u0275nov"](n,9).ngClassValid,l["\u0275nov"](n,9).ngClassInvalid,l["\u0275nov"](n,9).ngClassPending),e(n,11,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),t.unit)})}l["\u0275ccf"]("filter-integer-value",wh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-integer-value",[],null,null,null,Ch,kh)),l["\u0275did"](1,180224,null,0,wh,[B.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var Ih=function(){function e(e,n){this.timezoneService=e,this.I18n=n,this.shouldFocus=!1,this.filterChanged=new yh(Object(Ln.a)(this))}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values=[e],this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){return moment(e,"YYYY-MM-DD",!0).isValid()?e:null},e.prototype.formatter=function(e){if(moment(e,"YYYY-MM-DD",!0).isValid()){var n=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(n)}return null},e}(),Ph=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function jh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,10,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.value=i.parser(t))&&l);return l},Wr,zr)),l["\u0275did"](2,245760,null,0,Br,[l.ElementRef,Ne,qt],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](3,0,null,0,8,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=o.parser(t))&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](5,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](8,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](10,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](11,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]"),t.formatter(t.value)),e(n,11,0,t.shouldFocus)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),l["\u0275nov"](n,5).required?"":null,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending)})}l["\u0275ccf"]("filter-date-value",Ih,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-value",[],null,null,null,jh,Ph)),l["\u0275did"](1,180224,null,0,Ih,[qt,B.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var _h=function(){function e(e,n){this.timezoneService=e,this.I18n=n,this.shouldFocus=!1,this.filterChanged=new yh(Object(Ln.a)(this)),this.text={spacer:this.I18n.t("js.filter.value_spacer")}}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"begin",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.filter.values[1]},set:function(e){this.filter.values[1]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){return C(e,"YYYY-MM-DD",!0).isValid()?e:null},e.prototype.formatter=function(e){if(C(e,"YYYY-MM-DD",!0).isValid()){var n=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(n)}return null},e}(),Rh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Sh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,22,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,10,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.begin=i.parser(t))&&l);return l},Wr,zr)),l["\u0275did"](2,245760,null,0,Br,[l.ElementRef,Ne,qt],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](3,0,null,0,8,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.begin=o.parser(t))&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](5,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](8,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](10,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](11,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](12,0,null,null,0,"span",[["class","advanced-filters--affix"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,9,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.end=i.parser(t))&&l);return l},Wr,zr)),l["\u0275did"](14,245760,null,0,Br,[l.ElementRef,Ne,qt],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](15,0,null,0,7,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,16)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,16).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,16)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,16)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.end=o.parser(t))&&i);return i},null,null)),l["\u0275did"](16,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](17,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](20,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](22,16384,null,0,Pt.i,[[4,Pt.h]],null,null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]-begin"),t.formatter(t.begin)),e(n,11,0,t.shouldFocus),e(n,14,0);e(n,17,0,""),e(n,20,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]-end"),t.formatter(t.end))},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,"-begin"),l["\u0275nov"](n,5).required?"":null,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending),e(n,12,0,t.text.spacer),e(n,15,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,"-end"),l["\u0275nov"](n,17).required?"":null,l["\u0275nov"](n,22).ngClassUntouched,l["\u0275nov"](n,22).ngClassTouched,l["\u0275nov"](n,22).ngClassPristine,l["\u0275nov"](n,22).ngClassDirty,l["\u0275nov"](n,22).ngClassValid,l["\u0275nov"](n,22).ngClassInvalid,l["\u0275nov"](n,22).ngClassPending)})}l["\u0275ccf"]("filter-dates-value",_h,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-dates-value",[],null,null,null,Sh,Rh)),l["\u0275did"](1,180224,null,0,_h,[qt,B.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var xh=function(){function e(e,n){this.I18n=e,this.timezoneService=n}return e.prototype.ngOnInit=function(){var e=this;_.remove(this.filter.values,function(n){return!e.timezoneService.isValidISODateTime(n)})},e.prototype.isoDateParser=function(e){if(!this.timezoneService.isValidISODate(e))return"";var n=this.timezoneService.parseISODatetime(e);return this.timezoneService.formattedISODateTime(n)},e.prototype.isoDateFormatter=function(e){if(!this.timezoneService.isValidISODateTime(e))return"";var n=this.timezoneService.parseISODatetime(e);return this.timezoneService.formattedISODate(n)},Object.defineProperty(e.prototype,"isTimeZoneDifferent",{get:function(){var e=this.lowerBoundary||this.upperBoundary;return!!e&&(0!==e.hours()||0!==e.minutes())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeZoneText",{get:function(){return this.lowerBoundary&&this.upperBoundary?this.I18n.t("js.filter.time_zone_converted.two_values",{from:this.lowerBoundary.format("YYYY-MM-DD HH:mm"),to:this.upperBoundary.format("YYYY-MM-DD HH:mm")}):this.upperBoundary?this.I18n.t("js.filter.time_zone_converted.only_end",{to:this.upperBoundary.format("YYYY-MM-DD HH:mm")}):this.lowerBoundary?this.I18n.t("js.filter.time_zone_converted.only_start",{from:this.lowerBoundary.format("YYYY-MM-DD HH:mm")}):""},enumerable:!0,configurable:!0}),e}(),Th=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.I18n=n,l.timezoneService=t,l.shouldFocus=!1,l.filterChanged=new yh(Object(Ln.a)(l)),l}return r.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values=[e],this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.filter.values[0].toString()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lowerBoundary",{get:function(){return this.value&&this.timezoneService.isValidISODateTime(this.valueString)?this.timezoneService.parseDatetime(this.valueString):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"upperBoundary",{get:function(){return this.value&&this.timezoneService.isValidISODateTime(this.valueString)?this.timezoneService.parseDatetime(this.valueString).add(24,"hours"):null},enumerable:!0,configurable:!0}),n}(xh),Oh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Eh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","advanced-filters--tooltip-trigger -multiline"]],[[1,"data-tooltip",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-warning"]],null,null,null,Zt,Gt)),l["\u0275did"](2,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon icon-warning")},function(e,n){e(n,0,0,n.component.timeZoneText)})}function Dh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,10,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.value=i.isoDateParser(t))&&l);return l},Wr,zr)),l["\u0275did"](2,245760,null,0,Br,[l.ElementRef,Ne,qt],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](3,0,null,0,8,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=o.isoDateParser(t))&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](5,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](8,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](10,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](11,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Eh)),l["\u0275did"](13,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]"),t.isoDateFormatter(t.value)),e(n,11,0,t.shouldFocus),e(n,13,0,t.isTimeZoneDifferent)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),l["\u0275nov"](n,5).required?"":null,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending)})}l["\u0275ccf"]("filter-date-time-value",Th,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-time-value",[],null,null,null,Dh,Oh)),l["\u0275did"](1,245760,null,0,Th,[B.a,qt],null,null)],function(e,n){e(n,1,0)},null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var Fh=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.I18n=n,l.timezoneService=t,l.shouldFocus=!1,l.filterChanged=new yh(Object(Ln.a)(l)),l.text={spacer:l.I18n.t("js.filter.value_spacer")},l}return r.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"begin",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.filter.values[1]},set:function(e){this.filter.values[1]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lowerBoundary",{get:function(){return this.begin&&this.timezoneService.isValidISODateTime(this.begin.toString())?this.timezoneService.parseDatetime(this.begin.toString()):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"upperBoundary",{get:function(){return this.end&&this.timezoneService.isValidISODateTime(this.end.toString())?this.timezoneService.parseDatetime(this.end.toString()):null},enumerable:!0,configurable:!0}),n}(xh),Ah=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Nh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","advanced-filters--tooltip-trigger -multiline"]],[[1,"data-tooltip",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-warning"]],null,null,null,Zt,Gt)),l["\u0275did"](2,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon icon-warning")},function(e,n){e(n,0,0,n.component.timeZoneText)})}function Mh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,22,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,10,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.begin=i.isoDateParser(t))&&l);return l},Wr,zr)),l["\u0275did"](2,245760,null,0,Br,[l.ElementRef,Ne,qt],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](3,0,null,0,8,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.begin=o.isoDateParser(t))&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](5,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](8,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](10,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](11,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](12,0,null,null,0,"span",[["class","advanced-filters--affix"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,7,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.end=i.isoDateParser(t))&&l);return l},Wr,zr)),l["\u0275did"](14,245760,null,0,Br,[l.ElementRef,Ne,qt],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](15,0,null,0,5,"input",[["class","advanced-filters--date-field"],["size","10"],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,16)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,16).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,16)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,16)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.end=o.isoDateParser(t))&&i);return i},null,null)),l["\u0275did"](16,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](18,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](20,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,Nh)),l["\u0275did"](22,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]-begin"),t.isoDateFormatter(t.begin)),e(n,11,0,t.shouldFocus),e(n,14,0),e(n,18,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]-end"),t.isoDateFormatter(t.end)),e(n,22,0,t.isTimeZoneDifferent)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,"-begin"),l["\u0275nov"](n,5).required?"":null,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending),e(n,12,0,t.text.spacer),e(n,15,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,"-end"),l["\u0275nov"](n,20).ngClassUntouched,l["\u0275nov"](n,20).ngClassTouched,l["\u0275nov"](n,20).ngClassPristine,l["\u0275nov"](n,20).ngClassDirty,l["\u0275nov"](n,20).ngClassValid,l["\u0275nov"](n,20).ngClassInvalid,l["\u0275nov"](n,20).ngClassPending)})}l["\u0275ccf"]("filter-date-times-value",Fh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-times-value",[],null,null,null,Mh,Ah)),l["\u0275did"](1,245760,null,0,Fh,[B.a,qt],null,null)],function(e,n){e(n,1,0)},null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var Vh=function(){function e(e){this.I18n=e,this.shouldFocus=!1,this.filterChanged=new yh(Object(Ln.a)(this)),this.text={enter_text:this.I18n.t("js.work_packages.description_enter_text")}}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e}(),qh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Lh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"input",[["class","advanced-filters--text-field"],["requried","true"],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](4,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](6,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](7,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](8,0,null,null,0,"label",[["class","hidden-for-sighted"]],[[8,"htmlFor",0],[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,4,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.name,"]"),t.value),e(n,7,0,t.shouldFocus)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.name,"")),e(n,1,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.name,""),l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending),e(n,8,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.name,""),t.text.enter_text)})}l["\u0275ccf"]("filter-string-value",Vh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-string-value",[],null,null,null,Lh,qh)),l["\u0275did"](1,180224,null,0,Vh,[B.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var $h=function(){function e(e){this.I18n=e,this.shouldFocus=!1,this.filterChanged=new l.EventEmitter,this.text={placeholder:this.I18n.t("js.placeholders.selection"),true:this.I18n.t("js.general_text_Yes"),false:this.I18n.t("js.general_text_No")}}return Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e,this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNoValue",{get:function(){return _.isEmpty(this.filter.values)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableOptions",{get:function(){return[!0,!1]},enumerable:!0,configurable:!0}),e}(),Hh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Bh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[2,Pt.p]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,"");e(n,2,0,"")},function(e,n){e(n,0,0,n.component.text.placeholder)})}function zh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[2,Pt.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.component.text[n.context.$implicit])})}function Wh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,10,"select",[["class","advanced-filters--select-field"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Pt.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.p]),l["\u0275did"](4,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](6,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](7,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Bh)),l["\u0275did"](9,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,zh)),l["\u0275did"](11,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.name,"]"),t.value),e(n,7,0,t.shouldFocus),e(n,9,0,t.hasNoValue),e(n,11,0,t.availableOptions)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.name,"")),e(n,1,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.name,""),l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending)})}l["\u0275ccf"]("filter-boolean-value",$h,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-boolean-value",[],null,null,null,Wh,Hh)),l["\u0275did"](1,49152,null,0,$h,[B.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var Qh=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(){return this.halResourceService.get(this.pathHelper.api.v3.root.toString()).toPromise()},e}(),Uh=function(){function e(e,n,t,i,o){this.RootDm=e,this.halResourceService=n,this.halSorting=t,this.PathHelper=i,this.I18n=o,this.shouldFocus=!1,this.filterChanged=new l.EventEmitter,this._availableOptions=[],this.compareByHrefOrString=Np.compareByHrefOrString,this.text={placeholder:this.I18n.t("js.placeholders.selection")}}return e.prototype.ngOnInit=function(){this.fetchAllowedValues()},e.prototype.ngAfterViewInit=function(){this.ngSelectInstance&&this.shouldFocus&&this.ngSelectInstance.focus()},Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values},set:function(e){this.filter.values=_.castArray(e),this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableOptions",{get:function(){return this._availableOptions},set:function(e){this._availableOptions=this.halSorting.sort(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._isEmpty=0===this.value.length},enumerable:!0,configurable:!0}),e.prototype.repositionDropdown=function(){var e=this;this.ngSelectInstance&&setTimeout(function(){return e.ngSelectInstance.updateDropdownPosition()},25)},Object.defineProperty(e.prototype,"isUserResource",{get:function(){var e=_.get(this.filter.currentSchema,"values.type",null);return e&&e.indexOf("User")>0},enumerable:!0,configurable:!0}),e.prototype.fetchAllowedValues=function(){this.filter.currentSchema.values.allowedValues.$load?this.loadAllowedValues():this.availableOptions=this.filter.currentSchema.values.allowedValues},e.prototype.loadAllowedValues=function(){var e=this,n=[this.filter.currentSchema.values.allowedValues.$load()];this.isUserResource&&n.push(this.RootDm.load()),Promise.all(n).then(function(n){var t=n[0].elements;e.availableOptions=t,e.isUserResource&&"memberOfGroup"!==e.filter.filter.id&&e.addMeValue(n[1].user)})},e.prototype.addMeValue=function(e){if(e&&e.$href){var n=this.halResourceService.createHalResource({_links:{self:{href:this.PathHelper.api.v3.users.me,title:this.I18n.t("js.label_me")}}},!0);this._availableOptions.unshift(n)}},e}(),Kh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Gh(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{ngSelectInstance:0}),(e()(),l["\u0275eld"](1,0,null,null,19,"div",[["class","inline-label ng-select-container"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,18,"ng-select",[["appendTo","body"],["bindLabel","name"],["class","advanced-filters--ng-select -multi-select ng-select"],["role","listbox"]],[[8,"id",0],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"add"],[null,"remove"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);"add"===n&&(i=!1!==o.repositionDropdown()&&i);"remove"===n&&(i=!1!==o.repositionDropdown()&&i);return i},Ct.b,Ct.a)),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](4,{"-required-highlighting":0}),l["\u0275did"](5,4964352,[[1,4],["ngSelectInstance",4]],11,jt.a,[[8,"advanced-filters--ng-select -multi-select"],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],bindLabel:[1,"bindLabel"],placeholder:[2,"placeholder"],appendTo:[3,"appendTo"],closeOnSelect:[4,"closeOnSelect"],hideSelected:[5,"hideSelected"],virtualScroll:[6,"virtualScroll"],multiple:[7,"multiple"],compareWith:[8,"compareWith"],clearSearchOnAdd:[9,"clearSearchOnAdd"]},{addEvent:"add",removeEvent:"remove"}),l["\u0275qud"](335544320,2,{optionTemplate:0}),l["\u0275qud"](335544320,3,{optgroupTemplate:0}),l["\u0275qud"](335544320,4,{labelTemplate:0}),l["\u0275qud"](335544320,5,{multiLabelTemplate:0}),l["\u0275qud"](335544320,6,{headerTemplate:0}),l["\u0275qud"](335544320,7,{footerTemplate:0}),l["\u0275qud"](335544320,8,{notFoundTemplate:0}),l["\u0275qud"](335544320,9,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,10,{loadingTextTemplate:0}),l["\u0275qud"](335544320,11,{tagTemplate:0}),l["\u0275qud"](603979776,12,{ngOptions:1}),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](18,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](20,16384,null,0,Pt.i,[[4,Pt.h]],null,null)],function(e,n){var t=n.component,l=e(n,4,0,t.isEmpty);e(n,3,0,"advanced-filters--ng-select -multi-select",l);e(n,5,0,t.availableOptions,"name",t.text.placeholder,"body",!1,!0,!0,!0,t.compareByHrefOrString,!0),e(n,18,0,t.value)},function(e,n){var t=n.component;e(n,1,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,2,1,["values-"+t.filter.id,!l["\u0275nov"](n,5).multiple,l["\u0275nov"](n,5).typeahead,l["\u0275nov"](n,5).multiple,l["\u0275nov"](n,5).addTag,l["\u0275nov"](n,5).searchable,l["\u0275nov"](n,5).isOpen,l["\u0275nov"](n,5).disabled,l["\u0275nov"](n,5).filtered,l["\u0275nov"](n,20).ngClassUntouched,l["\u0275nov"](n,20).ngClassTouched,l["\u0275nov"](n,20).ngClassPristine,l["\u0275nov"](n,20).ngClassDirty,l["\u0275nov"](n,20).ngClassValid,l["\u0275nov"](n,20).ngClassInvalid,l["\u0275nov"](n,20).ngClassPending])})}l["\u0275ccf"]("filter-toggled-multiselect-value",Uh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-toggled-multiselect-value",[],null,null,null,Gh,Kh)),l["\u0275did"](1,4308992,null,0,Uh,[Qh,Y,Iu,ve,B.a],null,null)],function(e,n){e(n,1,0)},null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var Yh=function(){function e(e,n,t,i){this.wpTableFilters=e,this.wpFiltersService=n,this.I18n=t,this.bannerService=i,this.shouldFocus=!1,this.filterChanged=new l.EventEmitter,this.deactivateFilter=new l.EventEmitter,this.showValuesInput=!1,this.eeShowBanners=!1,this.trackByHref=Np.halHref,this.compareByHref=Np.compareByHref,this.text={open_filter:this.I18n.t("js.filter.description.text_open_filter"),close_filter:this.I18n.t("js.filter.description.text_close_filter"),label_filter_add:this.I18n.t("js.work_packages.label_filter_add"),upsale_for_more:this.I18n.t("js.filter.upsale_for_more"),upsale_link:this.I18n.t("js.filter.upsale_link"),button_delete:this.I18n.t("js.button_delete")}}return e.prototype.onFilterUpdated=function(e){this.filter=e,this.showValuesInput=this.filter.currentSchema.isValueRequired(),this.filterChanged.emit(this.filter)},e.prototype.removeThisFilter=function(){this.deactivateFilter.emit(this.filter)},Object.defineProperty(e.prototype,"valueType",{get:function(){if(this.filter.currentSchema&&this.filter.currentSchema.values)return this.filter.currentSchema.values.type},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.eeShowBanners=this.bannerService.eeShowBanners,this.availableOperators=this.filter.schema.availableOperators,this.showValuesInput=this.filter.currentSchema.isValueRequired()},e.prototype.ngOnDestroy=function(){},e}(),Zh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Jh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[2,Pt.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function Xh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-integer-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Ch,kh)),l["\u0275did"](1,180224,null,0,wh,[B.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function ef(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},jh,Ph)),l["\u0275did"](1,180224,null,0,Ih,[qt,B.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function nf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-dates-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Sh,Rh)),l["\u0275did"](1,180224,null,0,_h,[qt,B.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function tf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-time-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Dh,Oh)),l["\u0275did"](1,245760,null,0,Th,[B.a,qt],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function lf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-times-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Mh,Ah)),l["\u0275did"](1,245760,null,0,Fh,[B.a,qt],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function of(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-string-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Lh,qh)),l["\u0275did"](1,180224,null,0,Vh,[B.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function rf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-string-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Lh,qh)),l["\u0275did"](1,180224,null,0,Vh,[B.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function uf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-boolean-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Wh,Hh)),l["\u0275did"](1,49152,null,0,$h,[B.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function af(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-toggled-multiselect-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Gh,Kh)),l["\u0275did"](1,4308992,null,0,Uh,[Qh,Y,Iu,ve,B.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function sf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,20,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,19,"div",[["class","advanced-filters--filter-value"]],null,null,null,null,null)),l["\u0275did"](2,16384,null,0,It.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Xh)),l["\u0275did"](4,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ef)),l["\u0275did"](6,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,nf)),l["\u0275did"](8,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,tf)),l["\u0275did"](10,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,lf)),l["\u0275did"](12,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,of)),l["\u0275did"](14,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,rf)),l["\u0275did"](16,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,uf)),l["\u0275did"](18,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,af)),l["\u0275did"](20,16384,null,0,It.NgSwitchDefault,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],null,null)],function(e,n){e(n,2,0,n.component.valueType);e(n,4,0,"[1]Integer");e(n,6,0,"[1]Date");e(n,8,0,"[2]Date");e(n,10,0,"[1]DateTime");e(n,12,0,"[2]DateTime");e(n,14,0,"[1]String");e(n,16,0,"[1]Float");e(n,18,0,"[1]Boolean")},null)}function cf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","advanced-filters--filter-value"]],null,null,null,null,null))],null,null)}function df(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,23,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"label",[["class","advanced-filters--filter-name"]],[[8,"htmlFor",0],[8,"textContent",0],[1,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,12,"div",[["class","advanced-filters--filter-operator"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"label",[["class","hidden-for-sighted"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["\u0275ted"](4,null,[" "," "," "])),(e()(),l["\u0275eld"](5,0,null,null,9,"select",[["class","advanced-filters--select"],["required",""],["style","vertical-align: top;"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,6).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,6).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.filter.operator=t)&&i);"ngModelChange"===n&&(i=!1!==o.onFilterUpdated(o.filter)&&i);return i},null,null)),l["\u0275did"](6,16384,null,0,Pt.p,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275did"](7,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.p]),l["\u0275did"](10,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](12,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,Jh)),l["\u0275did"](14,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,sf)),l["\u0275did"](16,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,cf)),l["\u0275did"](18,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](19,0,null,null,4,"div",[["class","advanced-filters--remove-filter"]],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,3,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.removeThisFilter()&&l);return l},al,ul)),l["\u0275did"](21,49152,null,0,rl,[],null,{execute:"execute"}),(e()(),l["\u0275eld"](22,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close advanced-filters--remove-filter-icon"]],null,null,null,Zt,Gt)),l["\u0275did"](23,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,6,0,t.compareByHref);e(n,7,0,""),e(n,10,0,l["\u0275inlineInterpolate"](1,"op[",t.filter.id,"]"),t.filter.operator),e(n,14,0,t.availableOperators),e(n,16,0,t.showValuesInput&&t.valueType),e(n,18,0,!t.showValuesInput);e(n,23,0,"icon-close advanced-filters--remove-filter-icon",t.text.button_delete)},function(e,n){var t=n.component;e(n,1,0,l["\u0275inlineInterpolate"](1,"operators-",t.filter.id,""),t.filter.name,t.filter.name),e(n,3,0,l["\u0275inlineInterpolate"](1,"operators-",t.filter.id,"")),e(n,4,0,t.filter.name,t.text.open_filter),e(n,5,0,l["\u0275inlineInterpolate"](1,"operators-",t.filter.id,""),l["\u0275nov"](n,7).required?"":null,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending)})}l["\u0275ccf"]("[query-filter]",Yh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["query-filter",""]],null,null,null,df,Zh)),l["\u0275did"](1,245760,null,0,Yh,[en,Ze,B.a,Ge],null,null)],function(e,n){e(n,1,0)},null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged",deactivateFilter:"deactivateFilter"},[]);var pf="https://www.openproject.org/enterprise-edition/?op_edtion=community-edition",hf=function(){function e(e){this.I18n=e,this.leftMargin=!1,this.text={enterpriseFeature:this.I18n.t("js.upsale.ee_only")}}return e.prototype.eeLink=function(){return this.opReferrer?pf+"&op_referrer="+this.opReferrer:pf},e}(),ff=[[".notification-box.-left-margin[_ngcontent-%COMP%]{margin-left:1.25rem}.notification-box[_ngcontent-%COMP%]   .notification-box--content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}"]],gf=l["\u0275crt"]({encapsulation:0,styles:ff,data:{}});function mf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","notification-box -ee-upsale"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-left-margin":0}),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"p",[["class","-bold"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"a",[["target","blank"]],[[8,"href",4],[8,"textContent",0]],null,null,null,null))],function(e,n){var t=e(n,2,0,n.component.leftMargin);e(n,1,0,"notification-box -ee-upsale",t)},function(e,n){var t=n.component;e(n,4,0,t.text.enterpriseFeature),e(n,5,0,t.textMessage),e(n,6,0,t.eeLink(),t.linkMessage)})}l["\u0275ccf"]("enterprise-banner",hf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"enterprise-banner",[],null,null,null,mf,gf)),l["\u0275did"](1,49152,null,0,hf,[B.a],null,null)],null,null)},{leftMargin:"leftMargin",textMessage:"textMessage",linkMessage:"linkMessage",opReferrer:"opReferrer"},{},[]);var vf=function(){function e(e,n,t,l){var i=this;this.I18n=e,this.querySpace=n,this.wpTableFilters=t,this.wpCacheService=l,this.filterChanged=new yh(Object(Ln.a)(this)),this.text={createWithDropdown:this.I18n.t("js.work_packages.create.button"),createButton:this.I18n.t("js.label_work_package"),explanation:this.I18n.t("js.label_create_work_package"),placeholder:this.I18n.t("js.work_packages.placeholder_filter_by_text")},this.searchTermChanged=new a.a,this.searchTermChanged.pipe(Object(Ln.b)(this),Object(Yu.a)(250),Object(Zu.a)()).subscribe(function(e){i.searchTerm=e;var n=i.wpTableFilters.current;if(_.remove(n,function(e){return"search"===e.id}),i.searchTerm.length>0){var t=i.wpTableFilters.instantiate("search");t.operator=t.findOperator("**"),t.values=[i.searchTerm],n.push(t)}i.filterChanged.emit(n)})}return e.prototype.ngOnInit=function(){var e=this;this.wpTableFilters.observeUntil(Object(Ln.a)(this)).subscribe(function(){var n=e.wpTableFilters.find("search");e.searchTerm=n?n.values[0]:""})},e.prototype.ngOnDestroy=function(){},e.prototype.valueChange=function(e){this.searchTermChanged.next(e)},e}(),bf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function yf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"input",[["id","filter-by-text-input"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==o.valueChange(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](3,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](5,16384,null,0,Pt.i,[[4,Pt.h]],null,null)],function(e,n){e(n,3,0,n.component.searchTerm)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.text.placeholder,""),l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending)})}l["\u0275ccf"]("wp-filter-by-text-input",vf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-filter-by-text-input",[],null,null,null,yf,bf)),l["\u0275did"](1,245760,null,0,vf,[B.a,y,en,yn],null,null)],function(e,n){e(n,1,0)},null)},{},{filterChanged:"filterChanged"},[]);var wf=function(){function e(e,n,t,l){this.wpTableFilters=e,this.wpFiltersService=n,this.I18n=t,this.bannerService=l,this.showCloseFilter=!1,this.filtersChanged=new yh(Object(Ln.a)(this)),this.remainingFilters=[],this.eeShowBanners=!1,this.focusElementIndex=0,this.compareByName=Np.trackByName,this.text={open_filter:this.I18n.t("js.filter.description.text_open_filter"),label_filter_add:this.I18n.t("js.work_packages.label_filter_add"),close_filter:this.I18n.t("js.filter.description.text_close_filter"),upsale_for_more:this.I18n.t("js.filter.upsale_for_more"),upsale_link:this.I18n.t("js.filter.upsale_link"),close_form:this.I18n.t("js.close_form_title"),selected_filter_list:this.I18n.t("js.label_selected_filter_list"),button_delete:this.I18n.t("js.button_delete"),please_select:this.I18n.t("js.placeholders.selection"),filter_by_text:this.I18n.t("js.work_packages.label_filter_by_text")}}return e.prototype.ngOnInit=function(){this.eeShowBanners=this.bannerService.eeShowBanners},e.prototype.ngOnDestroy=function(){},e.prototype.ngOnChanges=function(){this.updateRemainingFilters()},e.prototype.onFilterAdded=function(e){if(e){var n=this.wpTableFilters.instantiate(e);this.filters.push(n);var t=this.currentFilterLength();this.updateFilterFocus(t),this.updateRemainingFilters(),this.filtersChanged.emit(this.filters),this.ngSelectComponent.clearItem(e)}},e.prototype.closeFilter=function(){this.wpFiltersService.toggleVisibility()},e.prototype.isHiddenFilter=function(e){return _.includes(this.wpTableFilters.hidden,e.id)},e.prototype.deactivateFilter=function(e){var n=this.filters.indexOf(e);_.remove(this.filters,function(n){return n.id===e.id}),this.filtersChanged.emit(this.filters),this.updateFilterFocus(n),this.updateRemainingFilters()},Object.defineProperty(e.prototype,"isSecondSpacerVisible",{get:function(){var e=this,n=!!_.find(this.filters,function(e){return"search"===e.id}),t=!!_.find(this.filters,function(n){return"search"!==n.id&&e.isFilterAvailable(n.id)});return n&&t},enumerable:!0,configurable:!0}),e.prototype.updateRemainingFilters=function(){this.remainingFilters=_.sortBy(this.wpTableFilters.remainingVisibleFilters(this.filters),"name")},e.prototype.updateFilterFocus=function(e){var n=this.currentFilterLength();if(0===n)this.focusElementIndex=-1;else{var t=e<n?e:n-1,l=this.currentFilterAt(t);this.focusElementIndex=this.filters.indexOf(l)}},e.prototype.currentFilterLength=function(){return this.filters.length},e.prototype.currentFilterAt=function(e){return this.filters[e]},e.prototype.isFilterAvailable=function(e){return this.wpTableFilters.availableFilters.some(function(n){return n.id===e})},e}(),kf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Cf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"a",[["class","advanced-filters--close icon-context icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeFilter()&&l);return l},null,null))],null,function(e,n){e(n,0,0,n.component.text.close_form)})}function If(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[["class","advanced-filters--filter"],["query-filter",""]],[[8,"id",0],[8,"hidden",0]],[[null,"deactivateFilter"],[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"deactivateFilter"===n&&(l=!1!==i.deactivateFilter(t)&&l);"filterChanged"===n&&(l=!1!==i.filtersChanged.emit(i.filters)&&l);return l},df,Zh)),l["\u0275did"](1,245760,null,0,Yh,[en,Ze,B.a,Ge],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged",deactivateFilter:"deactivateFilter"})],function(e,n){var t=n.component;e(n,1,0,n.parent.context.index==t.focusElementIndex,n.parent.context.$implicit)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"filter_",n.parent.context.$implicit.id,""),t.isHiddenFilter(n.parent.context.$implicit))})}function Pf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,If)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,n.component.isFilterAvailable(n.context.$implicit.id))},null)}function jf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"li",[["class","advanced-filters--spacer"]],null,null,null,null,null))],null,null)}function _f(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"enterprise-banner",[["class","advanced-filters--add-filter-info"],["opReferrer","wp-filter#filters"]],null,null,null,mf,gf)),l["\u0275did"](1,49152,null,0,hf,[B.a],{textMessage:[0,"textMessage"],linkMessage:[1,"linkMessage"],opReferrer:[2,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.upsale_for_more,t.text.upsale_link,"wp-filter#filters")},null)}function Rf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,38,"fieldset",[["class","advanced-filters--container"],["id","filters"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Cf)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](4,0,null,null,34,"ul",[["class","advanced-filters--filters"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,4,"li",[["class","advanced-filters--filter --without-operator"],["id","filter_search"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"label",[["class","advanced-filters--filter-name"],["for","filter-by-text-input"]],[[8,"textContent",0],[1,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,2,"div",[["class","advanced-filters--filter-value"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"wp-filter-by-text-input",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.filtersChanged.emit(t)&&l);return l},yf,bf)),l["\u0275did"](9,245760,null,0,vf,[B.a,y,en,yn],null,{filterChanged:"filterChanged"}),(e()(),l["\u0275eld"](10,0,null,null,0,"li",[["class","advanced-filters--spacer"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Pf)),l["\u0275did"](12,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,jf)),l["\u0275did"](14,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](15,0,null,null,23,"li",[["class","advanced-filters--add-filter"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,3,"label",[["aria-hidden","true"],["class","advanced-filters--add-filter-label"],["for","add_filter_select"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon4"]],null,null,null,Zt,Gt)),l["\u0275did"](18,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](19,null,[" ",": "])),(e()(),l["\u0275eld"](20,0,null,null,1,"label",[["class","hidden-for-sighted"],["for","add_filter_select"]],null,null,null,null,null)),(e()(),l["\u0275ted"](21,null,[" "," "," "," "])),(e()(),l["\u0275eld"](22,0,null,null,14,"div",[["class","advanced-filters--add-filter-value"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,13,"ng-select",[["appendTo","body"],["bindLabel","name"],["class","ng-select"],["id","add_filter_select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null]],[[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,25).handleKeyDown(t)&&i);"change"===n&&(i=!1!==o.onFilterAdded(t)&&i);return i},Ct.b,Ct.a)),l["\u0275prd"](5120,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](25,4964352,[[1,4]],11,jt.a,[[8,null],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],bindLabel:[1,"bindLabel"],clearable:[2,"clearable"],placeholder:[3,"placeholder"],appendTo:[4,"appendTo"],closeOnSelect:[5,"closeOnSelect"],virtualScroll:[6,"virtualScroll"],clearOnBackspace:[7,"clearOnBackspace"],multiple:[8,"multiple"],clearSearchOnAdd:[9,"clearSearchOnAdd"]},{changeEvent:"change"}),l["\u0275qud"](335544320,2,{optionTemplate:0}),l["\u0275qud"](335544320,3,{optgroupTemplate:0}),l["\u0275qud"](335544320,4,{labelTemplate:0}),l["\u0275qud"](335544320,5,{multiLabelTemplate:0}),l["\u0275qud"](335544320,6,{headerTemplate:0}),l["\u0275qud"](335544320,7,{footerTemplate:0}),l["\u0275qud"](335544320,8,{notFoundTemplate:0}),l["\u0275qud"](335544320,9,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,10,{loadingTextTemplate:0}),l["\u0275qud"](335544320,11,{tagTemplate:0}),l["\u0275qud"](603979776,12,{ngOptions:1}),(e()(),l["\u0275and"](16777216,null,null,1,null,_f)),l["\u0275did"](38,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.showCloseFilter),e(n,9,0),e(n,12,0,t.filters,t.trackByName),e(n,14,0,t.isSecondSpacerVisible);e(n,18,0,"icon-add icon4");e(n,25,0,t.remainingFilters,"name",!0,t.text.please_select,"body",!0,!0,!0,!1,!0),e(n,38,0,t.eeShowBanners)},function(e,n){var t=n.component;e(n,1,0,t.text.selected_filter_list),e(n,6,0,t.text.filter_by_text,t.text.filter_by_text),e(n,19,0,t.text.label_filter_add),e(n,21,0,t.text.label_filter_add,t.text.open_filter,t.text.close_filter),e(n,23,0,!l["\u0275nov"](n,25).multiple,l["\u0275nov"](n,25).typeahead,l["\u0275nov"](n,25).multiple,l["\u0275nov"](n,25).addTag,l["\u0275nov"](n,25).searchable,l["\u0275nov"](n,25).isOpen,l["\u0275nov"](n,25).disabled,l["\u0275nov"](n,25).filtered)})}function Sf(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{ngSelectComponent:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Rf)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.filters)},null)}l["\u0275ccf"]("query-filters",wf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"query-filters",[],null,null,null,Sf,kf)),l["\u0275did"](1,770048,null,0,wf,[en,Ze,B.a,Ge],null,null)],function(e,n){e(n,1,0)},null)},{filters:"filters",showCloseFilter:"showCloseFilter"},{filtersChanged:"filtersChanged"},[]);var xf=function(){function e(e,n){var t=this;this.wpTableFilters=e,this.wpFiltersService=n,this.showFilterButton=!1,this.filterButtonText=I18n.t("js.button_filter"),this.filtersChanged=new yh(Object(Ln.a)(this)),this.filtersCompleted=new yh(Object(Ln.a)(this)),this.visible=!1,this.filters=this.wpTableFilters.current,this.loaded=!1,this.wpTableFilters.observeUntil(Object(Ln.a)(this)).subscribe(function(){t.filters=t.wpTableFilters.current,t.loaded=!0}),this.wpFiltersService.observeUntil(Object(Ln.a)(this)).subscribe(function(e){t.visible=e})}return e.prototype.ngOnDestroy=function(){},e.prototype.replaceIfComplete=function(e){var n=this.wpTableFilters.replaceIfComplete(e);this.filtersCompleted.emit(n),this.filtersChanged.emit(this.filters)},e}(),Tf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Of(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"button",[["class","button -small advanced-filters--toggle"]],[[2,"-active",null]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.wpFiltersService.toggleVisibility()&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","button--icon icon-filter"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.visible),e(n,2,0,t.filterButtonText)})}function Ef(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"query-filters",[],null,[[null,"filtersChanged"]],function(e,n,t){var l=!0,i=e.component;"filtersChanged"===n&&(l=!1!==i.replaceIfComplete(t)&&l);return l},Sf,kf)),l["\u0275did"](1,770048,null,0,wf,[en,Ze,B.a,Ge],{filters:[0,"filters"],showCloseFilter:[1,"showCloseFilter"]},{filtersChanged:"filtersChanged"})],function(e,n){e(n,1,0,n.component.filters,!0)},null)}function Df(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","hide-when-print"],["id","query_form_content"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ef)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,!!n.component.filters)},null)}function Ff(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Of)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","work-packages--filters-optional-container"]],null,null,null,null,null)),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](4,{"-loaded":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Df)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.showFilterButton);var l=e(n,4,0,t.loaded);e(n,3,0,"work-packages--filters-optional-container",l),e(n,6,0,t.visible)},null)}l["\u0275ccf"]("filter-container",xf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-container",[],null,null,null,Ff,Tf)),l["\u0275did"](1,180224,null,0,xf,[en,Ze],null,null)],null,null)},{showFilterButton:"showFilterButton",filterButtonText:"filterButtonText"},{filtersChanged:"filtersChanged",filtersCompleted:"filtersCompleted"},[]);var Af=function(){function e(e,n,t,l,i,o){this.wpTableHierarchies=e,this.wpTableSortBy=n,this.wpTableGroupBy=t,this.wpTableRelationColumns=l,this.elementRef=i,this.I18n=o,this.text={toggleHierarchy:this.I18n.t("js.work_packages.hierarchy.show"),openMenu:this.I18n.t("js.label_open_menu"),sortColumn:"Sorting column"}}return e.prototype.ngOnDestroy=function(){},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){return e.initialize()})},e.prototype.initialize=function(){var e=this;this.element=jQuery(this.elementRef.nativeElement),this.wpTableSortBy.onReadyWithAvailable().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(){var n=e.wpTableSortBy.current[0];n&&e.headerColumn.$href===n.column.$href?e.currentSortDirection=n.direction:e.currentSortDirection=null,e.setActiveColumnClass(),e.setFullTitleAndSummary(),e.sortable=e.wpTableSortBy.isSortable(e.headerColumn),e.directionClass=e.getDirectionClass()}),this.isHierarchyColumn="subject"===this.headerColumn.id,"sortHandle"===this.headerColumn.id&&(this.columnType="sort"),this.isHierarchyColumn?this.columnType="hierarchy":"toType"===this.wpTableRelationColumns.relationColumnType(this.headerColumn)?(this.columnType="relation",this.columnName=this.headerColumn.type.name):"ofType"===this.wpTableRelationColumns.relationColumnType(this.headerColumn)&&(this.columnType="relation",this.columnName=I18n.t("js.relation_labels."+this.headerColumn.relationType)),this.isHierarchyColumn&&(this.hierarchyIcon="icon-hierarchy",this.isHierarchyDisabled=this.wpTableGroupBy.isEnabled,this.wpTableGroupBy.observeUntil(Object(Ln.a)(this)).subscribe(function(){e.isHierarchyDisabled=e.wpTableGroupBy.isEnabled}),this.wpTableHierarchies.state.values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(){e.setHierarchyIcon()}),this.setHierarchyIcon())},Object.defineProperty(e.prototype,"displayDropdownIcon",{get:function(){return this.table&&this.table.configuration.columnMenuEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayHierarchyIcon",{get:function(){return this.table&&this.table.configuration.hierarchyToggleEnabled},enumerable:!0,configurable:!0}),e.prototype.toggleHierarchy=function(e){return this.wpTableHierarchies.toggleState(),this.setHierarchyIcon(),e.stopPropagation(),!1},e.prototype.setHierarchyIcon=function(){this.wpTableHierarchies.isEnabled?(this.text.toggleHierarchy=I18n.t("js.work_packages.hierarchy.hide"),this.hierarchyIcon="icon-hierarchy"):(this.text.toggleHierarchy=I18n.t("js.work_packages.hierarchy.show"),this.hierarchyIcon="icon-no-hierarchy")},e.prototype.setFullTitleAndSummary=function(){},e.prototype.getDirectionClass=function(){if(!this.currentSortDirection)return"";switch(this.currentSortDirection.$href){case Be:return"asc";case ze:return"desc";default:return""}},e.prototype.setActiveColumnClass=function(){this.element.toggleClass("active-column",!!this.currentSortDirection)},e}(),Nf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Mf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[["aria-hidden","true"],["class","hierarchy-header--icon"],["tabindex","-1"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleHierarchy(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](2,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,l["\u0275inlineInterpolate"](1,"icon ",t.hierarchyIcon,""))},function(e,n){e(n,0,0,n.component.text.toggleHierarchy)})}function Vf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["href","#"],["lang-attribute",""]],[[8,"lang",0],[8,"id",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pad"](2,2),(e()(),l["\u0275ted"](3,null,["",""]))],function(e,n){var t=n.component,l=e(n,2,0,t.directionClass&&"sort",t.directionClass);e(n,1,0,l)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.locale,""),l["\u0275inlineInterpolate"](1,"",t.headerColumn.id,"")),e(n,3,0,t.headerColumn.name)})}function qf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.headerColumn.name)})}function Lf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","dropdown-indicator icon-small icon-pulldown"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"dropdown-indicator icon-small icon-pulldown",l["\u0275inlineInterpolate"](1,"",t.text.openMenu,""))},null)}function $f(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"span",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Mf)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Vf)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,qf)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Lf)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.displayHierarchyIcon),e(n,4,0,t.sortable),e(n,6,0,!t.sortable),e(n,8,0,t.displayDropdownIcon)},null)}function Hf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","dropdown-indicator icon-small icon-pulldown"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"dropdown-indicator icon-small icon-pulldown",l["\u0275inlineInterpolate"](1,"",t.text.openMenu,""))},null)}function Bf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"span",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"a",[],[[1,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-relations relations-header--icon"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](4,null,[" "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,Hf)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,"icon-context icon-relations relations-header--icon"),e(n,6,0,t.displayDropdownIcon)},function(e,n){var t=n.component;e(n,1,0,t.headerColumn.name),e(n,4,0,t.columnName)})}function zf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","draggable-table--sort-header"]],[[1,"title",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.sortColumn)})}function Wf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["href","#"],["lang-attribute",""]],[[8,"lang",0],[8,"id",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pad"](2,2),(e()(),l["\u0275ted"](3,null,["",""]))],function(e,n){var t=n.component,l=e(n,2,0,t.directionClass&&"sort",t.directionClass);e(n,1,0,l)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.locale,""),l["\u0275inlineInterpolate"](1,"",t.headerColumn.id,"")),e(n,3,0,t.headerColumn.name)})}function Qf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.headerColumn.name)})}function Uf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","dropdown-indicator icon-small icon-pulldown"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"dropdown-indicator icon-small icon-pulldown",l["\u0275inlineInterpolate"](1,"",t.text.openMenu,""))},null)}function Kf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"span",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Wf)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Qf)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Uf)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.sortable),e(n,4,0,!t.sortable),e(n,6,0,t.displayDropdownIcon)},null)}function Gf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),l["\u0275did"](1,16384,null,0,It.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,$f)),l["\u0275did"](3,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Bf)),l["\u0275did"](5,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,zf)),l["\u0275did"](7,278528,null,0,It.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Kf)),l["\u0275did"](9,16384,null,0,It.NgSwitchDefault,[l.ViewContainerRef,l.TemplateRef,It.NgSwitch],null,null)],function(e,n){e(n,1,0,n.component.columnType);e(n,3,0,"hierarchy");e(n,5,0,"relation");e(n,7,0,"sort")},null)}l["\u0275ccf"]("sortHeader",Af,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"sortHeader",[],null,null,null,Gf,Nf)),l["\u0275did"](1,4374528,null,0,Af,[Qe,We,$e,In,l.ElementRef,B.a],null,null)],null,null)},{headerColumn:"headerColumn",locale:"locale",table:"table"},{},[]);var Yf=function(e){function n(n,t,l,i,o,r,u,a,s){var c=e.call(this,n,t)||this;return c.elementRef=n,c.opContextMenu=t,c.wpTableColumns=l,c.wpTableSortBy=i,c.wpTableGroupBy=o,c.wpTableHierarchies=r,c.opModalService=u,c.injector=a,c.I18n=s,c}return r.d(n,e),n.prototype.open=function(e){this.table.configuration.columnMenuEnabled&&(this.buildItems(),this.opContextMenu.show(this,e))},Object.defineProperty(n.prototype,"locals",{get:function(){return{showAnchorRight:this.column&&"id"!==this.column.id,contextMenuId:"column-context-menu",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(n){var t={of:this.$element.find(".generic-table--sort-header-outer")},l=e.prototype.positionArgs.call(this,n);return _.assign(l,t),l},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return this.$element.find("#"+this.column.id)},enumerable:!0,configurable:!0}),n.prototype.buildItems=function(){var e=this,n=this.column;this.items=[{hidden:!this.wpTableSortBy.isSortable(n),linkText:this.I18n.t("js.work_packages.query.sort_descending"),icon:"icon-sort-descending",onClick:function(){return e.wpTableSortBy.addDescending(n),!0}},{hidden:!this.wpTableSortBy.isSortable(n),linkText:this.I18n.t("js.work_packages.query.sort_ascending"),icon:"icon-sort-ascending",onClick:function(){return e.wpTableSortBy.addAscending(n),!0}},{hidden:!this.wpTableGroupBy.isGroupable(n)||this.wpTableGroupBy.isCurrentlyGroupedBy(n),linkText:this.I18n.t("js.work_packages.query.group"),icon:"icon-group-by",onClick:function(){return e.wpTableGroupBy.setBy(n),!0}},{hidden:this.wpTableColumns.isFirst(n),linkText:this.I18n.t("js.work_packages.query.move_column_left"),icon:"icon-column-left",onClick:function(){return e.wpTableColumns.shift(n,-1),!0}},{hidden:this.wpTableColumns.isLast(n),linkText:this.I18n.t("js.work_packages.query.move_column_right"),icon:"icon-column-right",onClick:function(){return e.wpTableColumns.shift(n,1),!0}},{linkText:this.I18n.t("js.work_packages.query.hide_column"),icon:"icon-delete",onClick:function(){var t=e.wpTableColumns.previous(n)||e.wpTableColumns.next(n);return e.wpTableColumns.removeColumn(n),setTimeout(function(){t&&jQuery("#"+t.id).focus()}),!0}},{linkText:this.I18n.t("js.work_packages.query.insert_columns"),icon:"icon-columns",onClick:function(){return e.opModalService.show(Nn,e.injector,{initialTab:"columns"}),!0}}]},n}(ps),Zf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Jf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"a",[["aria-haspopup","true"],["class","wp-inline-create--add-link"],["href",""],["role","link"]],[[1,"disabled",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleAddRowClick()&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"wp-inline-create--split-link":0}),l["\u0275did"](3,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),l["\u0275did"](4,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-add"]],null,null,null,Zt,Gt)),l["\u0275did"](6,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component,l=e(n,2,0,t.hasReferenceClass);e(n,1,0,"wp-inline-create--add-link",l),e(n,4,0,t.focus);e(n,6,0,"icon icon-add")},function(e,n){var t=n.component;e(n,0,0,!t.isAllowed||void 0,t.text.create),e(n,7,0,t.text.create)})}function Xf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"a",[["aria-haspopup","true"],["class","wp-inline-create--reference-link wp-inline-create--split-link"],["href",""],["role","link"]],[[1,"disabled",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleReferenceClick()&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-link"]],null,null,null,Zt,Gt)),l["\u0275did"](4,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,4,0,"icon icon-link")},function(e,n){var t=n.component;e(n,1,0,!t.isAllowed||void 0,t.text.create),e(n,5,0,t.text.reference)})}function eg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"tr",[["class","wp-inline-create-button-row hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"td",[["class","wp-inline-create-button-td -no-highlighting"]],[[1,"colspan",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","wp-inline-create-button"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Jf)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Xf)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.canAdd),e(n,6,0,t.canReference)},function(e,n){e(n,1,0,n.component.colspan)})}function ng(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function tg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"tr",[["class","wp-inline-create-button-row hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"td",[["class","wp-inline-reference-row-td -no-highlighting"]],[[1,"colspan",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,2,null,ng)),l["\u0275did"](3,671744,null,0,It.NgComponentOutlet,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null),l["\u0275did"](4,16384,null,0,tr.g,[It.NgComponentOutlet],null,null)],function(e,n){var t=n.component;e(n,3,0,t.referenceClass,t.injector)},function(e,n){e(n,1,0,n.component.colspan)})}function lg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,eg)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,tg)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,"inactive"===t.mode),e(n,4,0,t.hasReferenceClass&&"reference"===t.mode)},null)}function ig(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,lg)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.canAdd||t.canReference)},null)}l["\u0275ccf"]("[wpInlineCreate]",ad,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["wpInlineCreate",""]],null,[[null,"keydown.escape"]],function(e,n,t){var i=!0;return"keydown.escape"===n&&(i=!1!==l["\u0275nov"](e,1).resetRow()&&i),i},ig,Zf)),l["\u0275did"](1,770048,null,0,ad,[l.Injector,l.ElementRef,f.a,B.a,y,Hn,ur,wc,qe,Pa,Dn],null,null)],function(e,n){e(n,1,0)},null)},{table:"wp-inline-create--table",projectIdentifier:"wp-inline-create--project-identifier"},{},[]);var og=function(){function e(e,n,t,l,i,o){this.injector=e,this.elementRef=n,this.querySpace=t,this.states=l,this.displayFieldService=i,this.I18n=o,this.text={sumFor:o.t("js.label_sum_for"),allWorkPackages:o.t("js.label_all_work_packages")}}return e.prototype.ngAfterViewInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),Object(u.c)(this.querySpace.columns,this.querySpace.results,this.querySpace.sum).values$().pipe(Object(D.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(n){var t=n[0],l=n[1];n[2]&&l.sumsSchema?l.sumsSchema.$load().then(function(n){e.refresh(t,l,n)}):e.clear()})},e.prototype.clear=function(){this.$element.empty()},e.prototype.refresh=function(e,n,t){this.clear(),this.render(e,n,t)},e.prototype.render=function(e,n,t){var l=this;this.elementRef.nativeElement.classList.add("sum","group","all","issue","work_package"),e.forEach(function(e,i){var o=document.createElement("td"),r=l.renderContent(n.totalSums,e.id,t[e.id]);0===i&&l.appendFirstLabel(r),o.appendChild(r),l.$element.append(o)}),this.$element.append('<td><div class="generic-table--footer-outer"></div></td>')},e.prototype.renderContent=function(e,n,t){var l=document.createElement("div");if(!t)return l;var i=this.displayFieldService.getField(e,n,t,{injector:this.injector,container:"table",options:{}});return i.isEmpty()||i.render(l,i.valueString),l},e.prototype.appendFirstLabel=function(e){var n=document.createElement("span");n.textContent=this.text.sumFor+" "+this.text.allWorkPackages,jQuery(e).prepend(n)},e}();function rg(e,n,t,l,i,o,r,u,a,c,d,p){var h,f,g=e.get(y),m=null;p.changeset=new sr(e,p.workPackage);var v=jQuery("body");function b(e,n){var l=t.getAbsoluteLeftCoordinates(),i=n.clientX-l;return Math.floor(i/e.viewParams.pixelPerDay)}function w(e){return function(n){var t=b(p,n)-m,l=Math.floor(n.offsetX/p.viewParams.pixelPerDay),i=p.viewParams.dateDisplayStart.clone().add(l,"days");h=d.onDaysMoved(p.changeset,i,t,e),function(e,n){d.assignDateValues(e.changeset,c,n)}(p,h),d.update(a,c,p)}}function k(e){e.keyCode===il.a.ESCAPE&&P(!0)}function I(e){var n=p.workPackage;d.isEmpty(n)&&(n.isLeaf&&d.canMoveDates(n)?(u.style.cursor="",f&&f.remove(),f=d.displayPlaceholderUnderCursor(e,p),u.appendChild(f),u.onmouseleave=function(){f.remove()},u.onmousedown=function(e){f.remove(),a.style.pointerEvents="none",e.preventDefault();var n=Math.floor(e.offsetX/p.viewParams.pixelPerDay),t=p.viewParams.dateDisplayStart.clone().add(n,"days").format("YYYY-MM-DD"),l=d.onMouseDown(e,t,p,c,a);if(d.update(a,c,p),"create"===l)return P(!1),void e.preventDefault();u.onmousemove=function(e){var t=Math.floor(e.offsetX/p.viewParams.pixelPerDay),i=p.viewParams.dateDisplayStart.clone().add(t,"days"),o=t-n,r=d.onDaysMoved(p.changeset,i,o,l);d.assignDateValues(p.changeset,c,r),d.update(a,c,p)},u.onmouseleave=function(){P(!0)},u.onmouseup=function(){P(!1)},v.on("keyup.timelinecell",k)}):u.style.cursor="not-allowed")}function P(n){if(t.disableViewParamsCalculation=!1,u.onmousemove=I,u.onmousedown=_.noop,u.onmouseleave=_.noop,u.onmouseup=_.noop,a.style.pointerEvents="auto",v.off(".timelinecell"),t.resetCursor(),m=null,h={},n||p.changeset.empty)p.changeset.clear(),d.update(a,c,p),d.onMouseDownEnd(c,p.changeset),t.refreshView();else{var f=function(){p.changeset.clear(),d.onMouseDownEnd(c,p.changeset),t.refreshView()};(b=p.changeset,y=e.get(Ae),e.get(s),w=C().toISOString(),r.table.promise=b.save().then(function(e){o.showSave(e);var n=_.map(g.rendered.value,function(e){return e.workPackageId});r.table.promise=y.loadIdsUpdatedSince(n,w).then(function(n){l.updateWorkPackageList(n.elements),i.request("Moved work package "+e.id+" through timeline")})}).catch(function(e){o.handleRawError(e,p.workPackage)})).then(f).catch(f)}var b,y,w}a.onmousedown=function(e){1===e.which&&function(e,n){n.preventDefault();if(e.classList.add("active-drag"),v.on("mouseup.timelinecell",function(){return e.classList.remove("active-drag")}),t.disableViewParamsCalculation=!0,m=b(p,n),!p.workPackage.isLeaf&&!p.viewParams.activeSelectionMode)return;var l=d.onMouseDown(n,null,p,c,e);v.on("mousemove.timelinecell",w(l)),v.on("keyup.timelinecell",k),v.on("mouseup.timelinecell",function(){return P(!1)})}(a,e)},u.onmousemove=I}var ug,ag=function(){return function(e,n,t,l,i,o){this.center=e,this.left=n,this.leftHover=t,this.right=l,this.rightHover=i,this.farRight=o}}(),sg=function(){function e(e,n,t,l,i,o){this.injector=e,this.workPackageTimeline=n,this.renderers=t,this.latestRenderInfo=l,this.classIdentifier=i,this.workPackageId=o,this.wpCacheService=this.injector.get(yn),this.wpTableRefresh=this.injector.get(zn),this.wpNotificationsService=this.injector.get(On),this.states=this.injector.get(s),this.loadingIndicator=this.injector.get(Sn),this.wpElement=null}return e.prototype.getMarginLeftOfLeftSide=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getMarginLeftOfLeftSide(this.latestRenderInfo)},e.prototype.getMarginLeftOfRightSide=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getMarginLeftOfRightSide(this.latestRenderInfo)},e.prototype.getPaddingLeftForIncomingRelationLines=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getPaddingLeftForIncomingRelationLines(this.latestRenderInfo)},e.prototype.getPaddingRightForOutgoingRelationLines=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getPaddingRightForOutgoingRelationLines(this.latestRenderInfo)},e.prototype.canConnectRelations=function(){var e=this.latestRenderInfo.workPackage;return e.isMilestone?!_.isNil(e.date):!_.isNil(e.startDate)||!_.isNil(e.dueDate)},e.prototype.clear=function(){this.cellElement.html(""),this.wpElement=null},Object.defineProperty(e.prototype,"cellContainer",{get:function(){return this.workPackageTimeline.timelineBody},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellElement",{get:function(){return this.cellContainer.find("."+this.classIdentifier)},enumerable:!0,configurable:!0}),e.prototype.lazyInit=function(e,n){var t=this.workPackageTimeline.timelineBody[0],l=this.cellElement;l.length&&(null!==this.wpElement&&t.contains(this.wpElement)&&this.elementShape===e.type||(this.clear(),this.wpElement=e.render(n),this.labels=e.createAndAddLabels(n,this.wpElement),this.elementShape=e.type,l.append(this.wpElement),e.canMoveDates(n.workPackage)&&(this.wpElement.classList.add("-editable"),rg(this.injector,0,this.workPackageTimeline,this.wpCacheService,this.wpTableRefresh,this.wpNotificationsService,this.loadingIndicator,l[0],this.wpElement,this.labels,e,n))))},e.prototype.cellRenderer=function(e){return e.isMilestone?this.renderers.milestone:this.renderers.generic},e.prototype.refreshView=function(e){this.latestRenderInfo=e;var n=this.cellRenderer(e.workPackage);this.lazyInit(n,e),n.update(this.wpElement,this.labels,e)||this.clear()},e}(),cg=function(){function e(e,n){this.injector=e,this.workPackageTimeline=n,this.TimezoneService=this.injector.get(qt),this.wpTableTimeline=this.injector.get(M),this.fieldRenderer=new Wa(this.injector,"timeline"),this.dateDisplaysOnMouseMove={}}return Object.defineProperty(e.prototype,"type",{get:function(){return"bar"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fallbackColor",{get:function(){return"rgba(50, 50, 50, 0.1)"},enumerable:!0,configurable:!0}),e.prototype.canMoveDates=function(e){return e.schema.startDate.writable&&e.schema.dueDate.writable&&e.isAttributeEditable("startDate")},e.prototype.isEmpty=function(e){var n=C(e.startDate),t=C(e.dueDate);return _.isNaN(n.valueOf())&&_.isNaN(t.valueOf())},e.prototype.displayPlaceholderUnderCursor=function(e,n){var t=Math.floor(e.offsetX/n.viewParams.pixelPerDay),l=document.createElement("div");return l.style.pointerEvents="none",l.style.position="absolute",l.style.height="1em",l.style.width="30px",l.style.zIndex="9999",l.style.left=t*n.viewParams.pixelPerDay+"px",this.applyTypeColor(n,l),l},e.prototype.assignDateValues=function(e,n,t){this.assignDate(e,"startDate",t.startDate),this.assignDate(e,"dueDate",t.dueDate),this.updateLabels(!0,n,e)},e.prototype.onDaysMoved=function(e,n,t,l){var i=e.workPackage.startDate,o=e.workPackage.dueDate,r=C().format("YYYY-MM-DD"),u=C(e.value("startDate")),a=C(e.value("dueDate")),s={};return"left"===l?s.startDate=C(i||o).add(t,"days"):"right"===l?s.dueDate=C(o||r).add(t,"days"):"both"===l?(i&&(s.startDate=C(i).add(t,"days")),o&&(s.dueDate=C(o).add(t,"days"))):"dragright"===l&&(s.dueDate=u.clone().add(t,"days")),"both"!==l&&(void 0!==s.startDate&&s.startDate.isAfter(a)?s.startDate=a:void 0!==s.dueDate&&s.dueDate.isBefore(u)&&(s.dueDate=u)),s},e.prototype.onMouseDown=function(e,n,t,l,i){if(t.viewParams.activeSelectionMode)return t.viewParams.activeSelectionMode(t.workPackage),e.preventDefault(),"both";var o,r=t.changeset;return jQuery(e.target).hasClass("leftHandle")?(o="left",this.workPackageTimeline.forceCursor("col-resize"),null===r.value("startDate")&&r.setValue("startDate",r.value("dueDate"))):jQuery(e.target).hasClass("rightHandle")||n?(o="right",this.workPackageTimeline.forceCursor("col-resize")):(o="both",this.workPackageTimeline.forceCursor("ew-resize")),n&&(r.setValue("startDate",n),r.setValue("dueDate",n),o="dragright"),this.updateLabels(!0,l,t.changeset),o},e.prototype.onMouseDownEnd=function(e,n){this.updateLabels(!1,e,n)},e.prototype.update=function(e,n,t){var l=t.changeset,i=e.querySelector(".timeline-element--bg"),o=t.viewParams,r=C(l.value("startDate")),u=C(l.value("dueDate"));_.isNaN(r.valueOf())&&_.isNaN(u.valueOf())?e.style.visibility="hidden":e.style.visibility="visible",_.isNaN(u.valueOf())&&!_.isNaN(r.valueOf())&&(u=C(),i.style.backgroundImage="linear-gradient(90deg, rgba(255,255,255,0) 0%, #F1F1F1 100%)"),_.isNaN(r.valueOf())&&!_.isNaN(u.valueOf())&&(r=u.clone(),i.style.backgroundImage="linear-gradient(90deg, #F1F1F1 0%, rgba(255,255,255,0) 80%)");var a=r.diff(o.dateDisplayStart,"days");e.style.left=T(o,a);var s=u.diff(r,"days")+1;if(e.style.width=T(o,s),!_.isNaN(r.valueOf())||!_.isNaN(u.valueOf())){var c=_.max([t.viewParams.pixelPerDay,2]);e.style.minWidth=c+"px"}return n&&this.updateLabels(!1,n,l),this.checkForActiveSelectionMode(t,i),this.checkForSpecialDisplaySituations(t,i),this.applyTypeColor(t,i),!0},e.prototype.checkForActiveSelectionMode=function(e,n){e.viewParams.activeSelectionMode&&(n.style.backgroundImage=null,e.viewParams.selectionModeStart===""+e.workPackage.id&&(jQuery(n).addClass("selection-start"),n.style.background=null))},e.prototype.getMarginLeftOfLeftSide=function(e){var n=e.changeset,t=C(n.value("startDate")),l=C(n.value("dueDate")),i=(t=_.isNaN(t.valueOf())?l.clone():t).diff(e.viewParams.dateDisplayStart,"days");return x(e.viewParams,i)},e.prototype.getMarginLeftOfRightSide=function(e){var n=e.changeset,t=C(n.value("startDate")),l=C(n.value("dueDate"));t=_.isNaN(t.valueOf())?l.clone():t,l=_.isNaN(l.valueOf())?t.clone():l;var i=t.diff(e.viewParams.dateDisplayStart,"days"),o=l.diff(t,"days")+1;return x(e.viewParams,i+o)},e.prototype.getPaddingLeftForIncomingRelationLines=function(e){return e.viewParams.pixelPerDay/8},e.prototype.getPaddingRightForOutgoingRelationLines=function(e){return 0},e.prototype.render=function(e){var n=document.createElement("div"),t=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div");return n.className=I+" "+this.type,t.className="timeline-element--bg",l.className="leftHandle",i.className="rightHandle",n.appendChild(t),n.appendChild(l),n.appendChild(i),n},e.prototype.createAndAddLabels=function(e,n){var t=document.createElement("div");t.classList.add("bar-label"),this.applyTypeColor(e,t),n.appendChild(t);var l=document.createElement("div");l.classList.add("labelLeft","hide-on-hover"),n.appendChild(l);var i=document.createElement("div");i.classList.add("containerRight"),n.appendChild(i);var o=document.createElement("div");o.classList.add("labelRight","hide-on-hover"),i.appendChild(o);var r=document.createElement("div");r.classList.add("labelFarRight","hide-on-hover"),i.appendChild(r);var u=document.createElement("div");u.classList.add("labelHoverLeft","show-on-hover","-label-style"),n.appendChild(u);var a=document.createElement("div");a.classList.add("labelHoverRight","show-on-hover","-label-style"),n.appendChild(a);var s=new ag(t,l,u,o,a,r);return this.updateLabels(!1,s,e.changeset),s},e.prototype.applyTypeColor=function(e,n){var t=e.workPackage,l=t.type,i=e.viewParams.activeSelectionMode;n.style.backgroundColor=l||i?"":this.fallbackColor;var o=l.id;i||this.is_parent_with_displayed_children(t)?n.classList.remove(Ol.backgroundClass("type",o)):n.classList.add(Ol.backgroundClass("type",o))},e.prototype.assignDate=function(e,n,t){t&&e.setValue(n,t.format("YYYY-MM-DD"))},e.prototype.checkForSpecialDisplaySituations=function(e,n){var t=e.workPackage,l=e.viewParams.activeSelectionMode;t.isLeaf||l?n.classList.remove("-readonly"):n.classList.add("-readonly"),this.is_parent_with_displayed_children(t)&&(n.classList.add("-clamp-style"),n.style.borderStyle="solid",n.style.borderWidth="2px",n.style.borderBottom="none",n.style.background="none")},e.prototype.updateLabels=function(e,n,t){var l=this.wpTableTimeline.getNormalizedLabels(t.workPackage);e||(this.renderLabel(t,n,"left",l.left),this.renderLabel(t,n,"right",l.right),this.renderLabel(t,n,"farRight",l.farRight)),this.renderHoverLabels(n,t)},e.prototype.renderHoverLabels=function(e,n){this.renderLabel(n,e,"leftHover","startDate"),this.renderLabel(n,e,"rightHover","dueDate")},e.prototype.renderLabel=function(e,n,t,l){var i=n[t];if(i)if(i.innerHTML="",null!==l){var o=this.fieldRenderer.renderFieldValue(e.workPackage,l,e),r=o[0],u=o[1];i&&r&&u?(u.classList.add("label-content"),i.appendChild(u),i.classList.add("not-empty")):i&&i.classList.remove("not-empty")}else i.classList.remove("not-empty")},e.prototype.is_parent_with_displayed_children=function(e){return this.workPackageTimeline.inHierarchyMode&&Jc(e,this.workPackageTimeline.workPackageTable)},e}(),dg=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"type",{get:function(){return"milestone"},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(e){var n=C(e.date);return _.isNaN(n.valueOf())},n.prototype.canMoveDates=function(e){return e.schema.date.writable&&e.isAttributeEditable("date")},n.prototype.displayPlaceholderUnderCursor=function(e,n){var t=Math.floor(e.offsetX/n.viewParams.pixelPerDay),l=document.createElement("div");l.className="timeline-element milestone",l.style.pointerEvents="none",l.style.height="1em",l.style.width="1em",l.style.left=t*n.viewParams.pixelPerDay+"px";var i=document.createElement("div");return i.className="diamond",i.style.left="0.5em",i.style.height="1em",i.style.width="1em",l.appendChild(i),this.applyTypeColor(n,i),l},n.prototype.assignDateValues=function(e,n,t){this.assignDate(e,"date",t.date),this.updateLabels(!0,n,e)},n.prototype.onDaysMoved=function(e,n,t,l){var i=e.workPackage.date,o={};return i&&(o.date=C(i).add(t,"days")),o},n.prototype.onMouseDown=function(e,n,t,l,i){if(t.viewParams.activeSelectionMode)return t.viewParams.activeSelectionMode(t.workPackage),e.preventDefault(),"both";var o="both";return this.workPackageTimeline.forceCursor("ew-resize"),n?(t.changeset.setValue("date",n),o="create"):(this.updateLabels(!0,l,t.changeset),o)},n.prototype.update=function(e,n,t){var l=t.viewParams,i=C(t.changeset.value("date"));if(_.isNaN(i.valueOf()))return!1;var o=jQuery(".diamond",e)[0];o.style.width="15px",o.style.height="15px",o.style.width="15px",o.style.height="15px",o.style.marginLeft=t.viewParams.pixelPerDay/2-7.5+"px",this.applyTypeColor(t,o);var r=i.diff(l.dateDisplayStart,"days");return e.style.left=x(l,r)+"px",n&&this.updateLabels(!1,n,t.changeset),this.checkForActiveSelectionMode(t,o),!0},n.prototype.getMarginLeftOfLeftSide=function(e){var n=e.changeset,t=C(n.value("date")).diff(e.viewParams.dateDisplayStart,"days");return x(e.viewParams,t)},n.prototype.getMarginLeftOfRightSide=function(e){return this.getMarginLeftOfLeftSide(e)+e.viewParams.pixelPerDay},n.prototype.getPaddingLeftForIncomingRelationLines=function(e){return e.viewParams.pixelPerDay/2-1},n.prototype.getPaddingRightForOutgoingRelationLines=function(e){return 7.5},n.prototype.render=function(e){var n=document.createElement("div");n.className=I+" "+this.type;var t=document.createElement("div");return t.className="diamond",n.appendChild(t),n},n.prototype.createAndAddLabels=function(e,n){var t=document.createElement("div");t.classList.add("labelLeft","hide-on-hover"),n.appendChild(t);var l=document.createElement("div");l.classList.add("containerRight"),n.appendChild(l);var i=document.createElement("div");i.classList.add("labelRight","hide-on-hover"),l.appendChild(i);var o=document.createElement("div");o.classList.add("labelFarRight","hide-on-hover"),l.appendChild(o);var r=document.createElement("div");r.classList.add("labelHoverRight","show-on-hover","-label-style"),n.appendChild(r);var u=new ag(null,t,null,i,r,o);return this.updateLabels(!1,u,e.changeset),u},n.prototype.renderHoverLabels=function(e,n){this.renderLabel(n,e,"rightHover","date")},n.prototype.updateLabels=function(e,n,t){var l=this.wpTableTimeline.getNormalizedLabels(t.workPackage);e||("startDate"===l.left&&"dueDate"===l.right?(this.renderLabel(t,n,"left",null),this.renderLabel(t,n,"right","date")):(this.renderLabel(t,n,"left",l.left),this.renderLabel(t,n,"right",l.right)),this.renderLabel(t,n,"farRight",l.farRight)),this.renderHoverLabels(n,t)},n.prototype.renderLabel=function(n,t,l,i){"startDate"!==i&&"dueDate"!==i||(i="date"),e.prototype.renderLabel.call(this,n,t,l,i)},n}(cg),pg=function(){function e(e,n){this.injector=e,this.wpTimeline=n,this.states=this.injector.get(s),this.cells={},this.cellRenderers={milestone:new dg(this.injector,n),generic:new cg(this.injector,n)}}return e.prototype.hasCell=function(e){return this.getCellsFor(e).length>0},e.prototype.getCellsFor=function(e){return _.filter(this.cells,function(n){return n.workPackageId===e})||[]},e.prototype.refreshAllCells=function(){var e=this;this.synchronizeCells(),_.each(this.cells,function(n){return e.refreshSingleCell(n)})},e.prototype.refreshCellsFor=function(e){var n=this;_.each(this.getCellsFor(e),function(e){return n.refreshSingleCell(e)})},e.prototype.refreshSingleCell=function(e){var n=this.renderInfoFor(e.workPackageId);n.workPackage&&e.refreshView(n)},e.prototype.synchronizeCells=function(){var e=this,n=Object.keys(this.cells),t=[];_.each(this.wpTimeline.workPackageIdOrder,function(n){var l=n.workPackageId;if(l&&!e.states.workPackages.get(l).isPristine()){var i=n.classIdentifier;e.cells[i]||(e.cells[i]=e.buildCell(i,l.toString())),t.push(i)}}),_.difference(n,t).forEach(function(n){e.cells[n].clear(),delete e.cells[n]})},e.prototype.buildCell=function(e,n){return new sg(this.injector,this.wpTimeline,this.cellRenderers,this.renderInfoFor(n),e,n)},e.prototype.renderInfoFor=function(e){var n=this.states.workPackages.get(e).value;return{viewParams:this.wpTimeline.viewParameters,workPackage:n,changeset:new sr(this.injector,n)}},e}(),hg=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.states=l.injector.get(s),l.wpEditing=l.injector.get(ar),l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.cell, keydown.table.cell"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--cell-span.-editable"},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.container)},n.prototype.processEvent=function(e,n){Object(mn.a)("Starting editing on cell: ",n.target),n.preventDefault();var t=jQuery(n.target).closest(".wp-table--cell-span"),l=t.data("fieldName");if(!l)return Object(mn.a)("Click handled by cell not a field? ",n.target),!0;var i=t.closest(".wp-table--row"),o=i.data("workPackageId"),r=this.states.workPackages.get(o).value,u=i.data("classIdentifier"),a=e.editing.startEditing(r,u),s=Ca.getPosition(n);return a.activate(l).then(function(e){e.$onUserActivate.next(),e.focus(s)}).catch(function(){return t.addClass("-read-only")}),!1},n}(Cc),fg=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.wpTableRelationColumns=l.injector.get(In),l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.relationsCell, keydown.table.relationsCell"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--relation-indicator"},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.container)},n.prototype.processEvent=function(e,n){Object(mn.a)("Handled click on relation cell %o",n.target),n.preventDefault();var t=jQuery(n.target).closest(".wp-table--relation-cell-td").data("columnId"),l=jQuery(n.target).closest(".wp-table--row").data("workPackageId");return this.wpTableRelationColumns.getExpandFor(l)===t?this.wpTableRelationColumns.collapse(l):this.wpTableRelationColumns.setExpandFor(l,t),!1},n}(Cc),gg=function(e){function n(n,t,l,i,o){void 0===o&&(o={});var r=e.call(this,n.get(Qa))||this;return r.injector=n,r.table=t,r.workPackageId=l,r.$element=i,r.additionalPositionArgs=o,r.states=r.injector.get(s),r.wpRelationsHierarchyService=r.injector.get(ia),r.opModalService=r.injector.get(Mn.b),r.$state=r.injector.get(h.G),r.wpTableSelection=r.injector.get(Ia),r.WorkPackageContextMenuHelper=r.injector.get(yc),r.workPackage=r.states.workPackages.get(r.workPackageId).value,r.selectedWorkPackages=r.getSelectedWorkPackages(),r.permittedActions=r.WorkPackageContextMenuHelper.getPermittedActions(r.selectedWorkPackages,hs),r.items=r.buildItems(),r}return r.d(n,e),Object.defineProperty(n.prototype,"locals",{get:function(){return{contextMenuId:"work-package-context-menu",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,this.additionalPositionArgs),t},n.prototype.triggerContextMenuAction=function(e){var n=e.link;switch(e.key){case"delete":this.deleteSelectedWorkPackages();break;case"edit":this.editSelectedWorkPackages(n);break;case"copy":this.copySelectedWorkPackages(n);break;case"relation-precedes":this.table.timelineController.startAddRelationPredecessor(this.workPackage);break;case"relation-follows":this.table.timelineController.startAddRelationFollower(this.workPackage);break;case"relation-new-child":this.wpRelationsHierarchyService.addNewChildWp(this.workPackage);break;default:window.location.href=n}},n.prototype.deleteSelectedWorkPackages=function(){var e=this.getSelectedWorkPackages();this.opModalService.show(cs,this.injector,{workPackages:e})},n.prototype.editSelectedWorkPackages=function(e){this.getSelectedWorkPackages().length>1&&(window.location.href=e)},n.prototype.copySelectedWorkPackages=function(e){var n=this.getSelectedWorkPackages();if(n.length>1)window.location.href=e;else{var t={copiedFromWorkPackageId:n[0].id};this.$state.go("work-packages.list.copy",t)}},n.prototype.getSelectedWorkPackages=function(){var e=this.wpTableSelection.getSelectedWorkPackages();return 0===e.length?[this.workPackage]:(-1===e.indexOf(this.workPackage)&&e.push(this.workPackage),e)},n.prototype.buildItems=function(){var e=this,n=this.permittedActions.map(function(n){return{class:void 0,disabled:!1,linkText:n.text,href:n.href,icon:null!=n.icon?n.icon:"icon-"+n.key,onClick:function(t){return(!n.href||!us.isClickedWithModifier(t))&&(e.triggerContextMenuAction(n),!0)}}});return this.workPackage.isNew||n.unshift({disabled:!1,icon:"icon-view-split",class:"detailsViewMenuItem",href:this.$state.href("work-packages.list.details.overview",{workPackageId:this.workPackageId}),linkText:I18n.t("js.button_open_details"),onClick:function(n){return!us.isClickedWithModifier(n)&&(e.$state.go("work-packages.list.details.overview",{workPackageId:e.workPackageId}),!0)}},{disabled:!1,icon:"icon-view-fullscreen",class:"openFullScreenView",href:this.$state.href("work-packages.show",{workPackageId:this.workPackageId}),linkText:I18n.t("js.button_open_fullscreen"),onClick:function(n){return!us.isClickedWithModifier(n)&&(e.$state.go("work-packages.show",{workPackageId:e.workPackageId}),!0)}}),n},n}(ds),mg=function(){function e(e,n){this.injector=e,this.table=n,this.opContextMenu=this.injector.get(Qa)}return Object.defineProperty(e.prototype,"rowSelector",{get:function(){return".wp-table--row"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.container)},e.prototype.openContextMenu=function(e,n,t){var l=new gg(this.injector,this.table,n,jQuery(e.target),t);this.opContextMenu.show(l,e)},e}(),vg=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.contextmenu"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table-context-menu-link"},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(n,t){var l=jQuery(t.target);if(l.closest(".__ui-state-link").length)return Object(mn.a)("Allowing original context menu on state link"),!0;t.preventDefault(),t.stopPropagation();var i=l.closest(this.rowSelector).data("workPackageId");return i&&e.prototype.openContextMenu.call(this,t,i),!1},n}(mg),bg=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"keydown.table.contextmenu"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return this.rowSelector},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(n,t){if(!n.configuration.contextMenuEnabled)return!1;var l=jQuery(t.target);if(t.keyCode!==il.a.F10||!t.shiftKey||!t.altKey)return!0;t.preventDefault(),t.stopPropagation();var i=l.closest(this.SELECTOR).data("workPackageId"),o={my:"left top",at:"left bottom",of:l};return e.prototype.openContextMenu.call(this,t,i,o),!1},n}(mg),yg=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.wpTableSelection=l.injector.get(Ia),l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"contextmenu.table.rightclick"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--row,.wp-timeline-cell"},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(n,t){if(!n.configuration.contextMenuEnabled)return!1;var l=jQuery(t.target);if(l.closest(".__ui-state-link").length)return Object(mn.a)("Allowing original context menu on state link"),!0;t.preventDefault(),t.stopPropagation();var i=l.closest(this.SELECTOR).data("workPackageId");if(i){var o=this.table.findRenderedRow(i)[0];this.wpTableSelection.isSelected(i)||this.wpTableSelection.setSelection(i,o),e.prototype.openContextMenu.call(this,t,i)}return!1},n}(mg),wg=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(h.G),this.states=this.injector.get(s),this.keepTab=this.injector.get(_e),this.wpTableSelection=this.injector.get(Ia),this.wpTableFocus=this.injector.get(Pa)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.table.row"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-table--row"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tbody)},e.prototype.handleEvent=function(e,n){var t=jQuery(n.target);if(t.is("a")||t.parent().is("a"))return!0;if(t.parents("."+_c).length)return Object(mn.a)("Skipping click on inner cell"),!0;var l=t.closest(this.SELECTOR),i=l.data("workPackageId"),o=l.data("classIdentifier");if(!i)return!0;if(t.is("a")||t.parent().is("a"))return!0;var r=e.findRenderedRow(o),u=r[0];r[1];return n.ctrlKey||n.metaKey||n.shiftKey||this.wpTableSelection.setSelection(i,u),n.shiftKey&&this.wpTableSelection.setMultiSelectionFrom(e.renderedRows,i,u),(n.ctrlKey||n.metaKey)&&this.wpTableSelection.toggleRow(i),this.wpTableFocus.updateFocus(i),!1},e}(),kg=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(h.G),this.states=this.injector.get(s),this.wpTableSelection=this.injector.get(Ia),this.wpTableFocus=this.injector.get(Pa)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"dblclick.table.row"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-table--row"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tbody)},e.prototype.handleEvent=function(e,n){var t=jQuery(n.target);if(us.isClickedWithModifier(n))return!0;if(t.parents("."+_c).length)return Object(mn.a)("Skipping click on inner cell"),!0;var l=t.closest(this.SELECTOR).data("workPackageId");return!(!t.is("a")&&!t.parent().is("a"))||(this.wpTableFocus.updateFocus(l),this.$state.go("work-packages.show",{workPackageId:l}),!1)},e}(),Cg=function(){function e(e,n){this.injector=e,this.querySpace=this.injector.get(y),this.builder=new Kc(e,n)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.table.groupheader"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-table--group-header .expander"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tbody)},e.prototype.handleEvent=function(e,n){n.preventDefault(),n.stopPropagation();var t=jQuery(n.target).parents(".wp-table--group-header").data("groupIdentifier"),l=this.collapsedState.value||{};l[t]=!l[t],this.collapsedState.putValue(l);var i=performance.now();this.builder.refreshExpansionState();var o=performance.now();Object(mn.a)("Group redraw took "+(o-i)+" milliseconds.")},Object.defineProperty(e.prototype,"collapsedState",{get:function(){return this.querySpace.collapsedGroups},enumerable:!0,configurable:!0}),e}(),Ig=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.states=l.injector.get(s),l.wpTableHierarchies=l.injector.get(Qe),l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.hierarchy"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--hierarchy-indicator"},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.tbody)},n.prototype.processEvent=function(e,n){var t=jQuery(n.target).closest(".wp-table--row").data("workPackageId");return this.wpTableHierarchies.toggle(t),n.stopImmediatePropagation(),n.preventDefault(),!1},n}(Cc),Pg=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(h.G),this.keepTab=this.injector.get(_e),this.states=this.injector.get(s),this.wpTableSelection=this.injector.get(Ia),this.wpTableFocus=this.injector.get(Pa)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.table.wpLink"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".__ui-state-link"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.container)},e.prototype.handleEvent=function(e,n){if(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)return!0;var t=jQuery(n.target),l=t.closest(this.SELECTOR),i=l.data("wpState"),o=l.data("workPackageId");t.closest("a").blur();var r=t.closest(".wp-table--row").data("classIdentifier"),u=e.findRenderedRow(r),a=u[0];u[1];return this.wpTableFocus.updateFocus(o),this.wpTableSelection.setSelection(o,a),this.$state.go(this.keepTab[i],{workPackageId:o,focus:!0}),n.preventDefault(),n.stopPropagation(),!1},e}(),jg=function(){return function(e,n){this.injector=e,this.table=n,this.querySpace=this.injector.get(y),this.wpTableColumns=this.injector.get(qe),this.querySpace.updates.columnsUpdates.values$("Refreshing columns on user request").pipe(Object(D.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(){if(n.originalRows.length>0){var e=performance.now();n.redrawTable();var t=performance.now();Object(mn.a)("column redraw took "+(t-e)+" milliseconds.")}})}}(),_g=function(){function e(e,n){var t=this;this.injector=e,this.wpTableHierarchies=this.injector.get(Qe),this.querySpace=this.injector.get(y),this.querySpace.updates.hierarchyUpdates.values$("Refreshing hierarchies on user request").pipe(Object(D.a)(this.querySpace.stopAllSubscriptions),Object(v.a)(function(e){return e.isVisible}),Object(Zu.a)()).subscribe(function(){t.wpTableHierarchies.isEnabled||n.redrawTableAndTimeline()});var l=this.wpTableHierarchies.isEnabled;this.wpTableHierarchies.observeUntil(this.querySpace.stopAllSubscriptions).pipe(Object(g.a)(function(){return t.querySpace.rendered.hasValue()})).subscribe(function(e){e.isVisible===l&&t.renderHierarchyState(e),l=e.isVisible})}return e.prototype.renderHierarchyState=function(e){var n=this.querySpace.rendered.value;jQuery('[class^="__hierarchy-group-"]').removeClass(function(e,n){return(n.match(/__collapsed-group-\d+/g)||[]).join(" ")});var t={};_.each(e.collapsed,function(e,l){jQuery("."+Zc(l)+" .wp-table--hierarchy-indicator").toggleClass("-hierarchy-collapsed",e);var i=jQuery("."+Yc(l));i.toggleClass(Gc(l),e),i.filter(".wp-table--row").each(function(l,i){var o=jQuery(i).index();t[o]||(n[o].hidden=e,t[o]=e)})}),e.last&&jc(e.last),this.querySpace.rendered.putValue(n,"Updated hidden state of rows after hierarchy change.")},e}(),Rg=function(){return function(e,n){this.injector=e,this.wpTableRelationColumns=this.injector.get(In),this.querySpace=this.injector.get(y),this.querySpace.updates.relationUpdates.values$("Refreshing expanded relations on user request").subscribe(function(e){n.redrawTableAndTimeline()})}}(),Sg=function(){return function(e,n){var t=this;this.injector=e,this.table=n,this.querySpace=this.injector.get(y),this.states=this.injector.get(s),this.querySpace.ready.fireOnTransition(this.querySpace.rows,"Query loaded").values$("Initializing table after query was initialized").pipe(Object(D.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(e){n.initialSetup(e)}),this.states.workPackages.observeChange().pipe(Object(D.a)(this.querySpace.stopAllSubscriptions.asObservable()),Object(g.a)(function(){return"Query loaded"===t.querySpace.ready.current})).subscribe(function(e){e[0];var n=e[1];void 0!==n&&t.table.refreshRows(n)})}}(),xg=function(){function e(e,n){var t=this;this.injector=e,this.table=n,this.wpTableSelection=this.injector.get(Ia),this.wpTableFocus=this.injector.get(Pa),this.querySpace=this.injector.get(y),this.FocusHelper=this.injector.get(f.a),this.opContextMenu=this.injector.get(Qa),this.querySpace.rendered.values$().pipe(Object(D.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(){t.wpTableFocus.ifShouldFocus(function(e){var n=Pc(e);n.length&&(jc(e),t.FocusHelper.focusElement(n,!0))})}),this.wpTableSelection.selectionState.values$().pipe(Object(D.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(e){t.renderSelectionState(e)}),Mousetrap.bind(["command+a","ctrl+a"],function(e){return t.wpTableSelection.selectAll(n.renderedRows),e.preventDefault(),t.opContextMenu.close(),!1}),Mousetrap.bind(["command+d","ctrl+d"],function(e){return t.wpTableSelection.reset(),t.opContextMenu.close(),e.preventDefault(),!1})}return e.prototype.renderSelectionState=function(e){var n=jQuery(this.table.container);n.find(".wp-table--row.-checked").removeClass("-checked"),_.each(e.selected,function(e,t){n.find('.wp-table--row[data-work-package-id="'+t+'"]').toggleClass("-checked",e)})},e}(),Tg=function(){function e(e,n){var t=this;this.injector=e,this.table=n,this.querySpace=this.injector.get(y),this.querySpace.timeline.values$().pipe(Object(D.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(e){t.renderVisibility(e.visible)})}return e.prototype.renderVisibility=function(e){var n=jQuery(this.table.container);n.find(".work-packages-tabletimeline--timeline-side").toggle(e),n.find(".work-packages-tabletimeline--table-side").toggleClass("-timeline-visible",e)},e}(),Og=function(){return function(e,n){this.injector=e,this.wpTableHighlighting=this.injector.get(un),this.querySpace=this.injector.get(y),this.querySpace.highlighting.values$("Refreshing highlights on user request").pipe(Object(D.a)(this.querySpace.stopAllSubscriptions),Object(Zu.a)()).subscribe(function(){return n.redrawTable()})}}();!function(e){e.findIndex=function(e){return e.parentElement?Array.from(e.parentElement.children).indexOf(e):-1},e.reinsert=function(e,n,t){n="string"==typeof n?parseInt(n,10):n;var l=Array.from(t.children);(n<0||n>=l.length||0===l.length)&&t.appendChild(e);var i=l[n];i?t.insertBefore(e,i):t.appendChild(e)}}(ug||(ug={}));var Eg=t("PTRy"),Dg=function(){function e(e,n){this.down=!1,this.elements=e,this.scrollWhenOutside=n.scrollWhenOutside||!1,this.maxSpeed=n.maxSpeed||5,this.margin=n.margin||10,this.scrollWhenOutside=n.scrollWhenOutside||!1,this.autoScroll=n.autoScroll,this.point={},this.pointCB=Object(Eg.createPointCB)(this.point),this.init()}return e.prototype.init=function(){var e=this;jQuery(window).on("mousemove.domautoscroll touchmove.domautoscroll",function(n){e.pointCB(n),e.onMove(n)}),jQuery(window).on("mouseup.domautoscroll touchend.domautoscroll",function(){return e.onUp()}),jQuery(window).on("scroll.domautoscroll",function(n){return e.setScroll(n)})},e.prototype.destroy=function(){jQuery(window).off(".domautoscroll"),this.elements=[],this.cleanAnimation()},e.prototype.add=function(e){this.elements.push(e)},e.prototype.onUp=function(){cancelAnimationFrame(this.animationFrame),cancelAnimationFrame(this.windowAnimationFrame)},e.prototype.setScroll=function(e){for(var n=this,t=0;t<this.elements.length;t++)if(this.elements[t]===e.target){this.scrolling=!0;break}this.scrolling&&requestAnimationFrame(function(){return n.scrolling=!1})},e.prototype.cleanAnimation=function(){cancelAnimationFrame(this.animationFrame),cancelAnimationFrame(this.windowAnimationFrame)},e.prototype.getTarget=function(e){if(!e)return[];var n=[];this.elements.includes(e)&&n.push(e);for(var t=e;t=t.parentNode;)this.elements.includes(t)&&n.push(t);return n},e.prototype.getElementsUnderPoint=function(){for(var e=[],n=0;n<this.elements.length;n++)this.inside(this.point,this.elements[n])&&e.push(this.elements[n]);return e},e.prototype.onMove=function(e){if(this.autoScroll()&&!e.dispatched){var n=[];null!==e.target&&n.push(e.target);var t=document.body;n.length>0&&n[0].parentNode===t?n=this.getElementsUnderPoint():0===(n=this.getTarget(n[0])).length&&(n=this.getElementsUnderPoint()),this.current=n,0===this.current.length&&(this.current=[this.outerScrollContainer]),cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(this.scrollTick.bind(this))}},e.prototype.setOuterScrollContainer=function(e){this.outerScrollContainer=e},e.prototype.scrollTick=function(){var e=this;0!==this.current.length&&(this.current.forEach(function(n){e.scrollAutomatically(n)}),cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(this.scrollTick.bind(this)))},e.prototype.scrollAutomatically=function(e){var n,t,l=this,i=Object(Eg.getClientRect)(e);n=this.point.x<i.left+this.margin?-this.maxSpeed:this.point.x>i.right-this.margin?this.maxSpeed:0,t=this.point.y<i.top+this.margin?-this.maxSpeed:this.point.y>i.bottom-this.margin?this.maxSpeed:0,setTimeout(function(){t&&l.scrollY(e,t),n&&l.scrollX(e,n)})},e.prototype.scrollY=function(e,n){e===window?window.scrollTo(e.pageXOffset,e.pageYOffset+n):e.scrollTop+=n},e.prototype.scrollX=function(e,n){e===window?window.scrollTo(e.pageXOffset+n,e.pageYOffset):e.scrollLeft+=n},e.prototype.inside=function(e,n,t){return t?e.y>t.top&&e.y<t.bottom&&e.x>t.left&&e.x<t.right:Object(Eg.pointInside)(e,n)},e}(),Fg=function(){function e(e){var n=this;this.document=e,this.drake=null,this.members=[],this.escapeListener=function(e){n.drake&&"Escape"===e.key&&n.drake.cancel(!0)},this.document.documentElement.addEventListener("keydown",this.escapeListener)}return e.prototype.ngOnDestroy=function(){this.document.documentElement.removeEventListener("keydown",this.escapeListener),this.autoscroll&&this.autoscroll.destroy(),this.drake&&this.drake.destroy()},e.prototype.remove=function(e){this.initialized&&(_.remove(this.drake.containers,function(n){return n===e}),_.remove(this.members,function(n){return n.dragContainer===e}))},e.prototype.member=function(e){return _.find(this.members,function(n){return n.dragContainer===e})},Object.defineProperty(e.prototype,"initialized",{get:function(){return null!==this.drake},enumerable:!0,configurable:!0}),e.prototype.register=function(e){this.members.push(e);var n=e.dragContainer;this.autoscroll?this.autoscroll.add(n):this.setupAutoscroll([n]),null===this.drake?this.initializeDrake([n]):this.drake.containers.push(n)},e.prototype.addScrollContainer=function(e){this.autoscroll?this.autoscroll.add(e):this.setupAutoscroll([e]),this.autoscroll.setOuterScrollContainer(e)},e.prototype.setupAutoscroll=function(e){var n=this;this.autoscroll=new Dg(e,{margin:100,maxSpeed:10,scrollWhenOutside:!0,autoScroll:function(){return n.drake&&n.drake.dragging}})},e.prototype.getMember=function(e){return this.members.find(function(n){return n.dragContainer===e})},e.prototype.initializeDrake=function(e){var n=this;this.drake=dragula(e,{moves:function(e,t,l,i){var o=n.getMember(t);return!!o&&o.moves(e,t,l,i)},accepts:function(e,t){var l=n.getMember(t);return!l||!l.accepts||l.accepts(e,t)},invalid:function(){return!1},direction:"vertical",copy:!1,revertOnSpill:!0,removeOnSpill:!1,mirrorContainer:document.body,ignoreInputTextSelection:!0}),this.drake.on("drag",function(e,n){e.dataset.sourceIndex=ug.findIndex(e).toString()}),this.drake.on("over",function(e,n){n.closest(".drop-zone").classList.add("-dragged-over")}),this.drake.on("out",function(e,n){n.closest(".drop-zone").classList.remove("-dragged-over")}),this.drake.on("drop",function(e,t,l,i){return r.b(n,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.handleDrop(e,t,l,i)];case 1:return n.sent(),[3,3];case 2:return n.sent(),console.error("Failed to handle drop of %O",e),[3,3];case 3:return[2]}})})})},e.prototype.handleDrop=function(e,n,t,l){return r.b(this,void 0,void 0,function(){var i,o;return r.e(this,function(r){switch(r.label){case 0:return i=this.member(n),o=this.member(t),i&&o?i===o?[2,i.onMoved(e,n,t,l)]:[4,i.onAdded(e,n,t,l)]:[2];case 1:return r.sent()?o.onRemoved(e,n,t,l):ug.reinsert(e,e.dataset.sourceIndex||-1,t),[2]}})})},e}(),Ag=function(){function e(e,n){var t=this;this.injector=e,this.table=n,this.querySpace=this.injector.get(y),this.states=this.injector.get(s),this.pathHelper=this.injector.get(ve),this.dragService=this.injector.get(Fg,null),this.reorderService=this.injector.get(fd),this.inlineCreateService=this.injector.get(wc),this.wpTableRefresh=this.injector.get(zn),null!==this.dragService&&(this.inlineCreateService.newInlineWorkPackageCreated.pipe(Object(D.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(e){t.reorderService.add(t.currentOrder,e),t.wpTableRefresh.request("Drag and Drop added item")}),this.querySpace.stopAllSubscriptions.pipe(Object(F.a)(1)).subscribe(function(){t.dragService.remove(t.table.tbody).then(function(){return t.wpTableRefresh.request("Drag and Drop change")})}),this.dragService.register({container:this.table.tbody,scrollContainers:[this.table.tbody],moves:function(e,n,t){return t.classList.contains("wp-table--drag-and-drop-handle")},onMoved:function(e){var n=e.dataset.workPackageId;t.reorderService.move(t.currentOrder,n,e.rowIndex-1),t.wpTableRefresh.request("Drag and Drop moved item")},onRemoved:function(e){var n=e.dataset.workPackageId;t.reorderService.remove(t.currentOrder,n),t.wpTableRefresh.request("Drag and Drop moved item")},onAdded:function(e){var n=e.dataset.workPackageId;t.reorderService.add(t.currentOrder,n,e.rowIndex-1),t.wpTableRefresh.request("Drag and Drop moved item")}}))}return Object.defineProperty(e.prototype,"currentOrder",{get:function(){return this.querySpace.results.mapOr(function(e){return e.elements.map(function(e){return e.id})},[])},enumerable:!0,configurable:!0}),e}(),Ng=function(){function e(e){var n=this;this.injector=e,this.eventHandlers=[function(e){return new Ig(n.injector,e)},function(e){return new hg(n.injector,e)},function(e){return new Pg(n.injector,e)},function(e){return new wg(n.injector,e)},function(e){return new kg(n.injector,e)},function(e){return new Cg(n.injector,e)},function(e){return new yg(n.injector,e)},function(e){return new vg(n.injector,e)},function(e){return new bg(n.injector,e)},function(e){return new fg(n.injector,e)}],this.stateTransformers=[xg,Sg,jg,Tg,_g,Rg,Og,Ag]}return e.prototype.attachTo=function(e){var n=this;this.stateTransformers.map(function(t){return new t(n.injector,e)}),this.eventHandlers.map(function(n){var t=n(e);return t.eventScope(e).on(t.EVENT,t.SELECTOR,function(n){t.handleEvent(e,n)}),t})},e}(),Mg=function(){function e(e){this.tableAndTimeline=e,this.lastHoveredElement=null,this.$body=jQuery("body"),this.lastAffectedElements=[]}return e.prototype.activate=function(){var e=this;this.$body.on("mousemove.hoverSync",function(n){n.target!==e.lastHoveredElement&&e.handleHover(n.target),e.lastHoveredElement=n.target})},e.prototype.deactivate=function(){this.$body.off(".hoverSync"),this.removeAllHoverClasses()},e.prototype.locateHoveredTableRow=function(e){var n=e.closest("tr");return 0===n.length?null:n[0]},e.prototype.locateHoveredTimelineRow=function(e){var n=e.closest("div.wp-timeline-cell");return 0===n.length?null:n[0]},e.prototype.handleHover=function(e){var n=jQuery(e),t=this.locateHoveredTableRow(n),l=this.locateHoveredTimelineRow(n);null!==t||null!==l?this.removeOldAndAddNewHoverClass(t,l):this.removeAllHoverClasses()},e.prototype.extractWorkPackageId=function(e){return parseInt(e.getAttribute("data-work-package-id"))},e.prototype.removeOldAndAddNewHoverClass=function(e,n){var t=this,l=null!==e?e:n,i=this.extractWorkPackageId(l),o=this.tableAndTimeline.find("tr.wp-row-"+i).first(),r=this.tableAndTimeline.find("div.wp-row-"+i).first();requestAnimationFrame(function(){t.removeAllHoverClasses(),r.addClass("row-hovered"),o.addClass("row-hovered"),t.lastAffectedElements.push(o),t.lastAffectedElements.push(r)})},e.prototype.removeAllHoverClasses=function(){this.lastAffectedElements.forEach(function(e){e.removeClass("row-hovered")}),this.lastAffectedElements=[]},e}(),Vg=".work-packages-tabletimeline--table-side",qg=".work-packages-tabletimeline--timeline-side",Lg=".scroll-sync",$g=15;function Hg(e){if(0===e)return e;var n=$g;return e<0&&(n*=-1),n}function Bg(e,n,t){var l=e.target,i=function(e){var n=e.deltaX,t=e.deltaY;return e.shiftKey&&(n=t,t=0),[n,t]}(e.originalEvent),o=i[0],r=i[1];0!==r&&(o=Hg(o),r=Hg(r),window.requestAnimationFrame(function(){n[0].scrollTop=n[0].scrollTop+r,t[0].scrollTop=t[0].scrollTop+r,l.scrollLeft=l.scrollLeft+o}))}var zg=function(){function e(e,n,t,l,i,o,r,u,a,s,c){this.elementRef=e,this.injector=n,this.states=t,this.querySpace=l,this.opModalService=i,this.opContextMenu=o,this.I18n=r,this.cdRef=u,this.wpTableGroupBy=a,this.wpTableTimeline=s,this.wpTableColumns=c}return e.prototype.ngOnInit=function(){var e,n,t,l=this;this.configuration=new qn(this.configurationObject),this.$element=jQuery(this.elementRef.nativeElement),this.scrollSyncUpdate=(e=this.$element,n=jQuery(e).find(Vg),t=jQuery(e).find(qg),function(e){var l=!1,i=!1;e?(n.on("wheel"+Lg,function(e){Bg(e,n,t)}),n.on("scroll"+Lg,function(e){l=!0,i||(t[0].scrollTop=e.target.scrollTop),l&&i&&(l=!1,i=!1)}),t.on("wheel"+Lg,function(e){Bg(e,n,t)}),t.on("scroll"+Lg,function(e){i=!0,l||(n[0].scrollTop=e.target.scrollTop),l&&i&&(l=!1,i=!1)})):n.off(Lg)}),this.querySpace.stopAllSubscriptions.next(),this.locale=I18n.locale,this.text={cancel:I18n.t("js.button_cancel"),noResults:{title:I18n.t("js.work_packages.no_results.title"),description:I18n.t("js.work_packages.no_results.description")},configureTable:I18n.t("js.toolbar.settings.configure_view"),tableSummary:I18n.t("js.work_packages.table.summary"),tableSummaryHints:[I18n.t("js.work_packages.table.text_inline_edit"),I18n.t("js.work_packages.table.text_select_hint"),I18n.t("js.work_packages.table.text_sort_hint")].join(" ")},Object(ys.a)(this.querySpace.results.values$(),this.wpTableGroupBy.state.values$(),this.wpTableColumns.state.values$(),this.wpTableTimeline.state.values$()).pipe(Object(Ln.b)(this)).subscribe(function(e){var n=e[0],t=e[1],i=e[2],o=e[3];l.query=l.querySpace.query.value,l.rowcount=n.count,l.groupBy=t,l.columns=i,l.numTableColumns=l.columns.length+2,l.timelineVisible!==o.visible&&l.scrollSyncUpdate(o.visible),l.timelineVisible=o.visible});var i=this.getTableAndTimelineElement();this.tableElement=i[0],this.timeline=i[1],this.wpTableHoverSync=new Mg(this.$element),this.wpTableHoverSync.activate()},e.prototype.ngOnDestroy=function(){this.wpTableHoverSync.deactivate()},e.prototype.registerTimeline=function(e,n){var t=this.$element.find(".work-package--results-tbody");this.workPackageTable=new rd(this.injector,this.$element[0],t[0],n,e,this.configuration),this.tbody=t,e.workPackageTable=this.workPackageTable,new Ng(this.injector).attachTo(this.workPackageTable),this.cdRef.detectChanges()},e.prototype.openTableConfigurationModal=function(){this.opContextMenu.close(),this.opModalService.show(Nn,this.injector)},Object.defineProperty(e.prototype,"isEmbedded",{get:function(){return this.configuration.isEmbedded},enumerable:!0,configurable:!0}),e.prototype.getTableAndTimelineElement=function(){var e=this.$element.find(".work-packages-tabletimeline--table-side"),n=this.$element.find(".work-packages-tabletimeline--timeline-side");if(0===n.length||0===e.length)throw new Error("invalid state");return[e[0],n[0]]},e}(),Wg=function(){function e(e,n,t,l,i,o,r,a,s,c,d,p){this.injector=e,this.elementRef=n,this.states=t,this.wpTableDirective=l,this.dynamicCssService=i,this.NotificationsService=o,this.wpTableTimeline=r,this.wpNotificationsService=a,this.wpRelations=s,this.wpTableRefresh=c,this.wpTableHierarchies=d,this.I18n=p,this.querySpace=this.injector.get(y),this._viewParameters=new S,this.disableViewParamsCalculation=!1,this.workPackageIdOrder=[],this.renderers={},this.cellsRenderer=new pg(this.injector,this),this.selectionParams={notification:null},this.refreshRequest=Object(u.g)()}return e.prototype.ngAfterViewInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.text={selectionMode:this.I18n.t("js.timelines.selection_mode.notification")},this.outerContainer=this.$element.find(".wp-table-timeline--outer"),this.timelineBody=this.$element.find(".wp-table-timeline--body"),this.wpTableDirective.registerTimeline(this,this.timelineBody[0]),this.updateOnWorkPackageChanges(),this.setupRefreshListener(),window.addEventListener("wp-resize.timeline",function(){return e.refreshRequest.putValue(void 0)}),this.querySpace.rendered.values$().pipe(Object(D.a)(this.querySpace.stopAllSubscriptions),Object(g.a)(function(){return e.initialized})).subscribe(function(n){e.workPackageIdOrder=n.filter(function(e){return!e.hidden}),e.refreshView()}),this.querySpace.timeline.values$().pipe(Object(g.a)(function(e){return e.visible}),Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.refreshRequest.putValue(void 0)})},e.prototype.setupRefreshListener=function(){var e=this;this.refreshRequest.changes$().pipe(Object(Ln.b)(this),Object(Yu.a)(250)).subscribe(function(){return e.refreshView()})},e.prototype.ngOnDestroy=function(){},e.prototype.workPackageInView=function(e){return this.cellsRenderer.hasCell(e)},e.prototype.workPackageCells=function(e){return this.cellsRenderer.getCellsFor(e)},e.prototype.workPackageIndex=function(e){return this.workPackageIdOrder.findIndex(function(n){return n.classIdentifier===e})},e.prototype.onRefreshRequested=function(e,n){this.renderers[e]=n},e.prototype.getAbsoluteLeftCoordinates=function(){return this.$element.offset().left},e.prototype.getParentScrollContainer=function(){return this.outerContainer.closest(qg)[0]},Object.defineProperty(e.prototype,"viewParameters",{get:function(){return this._viewParameters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inHierarchyMode",{get:function(){return this.wpTableHierarchies.isEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return this.workPackageTable&&this.querySpace.rendered.hasValue()},enumerable:!0,configurable:!0}),e.prototype.refreshView=function(){var e=this;this.wpTableTimeline.isVisible?(this.wpTableTimeline.isAutoZoom()?this.applyAutoZoomLevel():(this._viewParameters.settings.zoomLevel=this.wpTableTimeline.zoomLevel,this.wpTableTimeline.appliedZoomLevel=this.wpTableTimeline.zoomLevel),this.dynamicCssService.requireHighlighting(),Object(mn.b)("refreshView() in timeline container",function(){e.outerContainer.css("width","auto"),e.calculateViewParams(e._viewParameters),e.cellsRenderer.refreshAllCells(),_.each(e.renderers,function(n,t){Object(mn.a)("Refreshing timeline member "+t),n(e._viewParameters)});var n=e.getParentScrollContainer().scrollWidth;e.outerContainer.width(n)})):Object(mn.a)("refreshView() requested, but TL is invisible.")},e.prototype.updateOnWorkPackageChanges=function(){var e=this;this.states.workPackages.observeChange().pipe(Object($n.a)(this.querySpace.timeline.values$()),Object(D.a)(Object(Ln.a)(this)),Object(g.a)(function(n){var t=n[1];return e.initialized&&t.visible}),Object(v.a)(function(e){return e[0][0]}),Object(g.a)(function(n){return e.cellsRenderer.hasCell(n)})).subscribe(function(n){e.calculateViewParams(e._viewParameters)?e.refreshRequest.putValue(void 0):e.cellsRenderer.refreshCellsFor(n)})},e.prototype.startAddRelationPredecessor=function(e){var n=this;this.activateSelectionMode(e.id,function(t){n.wpRelations.addCommonRelation(e.id,"follows",t.id).then(function(){return n.wpTableRefresh.request("Timeline relation")}).catch(function(e){return n.wpNotificationsService.handleRawError(e,t)})})},e.prototype.startAddRelationFollower=function(e){var n=this;this.activateSelectionMode(e.id,function(t){n.wpRelations.addCommonRelation(e.id,"precedes",t.id).then(function(){return n.wpTableRefresh.request("Timeline relation")}).catch(function(e){return n.wpNotificationsService.handleRawError(e,t)})})},e.prototype.getFirstDayInViewport=function(){var e=this.getParentScrollContainer().scrollLeft,n=Math.floor(e/this.viewParameters.pixelPerDay);return this.viewParameters.dateDisplayStart.clone().add(n,"days")},e.prototype.getLastDayInViewport=function(){var e=this.getParentScrollContainer(),n=e.scrollLeft+e.offsetWidth,t=Math.ceil(n/this.viewParameters.pixelPerDay)+1;return this.viewParameters.dateDisplayStart.clone().add(t,"days")},e.prototype.forceCursor=function(e){jQuery("."+I).css("cursor",e),jQuery(".wp-timeline-cell").css("cursor",e),jQuery(".hascontextmenu").css("cursor",e),jQuery(".leftHandle").css("cursor",e),jQuery(".rightHandle").css("cursor",e)},e.prototype.resetCursor=function(){jQuery("."+I).css("cursor",""),jQuery(".wp-timeline-cell").css("cursor",""),jQuery(".hascontextmenu").css("cursor",""),jQuery(".leftHandle").css("cursor",""),jQuery(".rightHandle").css("cursor","")},e.prototype.resetSelectionMode=function(){this._viewParameters.activeSelectionMode=null,this._viewParameters.selectionModeStart=null,this.selectionParams.notification&&this.NotificationsService.remove(this.selectionParams.notification),Mousetrap.unbind("esc"),this.$element.removeClass("active-selection-mode"),jQuery(".selection-start").removeClass("selection-start"),this.refreshView()},e.prototype.activateSelectionMode=function(e,n){var t=this;e=e.toString(),this._viewParameters.activeSelectionMode=function(e){n(e),t.resetSelectionMode()},this._viewParameters.selectionModeStart=e,Mousetrap.bind("esc",function(){return t.resetSelectionMode()}),this.selectionParams.notification=this.NotificationsService.addNotice(this.text.selectionMode),this.$element.addClass("active-selection-mode"),this.refreshView()},e.prototype.calculateViewParams=function(e){var n=this;if(this.disableViewParamsCalculation)return!1;var t=new S,l=!1;this.workPackageIdOrder.forEach(function(l){var i=l.workPackageId;if(i){var o=n.states.workPackages.get(i).value;if(o){var r=o.startDate?C(o.startDate):e.now,u=o.dueDate?C(o.dueDate):e.now,a=o.date?C(o.date):e.now;t.dateDisplayStart=C.min(t.dateDisplayStart,e.now,r,a),t.dateDisplayEnd=C.max(t.dateDisplayEnd,e.now,u,a)}}}),t.dateDisplayStart.subtract(e.dayCountForMarginLeft,"days");var i=this.$element.children().width(),o=e.pixelPerDay,r=Math.ceil(i/o*1.5);t.dateDisplayEnd.add(r,"days"),t.dateDisplayStart.isSame(this._viewParameters.dateDisplayStart)||(l=!0,this._viewParameters.dateDisplayStart=t.dateDisplayStart),t.dateDisplayEnd.isSame(this._viewParameters.dateDisplayEnd)||(l=!0,this._viewParameters.dateDisplayEnd=t.dateDisplayEnd);var u=[this.getFirstDayInViewport(),this.getLastDayInViewport()];return this._viewParameters.visibleViewportAtCalculationTime=u,l},e.prototype.applyAutoZoomLevel=function(){if(0!==this.workPackageIdOrder.length)for(var e,n,t,l,i=(e=this.workPackageIdOrder,n=this.states.workPackages,this._viewParameters,t=C(),l=C(),e.forEach(function(e){var i=e.workPackageId;if(i){var o=n.get(i).value;if(o){var r=o.startDate?o.startDate:o.date;r&&C(r).isBefore(t)&&(t=C(r));var u=o.dueDate?o.dueDate:o.date;u&&C(u).isAfter(l)&&(l=C(u))}}}),l.diff(t,"days")+1),o=this.$element.parent().width()-240,r=0,u=j;r<u.length;r++){var a=u[r];if(o/R(a)>=i||a===_.last(j))return this._viewParameters.settings.zoomLevel!==a&&(this._viewParameters.settings.zoomLevel=a,this.wpTableDirective.timeline.scrollLeft=0),void(this.wpTableTimeline.appliedZoomLevel=a)}},e}(),Qg=function(){function e(e,n,t,l){this.I18n=n,this.wpTimelineService=t,this.workPackageTimelineTableController=l,this.$element=jQuery(e.nativeElement)}return e.prototype.ngOnInit=function(){var e=this;this.workPackageTimelineTableController.onRefreshRequested("header",function(n){return e.refreshView(n)})},e.prototype.refreshView=function(e){this.innerHeader=this.$element.find(".wp-table-timeline--header-inner"),this.renderLabels(e)},e.prototype.renderLabels=function(e){if(this.activeZoomLevel!==e.settings.zoomLevel){switch(this.innerHeader.empty(),this.innerHeader.attr("data-current-zoom-level",this.wpTimelineService.zoomLevel),e.settings.zoomLevel){case"days":return this.renderLabelsDays(e);case"weeks":return this.renderLabelsWeeks(e);case"months":return this.renderLabelsMonths(e);case"quarters":return this.renderLabelsQuarters(e);case"years":return this.renderLabelsYears(e)}this.activeZoomLevel=e.settings.zoomLevel}},e.prototype.renderLabelsDays=function(e){this.renderTimeSlices(e,"month",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM YYYY"),n.classList.add("wp-timeline--header-top-bold-element"),n.style.height="13px"}),this.renderTimeSlices(e,"week",13,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("ww"),n.classList.add("-top-border"),n.style.height="32px"}),this.renderTimeSlices(e,"day",23,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("D"),n.classList.add("-top-border"),n.style.height="22px"}),this.renderTimeSlices(e,"day",33,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("dd"),n.classList.add("wp-timeline--header-day-element")})},e.prototype.renderLabelsWeeks=function(e){this.renderTimeSlices(e,"month",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM YYYY"),n.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"week",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("ww"),n.classList.add("-top-border"),n.style.height="22px"}),this.renderTimeSlices(e,"day",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("D"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderLabelsMonths=function(e){this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("YYYY"),n.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"month",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM"),n.classList.add("-top-border"),n.style.height="30px"}),this.renderTimeSlices(e,"week",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("ww"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderLabelsQuarters=function(e){var n=this;this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("wp-timeline--header-top-bold-element"),n.innerHTML=e.format("YYYY")}),this.renderTimeSlices(e,"quarter",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,t){t.innerHTML=n.I18n.t("js.timelines.quarter_label",{quarter_number:e.format("Q")}),t.classList.add("-top-border"),t.style.height="30px"}),this.renderTimeSlices(e,"month",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderLabelsYears=function(e){var n=this;this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("YYYY"),n.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"quarter",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,t){t.innerHTML=n.I18n.t("js.timelines.quarter_label",{quarter_number:e.format("Q")}),t.classList.add("-top-border"),t.style.height="30px"}),this.renderTimeSlices(e,"month",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("M"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderTimeSlices=function(e,n,t,l,i,o){for(var r=this,u=O(e,n,l,i),a=u.inViewportAndBoundaries,s=u.rest,c=0,d=a;c<d.length;c++){var p=d[c],h=p[0],f=p[1],g=this.addLabelCell();g.style.top=t+"px",g.style.left=T(e,h.diff(l,"days")),g.style.width=T(e,f.diff(h,"days")+1),o(h,g)}setTimeout(function(){for(var n=0,i=s;n<i.length;n++){var u=i[n],a=u[0],c=u[1],d=r.addLabelCell();d.style.top=t+"px",d.style.left=T(e,a.diff(l,"days")),d.style.width=T(e,c.diff(a,"days")+1),o(a,d)}},0)},e.prototype.addLabelCell=function(){var e=document.createElement("div");return e.className="wp-timeline--header-element",this.innerHeader.append(e),e},e}(),Ug=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Kg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","wp-table-timeline--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","wp-table-timeline--header-inner"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-timeline-header",Qg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-header",[],null,null,null,Kg,Ug)),l["\u0275did"](1,114688,null,0,Qg,[l.ElementRef,B.a,M,Wg],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var Gg=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.finishElement=function(e,n){var t=n.now.diff(n.dateDisplayStart,"days"),l=C().hour()/24;return e.style.left=T(n,t+l),e},Object.defineProperty(n.prototype,"identifier",{get:function(){return"wp-timeline-static-element-today-line"},enumerable:!0,configurable:!0}),n}(function(){function e(){}return e.prototype.render=function(e){var n,t=document.createElement("div");return t.id=this.identifier,(n=t.classList).add.apply(n,this.classNames),this.finishElement(t,e)},Object.defineProperty(e.prototype,"classNames",{get:function(){return["wp-timeline--static-element"]},enumerable:!0,configurable:!0}),e}()),Yg=function(){function e(e,n,t){this.states=n,this.workPackageTimelineTableController=t,this.$element=jQuery(e.nativeElement),this.elements=[new Gg]}return e.prototype.ngOnInit=function(){var e=this;this.container=this.$element.find(".wp-table-timeline--static-elements"),this.workPackageTimelineTableController.onRefreshRequested("static elements",function(n){return e.update(n)})},e.prototype.update=function(e){this.removeAllVisibleElements(),this.renderElements(e)},e.prototype.removeAllVisibleElements=function(){jQuery(".wp-timeline--static-element").remove()},e.prototype.renderElements=function(e){for(var n=0,t=this.elements;n<t.length;n++){var l=t[n];this.container[0].appendChild(l.render(e))}},e}(),Zg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Jg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","wp-table-timeline--static-elements"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-timeline-static-elements",Yg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-static-elements",[],null,null,null,Jg,Zg)),l["\u0275did"](1,114688,null,0,Yg,[l.ElementRef,s,Wg],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);function Xg(e,n){var t=e.day();0!==t&&6!==t||n.classList.add("grid-weekend")}var em=function(){function e(e,n){this.elementRef=e,this.wpTimeline=n}return e.prototype.ngAfterViewInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement);this.gridContainer=n.find(".wp-table-timeline--grid"),this.wpTimeline.onRefreshRequested("grid",function(n){return e.refreshView(n)})},e.prototype.refreshView=function(e){this.renderLabels(e)},e.prototype.renderLabels=function(e){if(this.activeZoomLevel!==e.settings.zoomLevel){switch(this.gridContainer.empty(),e.settings.zoomLevel){case"days":return this.renderLabelsDays(e);case"weeks":return this.renderLabelsWeeks(e);case"months":return this.renderLabelsMonths(e);case"quarters":return this.renderLabelsQuarters(e);case"years":return this.renderLabelsYears(e)}this.activeZoomLevel=e.settings.zoomLevel}},e.prototype.renderLabelsDays=function(e){this.renderTimeSlices(e,"day",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.style.paddingTop="1px",Xg(e,n)}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsWeeks=function(e){this.renderTimeSlices(e,"day",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){Xg(e,n)}),this.renderTimeSlices(e,"week",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsMonths=function(e){this.renderTimeSlices(e,"week",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){}),this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsQuarters=function(e){this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){}),this.renderTimeSlices(e,"quarter",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsYears=function(e){this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")})},e.prototype.renderTimeSlices=function(e,n,t,l,i){for(var o=this,r=O(e,n,t,l),u=r.inViewportAndBoundaries,a=r.rest,s=0,c=u;s<c.length;s++){var d=c[s],p=d[0],h=d[1],f=document.createElement("div");f.classList.add(I,"wp-timeline--grid-element"),f.style.left=T(e,p.diff(t,"days")),f.style.width=T(e,h.diff(p,"days")+1),this.gridContainer[0].appendChild(f),i(p,f)}setTimeout(function(){for(var n=0,l=a;n<l.length;n++){var r=l[n],u=r[0],s=r[1],c=document.createElement("div");c.classList.add(I,"wp-timeline--grid-element"),c.style.left=T(e,u.diff(t,"days")),c.style.width=T(e,s.diff(u,"days")+1),o.gridContainer[0].appendChild(c),i(u,c)}},0)},e}(),nm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function tm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","wp-table-timeline--grid"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-timeline-grid",em,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-grid",[],null,null,null,tm,nm)),l["\u0275did"](1,4243456,null,0,em,[l.ElementRef,Wg],null,null)],null,null)},{},{},[]);function lm(e){return"__tl-relation-"+e}var im=function(){function e(e,n){this.belongsToId=e,this.relation=n}return Object.defineProperty(e.prototype,"classNames",{get:function(){return[lm(this.relation.ids.from),lm(this.relation.ids.to)]},enumerable:!0,configurable:!0}),e}(),om=!1,rm="relation-line";function um(e,n,t,l,i,o,r,u){var a,s=document.createElement("div");return(a=s.classList).add.apply(a,[I,rm].concat(n)),s.style.top=40*t+l+"px",s.style.left=i+"px",s.style.width=o+"px",s.style.height=r+"px",om&&void 0!==u&&(s.style.zIndex="9999999",s.style.backgroundColor=u),s}var am=function(){function e(e,n,t,l,i){this.injector=e,this.elementRef=n,this.states=t,this.workPackageTimelineTableController=l,this.wpRelations=i,this.querySpace=this.injector.get(y),this.workPackagesWithRelations={}}return e.prototype.ngOnInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement);this.container=n.find(".wp-table-timeline--relations"),this.workPackageTimelineTableController.onRefreshRequested("relations",function(n){return e.refreshView()}),this.setupRelationSubscription()},e.prototype.ngOnDestroy=function(){},e.prototype.refreshView=function(){this.update()},Object.defineProperty(e.prototype,"workPackageIdOrder",{get:function(){return this.workPackageTimelineTableController.workPackageIdOrder},enumerable:!0,configurable:!0}),e.prototype.setupRelationSubscription=function(){var e=this;Object(ys.a)(this.querySpace.renderedWorkPackages.values$(),this.querySpace.timeline.values$()).pipe(Object(g.a)(function(e){e[0];return e[1].visible}),Object(D.a)(Object(Ln.a)(this)),Object(v.a)(function(e){var n=e[0];e[1];return n})).subscribe(function(n){var t=_.compact(n.map(function(e){return e.workPackageId}));e.wpRelations.requireAll(t),t.forEach(function(n){var t=e.wpRelations.state(n);e.workPackagesWithRelations[n]=t,t.values$().pipe(Object(F.a)(1)).subscribe(function(){e.renderWorkPackagesRelations([n])})})}),this.states.workPackages.observeChange().pipe(Object(D.a)(Object(Ln.a)(this)),Object(g.a)(function(){return e.querySpace.timeline.mapOr(function(e){return e.visible},!1)})).subscribe(function(n){var t=n[0];e.renderWorkPackagesRelations([t])})},e.prototype.renderWorkPackagesRelations=function(e){var n=this;e.forEach(function(e){var t=n.workPackagesWithRelations[e];if(!_.isNil(t)){n.removeRelationElementsForWorkPackage(e);var l=_.values(t.value);_.values(l).forEach(function(e){if("precedes"===e.type||"follows"===e.type){var t=new im(e.ids.from,e);n.renderElement(n.workPackageTimelineTableController.viewParameters,t)}})}})},e.prototype.update=function(){this.removeAllVisibleElements(),this.renderElements()},e.prototype.removeRelationElementsForWorkPackage=function(e){var n=lm(e);this.container.find("."+n).remove()},e.prototype.removeAllVisibleElements=function(){this.container.find("."+rm).remove()},e.prototype.renderElements=function(){var e=_.keys(this.workPackagesWithRelations);this.renderWorkPackagesRelations(e)},e.prototype.renderElement=function(e,n){var t=this,l=n.relation.ids,i=this.workPackageTimelineTableController.workPackageCells(l.to),o=this.workPackageTimelineTableController.workPackageCells(l.from);0!==i.length&&0!==o.length&&i.forEach(function(l){var i=t.workPackageTimelineTableController.workPackageIndex(l.classIdentifier);o.forEach(function(o){var r=t.workPackageTimelineTableController.workPackageIndex(o.classIdentifier);t.renderRelation(e,n,i,r,l,o)})})},e.prototype.renderRelation=function(e,n,t,l,i,o){var r=this.workPackageIdOrder[t],u=this.workPackageIdOrder[l];if(r&&u&&!r.hidden&&!u.hidden&&i.canConnectRelations()&&o.canConnectRelations()){var a=i.getMarginLeftOfRightSide()-i.getPaddingRightForOutgoingRelationLines(),s=o.getMarginLeftOfLeftSide()+o.getPaddingLeftForIncomingRelationLines(),c=t<l?"toDown":"toUp",d=s>a?"toRight":s<a?"toLeft":"beneath";if(i){var p=i.getPaddingRightForOutgoingRelationLines(),h=o.getPaddingLeftForIncomingRelationLines()+(p>0?p:0);this.container.append(um(0,n.classNames,t,19,a,h,1,"red"));var f=a+h,g=Math.abs(l-t);"toDown"===c?"toRight"===d||"beneath"===d?this.container.append(um(0,n.classNames,t,19,f,1,40*g,"black")):"toLeft"===d&&this.container.append(um(0,n.classNames,t,19,f,1,40*g-10,"black")):"toUp"===c&&this.container.append(um(0,n.classNames,l,30,f,1,40*g-10,"black")),"toRight"===d?"toDown"===c?this.container.append(um(0,n.classNames,l,19,f,s-f,1,"red")):"toUp"===c&&(this.container.append(um(0,n.classNames,l,20,f,1,10,"green")),this.container.append(um(0,n.classNames,l,20,f,s-f,1,"lightsalmon"))):"toLeft"===d&&("toDown"===c?(this.container.append(um(0,n.classNames,l,0,f,1,8,"red")),this.container.append(um(0,n.classNames,l,8,s,f-s,1,"green")),this.container.append(um(0,n.classNames,l,8,s,1,11,"blue"))):"toUp"===c&&(this.container.append(um(0,n.classNames,l,30,s+1,f-s,1,"red")),this.container.append(um(0,n.classNames,l,19,s+1,1,11,"blue"))))}}},e}(),sm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function cm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","wp-table-timeline--relations"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-timeline-relations",am,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-relations",[],null,null,null,cm,sm)),l["\u0275did"](1,245760,null,0,am,[l.Injector,l.ElementRef,s,Wg,Cn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var dm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","wp-table-timeline--outer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","wp-table-timeline--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"wp-timeline-header",[],null,null,null,Kg,Ug)),l["\u0275did"](3,114688,null,0,Qg,[l.ElementRef,B.a,M,Wg],null,null),(e()(),l["\u0275eld"](4,0,null,null,1,"wp-timeline-static-elements",[],null,null,null,Jg,Zg)),l["\u0275did"](5,114688,null,0,Yg,[l.ElementRef,s,Wg],null,null),(e()(),l["\u0275eld"](6,0,null,null,1,"wp-timeline-grid",[],null,null,null,tm,nm)),l["\u0275did"](7,4243456,null,0,em,[l.ElementRef,Wg],null,null),(e()(),l["\u0275eld"](8,0,null,null,1,"wp-timeline-relations",[],null,null,null,cm,sm)),l["\u0275did"](9,245760,null,0,am,[l.Injector,l.ElementRef,s,Wg,Cn],null,null),(e()(),l["\u0275eld"](10,0,null,null,0,"div",[["class","wp-table-timeline--body"]],null,null,null,null,null))],function(e,n){e(n,3,0),e(n,5,0),e(n,9,0)},null)}l["\u0275ccf"]("wp-timeline-container",Wg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-container",[],null,null,null,pm,dm)),l["\u0275did"](1,4374528,null,0,Wg,[l.Injector,l.ElementRef,s,zg,rn,Tn,M,On,Cn,zn,Qe,B.a],null,null)],null,null)},{},{},[]);var hm=[[".wp-table--drag-and-drop-handle:hover{cursor:move}"]],fm=l["\u0275crt"]({encapsulation:2,styles:hm,data:{}});function gm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](1,245760,null,0,Rl,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)}function mm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"th",[["class","wp-table--manual-sort-th -short hide-when-print"]],null,null,null,null,null))],null,null)}function vm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"th",[["class","wp-table--table-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"sortHeader",[["opColumnsContextMenu",""]],null,null,null,Gf,Nf)),l["\u0275did"](2,4374528,null,0,Af,[Qe,We,$e,In,l.ElementRef,B.a],{headerColumn:[0,"headerColumn"],locale:[1,"locale"],table:[2,"table"]},null),l["\u0275did"](3,4210688,null,0,Yf,[l.ElementRef,Qa,qe,We,$e,Qe,Mn.b,l.Injector,B.a],{column:[0,"column"],table:[1,"table"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit,n.context.$implicit.custom_field&&n.context.$implicit.custom_field.name_locale||t.locale,t.workPackageTable),e(n,3,0,n.context.$implicit,t.workPackageTable)},null)}function bm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"accessible-by-keyboard",[["linkClass","wp-table--columns-selection"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.openTableConfigurationModal()&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-button icon-small icon-settings"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,1,0,"wp-table--columns-selection",t.text.configureTable,t.text.configureTable);e(n,3,0,"icon-button icon-small icon-settings")},null)}function ym(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"th",[["class","wp-table--configuration-modal--trigger wp-table--context-menu-th -short hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,bm)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,3,0,n.component.configuration.columnMenuEnabled)},null)}function wm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"tbody",[["class","work-package--empty-tbody"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"tr",[["id","empty-row-notification"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,7,"td",[],[[1,"colspan",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 icon-context"]],null,null,null,Zt,Gt)),l["\u0275did"](5,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](6,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](8,null,["",""])),(e()(),l["\u0275ted"](9,null,[" "," "]))],function(e,n){e(n,5,0,"icon-info1 icon-context")},function(e,n){var t=n.component;e(n,2,0,t.columns.length+1),e(n,8,0,t.text.noResults.title),e(n,9,0,t.text.noResults.description)})}function km(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"tbody",[["wpInlineCreate",""]],null,[[null,"keydown.escape"]],function(e,n,t){var i=!0;"keydown.escape"===n&&(i=!1!==l["\u0275nov"](e,1).resetRow()&&i);return i},ig,Zf)),l["\u0275did"](1,770048,null,0,ad,[l.Injector,l.ElementRef,f.a,B.a,y,Hn,ur,wc,qe,Pa,Dn],{table:[0,"table"],projectIdentifier:[1,"projectIdentifier"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackageTable,t.projectIdentifier)},null)}function Cm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-packages--tabletimeline--timeline--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,2).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,2).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,2).handleMouseUp(t)&&i);return i},xs,Ss)),l["\u0275did"](2,245760,null,0,Rs,[js,l.ElementRef,h.O,_s],{elementClass:[0,"elementClass"],resizeEvent:[1,"resizeEvent"],localStorageKey:[2,"localStorageKey"]},null)],function(e,n){e(n,2,0,"work-packages-tabletimeline--timeline-side","wp-resize.timeline","openProject-timelineFlexBasis")},null)}function Im(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,32,"div",[["class","work-packages-split-view--tabletimeline-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,26,"div",[["class","work-packages-tabletimeline--table-side work-package-table--container __hidden_overflow_container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,25,"table",[["class","keyboard-accessible-list generic-table work-package-table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,gm)),l["\u0275did"](5,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](6,0,null,null,5,"caption",[["class","hidden-for-sighted"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](8,null,["",""])),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["id","wp-table-sort-summary"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](11,null,["",""])),(e()(),l["\u0275eld"](12,0,null,null,7,"thead",[["class","-sticky"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,mm)),l["\u0275did"](15,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,vm)),l["\u0275did"](17,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ym)),l["\u0275did"](19,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,wm)),l["\u0275did"](21,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](22,0,null,null,0,"tbody",[["class","results-tbody work-package--results-tbody"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,km)),l["\u0275did"](24,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](25,0,null,null,2,"tfoot",[],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,1,"tr",[["wpTableSumsRow",""]],null,null,null,null,null)),l["\u0275did"](27,4210688,null,0,og,[l.Injector,l.ElementRef,y,s,Aa,B.a],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,Cm)),l["\u0275did"](29,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](30,0,null,null,2,"div",[["class","work-packages-tabletimeline--timeline-side"]],null,null,null,null,null)),(e()(),l["\u0275eld"](31,0,null,null,1,"wp-timeline-container",[],null,null,null,pm,dm)),l["\u0275did"](32,4374528,null,0,Wg,[l.Injector,l.ElementRef,s,zg,rn,Tn,M,On,Cn,zn,Qe,B.a],null,null)],function(e,n){var t=n.component;e(n,5,0,l["\u0275EMPTY_ARRAY"].constructor(t.columns.length+1)),e(n,15,0,t.configuration.dragAndDropEnabled),e(n,17,0,t.columns),e(n,19,0,t.configuration.columnMenuEnabled||t.configuration.actionsColumnEnabled),e(n,21,0,!t.isEmbedded&&t.query&&0===t.rowcount),e(n,24,0,t.tableElement&&t.configuration.inlineCreateEnabled),e(n,29,0,!t.configuration.isEmbedded)},function(e,n){var t=n.component;e(n,8,0,t.text.tableSummary),e(n,11,0,t.text.tableSummaryHints)})}var Pm=l["\u0275ccf"]("wp-table",zg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-table",[],null,null,null,Im,fm)),l["\u0275did"](1,245760,null,0,zg,[l.ElementRef,l.Injector,s,y,Mn.b,Qa,B.a,l.ChangeDetectorRef,$e,M,qe],null,null)],function(e,n){e(n,1,0)},null)},{projectIdentifier:"projectIdentifier",configurationObject:"configuration"},{},[]),jm=function(e){function n(n,t,l){var i=e.call(this,n,l)||this;return i.paginationService=n,i.wpTablePagination=t,i.I18n=l,i}return r.d(n,e),n.prototype.newPagination=function(){var e=this;this.wpTablePagination.observeUntil(Object(Ln.a)(this)).subscribe(function(n){e.pagination=n.current,e.update()})},n.prototype.ngOnDestroy=function(){},n.prototype.selectPerPage=function(e){this.paginationService.setPerPage(e),this.wpTablePagination.updateFromObject({page:1,perPage:e})},n.prototype.showPage=function(e){this.wpTablePagination.updateFromObject({page:e})},n}(ql),_m=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Rm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","pagination--item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,ol,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function Sm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Rm)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\u2026"]))],function(e,n){e(n,2,0,n.component.prePageNumbers)},null)}function xm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"em",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function Tm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.parent.context.$implicit)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,ol,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,0,0,n.parent.context.$implicit)})}function Om(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-current":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,xm)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Tm)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit==t.pagination.page);e(n,1,0,"pagination--item pagination-number",l),e(n,4,0,n.context.$implicit==t.pagination.page),e(n,6,0,n.context.$implicit!=t.pagination.page)},null)}function Em(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\u2026"]))],null,null)}function Dm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Om)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Em)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.pageNumbers),e(n,4,0,t.postPageNumbers.length)},null)}function Fm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,ol,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function Am(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Fm)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,n.component.postPageNumbers)},null)}function Nm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","hidden-for-sighted"],["id","pagination-empty-text"],["tabindex","0"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.no_other_page)})}function Mm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.selectPerPage(e.parent.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,ol,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function Vm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function qm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","pagination--item"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-current":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Mm)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Vm)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit==t.pagination.perPage);e(n,1,0,"pagination--item",l),e(n,4,0,n.context.$implicit!=t.pagination.perPage),e(n,6,0,n.context.$implicit==t.pagination.perPage)},null)}function Lm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","pagination--options"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"li",[["class","pagination--label"]],[[8,"textContent",0],[8,"title",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,qm)),l["\u0275did"](4,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.perPageOptions)},function(e,n){var t=n.component;e(n,2,0,t.text.per_page,l["\u0275inlineInterpolate"](1,"",t.text.per_page,""))})}function $m(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,22,"div",[["class","pagination"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,19,"nav",[["class","pagination--pages"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,18,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"a",[["href",""],["id","pagination--prev-link"],["rel","prev start"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(o.pagination.page-1)&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275ted"](-1,null,["<"])),(e()(),l["\u0275and"](16777216,null,null,1,null,Sm)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Dm)),l["\u0275did"](10,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Am)),l["\u0275did"](12,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](13,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,2,"a",[["class","pagination--next-link"],["href",""],["id","pagination--next-link"],["rel","next"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,15).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,15).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(o.pagination.page+1)&&i);return i},null,null)),l["\u0275did"](15,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275ted"](-1,null,[">"])),(e()(),l["\u0275eld"](17,0,null,null,3,"li",[["class","pagination--range"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Nm)),l["\u0275did"](20,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Lm)),l["\u0275did"](22,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.prePageNumbers.length>0),e(n,10,0,t.pageNumbers.length>1),e(n,12,0,t.postPageNumbers.length),e(n,20,0,1===t.pageNumbers.length),e(n,22,0,t.showPerPageOptions())},function(e,n){var t=n.component;e(n,3,0,1==t.pagination.page),e(n,4,0,t.text.label_previous),e(n,13,0,!(t.pagination.total&&t.pagination.page<t.pageNumbers[t.pageNumbers.length-1])),e(n,14,0,t.text.label_next),e(n,18,0,t.currentRange)})}function Hm(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,$m)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.pagination&&t.isVisible&&t.pagination.total)},null)}l["\u0275ccf"]("wp-table-pagination",jm,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-table-pagination",[],null,null,null,Hm,_m)),l["\u0275did"](1,245760,null,0,jm,[ke,Ce,B.a],null,null)],function(e,n){e(n,1,0)},null)},{totalEntries:"totalEntries",hideForSinglePageResults:"hideForSinglePageResults",calculatePerPage:"calculatePerPage"},{updateResults:"updateResults"},[]);var Bm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function zm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-container",[],null,null,null,Ff,Tf)),l["\u0275did"](1,180224,null,0,xf,[en,Ze],{showFilterButton:[0,"showFilterButton"],filterButtonText:[1,"filterButtonText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.configuration.showFilterButton,t.configuration.filterButtonText)},null)}function Wm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,zm)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"wp-table",[["class","work-packages-split-view--tabletimeline-content"]],null,null,null,Im,fm)),l["\u0275did"](4,245760,null,0,zg,[l.ElementRef,l.Injector,s,y,Mn.b,Qa,B.a,l.ChangeDetectorRef,$e,M,qe],{projectIdentifier:[0,"projectIdentifier"],configurationObject:[1,"configurationObject"]},null),(e()(),l["\u0275eld"](5,0,null,null,2,"div",[["class","work-packages-split-view--tabletimeline-footer hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"wp-table-pagination",[],null,null,null,Hm,_m)),l["\u0275did"](7,245760,null,0,jm,[ke,Ce,B.a],{hideForSinglePageResults:[0,"hideForSinglePageResults"],calculatePerPage:[1,"calculatePerPage"]},null)],function(e,n){var t=n.component;e(n,2,0,t.configuration.withFilters),e(n,4,0,t.projectIdentifier,t.configuration);e(n,7,0,!0,t.configuration.forcePerPageOption)},null)}function Qm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.error.message||t.error)})}function Um(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","work-packages-embedded-view--container loading-indicator--location"]],[[1,"data-indicator-name",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-hierarchy-disabled":0,"-compact-tables":1,"-external-height":2}),(e()(),l["\u0275and"](16777216,null,null,1,null,Wm)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Qm)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,!t.configuration.hierarchyToggleEnabled,t.configuration.compactTableStyle,t.externalHeight);e(n,1,0,"work-packages-embedded-view--container loading-indicator--location",l),e(n,4,0,t.renderTable),e(n,6,0,t.error)},function(e,n){e(n,0,0,n.component.uniqueEmbeddedTableName)})}var Km=l["\u0275ccf"]("wp-embedded-table",et,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](1,4964352,null,0,et,[l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{providedConfiguration:"configuration",uniqueEmbeddedTableName:"uniqueEmbeddedTableName",initialLoadingIndicator:"initialLoadingIndicator",queryId:"queryId",queryProps:"queryProps",tableActions:"tableActions",externalHeight:"externalHeight"},{onError:"onError",onQueryLoaded:"onQueryLoaded"},[]),Gm=function(e){function n(n,t,l,i,o,r){var u=e.call(this,n,t)||this;return u.injector=n,u.workPackage=t,u.identifier=l,u.title=i,u.applicable=o,u.onClick=r,u}return r.d(n,e),n.factoryFor=function(e,t,l,i){return void 0===i&&(i=function(){return!0}),function(o,r){return new n(o,r,e,t,i,l)}},n.prototype.buildElement=function(){var e=this;if(!this.applicable(this.workPackage))return null;var n=document.createElement("a");return n.title=this.title,n.href="#",n.classList.add("wp-table-context-menu-icon","wp-table-action--unlink"),n.dataset.workPackageId=this.workPackage.id,n.appendChild(Pe("icon","icon-close")),jQuery(n).click(function(n){n.preventDefault(),e.onClick(e.workPackage)}),n},n}(Ie),Ym=function(){function e(e){this.queryUrlParamsHelper=e,this.hidden=!1}return e.prototype.refreshTable=function(){this.embeddedTable.isInitialized&&this.embeddedTable.loadQuery(!0,!1)},e.prototype.handleQueryLoaded=function(e){if(this.query instanceof Pd){var n=this.projectValuesCount(this.query),t=this.projectValuesCount(e);null!==n&&null===t&&(this.hidden=!0),n&&t&&n>0&&0===t&&(this.hidden=!0)}},e.prototype.projectValuesCount=function(e){var n=e.filters.find(function(e){return"project"===e.id});return n?n.values.length:null},e.prototype.buildQueryProps=function(){return this.query instanceof Pd?this.queryUrlParamsHelper.buildV3GetQueryFromQueryResource(this.query,{valid_subset:!0},{id:this.workPackage.id}):this.query},e}(),Zm=function(e){function n(n,t,l,i,o,r){var u=e.call(this,o)||this;return u.wpRelationsHierarchyService=n,u.PathHelper=t,u.wpInlineCreate=l,u.wpCacheService=i,u.queryUrlParamsHelper=o,u.I18n=r,u.addExistingChildEnabled=!1,u.tableActions=[Gm.factoryFor("remove-child-action",u.I18n.t("js.relation_buttons.remove_child"),function(e){u.childrenEmbeddedTable.loadingIndicator=u.wpRelationsHierarchyService.removeChild(e)},function(e){return!!e.changeParent})],u}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.wpInlineCreate.referenceTarget=this.workPackage,this.queryProps=this.buildQueryProps(),this.wpCacheService.observe(this.workPackage.id).pipe(Object(g.a)(function(){return e.embeddedTable&&e.embeddedTable.isInitialized}),Object(Ln.b)(this)).subscribe(function(){return e.refreshTable()})},n.prototype.ngOnDestroy=function(){},n}(Ym),Jm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Xm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.component.group.name)})}function ev(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Xm)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,2,"wp-embedded-table",[],null,[[null,"onQueryLoaded"]],function(e,n,t){var l=!0,i=e.component;"onQueryLoaded"===n&&(l=!1!==i.handleQueryLoaded(t)&&l);return l},Um,Bm)),l["\u0275did"](4,4964352,[[1,4],[2,4],["embeddedTable",4]],0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],initialLoadingIndicator:[1,"initialLoadingIndicator"],queryProps:[2,"queryProps"],tableActions:[3,"tableActions"]},{onQueryLoaded:"onQueryLoaded"}),l["\u0275pod"](5,{actionsColumnEnabled:0,hierarchyToggleEnabled:1,inlineCreateEnabled:2,compactTableStyle:3,columnMenuEnabled:4,contextMenuEnabled:5,projectIdentifier:6,projectContext:7})],function(e,n){var t=n.component;e(n,2,0,t.group);var l=e(n,5,0,!0,!1,!0,!0,!1,!1,t.workPackage.project.idFromLink,!1);e(n,4,0,l,!1,t.queryProps,t.tableActions)},null)}function nv(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{embeddedTable:0}),l["\u0275qud"](671088640,2,{childrenEmbeddedTable:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,ev)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,3,0,!n.component.hidden)},null)}var tv=l["\u0275ccf"]("wp-children-query",Zm,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"wp-children-query",[],null,null,null,nv,Jm)),l["\u0275prd"](512,null,wc,dd,[l.Injector,ia]),l["\u0275did"](2,245760,null,0,Zm,[ia,ve,wc,yn,Ee,B.a],null,null)],function(e,n){e(n,2,0)},null)},{workPackage:"workPackage",query:"query",group:"group",addExistingChildEnabled:"addExistingChildEnabled"},{},[]),lv=function(){function e(e,n,t,l){this.wpRelationsHierarchyService=e,this.wpCacheService=n,this.PathHelper=t,this.I18n=l,this.showEditForm=!1,this.text={parentHeadline:this.I18n.t("js.relations_hierarchy.parent_headline"),childrenHeadline:this.I18n.t("js.relations_hierarchy.children_headline")}}return e.prototype.ngOnInit=function(){var e=this;this.workPackagePath=this.PathHelper.workPackagePath(this.workPackage.id),this.canModifyHierarchy=!!this.workPackage.changeParent,this.canAddRelation=!!this.workPackage.addRelation,this.childrenQueryProps={filters:JSON.stringify([{parent:{operator:"=",values:[this.workPackage.id]}}]),"columns[]":["id","type","subject","status"],showHierarchies:!1},this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.workPackage=n;var t=[];e.workPackage.parent&&(t.push(e.workPackage.parent.id.toString()),e.wpCacheService.loadWorkPackage(e.workPackage.parent.id).values$().pipe(Object(F.a)(1)).subscribe(function(n){e.workPackage.parent=n})),e.wpCacheService.requireAll(t)})},e.prototype.ngOnDestroy=function(){},e}(),iv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ov(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,38,"div",[["class","wp-relations-hierarchy-section wp-relations--children"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,34,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](33,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),l["\u0275prd"](512,null,zn,zn,[y]),l["\u0275prd"](512,null,ia,ia,[h.G,s,zn,On,ve,yn]),(e()(),l["\u0275eld"](36,0,null,null,2,"wp-children-query",[],null,null,null,nv,Jm)),l["\u0275prd"](512,null,wc,dd,[l.Injector,ia]),l["\u0275did"](38,245760,null,0,Zm,[ia,ve,wc,yn,Ee,B.a],{workPackage:[0,"workPackage"],query:[1,"query"],addExistingChildEnabled:[2,"addExistingChildEnabled"]},null)],function(e,n){var t=n.component;e(n,38,0,t.workPackage,t.childrenQueryProps,!0)},function(e,n){e(n,3,0,n.component.text.childrenHeadline)})}var rv=l["\u0275ccf"]("wp-relations-hierarchy",lv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-hierarchy",[],null,null,null,ov,iv)),l["\u0275did"](1,245760,null,0,lv,[ia,yn,ve,B.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",relationType:"relationType"},{},[]),uv=t("909l"),av=function(){function e(e,n,t){this.I18n=e,this.wpRelations=n,this.wpCacheService=t,this.relationGroups={},this.relationGroupKeys=[],this.relationsPresent=!1,this.groupByWorkPackageType=!1,this.text={relations_header:this.I18n.t("js.work_packages.tabs.relations")},this.currentRelations=[]}return e.prototype.ngOnInit=function(){var e=this;this.canAddRelation=!!this.workPackage.addRelation,this.wpRelations.state(this.workPackage.id).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.loadedRelations(n)}),this.wpRelations.require(this.workPackage.id),this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.workPackage=n})},e.prototype.ngOnDestroy=function(){},e.prototype.getRelatedWorkPackages=function(e){var n=this,t=e.map(function(e){return n.wpCacheService.loadWorkPackage(e).values$()});return uv.a.apply(void 0,t)},e.prototype.getRelatedWorkPackageId=function(e){var n=e.ids;return e.to.href===this.workPackage.href?n.from:n.to},e.prototype.toggleGroupBy=function(){this.groupByWorkPackageType=!this.groupByWorkPackageType,this.buildRelationGroups()},e.prototype.buildRelationGroups=function(){var e=this;_.isNil(this.currentRelations)||(this.relationGroups=_.groupBy(this.currentRelations,function(n){if(e.groupByWorkPackageType)return n.type.name;var t=n.relatedBy.normalizedType(e.workPackage);return e.I18n.t("js.relation_labels."+t)}),this.relationGroupKeys=_.keys(this.relationGroups),this.relationsPresent=_.size(this.relationGroups)>0)},e.prototype.loadedRelations=function(e){var n=this,t=[],l=[];if(0===_.size(e))return this.currentRelations=[],this.buildRelationGroups();_.each(e,function(e){var i=n.getRelatedWorkPackageId(e);t.push(i),l[i]=e}),this.getRelatedWorkPackages(t).pipe(Object(F.a)(1)).subscribe(function(e){n.currentRelations=e.map(function(e){return e.relatedBy=l[e.id],e}),n.buildRelationGroups()})},e}(),sv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function cv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","wp-relations-hierarchy-section"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,3,0,n.component.text.relations_header)})}function dv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-relations-group",[],null,[[null,"onToggleGroupBy"]],function(e,n,t){var l=!0,i=e.component;"onToggleGroupBy"===n&&(l=!1!==i.toggleGroupBy()&&l);return l},ph,ah)),l["\u0275did"](2,49152,null,0,uh,[B.a],{relatedWorkPackages:[0,"relatedWorkPackages"],workPackage:[1,"workPackage"],header:[2,"header"],firstGroup:[3,"firstGroup"],groupByWorkPackageType:[4,"groupByWorkPackageType"]},{onToggleGroupBy:"onToggleGroupBy"})],function(e,n){var t=n.component;e(n,2,0,t.relationGroups[n.context.$implicit],t.workPackage,n.context.$implicit,n.context.first,t.groupByWorkPackageType)},null)}function pv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-create",[],null,null,null,bh,fh)),l["\u0275did"](1,49152,null,0,hh,[B.a,Cn,On,zn,yn],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}function hv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","loading-indicator--location"],["data-indicator-name","relation-groups"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,cv)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,dv)),l["\u0275did"](4,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,pv)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,1,"wp-relations-hierarchy",[],null,null,null,ov,iv)),l["\u0275did"](8,245760,null,0,lv,[ia,yn,ve,B.a],{workPackage:[0,"workPackage"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.relationsPresent),e(n,4,0,t.relationGroupKeys),e(n,6,0,t.canAddRelation),e(n,8,0,t.workPackage)},null)}l["\u0275ccf"]("wp-relations",av,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations",[],null,null,null,hv,sv)),l["\u0275did"](1,245760,null,0,av,[B.a,Cn,yn],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var fv=function(){function e(e,n,t){this.I18n=e,this.$transition=n,this.wpCacheService=t}return e.prototype.ngOnInit=function(){var e=this,n=this.workPackageId||this.$transition.params("to").workPackageId;this.wpCacheService.loadWorkPackage(n).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.workPackageId=n.id,e.workPackage=n})},e.prototype.ngOnDestroy=function(){},e}(),gv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function mv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","detail-panel-description detail-panel--relations detail-panel--autocomplete-target"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","detail-panel-description-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"wp-relations",[],null,null,null,hv,sv)),l["\u0275did"](3,245760,null,0,av,[B.a,Cn,yn],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,3,0,n.component.workPackage)},null)}function vv(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,mv)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var bv=l["\u0275ccf"]("wp-relations-tab",fv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-tab",[],null,null,null,vv,gv)),l["\u0275did"](1,245760,null,0,fv,[B.a,h.J,yn],null,null)],function(e,n){e(n,1,0)},null)},{workPackageId:"workPackageId"},{},[]),yv=function(){function e(e,n,t,l,i,o,r,u){this.I18n=e,this.elementRef=n,this.wpWatchersService=t,this.$transition=l,this.wpNotificationsService=i,this.loadingIndicator=o,this.wpCacheService=r,this.pathHelper=u,this.error=!1,this.noResults=!1,this.allowedToView=!1,this.allowedToAdd=!1,this.allowedToRemove=!1,this.watching=[],this.text={loading:this.I18n.t("js.watchers.label_loading"),loadingError:this.I18n.t("js.watchers.label_error_loading"),autocomplete:{placeholder:this.I18n.t("js.watchers.typeahead_placeholder")}}}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.workPackageId=this.$transition.params("to").workPackageId,this.wpCacheService.loadWorkPackage(this.workPackageId).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(n){e.workPackage=n,e.loadCurrentWatchers()}),this.availableWatchersPath=this.pathHelper.api.v3.work_packages.id(this.workPackageId).available_watchers},e.prototype.loadCurrentWatchers=function(){var e=this;this.error=!1,this.allowedToView=!!this.workPackage.watchers,this.allowedToAdd=!!this.workPackage.addWatcher,this.allowedToRemove=!!this.workPackage.removeWatcher,this.allowedToView?this.wpWatchersService.require(this.workPackage).then(function(n){e.watching=n}).catch(function(n){e.wpNotificationsService.showError(n,e.workPackage)}):this.error=!0},Object.defineProperty(e.prototype,"loadingPromise",{set:function(e){this.loadingIndicator.wpDetails.promise=e},enumerable:!0,configurable:!0}),e.prototype.addWatcher=function(e){var n=this;this.loadingPromise=this.workPackage.addWatcher.$link.$fetch({user:{href:e.href}}).then(function(){n.wpWatchersService.require(n.workPackage,!0),n.wpCacheService.loadWorkPackage(n.workPackage.id,!0)}).catch(function(e){return n.wpNotificationsService.showError(e,n.workPackage)})},e.prototype.removeWatcher=function(e){var n=this;this.workPackage.removeWatcher.$link.$prepare({user_id:e.id})().then(function(){_.remove(n.watching,function(n){return n.href===e.href}),n.wpWatchersService.require(n.workPackage,!0),n.wpCacheService.loadWorkPackage(n.workPackage.id,!0)}).catch(function(e){return n.wpNotificationsService.showError(e,n.workPackage)})},e.prototype.ngOnDestroy=function(){},e}(),wv=function(){function e(e,n){this.I18n=e,this.panelCtrl=n,this.deleting=!1}return e.prototype.ngOnInit=function(){this.text={remove:this.I18n.t("js.label_remove_watcher",{name:this.watcher.name})}},e.prototype.remove=function(){this.deleting=!0,this.panelCtrl.removeWatcher(this.watcher)},e}(),kv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Cv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[["class","form--selected-value--container"],["focus-within","accessible-by-keyboard"]],null,null,null,null,null)),l["\u0275did"](1,212992,null,0,eo,[l.ElementRef],null,null),(e()(),l["\u0275eld"](2,0,null,null,7,"span",[["class","form--selected-value"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,6,"span",[],null,null,null,null,null)),l["\u0275did"](4,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pod"](5,{deleting:0}),(e()(),l["\u0275eld"](6,0,null,null,3,"a",[],[[1,"href",4]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"user-avatar",[["data-class-list","avatar-mini"]],[[1,"data-user-name",0],[1,"data-user-id",0]],null,null,Ti,Ri)),l["\u0275did"](8,4243456,null,0,ji,[l.ElementRef,l.ChangeDetectorRef,_i.DomSanitizer,ve],null,null),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["class","work-package--watcher-name"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,3,"accessible-by-keyboard",[["linkClass","form--selected-value--remover"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.remove()&&l);return l},al,ul)),l["\u0275did"](11,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](12,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove"]],null,null,null,Zt,Gt)),l["\u0275did"](13,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0);var l=e(n,5,0,t.deleting);e(n,4,0,l);e(n,11,0,"form--selected-value--remover",t.text.remove,t.text.remove);e(n,13,0,"icon-remove",t.text.remove)},function(e,n){var t=n.component;e(n,6,0,t.watcher.showUser.href),e(n,7,0,t.watcher.name,t.watcher.id),e(n,9,0,t.watcher.name)})}l["\u0275ccf"]("wp-watcher-entry",wv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watcher-entry",[],null,null,null,Cv,kv)),l["\u0275did"](1,114688,null,0,wv,[B.a,yv],null,null)],function(e,n){e(n,1,0)},null)},{watcher:"watcher"},{},[]);var Iv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Pv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.component.text.loadingError)})}function jv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watcher-entry",[],null,null,null,Cv,kv)),l["\u0275did"](1,114688,null,0,wv,[B.a,yv],{watcher:[0,"watcher"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function _v(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,16,"div",[["id","detail-panel-watchers"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Pv)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,13,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,4,"div",[["class","work-package--watchers form--selected-value--list"]],null,null,null,null,null)),l["\u0275did"](5,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](6,{"-read-only":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,jv)),l["\u0275did"](8,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](9,0,null,null,7,"div",[["class","work-package--watchers-lookup hide-when-print"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,6,"form",[["name","watcherForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,12).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,12).onReset()&&i);return i},null,null)),l["\u0275did"](11,16384,null,0,Pt.t,[],null,null),l["\u0275did"](12,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](14,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](15,0,null,null,1,"user-autocompleter",[["class","wp-watcher--autocomplete"]],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.addWatcher(t)&&l);return l},Mi,Fi)),l["\u0275did"](16,114688,null,0,Di,[l.ElementRef,Y,B.a,ve],{clearAfterSelection:[0,"clearAfterSelection"],url:[1,"url"]},{onChange:"onChange"})],function(e,n){var t=n.component;e(n,2,0,t.error);var l=e(n,6,0,!t.allowedToRemove);e(n,5,0,"work-package--watchers form--selected-value--list",l),e(n,8,0,t.watching);e(n,16,0,!0,t.availableWatchersPath)},function(e,n){var t=n.component;e(n,3,0,t.error),e(n,9,0,!t.allowedToAdd),e(n,10,0,l["\u0275nov"](n,14).ngClassUntouched,l["\u0275nov"](n,14).ngClassTouched,l["\u0275nov"](n,14).ngClassPristine,l["\u0275nov"](n,14).ngClassDirty,l["\u0275nov"](n,14).ngClassValid,l["\u0275nov"](n,14).ngClassInvalid,l["\u0275nov"](n,14).ngClassPending)})}var Rv=l["\u0275ccf"]("wp-watchers-tab",yv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watchers-tab",[],null,null,null,_v,Iv)),l["\u0275did"](1,245760,null,0,yv,[B.a,l.ElementRef,ns,h.J,On,Sn,yn,ve],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Sv=function(e){function n(n,t,l){var i=e.call(this,n,t,l)||this;return i.wpCacheService=n,i.I18n=t,i.wpActivity=l,i.latestActivityInfo=[],i.trackByHref=Np.trackByHref,i}return r.d(n,e),n.prototype.ngOnInit=function(){this.workPackageId=this.workPackage.id,e.prototype.ngOnInit.call(this)},n.prototype.shouldShowToggler=function(){return!1},n.prototype.updateActivities=function(n){e.prototype.updateActivities.call(this,n),this.latestActivityInfo=this.latestActivities()},n.prototype.latestActivities=function(e){var n=this;if(void 0===e&&(e=3),this.reverse)return(t=this.unfilteredActivities.slice(0,e)).map(function(e,t){return n.info(e,t)});var t=this.unfilteredActivities.slice(-e),l=this.unfilteredActivities.length-t.length;return t.map(function(e,t){return n.info(e,l+t)})},n}(Mp),xv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Tv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-package-details-activities-activity"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"activity-entry",[],null,null,null,Rp,Pp)),l["\u0275did"](2,114688,null,0,Ip,[ve,B.a],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],isInitial:[3,"isInitial"]},null)],function(e,n){var t=n.component.workPackage,l=n.context.$implicit.activity,i=n.context.$implicit.number(n.context.$implicit.isReversed),o=n.context.$implicit.isInitial();e(n,2,0,t,l,i,o)},null)}function Ov(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-package-details-activities-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,[[1,2]],null,1,null,Tv)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.latestActivityInfo,t.trackByHref)},null)}function Ev(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"work-package-comment",[],null,null,null,Ap,xp)),l["\u0275did"](1,245760,null,1,Sp,[l.ElementRef,l.Injector,ap,rr,Ne,Sn,yn,On,Tn,B.a],{workPackage:[0,"workPackage"]},null),l["\u0275qud"](603979776,1,{template:0}),(e()(),l["\u0275and"](0,[[1,2]],null,0,null,Ov))],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("newest-activity-on-overview",Sv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"newest-activity-on-overview",[],null,null,null,Ev,xv)),l["\u0275did"](1,245760,null,0,Sv,[yn,B.a,rr],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var Dv=function(){function e(e,n,t){var l=this;this.I18n=e,this.$state=n,this.wpCacheService=t,this.tabName=this.I18n.t("js.label_latest_activity"),this.workPackageId=this.$state.params.workPackageId,t.loadWorkPackage(this.workPackageId).values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(e){return l.workPackage=e})}return e.prototype.ngOnDestroy=function(){},e}(),Fv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Av(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"wp-single-view",[],null,null,null,$d,_d)),l["\u0275prd"](512,null,$a,$a,[]),l["\u0275did"](2,245760,null,0,jd,[B.a,Vn,ve,s,rn,ar,Y,Aa,yn,at,l.Injector,l.ElementRef,$a,_s],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,2,0,n.component.workPackage)},null)}function Nv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","attributes-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"newest-activity-on-overview",[],null,null,null,Ev,xv)),l["\u0275did"](5,245760,null,0,Sv,[yn,B.a,rr],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,5,0,n.component.workPackage)},function(e,n){e(n,3,0,n.component.tabName)})}function Mv(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Av)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Nv)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage),e(n,3,0,t.workPackage)},null)}var Vv=l["\u0275ccf"]("wp-overview-tab",Dv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-overview-tab",[],null,null,null,Mv,Fv)),l["\u0275did"](1,180224,null,0,Dv,[B.a,h.G,yn],null,null)],null,null)},{},{},[]),qv=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isBusy=!1,n.ConfigurationService=n.injector.get(Ne),n}return r.d(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"comment"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.rawValue=this.rawValue||""},n}(pu),Lv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function $v(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.handler.handleUserSubmit()&&l);"onCancel"===n&&(l=!1!==i.handler.handleUserCancel()&&l);return l},du,su)),l["\u0275did"](1,49152,null,0,au,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,1,0,t.text.cancel,t.text.save,t.field)},null)}function Hv(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{instance:0}),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","textarea-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-ckeditor--wrapper op-ckeditor-element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"op-ckeditor",[],null,[[null,"onContentChange"],[null,"onInitializationFailed"],[null,"onInitialized"]],function(e,n,t){var l=!0,i=e.component;"onContentChange"===n&&(l=!1!==i.onContentChange(t)&&l);"onInitializationFailed"===n&&(l=!1!=(i.initializationError=!0)&&l);"onInitialized"===n&&(l=!1!==i.onCkeditorSetup(t)&&l);return l},Vo,No)),l["\u0275did"](4,245760,[[1,4]],0,Fo,[l.ElementRef,Tn,B.a,Ne,Do],{ckEditorType:[0,"ckEditorType"],context:[1,"context"],_content:[2,"_content"]},{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"}),(e()(),l["\u0275and"](16777216,null,null,1,null,$v)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.editorType,t.ckEditorContext,t.rawValue),e(n,6,0,!(t.handler.inEditMode||t.initializationError))},null)}var Bv=l["\u0275ccf"]("ng-component",qv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Hv,Lv)),l["\u0275did"](1,245760,null,0,qv,[B.a,l.ElementRef,ar,gr,hr,fr,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),zv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Wv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,14,"div",[["class","loading-indicator--location"],["data-indicator-name","relationAddChild"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,13,"div",[["class","wp-relations-create--form wp-relations--add-form"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","wp-relations-input-section"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"wp-relations-autocomplete",[],null,[[null,"onReferenced"]],function(e,n,t){var l=!0,i=e.component;"onReferenced"===n&&(l=!1!==i.onReferenced(t)&&l);return l},la,ea)),l["\u0275did"](4,1097728,null,0,Ju,[y,ve,On,Vn,Y,gn,l.ChangeDetectorRef,B.a],{workPackage:[0,"workPackage"],filterCandidatesFor:[1,"filterCandidatesFor"],additionalFilters:[2,"additionalFilters"]},{onReferenced:"onReferenced"}),(e()(),l["\u0275eld"](5,0,null,null,9,"div",[["class","wp-relations-controls-section relation-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--save"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.addExisting()&&l);return l},al,ul)),l["\u0275did"](7,49152,null,0,rl,[],{isDisabled:[0,"isDisabled"],linkClass:[1,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](8,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark"]],null,null,null,Zt,Gt)),l["\u0275did"](9,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["\u0275ted"](-1,null,[" \xa0 "])),(e()(),l["\u0275eld"](11,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--cancel"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.cancel()&&l);return l},al,ul)),l["\u0275did"](12,49152,null,0,rl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](13,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove"]],null,null,null,Zt,Gt)),l["\u0275did"](14,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,4,0,t.workPackage,t.relationType,t.queryFilters);e(n,7,0,t.isDisabled,"wp-create-relation--save");e(n,9,0,"icon-checkmark",t.text.save);e(n,12,0,"wp-create-relation--cancel");e(n,14,0,"icon-remove",t.text.abort)},null)}var Qv=l["\u0275ccf"]("ng-component",cd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Wv,zv)),l["\u0275did"](1,49152,null,0,cd,[ad,wc,yn,Cn,On,zn,Ee,y,B.a],null,null)],null,null)},{},{},[]),Uv=function(){return function(){}}(),Kv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Gv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,33,"div",[["class","work-packages-page--ui-view"],["wp-isolated-query-space",""]],null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](31,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275eld"](32,16777216,null,null,1,"ui-view",[],null,null,null,kt.c,kt.a)),l["\u0275did"](33,245760,null,0,Ki.a,[h.P,"UIView.PARENT_INJECT",l.ViewContainerRef],null,null)],function(e,n){e(n,33,0)},null)}var Yv=l["\u0275ccf"]("work-packages-base",Uv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"work-packages-base",[],null,null,null,Gv,Kv)),l["\u0275did"](1,49152,null,0,Uv,[],null,null)],null,null)},{},{},[]),Zv=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.I18n=n,i.wpFiltersService=t,i.wpTableFilters=l,i.initialized=!1,i.buttonId="work-packages-filter-toggle-button",i.iconClass="icon-filter",i.setupObserver(),i}return r.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"labelKey",{get:function(){return"js.button_filter"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textKey",{get:function(){return"js.toolbar.filter"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.prefix+this.text.label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterCount",{get:function(){return this.count},enumerable:!0,configurable:!0}),n.prototype.isActive=function(){return this.wpFiltersService.visible},n.prototype.performAction=function(e){this.toggleVisibility()},n.prototype.toggleVisibility=function(){this.wpFiltersService.toggleVisibility()},n.prototype.setupObserver=function(){var e=this;this.wpTableFilters.observeUntil(Object(Ln.a)(this)).subscribe(function(){e.count=e.wpTableFilters.currentlyVisibleFilters.length,e.initialized=!0})},n}(fi),Jv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Xv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","badge -secondary"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.filterCount)})}function eb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"button",[["class","button"]],[[1,"id",0],[1,"accesskey",0],[1,"title",0],[1,"aria-label",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.performAction(t)&&l);return l},null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-active":0}),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](4,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,3,"span",[["class","button--text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](6,null,[" "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,Xv)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,i=e(n,2,0,t.isActive());e(n,1,0,"button",i),e(n,4,0,l["\u0275inlineInterpolate"](1,"",t.iconClass," button--icon")),e(n,8,0,t.initialized)},function(e,n){var t=n.component;e(n,0,0,t.buttonId,t.accessKey,t.label,t.label,t.disabled),e(n,6,0,t.buttonText)})}l["\u0275ccf"]("wp-filter-button",Zv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-filter-button",[],null,null,null,eb,Jv)),l["\u0275did"](1,180224,null,0,Zv,[B.a,Ze,en],null,null)],null,null)},{},{},[]);var nb=function(e){function n(n,t,l,i,o){var r=e.call(this,t)||this;return r.$state=n,r.I18n=t,r.states=l,r.wpTableFocus=i,r.keepTab=o,r.accessKey=8,r.activeState="work-packages.list.details",r.listState="work-packages.list",r.buttonId="work-packages-details-view-button",r.buttonClass="toolbar-icon",r.iconClass="icon-info2",r.activateLabel=t.t("js.button_open_details"),r.deactivateLabel=t.t("js.button_close_details"),r}return r.d(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return this.isActive()?this.deactivateLabel:this.activateLabel},enumerable:!0,configurable:!0}),n.prototype.isToggle=function(){return!0},n.prototype.isActive=function(){return this.$state.includes(this.activeState)},n.prototype.performAction=function(e){this.isActive()?this.openListView():this.openDetailsView()},n.prototype.openListView=function(){var e={projectPath:this.projectIdentifier};_.extend(e,this.$state.params),this.$state.go(this.listState,e)},n.prototype.openDetailsView=function(){var e={workPackageId:this.wpTableFocus.focusedWorkPackage,projectPath:this.projectIdentifier};_.extend(e,this.$state.params),this.$state.go(this.keepTab.currentDetailsState,e)},n}(fi),tb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function lb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"button",[["type","button"]],[[8,"disabled",0],[1,"id",0],[1,"title",0],[1,"accesskey",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.performAction(t)&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-active":0}),l["\u0275did"](3,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](5,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component,i=l["\u0275inlineInterpolate"](1,"button ",t.buttonClass,""),o=e(n,2,0,t.isActive());e(n,1,0,i,o),e(n,5,0,l["\u0275inlineInterpolate"](1,"",t.iconClass," button--icon"))},function(e,n){var t=n.component;e(n,0,0,t.disabled||!t.isToggle()&&t.isActive(),t.buttonId,t.label,t.accessKey)})}l["\u0275ccf"]("wp-details-view-button",nb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-details-view-button",[],null,null,null,lb,tb)),l["\u0275did"](1,49152,null,0,nb,[h.G,B.a,s,Pa,_e],null,null)],null,null)},{},{},[]);var ib=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.I18n=n,i.cdRef=t,i.wpTableTimeline=l,i.buttonId="work-packages-timeline-toggle-button",i.iconClass="icon-view-timeline",i.minZoomLevel="days",i.maxZoomLevel="years",i.isAutoZoom=!1,i.isVisible=!1,i.isMaxLevel=!1,i.isMinLevel=!1,i.activateLabel=n.t("js.timelines.button_activate"),i.deactivateLabel=n.t("js.timelines.button_deactivate"),i.text.zoomIn=n.t("js.timelines.zoom.in"),i.text.zoomOut=n.t("js.timelines.zoom.out"),i.text.zoomAuto=n.t("js.timelines.zoom.auto"),i}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.wpTableTimeline.observeUntil(Object(Ln.a)(this)).subscribe(function(){e.isAutoZoom=e.wpTableTimeline.isAutoZoom(),e.isVisible=e.wpTableTimeline.isVisible,e.cdRef.detectChanges()}),this.wpTableTimeline.appliedZoomLevel$.values$().pipe(Object(Ln.b)(this)).subscribe(function(n){e.isMaxLevel=n===e.maxZoomLevel,e.isMinLevel=n===e.minZoomLevel,e.cdRef.detectChanges()})},n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"label",{get:function(){return this.isActive()?this.deactivateLabel:this.activateLabel},enumerable:!0,configurable:!0}),n.prototype.isToggle=function(){return!0},n.prototype.updateZoomWithDelta=function(e){this.wpTableTimeline.updateZoomWithDelta(e)},n.prototype.performAction=function(e){this.toggleTimeline()},n.prototype.toggleTimeline=function(){this.wpTableTimeline.toggle()},n.prototype.isActive=function(){return this.isVisible},n.prototype.enableAutoZoom=function(){this.wpTableTimeline.enableAutozoom()},n.prototype.getAutoZoomToggleClass=function(){return this.isAutoZoom?"-disabled":""},n}(fi),ob=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function rb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"button",[["class","button timeline-toolbar--button toolbar-icon"],["id","work-packages-timeline-zoom-auto-button"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.enableAutoZoom()&&l);return l},null,null)),l["\u0275did"](2,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-zoom-auto button--icon"]],null,null,null,Zt,Gt)),l["\u0275did"](4,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"button timeline-toolbar--button toolbar-icon",n.component.getAutoZoomToggleClass());e(n,4,0,"icon-zoom-auto button--icon")},function(e,n){e(n,1,0,n.component.text.zoomAuto)})}function ub(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"button",[["class","button timeline-toolbar--button toolbar-icon"],["id","work-packages-timeline-zoom-out-button"]],[[1,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.updateZoomWithDelta(1)&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-zoom-out button--icon"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon-zoom-out button--icon")},function(e,n){var t=n.component;e(n,1,0,t.text.zoomOut,t.isMaxLevel)})}function ab(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"button",[["class","button timeline-toolbar--button toolbar-icon"],["id","work-packages-timeline-zoom-in-button"]],[[1,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.updateZoomWithDelta(-1)&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-zoom-in button--icon"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon-zoom-in button--icon")},function(e,n){var t=n.component;e(n,1,0,t.text.zoomIn,t.isMinLevel)})}function sb(e){return l["\u0275vid"](2,[(e()(),l["\u0275eld"](0,0,null,null,12,"ul",[["class","toolbar-button-group"],["id","work-packages-timeline-mode-selection"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,rb)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ub)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ab)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,5,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,4,"button",[["class","button timeline-toolbar--button toolbar-icon"]],[[1,"id",0],[1,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleTimeline()&&l);return l},null,null)),l["\u0275did"](9,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](10,{"-active":0}),(e()(),l["\u0275eld"](11,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](12,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isVisible),e(n,4,0,t.isVisible),e(n,6,0,t.isVisible);var i=e(n,10,0,t.isVisible);e(n,9,0,"button timeline-toolbar--button toolbar-icon",i),e(n,12,0,l["\u0275inlineInterpolate"](1,"",t.iconClass," button--icon"))},function(e,n){var t=n.component;e(n,8,0,t.buttonId,t.label,t.disabled||!t.isToggle()&&t.isVisible)})}l["\u0275ccf"]("wp-timeline-toggle-button",ib,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-toggle-button",[],null,null,null,sb,ob)),l["\u0275did"](1,245760,null,0,ib,[B.a,l.ChangeDetectorRef,M],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var cb,db=function(e){function n(n,t,l,i,o,r,u){var a=e.call(this,n,r,l)||this;return a.locals=n,a.I18n=t,a.elementRef=l,a.UrlParamsHelper=i,a.querySpace=o,a.cdRef=r,a.wpTableColumns=u,a.closeOnEscape=!0,a.closeOnOutsideClick=!0,a.text={title:a.I18n.t("js.label_export"),closePopup:a.I18n.t("js.close_popup_title")},a}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.querySpace.results.valuesPromise().then(function(e){return n.exportOptions=n.buildExportOptions(e)})},n.prototype.buildExportOptions=function(e){var n=this;return e.representations.map(function(e){var t=e.$link;return{identifier:t.identifier,label:t.title,url:n.addColumnsToHref(e.href)}})},n.prototype.addColumnsToHref=function(e){var n=this.wpTableColumns.getColumns().map(function(e){return e.id}),t=URI(e);return t.removeSearch("columns[]"),t.addSearch("columns[]",n),t.toString()},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return jQuery("#work-packages-settings-button")},enumerable:!0,configurable:!0}),n}(Le.a),pb=function(e){function n(n,t,l,i,o,r,u,a,s){var c=e.call(this,t,a,n)||this;return c.elementRef=n,c.locals=t,c.I18n=l,c.states=i,c.querySpace=o,c.wpListService=r,c.wpNotificationsService=u,c.cdRef=a,c.notificationsService=s,c.queryName="",c.isStarred=!1,c.isPublic=!1,c.isBusy=!1,c.text={title:c.I18n.t("js.modals.form_submit.title"),text:c.I18n.t("js.modals.form_submit.text"),save_as:c.I18n.t("js.label_save_as"),label_name:c.I18n.t("js.modals.label_name"),label_visibility_settings:c.I18n.t("js.label_visibility_settings"),button_save:c.I18n.t("js.modals.button_save"),button_cancel:c.I18n.t("js.button_cancel"),close_popup:c.I18n.t("js.close_popup_title")},c}return r.d(n,e),n.prototype.setValues=function(e){this.isStarred=e.isStarred,this.isPublic=e.isPublic},n.prototype.onOpen=function(){this.queryNameField.nativeElement.focus()},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return jQuery("#work-packages-settings-button")},enumerable:!0,configurable:!0}),n.prototype.saveQueryAs=function(e){var n=this;if(!this.isBusy&&this.queryName){this.isBusy=!0;var t=this.querySpace.query.value;t.public=this.isPublic,this.wpListService.create(t,this.queryName).then(function(t){return n.isStarred&&!t.starred?n.wpListService.toggleStarred(t).then(function(){return n.closeMe(e)}):(n.closeMe(e),Promise.resolve(!0))}).catch(function(e){return n.wpNotificationsService.handleRawError(e)}).then(function(){return n.isBusy=!1})}},n}(Le.a),hb=function(e){function n(n,t,l,i,o,r,u,a,s){var c=e.call(this,t,r,n)||this;return c.elementRef=n,c.locals=t,c.I18n=l,c.states=i,c.querySpace=o,c.cdRef=r,c.wpListService=u,c.wpNotificationsService=a,c.notificationsService=s,c.isStarred=!1,c.isPublic=!1,c.isBusy=!1,c.text={title:c.I18n.t("js.modals.form_submit.title"),text:c.I18n.t("js.modals.form_submit.text"),save_as:c.I18n.t("js.label_save_as"),label_name:c.I18n.t("js.modals.label_name"),label_visibility_settings:c.I18n.t("js.label_visibility_settings"),button_save:c.I18n.t("js.modals.button_save"),button_cancel:c.I18n.t("js.button_cancel"),close_popup:c.I18n.t("js.close_popup_title")},c}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.query=this.querySpace.query.value,this.isStarred=this.query.starred,this.isPublic=this.query.public},n.prototype.setValues=function(e){this.isStarred=e.isStarred,this.isPublic=e.isPublic},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return jQuery("#work-packages-settings-button")},enumerable:!0,configurable:!0}),n.prototype.saveQuery=function(e){var n=this;if(!this.isBusy){this.isBusy=!0;var t=[];this.query.public!==this.isPublic&&(this.query.public=this.isPublic,t.push(this.wpListService.save(this.query))),this.query.starred!==this.isStarred&&t.push(this.wpListService.toggleStarred(this.query)),Promise.all(t).then(function(){n.closeMe(e),n.isBusy=!1}).catch(function(){n.notificationsService.addError(n.I18n.t("js.errors.query_saving")),n.isBusy=!1})}},n}(Le.a);!function(e){function n(e,n){return e===n||e.contains(n)}e.whenOutside=function(e,t){setTimeout(function(){n(e,document.activeElement)||t()},20)},e.insideOrSelf=n}(cb||(cb={}));var fb="editable-toolbar-title",gb=function(){function e(e){this.injector=e,this.editable=!0,this.inFlight=!1,this.showSaveCondition=!1,this.initialFocus=!1,this.smallHeader=!1,this.onSave=new l.EventEmitter,this.onEmptySubmit=new l.EventEmitter,this.selectableTitleIdentifier=fb,this.elementRef=this.injector.get(l.ElementRef),this.I18n=this.injector.get(B.a),this.text={click_to_edit:this.I18n.t("js.work_packages.query.click_to_edit_query_name"),press_enter_to_save:this.I18n.t("js.label_press_enter_to_save"),query_has_changed_click_to_save:"Query has changed, click to save",input_title:"",input_placeholder:this.I18n.t("js.work_packages.query.rename_query_placeholder"),search_query_title:this.I18n.t("js.toolbar.search_query_title"),confirm_edit_cancel:this.I18n.t("js.work_packages.query.confirm_edit_cancel"),duplicate_query_title:this.I18n.t("js.work_packages.query.errors.duplicate_query_title")}}return e.prototype.ngOnInit=function(){var e=this;this.text.input_title=this.text.click_to_edit+" "+this.text.press_enter_to_save,jQuery(this.elementRef.nativeElement).on("op:selectableTitle:trigger",function(n,t){void 0===t&&(t=""),e.inputField&&(e.selectedTitle=t,setTimeout(function(){e.inputField.nativeElement.focus()},20),n.stopPropagation())})},e.prototype.ngOnChanges=function(e){if(e.inputTitle&&(this.selectedTitle=e.inputTitle.currentValue),e.initialFocus&&e.initialFocus.firstChange&&this.inputField){var n=this.inputField.nativeElement;this.selectInputOnInitalFocus(n)}},e.prototype.onFocus=function(e){this.selectInputOnInitalFocus(e.target)},e.prototype.selectInputOnInitalFocus=function(e){this.initialFocus&&(e.select(),this.initialFocus=!1)},e.prototype.saveWhenFocusOutside=function(e){var n=this;cb.whenOutside(this.elementRef.nativeElement,function(){return n.save(e)})},e.prototype.reset=function(){this.resetInputField(),this.selectedTitle=this.inputTitle},Object.defineProperty(e.prototype,"showSave",{get:function(){return this.editable&&this.showSaveCondition},enumerable:!0,configurable:!0}),e.prototype.save=function(e,n){void 0===n&&(n=!1),e.preventDefault(),this.resetInputField(),this.selectedTitle=this.selectedTitle.trim(),this.isEmpty?this.onEmptyError():(n||this.inputTitle!==this.selectedTitle)&&this.emitSave(this.selectedTitle)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return""===this.selectedTitle},enumerable:!0,configurable:!0}),e.prototype.emitSave=function(e){this.onSave.emit(e)},e.prototype.onEmptyError=function(){this.onEmptySubmit.emit(),this.focusInputOnError()},e.prototype.focusInputOnError=function(){if(this.inputField){var e=this.inputField.nativeElement;e.classList.add("-error"),e.focus()}},e.prototype.resetInputField=function(){this.inputField&&this.inputField.nativeElement.classList.remove("-error")},e}(),mb=function(e){function n(n,t,l,i,o,r,u,a,s){var c=e.call(this,n,t)||this;return c.elementRef=n,c.opContextMenu=t,c.opModalService=l,c.wpListService=i,c.authorisationService=o,c.states=r,c.injector=u,c.querySpace=a,c.I18n=s,c.focusAfterClose=!0,c}return r.d(n,e),n.prototype.ngOnDestroy=function(){},n.prototype.ngAfterViewInit=function(){var n=this;e.prototype.ngAfterViewInit.call(this),this.querySpace.query.values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(e){n.query=e}),this.loadingPromise=this.querySpace.queryForm.valuesPromise(),this.querySpace.queryForm.values$().pipe(Object(D.a)(Object(Ln.a)(this))).subscribe(function(e){n.form=e})},n.prototype.open=function(e){var n=this;this.loadingPromise.then(function(){n.buildItems(),n.opContextMenu.show(n,e)})},Object.defineProperty(n.prototype,"locals",{get:function(){return{contextMenuId:"settingsDropdown",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.onClose=function(){this.focusAfterClose&&this.afterFocusOn.focus()},n.prototype.allowQueryAction=function(e,n){return this.allowAction(e,"query",n)},n.prototype.allowWorkPackageAction=function(e,n){return this.allowAction(e,"work_packages",n)},n.prototype.allowFormAction=function(e,n){return!!this.form.$links[n]||(e.stopPropagation(),!1)},n.prototype.allowAction=function(e,n,t){return!!this.authorisationService.can(n,t)||(e.stopPropagation(),!1)},n.prototype.buildItems=function(){var e=this;this.items=[{disabled:!1,linkText:this.I18n.t("js.toolbar.settings.configure_view"),icon:"icon-settings",onClick:function(n){return e.opContextMenu.close(),e.opModalService.show(Nn,e.injector),!0}},{disabled:!this.query.id||this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.page_settings"),icon:"icon-edit",onClick:function(n){return e.allowQueryAction(n,"update")&&(e.focusAfterClose=!1,jQuery(""+fb).trigger("op:selectableTitle:trigger")),!0}},{disabled:this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.save"),icon:"icon-save",onClick:function(n){var t=e.query;return!t.persisted&&e.allowQueryAction(n,"updateImmediately")?e.opModalService.show(pb,e.injector):t.id&&e.allowQueryAction(n,"updateImmediately")&&e.wpListService.save(t),!0}},{disabled:this.form?!this.form.$links.create_new:this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.save_as"),icon:"icon-save",onClick:function(n){return e.allowFormAction(n,"create_new")&&e.opModalService.show(pb,e.injector),!0}},{disabled:this.authorisationService.cannot("query","delete"),linkText:this.I18n.t("js.toolbar.settings.delete"),icon:"icon-delete",onClick:function(n){return e.allowQueryAction(n,"delete")&&window.confirm(e.I18n.t("js.text_query_destroy_confirmation"))&&e.wpListService.delete(),!0}},{disabled:this.authorisationService.cannot("work_packages","representations"),linkText:this.I18n.t("js.toolbar.settings.export"),icon:"icon-export",onClick:function(n){return e.allowWorkPackageAction(n,"representations")&&e.opModalService.show(db,e.injector),!0}},{disabled:this.authorisationService.cannot("query","unstar")&&this.authorisationService.cannot("query","star"),linkText:this.I18n.t("js.toolbar.settings.visibility_settings"),icon:"icon-watched",onClick:function(n){return(e.allowQueryAction(n,"unstar")||e.allowQueryAction(n,"star"))&&e.opModalService.show(hb,e.injector),!0}},{divider:!0,hidden:!(this.query.results.customFields&&this.form.configureForm)},{hidden:!this.query.results.customFields,href:this.query.results.customFields&&this.query.results.customFields.href,linkText:this.query.results.customFields&&this.query.results.customFields.name,icon:"icon-custom-fields",onClick:function(){return!1}}]},n}(ps),vb=[[".editable-toolbar-title--container[_ngcontent-%COMP%]{display:flex;align-items:center}.editable-toolbar-title--fixed[_ngcontent-%COMP%]{padding:0;cursor:default}.editable-toolbar-title--save[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{color:#5f5f5f}.editable-toolbar-title--save[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]:before{color:#2c2c2c}.editable-toolbar-title--input[_ngcontent-%COMP%]{color:#5f5f5f}.editable-toolbar-title--input.-changed[_ngcontent-%COMP%]{font-style:italic}"]],bb=l["\u0275crt"]({encapsulation:0,styles:vb,data:{}});function yb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"a",[["class","editable-toolbar-title--save"],["role","link"]],[[1,"aria-label",0],[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.save(t,!0)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[["aria-hidden","true"],["class","icon icon-save"]],null,null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.text.query_has_changed_click_to_save,t.text.query_has_changed_click_to_save)})}function wb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"div",[["class","editable-toolbar-title--container"]],null,[[null,"focusout"]],function(e,n,t){var l=!0,i=e.component;"focusout"===n&&(l=!1!==i.saveWhenFocusOutside(t)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,yb)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,[[1,0],["editableTitleInput",1]],null,8,"input",[["aria-required","true"],["class","editable-toolbar-title--input -border-on-hover-only toolbar--editable-toolbar ellipsis"],["type","text"]],[[1,"name",0],[1,"placeholder",0],[1,"title",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"],[null,"keydown.escape"],[null,"keydown.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,6)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,6).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,6)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,6)._compositionEnd(t.target.value)&&i);"focus"===n&&(i=!1!==o.onFocus(t)&&i);"keydown.escape"===n&&(i=!1!==o.reset(t)&&i);"keydown.enter"===n&&(i=!1!==o.save(t)&&i);"ngModelChange"===n&&(i=!1!==(o.selectedTitle=t)&&i);return i},null,null)),l["\u0275did"](4,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](5,{"-error":0,"-changed":1}),l["\u0275did"](6,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](8,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](10,16384,null,0,Pt.i,[[4,Pt.h]],null,null),l["\u0275did"](11,4210688,null,0,Ei,[f.a,l.ElementRef],{condition:[0,"condition"]},null)],function(e,n){var t=n.component;e(n,2,0,t.showSave);var l=e(n,5,0,t.isEmpty,t.showSave);e(n,4,0,"editable-toolbar-title--input -border-on-hover-only toolbar--editable-toolbar ellipsis",l),e(n,8,0,t.inFlight,t.selectedTitle),e(n,11,0,t.initialFocus||void 0)},function(e,n){var t=n.component;e(n,3,0,t.selectableTitleIdentifier,t.text.input_placeholder,t.text.input_title,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending)})}function kb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"h2",[["class","editable-toolbar-title--fixed"]],[[1,"title",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-disabled":0,"-small":1}),(e()(),l["\u0275ted"](3,null,[" ","\n"])),l["\u0275pid"](0,It.SlicePipe,[])],function(e,n){var t=n.component,l=e(n,2,0,t.disabled,t.smallHeader);e(n,1,0,"editable-toolbar-title--fixed",l)},function(e,n){var t=n.component;e(n,0,0,t.selectedTitle),e(n,3,0,l["\u0275unv"](n,3,0,l["\u0275nov"](n,4).transform(t.selectedTitle,0,50)))})}function Cb(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{inputField:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,wb)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,kb)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.editable),e(n,4,0,!t.editable)},null)}l["\u0275ccf"]("editable-toolbar-title",gb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"editable-toolbar-title",[["class","title-container"]],null,null,null,Cb,bb)),l["\u0275did"](1,638976,null,0,gb,[l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{inputTitle:"title",editable:"editable",inFlight:"inFlight",showSaveCondition:"showSaveCondition",initialFocus:"initialFocus",smallHeader:"smallHeader"},{onSave:"onSave",onEmptySubmit:"onEmptySubmit"},[]);var Ib=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={jump_to_pagination:n.I18n.t("js.work_packages.jump_marks.pagination"),text_jump_to_pagination:n.I18n.t("js.work_packages.jump_marks.label_pagination"),button_settings:n.I18n.t("js.button_settings")},n.tableInformationLoaded=!1,n.projectIdentifier=n.$state.params.projectPath||null,n.showResultOverlay=!1,n.titleService=n.injector.get(Ds),n}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.wpTableRefresh.clear("Impending query loading."),this.loadCurrentQuery(),this.updateQueryOnParamsChanges(),this.setupInformationLoadedListener(),this.unRegisterTitleListener=this.$transitions.onSuccess({to:"work-packages.list"},function(){n.selectedTitle&&n.titleService.setFirstPart(n.selectedTitle)}),this.querySpace.query.values$().pipe(Object(Ln.b)(this)).subscribe(function(e){n.updateTitle(e),n.currentQuery=e})},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.unRegisterTitleListener(),this.removeTransitionSubscription()},n.prototype.setAnchorToNextElement=function(){var e=jQuery("#pagination--next-link, #pagination--prev-link, #pagination-empty-text").not(":hidden").first();e.length&&e.focus()},n.prototype.allowed=function(e,n){return this.authorisationService.can(e,n)},n.prototype.updateQueryName=function(e){var n=this;this.querySaving=!0,this.currentQuery.name=e,this.wpListService.save(this.currentQuery).then(function(){return n.querySaving=!1}).catch(function(){return n.querySaving=!1})},n.prototype.updateTitle=function(e){e.persisted?(this.selectedTitle=e.name,this.titleEditingEnabled=this.authorisationService.can("query","updateImmediately")):(this.selectedTitle=this.wpStaticQueries.getStaticName(e),this.titleEditingEnabled=!1),"work-packages.list"===this.$state.current.name&&this.titleService.setFirstPart(this.selectedTitle)},n.prototype.refresh=function(e,n){var t;return void 0===e&&(e=!1),void 0===n&&(n=!1),t=n?this.wpListService.loadCurrentResultsListFirstPage():this.wpListService.reloadCurrentResultsList(),e&&(this.loadingIndicator=t),t},n.prototype.updateResultVisibility=function(e){this.showResultOverlay=!e},n.prototype.updateQueryOnParamsChanges=function(){var e=this;this.removeTransitionSubscription=this.$transitions.onSuccess({},function(n){var t=n.options();if(t.reload||t.custom&&!1===t.custom.notify)return!0;var l=n.params("to"),i=e.wpListService.getCurrentQueryProps(l),o=l.query_id?l.query_id.toString():null;e.wpListChecksumService.executeIfOutdated(o,i,function(){return e.loadCurrentQuery()})})},n.prototype.setupInformationLoadedListener=function(){var e=this;this.querySpace.tableRendering.onQueryUpdated.values$().pipe(Object(F.a)(1)).subscribe(function(){return e.tableInformationLoaded=!0})},Object.defineProperty(n.prototype,"loadingIndicator",{set:function(e){this.loadingIndicatorService.table.promise=e},enumerable:!0,configurable:!0}),n.prototype.loadCurrentQuery=function(){var e=this;return this.loadingIndicator=this.wpListService.loadCurrentQueryFromParams(this.projectIdentifier).then(function(){return e.querySpace.rendered.valuesPromise()})},n}(Zn),Pb=[[".result-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:900;background-color:#fff;opacity:.5}"]],jb=l["\u0275crt"]({encapsulation:0,styles:Pb,data:{}});function _b(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,20,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"wp-create-button",[["stateName","work-packages.list.new"]],null,null,null,Qs,Ws)),l["\u0275did"](3,114688,null,0,zs,[h.G,Vn,B.a],{stateName:[0,"stateName"],allowed:[1,"allowed"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-filter-button",[],null,null,null,eb,Jv)),l["\u0275did"](6,180224,null,0,Zv,[B.a,Ze,en],null,null),(e()(),l["\u0275eld"](7,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"wp-details-view-button",[],null,null,null,lb,tb)),l["\u0275did"](9,49152,null,0,nb,[h.G,B.a,s,Pa,_e],null,null),(e()(),l["\u0275eld"](10,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,1,"wp-timeline-toggle-button",[],null,null,null,sb,ob)),l["\u0275did"](12,245760,null,0,ib,[B.a,l.ChangeDetectorRef,M],null,null),(e()(),l["\u0275eld"](13,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,bi,vi)),l["\u0275did"](15,49152,null,0,mi,[B.a],null,null),(e()(),l["\u0275eld"](16,0,null,null,4,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,3,"button",[["class","button last work-packages-settings-button toolbar-icon"],["id","work-packages-settings-button"],["opSettingsContextMenu",""],["opSettingsContextMenu-query","query"]],[[8,"title",0]],null,null,null,null)),l["\u0275did"](18,4341760,null,0,mb,[l.ElementRef,Qa,Mn.b,Yn,Dn,s,l.Injector,y,B.a],{query:[0,"query"]},null),(e()(),l["\u0275eld"](19,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-show-more"]],null,null,null,Zt,Gt)),l["\u0275did"](20,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"work-packages.list.new",n.component.allowed("work_packages","createWorkPackage")),e(n,12,0);e(n,18,0,"query");e(n,20,0,"button--icon icon-show-more")},function(e,n){var t=n.component;e(n,17,0,l["\u0275inlineInterpolate"](1,"",t.text.button_settings,""))})}function Rb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","result-overlay"]],null,null,null,null,null))],null,null)}function Sb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-table",[["class","work-packages-split-view--tabletimeline-content"]],null,null,null,Im,fm)),l["\u0275did"](1,245760,null,0,zg,[l.ElementRef,l.Injector,s,y,Mn.b,Qa,B.a,l.ChangeDetectorRef,$e,M,qe],{projectIdentifier:[0,"projectIdentifier"]},null)],function(e,n){e(n,1,0,n.component.projectIdentifier)},null)}function xb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-packages-split-view--tabletimeline-footer hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-table-pagination",[],null,null,null,Hm,_m)),l["\u0275did"](2,245760,null,0,jm,[ke,Ce,B.a],null,null)],function(e,n){e(n,2,0)},null)}function Tb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,21,"div",[["class","work-packages-list-view--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","toolbar-container -editable"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"editable-toolbar-title",[["class","title-container"]],null,[[null,"onSave"],[null,"onEmptySubmit"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.updateQueryName(t)&&l);"onEmptySubmit"===n&&(l=!1!==i.updateQueryName("")&&l);return l},Cb,bb)),l["\u0275did"](4,638976,null,0,gb,[l.Injector],{inputTitle:[0,"inputTitle"],editable:[1,"editable"],inFlight:[2,"inFlight"],showSaveCondition:[3,"showSaveCondition"]},{onSave:"onSave",onEmptySubmit:"onEmptySubmit"}),(e()(),l["\u0275and"](16777216,null,null,1,null,_b)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,1,"filter-container",[],null,[[null,"filtersCompleted"]],function(e,n,t){var l=!0,i=e.component;"filtersCompleted"===n&&(l=!1!==i.updateResultVisibility(t)&&l);return l},Ff,Tf)),l["\u0275did"](8,180224,null,0,xf,[en,Ze],null,{filtersCompleted:"filtersCompleted"}),(e()(),l["\u0275eld"](9,0,null,null,2,"accessible-by-keyboard",[["linkClass","hidden-for-sighted skip-navigation-link"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.setAnchorToNextElement()&&l);return l},al,ul)),l["\u0275did"](10,49152,null,0,rl,[],{linkClass:[0,"linkClass"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](11,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,9,"div",[["class","work-packages-split-view"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,6,"div",[["class","work-packages-split-view--tabletimeline-side loading-indicator--location"],["data-indicator-name","table"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Rb)),l["\u0275did"](15,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Sb)),l["\u0275did"](17,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,xb)),l["\u0275did"](19,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](20,16777216,null,null,1,"div",[["class","work-packages-split-view--details-side"],["ui-view",""]],null,null,null,kt.c,kt.a)),l["\u0275did"](21,245760,null,0,Ki.a,[h.P,"UIView.PARENT_INJECT",l.ViewContainerRef],{_name:[0,"_name"]},null)],function(e,n){var t=n.component;e(n,4,0,t.selectedTitle,t.titleEditingEnabled,t.querySaving,!!t.$state.params.query_props),e(n,6,0,t.tableInformationLoaded);e(n,10,0,"hidden-for-sighted skip-navigation-link",t.text.text_jump_to_pagination),e(n,15,0,t.showResultOverlay),e(n,17,0,t.tableInformationLoaded),e(n,19,0,t.tableInformationLoaded);e(n,21,0,"")},function(e,n){e(n,11,0,n.component.text.jump_to_pagination)})}var Ob=l["\u0275ccf"]("wp-list",Ib,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-list",[],null,null,null,Tb,jb)),l["\u0275did"](1,245760,null,0,Ib,[l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Eb=function(){return function(){}}(),Db=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Fb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","wp-new-top-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","work-packages--status-selector wp-new-top-row--element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](3,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayFieldOptions:[3,"displayFieldOptions"]},null),l["\u0275pod"](4,{colorize:0}),(e()(),l["\u0275eld"](5,0,null,null,3,"div",[["class","work-packages--type-selector wp-new-top-row--element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](7,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayFieldOptions:[3,"displayFieldOptions"]},null),l["\u0275pod"](8,{colorize:0})],function(e,n){var t=n.component,l=t.workPackage.id,i=e(n,4,0,!1);e(n,3,0,"status",l,"wp-new-top-row--status -no-label",i);var o=t.workPackage.id,r=e(n,8,0,!1);e(n,7,0,"type",o,"wp-new-top-row--type -no-label",r)},null)}function Ab(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Fb)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("wp-type-status",Eb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-type-status",[],null,null,null,Ab,Db)),l["\u0275did"](1,49152,null,0,Eb,[],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var Nb=function(e){function n(n,t,l,i){var o=e.call(this,n,t)||this;return o.elementRef=n,o.opContextMenu=t,o.states=l,o.wpEditing=i,o}return r.d(n,e),n.prototype.open=function(e){var n=this,t=this.states.workPackages.get("new").value;t&&this.wpEditing.changesetFor(t).getForm().then(function(t){n.buildItems(t),n.opContextMenu.show(n,e)})},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.buildItems=function(e){this.items=[];var n=e.configureForm,t=e.customFields;t&&this.items.push({href:t.href,icon:"icon-custom-fields",linkText:t.name,onClick:function(){return!1}}),n&&this.items.push({href:n.href,icon:"icon-settings3",linkText:n.name,onClick:function(){return!1}})},n}(ps),Mb=function(){function e(e,n){this.I18n=e,this.wpEditFieldGroup=n,this.onSave=new l.EventEmitter,this.onCancel=new l.EventEmitter,this.saving=!1,this.text={save:this.I18n.t("js.button_save"),cancel:this.I18n.t("js.button_cancel")}}return e.prototype.save=function(){var e=this;this.saving||(this.saving=!0,this.wpEditFieldGroup.saveWorkPackage().then(function(){e.saving=!1,e.onSave.emit()}).catch(function(){e.saving=!1}))},e.prototype.cancel=function(){this.wpEditFieldGroup.stop(),this.onCancel.emit()},e}(),Vb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function qb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","work-packages--edit-actions"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"button",[["accesskey","3"],["class","button -alt-highlight"],["id","work-packages--edit-actions-save"]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.save()&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-checkmark"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,3,"button",[["accesskey","7"],["class","button"],["id","work-packages--edit-actions-cancel"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.cancel()&&l);return l},null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-close"]],null,null,null,Zt,Gt)),l["\u0275did"](7,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](8,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"button--icon icon-checkmark");e(n,7,0,"button--icon icon-close")},function(e,n){var t=n.component;e(n,1,0,t.saving),e(n,4,0,t.text.save),e(n,8,0,t.text.cancel)})}l["\u0275ccf"]("wp-edit-actions-bar",Mb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-edit-actions-bar",[],null,null,null,qb,Vb)),l["\u0275did"](1,49152,null,0,Mb,[B.a,Oa],null,null)],null,null)},{},{onSave:"onSave",onCancel:"onCancel"},[]);var Lb=function(){function e(e,n,t,l,i,o,r,u,a,s,c,d,p){this.$transition=e,this.$state=n,this.I18n=t,this.titleService=l,this.injector=i,this.currentUser=o,this.wpNotificationsService=r,this.states=u,this.wpCreate=a,this.wpTableFilters=s,this.wpCacheService=c,this.pathHelper=d,this.RootDm=p,this.copying=!1,this.stateParams=this.$transition.params("to"),this.text={button_settings:this.I18n.t("js.button_settings")}}return e.prototype.ngOnInit=function(){var e=this;this.createdWorkPackage().then(function(n){e.changeset=n,e.newWorkPackage=n.workPackage,e.setTitle(),e.stateParams.parent_id&&e.changeset.setValue("parent",{href:e.pathHelper.api.v3.work_packages.id(e.stateParams.parent_id).path}),e.stateParams.parent_id&&e.wpCacheService.loadWorkPackage(e.stateParams.parent_id).values$().pipe(Object(D.a)(Object(Ln.a)(e))).subscribe(function(n){e.parentWorkPackage=n})}).catch(function(n){"urn:openproject-org:api:v3:errors:MissingPermission"===n.errorIdentifier&&(e.RootDm.load().then(function(n){if(!n.user){var t=URI(e.pathHelper.loginPath());t.search({back_url:t}),window.location.href=t.toString()}}),e.wpNotificationsService.handleRawError(n))})},e.prototype.ngOnDestroy=function(){},e.prototype.switchToFullscreen=function(){this.$state.go("work-packages.new",this.$state.params)},e.prototype.setTitle=function(){this.titleService.setFirstPart(this.I18n.t("js.work_packages.create.title"))},e.prototype.cancelAndBackToList=function(){this.wpCreate.cancelCreation(),this.$state.go("work-packages.list",this.$state.params)},e.prototype.createdWorkPackage=function(){var e=this.stateParams.type?parseInt(this.stateParams.type):void 0,n=this.stateParams.projectPath;return this.wpCreate.createOrContinueWorkPackage(n,e)},e}(),$b=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.show",n}return r.d(n,e),n}(Lb),Hb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Bb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,19,"div",[["class","work-package--new-state work-packages--new work-packages--show-view toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,18,"wp-edit-field-group",[],null,null,null,Da,Ea)),l["\u0275did"](2,245760,null,0,Oa,[s,l.Injector,ur,ar,On,Ia,Pa,h.O,Ne,h.G,B.a],{workPackage:[0,"workPackage"],successState:[1,"successState"],initializeEditMode:[2,"initializeEditMode"]},null),(e()(),l["\u0275eld"](3,0,null,0,11,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-type-status",[],null,null,null,Ab,Db)),l["\u0275did"](6,49152,null,0,Eb,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,null,7,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,bi,vi)),l["\u0275did"](10,49152,null,0,mi,[B.a],null,null),(e()(),l["\u0275eld"](11,0,null,null,3,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,2,"button",[["class","button last work-packages-settings-button toolbar-icon"],["id","create-wp-menu-button"],["wpCreateSettingsMenu",""]],[[1,"title",0]],null,null,null,null)),l["\u0275did"](13,4210688,null,0,Nb,[l.ElementRef,Qa,s,ar],null,null),(e()(),l["\u0275eld"](14,0,null,null,0,"i",[["class","button--icon icon-show-more"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,0,2,"wp-single-view",[],null,null,null,$d,_d)),l["\u0275prd"](512,null,$a,$a,[]),l["\u0275did"](17,245760,null,0,jd,[B.a,Vn,ve,s,rn,ar,Y,Aa,yn,at,l.Injector,l.ElementRef,$a,_s],{workPackage:[0,"workPackage"],showProject:[1,"showProject"]},null),(e()(),l["\u0275eld"](18,0,null,0,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},qb,Vb)),l["\u0275did"](19,49152,null,0,Mb,[B.a,Oa],null,{onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,2,0,t.newWorkPackage,t.successState,!0),e(n,6,0,t.newWorkPackage),e(n,17,0,t.newWorkPackage,t.copying)},function(e,n){e(n,12,0,n.component.text.button_settings)})}function zb(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Bb)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.newWorkPackage)},null)}var Wb=l["\u0275ccf"]("wp-new-full-view",$b,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-new-full-view",[["class","work-packages-page--ui-view"]],null,null,null,zb,Hb)),l["\u0275did"](1,245760,null,0,$b,[h.J,h.G,B.a,Ds,l.Injector,Hn,On,s,ur,en,yn,ve,Qh],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Qb=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.list.details",n}return r.d(n,e),n}(Lb),Ub=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Kb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,18,"div",[["class","work-packages--details work-packages--new"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,17,"wp-edit-field-group",[],null,null,null,Da,Ea)),l["\u0275did"](2,245760,null,0,Oa,[s,l.Injector,ur,ar,On,Ia,Pa,h.O,Ne,h.G,B.a],{workPackage:[0,"workPackage"],successState:[1,"successState"],initializeEditMode:[2,"initializeEditMode"]},null),(e()(),l["\u0275eld"](3,0,null,0,9,"div",[["class","work-packages--details-content -create-mode"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"div",[["class","work-packages--new-details-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-type-status",[],null,null,null,Ab,Db)),l["\u0275did"](6,49152,null,0,Eb,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,null,2,"div",[["class","wp--details--switch-fullscreen-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"a",[["class","work-packages-show-view-button wp--details--switch-fullscreen "]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchToFullscreen()&&l);return l},null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["class","icon-context icon-to-fullscreen"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,2,"wp-single-view",[],null,null,null,$d,_d)),l["\u0275prd"](512,null,$a,$a,[]),l["\u0275did"](12,245760,null,0,jd,[B.a,Vn,ve,s,rn,ar,Y,Aa,yn,at,l.Injector,l.ElementRef,$a,_s],{workPackage:[0,"workPackage"],showProject:[1,"showProject"]},null),(e()(),l["\u0275eld"](13,0,null,0,2,"div",[["class","work-packages--details-toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},qb,Vb)),l["\u0275did"](15,49152,null,0,Mb,[B.a,Oa],null,{onCancel:"onCancel"}),(e()(),l["\u0275eld"](16,0,null,0,2,"div",[["class","work-packages--details--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,18).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,18).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,18).handleMouseUp(t)&&i);return i},xs,Ss)),l["\u0275did"](18,245760,null,0,Rs,[js,l.ElementRef,h.O,_s],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,2,0,t.newWorkPackage,t.successState,!0),e(n,6,0,t.newWorkPackage),e(n,12,0,t.newWorkPackage,t.copying);e(n,18,0,"work-packages-split-view--details-side","openProject-splitViewFlexBasis")},null)}function Gb(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Kb)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.newWorkPackage)},null)}var Yb=l["\u0275ccf"]("wp-new-split-view",Qb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-new-split-view",[],null,null,null,Gb,Ub)),l["\u0275did"](1,245760,null,0,Qb,[h.J,h.G,B.a,Ds,l.Injector,Hn,On,s,ur,en,yn,ve,Qh],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Zb=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.copying=!0,n.wpRelations=n.injector.get(Cn),n.wpEditing=n.injector.get(ar),n}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.wpCreate.onNewWorkPackage().pipe(Object(Ln.b)(this)).subscribe(function(e){e.__initialized_at===n.__initialized_at&&n.wpRelations.addCommonRelation(e.id,"relates",n.copiedWorkPackageId)})},n.prototype.createdWorkPackage=function(){var e=this;return this.copiedWorkPackageId=this.stateParams.copiedFromWorkPackageId,new Promise(function(n,t){e.wpCacheService.loadWorkPackage(e.copiedWorkPackageId).values$().pipe(Object(F.a)(1)).subscribe(function(l){e.createCopyFrom(l).then(n,t)})})},n.prototype.setTitle=function(){this.titleService.setFirstPart(this.I18n.t("js.work_packages.copy.title"))},n.prototype.createCopyFrom=function(e){var n=this,t=this.wpEditing.changesetFor(e);return this.wpCreate.copyWorkPackage(t).then(function(e){return n.__initialized_at=e.workPackage.__initialized_at,n.wpCacheService.updateWorkPackage(e.workPackage),n.wpEditing.updateValue("new",e),e})},n}(Lb),Jb=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.show",n}return r.d(n,e),n}(Zb),Xb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ey(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,19,"div",[["class","work-package--new-state work-packages--new work-packages--show-view toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,18,"wp-edit-field-group",[],null,null,null,Da,Ea)),l["\u0275did"](2,245760,null,0,Oa,[s,l.Injector,ur,ar,On,Ia,Pa,h.O,Ne,h.G,B.a],{workPackage:[0,"workPackage"],successState:[1,"successState"],initializeEditMode:[2,"initializeEditMode"]},null),(e()(),l["\u0275eld"](3,0,null,0,11,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-type-status",[],null,null,null,Ab,Db)),l["\u0275did"](6,49152,null,0,Eb,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,null,7,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,bi,vi)),l["\u0275did"](10,49152,null,0,mi,[B.a],null,null),(e()(),l["\u0275eld"](11,0,null,null,3,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,2,"button",[["class","button last work-packages-settings-button toolbar-icon"],["id","create-wp-menu-button"],["wpCreateSettingsMenu",""]],[[1,"title",0]],null,null,null,null)),l["\u0275did"](13,4210688,null,0,Nb,[l.ElementRef,Qa,s,ar],null,null),(e()(),l["\u0275eld"](14,0,null,null,0,"i",[["class","button--icon icon-show-more"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,0,2,"wp-single-view",[],null,null,null,$d,_d)),l["\u0275prd"](512,null,$a,$a,[]),l["\u0275did"](17,245760,null,0,jd,[B.a,Vn,ve,s,rn,ar,Y,Aa,yn,at,l.Injector,l.ElementRef,$a,_s],{workPackage:[0,"workPackage"],showProject:[1,"showProject"]},null),(e()(),l["\u0275eld"](18,0,null,0,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},qb,Vb)),l["\u0275did"](19,49152,null,0,Mb,[B.a,Oa],null,{onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,2,0,t.newWorkPackage,t.successState,!0),e(n,6,0,t.newWorkPackage),e(n,17,0,t.newWorkPackage,t.copying)},function(e,n){e(n,12,0,n.component.text.button_settings)})}function ny(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,ey)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.newWorkPackage)},null)}var ty=l["\u0275ccf"]("wp-copy-full-view",Jb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-copy-full-view",[["class","work-packages-page--ui-view"]],null,null,null,ny,Xb)),l["\u0275did"](1,245760,null,0,Jb,[h.J,h.G,B.a,Ds,l.Injector,Hn,On,s,ur,en,yn,ve,Qh],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ly=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.list.details",n}return r.d(n,e),n}(Zb),iy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function oy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,18,"div",[["class","work-packages--details work-packages--new"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,17,"wp-edit-field-group",[],null,null,null,Da,Ea)),l["\u0275did"](2,245760,null,0,Oa,[s,l.Injector,ur,ar,On,Ia,Pa,h.O,Ne,h.G,B.a],{workPackage:[0,"workPackage"],successState:[1,"successState"],initializeEditMode:[2,"initializeEditMode"]},null),(e()(),l["\u0275eld"](3,0,null,0,9,"div",[["class","work-packages--details-content -create-mode"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"div",[["class","work-packages--new-details-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-type-status",[],null,null,null,Ab,Db)),l["\u0275did"](6,49152,null,0,Eb,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,null,2,"div",[["class","wp--details--switch-fullscreen-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"a",[["class","work-packages-show-view-button wp--details--switch-fullscreen "]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchToFullscreen()&&l);return l},null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["class","icon-context icon-to-fullscreen"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,2,"wp-single-view",[],null,null,null,$d,_d)),l["\u0275prd"](512,null,$a,$a,[]),l["\u0275did"](12,245760,null,0,jd,[B.a,Vn,ve,s,rn,ar,Y,Aa,yn,at,l.Injector,l.ElementRef,$a,_s],{workPackage:[0,"workPackage"],showProject:[1,"showProject"]},null),(e()(),l["\u0275eld"](13,0,null,0,2,"div",[["class","work-packages--details-toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},qb,Vb)),l["\u0275did"](15,49152,null,0,Mb,[B.a,Oa],null,{onCancel:"onCancel"}),(e()(),l["\u0275eld"](16,0,null,0,2,"div",[["class","work-packages--details--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,18).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,18).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,18).handleMouseUp(t)&&i);return i},xs,Ss)),l["\u0275did"](18,245760,null,0,Rs,[js,l.ElementRef,h.O,_s],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,2,0,t.newWorkPackage,t.successState,!0),e(n,6,0,t.newWorkPackage),e(n,12,0,t.newWorkPackage,t.copying);e(n,18,0,"work-packages-split-view--details-side","openProject-splitViewFlexBasis")},null)}function ry(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,oy)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.newWorkPackage)},null)}var uy=l["\u0275ccf"]("wp-copy-split-view",ly,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-copy-split-view",[],null,null,null,ry,iy)),l["\u0275did"](1,245760,null,0,ly,[h.J,h.G,B.a,Ds,l.Injector,Hn,On,s,ur,en,yn,ve,Qh],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ay=function(){function e(e){this.elementRef=e,this.initialLoadingIndicator=!0}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;e.getAttribute("query-props")&&this.getInputsFromData(e)},e.prototype.getInputsFromData=function(e){this.queryProps=JSON.parse(e.getAttribute("query-props")),this.configuration=JSON.parse(e.getAttribute("configuration"))},e}();gt.DynamicBootstrapper.register({selector:"wp-embedded-table-entry",cls:ay});var sy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function cy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,33,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](31,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275eld"](32,0,null,null,1,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](33,4964352,null,0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],initialLoadingIndicator:[1,"initialLoadingIndicator"],queryProps:[2,"queryProps"]},null)],function(e,n){var t=n.component;e(n,33,0,t.configuration,t.initialLoadingIndicator,t.queryProps)},null)}var dy=l["\u0275ccf"]("wp-embedded-table-entry",ay,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-table-entry",[],null,null,null,cy,sy)),l["\u0275did"](1,114688,null,0,ay,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{queryProps:"queryProps",configuration:"configuration",initialLoadingIndicator:"initialLoadingIndicator"},{},[]),py=function(e){function n(n,t){var l=e.call(this,t)||this;return l.locals=n,l.I18n=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"tabs",{get:function(){var e=this.locals.disabledTabs||{};return this._tabs.map(function(n){var t=e[n.name];return null!=t&&(n.disableBecause=t),n})},enumerable:!0,configurable:!0}),n}(sn),hy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function fy(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{embeddedTable:0}),(e()(),l["\u0275eld"](1,0,null,null,34,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](32,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275eld"](33,0,null,null,2,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](34,4964352,[[1,4],["embeddedTableForConfiguration",4]],0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"]},null),l["\u0275pod"](35,{tableVisible:0})],function(e,n){var t=n.component,i=e(n,35,0,!1);e(n,34,0,i,t.locals.currentQuery||l["\u0275EMPTY_MAP"])},null)}var gy=l["\u0275ccf"]("ng-component",nt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ng-component",[],null,null,null,fy,hy)),l["\u0275prd"](4608,null,sn,py,[tt,B.a]),l["\u0275did"](2,4243456,null,0,nt,[tt,l.ChangeDetectorRef],null,null)],null,null)},{},{},[]),my=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function vy(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{embeddedTable:0}),(e()(),l["\u0275eld"](1,0,null,null,34,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](32,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275eld"](33,0,null,null,2,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](34,4964352,[[1,4],["embeddedTableForConfiguration",4]],0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"]},null),l["\u0275pod"](35,{tableVisible:0})],function(e,n){var t=n.component,i=e(n,35,0,!1);e(n,34,0,i,t.locals.currentQuery||l["\u0275EMPTY_MAP"])},null)}var by=l["\u0275ccf"]("ng-component",rt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"ng-component",[],null,null,null,vy,my)),l["\u0275prd"](4608,null,sn,py,[tt,B.a]),l["\u0275did"](2,4243456,null,0,rt,[tt,l.ChangeDetectorRef],null,null),l["\u0275prd"](256,null,An,ot,[])],null,null)},{},{},[]),yy=function(){function e(e,n,t){this.I18n=e,this.wpEditFieldGroup=n,this.injector=t,this.text={date:{startDate:this.I18n.t("js.label_no_start_date"),dueDate:this.I18n.t("js.label_no_due_date")}}}return e.prototype.trackByName=function(e,n){return n.name},e.prototype.shouldHideField=function(e){var n=e.field||e.fields[0];return this.wpEditFieldGroup.editMode&&!n.writable},e}(),wy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ky(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" *"]))],null,null)}function Cy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","attributes-key-value--key"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"wp-replacement-label",[],null,null,null,pc,dc)),l["\u0275did"](2,114688,null,0,cc,[Oa,l.ElementRef],{fieldName:[0,"fieldName"]},null),(e()(),l["\u0275ted"](3,0,[" "," "])),(e()(),l["\u0275and"](16777216,null,0,1,null,ky)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,1,"attribute-help-text",[],null,null,null,rc,ic)),l["\u0275did"](7,114688,null,0,lc,[l.ElementRef,ec,nc,Mn.b,l.Injector,B.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null)],function(e,n){e(n,2,0,n.parent.parent.context.$implicit.name),e(n,5,0,n.parent.parent.context.$implicit.field.required&&n.parent.parent.context.$implicit.field.writable);e(n,7,0,n.parent.parent.context.$implicit.name,"WorkPackage")},function(e,n){e(n,3,0,n.parent.parent.context.$implicit.label)})}function Iy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-edit-field",[["class","wp-edit-formattable-field"]],null,null,null,Ga,Ka)),l["\u0275did"](1,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],isDropTarget:[2,"isDropTarget"]},null)],function(e,n){var t=n.component;e(n,1,0,n.parent.parent.parent.context.$implicit.name,t.workPackage.id,!0)},null)}function Py(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](2,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"]},null)],function(e,n){var t=n.component;e(n,1,0,"String"===n.parent.parent.parent.context.$implicit.field.schema.type?"wp-edit-field--text":""),e(n,2,0,n.parent.parent.parent.context.$implicit.name,t.workPackage.id)},null)}function jy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","attributes-key-value--value-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Iy)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Py)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.parent.parent.context.$implicit.field.isFormattable),e(n,4,0,!n.parent.parent.context.$implicit.field.isFormattable)},null)}function _y(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","attributes-key-value--key"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"wp-replacement-label",[],null,null,null,pc,dc)),l["\u0275did"](2,114688,null,0,cc,[Oa,l.ElementRef],{fieldName:[0,"fieldName"]},null),(e()(),l["\u0275ted"](3,0,[" "," "])),(e()(),l["\u0275eld"](4,0,null,null,1,"attribute-help-text",[],null,null,null,rc,ic)),l["\u0275did"](5,114688,null,0,lc,[l.ElementRef,ec,nc,Mn.b,l.Injector,B.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null)],function(e,n){e(n,2,0,n.parent.parent.context.$implicit.name);e(n,5,0,n.parent.parent.context.$implicit.name,"WorkPackage")},function(e,n){e(n,3,0,n.parent.parent.context.$implicit.label)})}function Ry(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","attributes-key-value--value-container -minimal"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](2,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayPlaceholder:[3,"displayPlaceholder"]},null),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","attributes-key-value--value-separator"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"wp-edit-field",[],null,null,null,Ga,Ka)),l["\u0275did"](5,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayPlaceholder:[3,"displayPlaceholder"]},null)],function(e,n){var t=n.component;e(n,2,0,n.parent.parent.context.$implicit.fields[0].name,t.workPackage.id,"-small -shrink",t.text[n.parent.parent.context.$implicit.name][n.parent.parent.context.$implicit.fields[0].name]);e(n,5,0,n.parent.parent.context.$implicit.fields[1].name,t.workPackage.id,"-small -shrink",t.text[n.parent.parent.context.$implicit.name][n.parent.parent.context.$implicit.fields[1].name])},null)}function Sy(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Cy)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,jy)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,_y)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ry)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,1,0,!n.parent.context.$implicit.multiple&&n.parent.context.$implicit.field),e(n,3,0,!n.parent.context.$implicit.multiple&&n.parent.context.$implicit.field),e(n,5,0,n.parent.context.$implicit.multiple),e(n,7,0,n.parent.context.$implicit.multiple)},null)}function xy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","attributes-key-value"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-span-all-columns":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Sy)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit.spanAll);e(n,1,0,"attributes-key-value",l),e(n,4,0,!t.shouldHideField(n.context.$implicit))},null)}function Ty(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","-columns-2"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,xy)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.group.members,t.trackByName)},null)}var Oy=l["\u0275ccf"]("wp-attribute-group",yy,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-attribute-group",[],null,null,null,Ty,wy)),l["\u0275did"](1,49152,null,0,yy,[B.a,Oa,l.Injector],null,null)],null,null)},{workPackage:"workPackage",group:"group"},{},[]),Ey=function(e){function n(n,t,l,i,o,r,u){var a=e.call(this,o)||this;return a.PathHelper=n,a.wpInlineCreate=t,a.wpRelations=l,a.wpTableRefresh=i,a.queryUrlParamsHelper=o,a.wpNotifications=r,a.I18n=u,a.tableActions=[Gm.factoryFor("remove-relation-action",a.I18n.t("js.relation_buttons.remove"),function(e){a.embeddedTable.loadingIndicator=a.wpRelations.require(e.id).then(function(){return a.wpInlineCreate.remove(a.workPackage,e)}).then(function(){return a.refreshTable()}).catch(function(e){return a.wpNotifications.handleRawError(e,a.workPackage)})},function(e){return!!e.changeParent})],a}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this,n=this.getRelationTypeFromQuery();this.wpInlineCreate.referenceTarget=this.workPackage,this.wpInlineCreate.relationType=n,this.queryProps=this.buildQueryProps(),this.wpInlineCreate.newInlineWorkPackageCreated.pipe(Object(Ln.b)(this)).subscribe(function(n){return e.addRelation(n)}),this.wpRelations.observe(this.workPackage.id).pipe(Object(g.a)(function(e){return!_.isEmpty(e)}),Object(Ln.b)(this)).subscribe(function(){return e.refreshTable()})},n.prototype.ngOnDestroy=function(){},n.prototype.addRelation=function(e){var n=this;this.wpInlineCreate.add(this.workPackage,e).then(function(){n.wpTableRefresh.request("Added relation "+e,{visible:!0})}).catch(function(e){return n.wpNotifications.handleRawError(e,n.workPackage)})},n.prototype.getRelationTypeFromQuery=function(){return this.group.relationType},n}(Ym),Dy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Fy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.component.group.name)})}function Ay(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Fy)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,2,"wp-embedded-table",[],null,[[null,"onQueryLoaded"]],function(e,n,t){var l=!0,i=e.component;"onQueryLoaded"===n&&(l=!1!==i.handleQueryLoaded(t)&&l);return l},Um,Bm)),l["\u0275did"](4,4964352,[[1,4],["embeddedTable",4]],0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],initialLoadingIndicator:[1,"initialLoadingIndicator"],queryProps:[2,"queryProps"],tableActions:[3,"tableActions"]},{onQueryLoaded:"onQueryLoaded"}),l["\u0275pod"](5,{actionsColumnEnabled:0,hierarchyToggleEnabled:1,inlineCreateEnabled:2,compactTableStyle:3,columnMenuEnabled:4,contextMenuEnabled:5,projectIdentifier:6,projectContext:7})],function(e,n){var t=n.component;e(n,2,0,t.group);var l=e(n,5,0,!0,!1,!0,!0,!1,!1,t.workPackage.project.idFromLink,!1);e(n,4,0,l,!1,t.queryProps,t.tableActions)},null)}function Ny(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{embeddedTable:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Ay)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,!n.component.hidden)},null)}var My=l["\u0275ccf"]("wp-relation-query",Ey,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"wp-relation-query",[],null,null,null,Ny,Dy)),l["\u0275prd"](512,null,wc,pd,[l.Injector]),l["\u0275did"](2,245760,null,0,Ey,[ve,wc,Cn,zn,Ee,On,B.a],null,null)],function(e,n){e(n,2,0)},null)},{workPackage:"workPackage",query:"query",group:"group"},{},[]),Vy=t("xdbM"),qy=function(e){function n(n){var t=e.call(this,n)||this;return t.showTablePagination=!1,t.error=null,t.chartLabels=[],t.chartData=[],t.chartType="horizontalBar",t.chartOptions={responsive:!0,scales:{xAxes:[{stacked:!0,ticks:{callback:function(e){return Math.floor(e)===e?e:null}}}],yAxes:[{stacked:!0}]}},t}return r.d(n,e),n.prototype.ngOnChanges=function(e){this.initialized&&e.datasets&&this.loadQuery(!1)},n.prototype.updateChartData=function(){var e,n=this,t=_.uniq(this.datasets.reduce(function(e,n){var t=(n.groups||[]).map(function(e){return e.value});return e.concat(t)},[])),l=this.datasets.map(function(e){var n=(e.groups||[]).reduce(function(e,n){return e[n.value]=n.count,e},{});return{label:e.label,data:t.map(function(e){return n[e]||0})}});t=t.map(function(e){return e||n.I18n.t("js.placeholders.default")}),this.chartLabels.length=0,(e=this.chartLabels).push.apply(e,t),this.chartData=l},n.prototype.loadQuery=function(e){var n=this;void 0===e&&(e=!1),this.error=null;var t=this.datasets.map(function(e){return n.QueryDm.find(e.queryProps,e.queryId,n.queryProjectScope).then(function(n){return e.groups=n.results.groups,e})}),l=Promise.all(t).then(function(e){return n.setLoaded(),n.updateChartData(),e}).catch(function(e){n.error=n.I18n.t("js.error.embedded_table_loading",{message:_.get(e,"message",e)})});return e&&(this.loadingIndicator=l),l},n}(Jn),Ly=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function $y(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"canvas",[["baseChart",""]],null,null,null,null,null)),l["\u0275did"](2,737280,null,0,Vy.BaseChartDirective,[l.ElementRef],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"]},null)],function(e,n){var t=n.component;e(n,2,0,t.chartData,t.chartLabels,t.chartOptions,t.chartType)},null)}function Hy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.error.message||t.error)})}function By(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","work-packages-embedded-view--container loading-indicator--location"]],[[1,"data-indicator-name",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,$y)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Hy)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.renderTable),e(n,4,0,t.error)},function(e,n){e(n,0,0,n.component.uniqueEmbeddedTableName)})}l["\u0275ccf"]("wp-embedded-graph",qy,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-graph",[],null,null,null,By,Ly)),l["\u0275did"](1,4964352,null,0,qy,[l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{providedConfiguration:"configuration",uniqueEmbeddedTableName:"uniqueEmbeddedTableName",initialLoadingIndicator:"initialLoadingIndicator",datasets:"datasets"},{},[]);var zy=function(){function e(e,n){this.elementRef=e,this.I18n=n,this.groupBy="status",this.datasets=[],this.displayModeSingle=!0,this.availableGroupBy=[{label:n.t("js.work_packages.properties.category"),key:"category"},{label:n.t("js.work_packages.properties.type"),key:"type"},{label:n.t("js.work_packages.properties.status"),key:"status"},{label:n.t("js.work_packages.properties.priority"),key:"priority"},{label:n.t("js.work_packages.properties.author"),key:"author"},{label:n.t("js.work_packages.properties.assignee"),key:"assignee"}]}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.versionId=JSON.parse(e.getAttribute("version-id")),this.setQueryProps()},e.prototype.setQueryProps=function(){this.datasets=[],"status"===this.groupBy?(this.displayModeSingle=!0,this.datasets.push({label:this.I18n.t("js.label_all"),queryProps:this.propsBoth})):(this.displayModeSingle=!1,this.datasets.push({label:this.I18n.t("js.label_open_work_packages"),queryProps:this.propsOpen}),this.datasets.push({label:this.I18n.t("js.label_closed_work_packages"),queryProps:this.propsClosed}))},Object.defineProperty(e.prototype,"propsBoth",{get:function(){return this.baseProps()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"propsOpen",{get:function(){return this.baseProps({status:{operator:"o",values:[]}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"propsClosed",{get:function(){return this.baseProps({status:{operator:"c",values:[]}})},enumerable:!0,configurable:!0}),e.prototype.baseProps=function(e){var n=[{version:{operator:"=",values:[this.versionId]}},{subprojectId:{operator:"*",values:[]}}];return e&&n.push(e),{"columns[]":[],filters:JSON.stringify(n),group_by:this.groupBy,pageSize:0}},Object.defineProperty(e.prototype,"displaySingle",{get:function(){return this.displayModeSingle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMulti",{get:function(){return!this.displayModeSingle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentGraph",{get:function(){return this.displaySingle?this.embeddedGraphSingle:this.embeddedGraphMulti},enumerable:!0,configurable:!0}),e}();gt.DynamicBootstrapper.register({selector:"wp-by-version-graph",cls:zy});var Wy=[[".wp-by-version-graph--container[_ngcontent-%COMP%]{min-height:300px}"]],Qy=l["\u0275crt"]({encapsulation:0,styles:Wy,data:{}});function Uy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[2,Pt.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),(e()(),l["\u0275ted"](3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.key),e(n,2,0,n.context.$implicit.key)},function(e,n){e(n,3,0,n.context.$implicit.label)})}function Ky(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-graph",[],null,null,null,By,Ly)),l["\u0275did"](1,4964352,[[1,4],["wpEmbeddedGraphMulti",4]],0,qy,[l.Injector],{initialLoadingIndicator:[0,"initialLoadingIndicator"],datasets:[1,"datasets"]},null)],function(e,n){e(n,1,0,!1,n.component.datasets)},null)}function Gy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-graph",[],null,null,null,By,Ly)),l["\u0275did"](1,4964352,[[2,4],["wpEmbeddedGraphSingle",4]],0,qy,[l.Injector],{initialLoadingIndicator:[0,"initialLoadingIndicator"],datasets:[1,"datasets"]},null)],function(e,n){e(n,1,0,!1,n.component.datasets)},null)}function Yy(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{embeddedGraphMulti:0}),l["\u0275qud"](671088640,2,{embeddedGraphSingle:0}),(e()(),l["\u0275eld"](2,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,3).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.groupBy=t)&&i);"ngModelChange"===n&&(i=!1!==o.setQueryProps()&&i);return i},null,null)),l["\u0275did"](3,16384,null,0,Pt.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.p]),l["\u0275did"](5,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](7,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,Uy)),l["\u0275did"](9,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](10,0,null,null,35,"div",[["class","wp-by-version-graph--container"],["wp-isolated-query-space",""]],null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](41,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ky)),l["\u0275did"](43,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Gy)),l["\u0275did"](45,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.groupBy),e(n,9,0,t.availableGroupBy),e(n,43,0,t.displayMulti),e(n,45,0,t.displaySingle)},function(e,n){e(n,2,0,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}var Zy=l["\u0275ccf"]("wp-by-version-graph",zy,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-by-version-graph",[],null,null,null,Yy,Qy)),l["\u0275did"](1,114688,null,0,zy,[l.ElementRef,B.a],null,null)],function(e,n){e(n,1,0)},null)},{versionId:"versionId"},{},[]),Jy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Xy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function ew(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,2,null,Xy)),l["\u0275did"](2,671744,null,0,It.NgComponentOutlet,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null),l["\u0275did"](3,16384,null,0,tr.g,[It.NgComponentOutlet],null,null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.prependModalComponent,t.injector)},null)}function nw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"a",[["class","tab-show"],["href",""],["role","button"]],[[1,"title",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchTo(e.context.$implicit.name)&&l);return l},null,null)),l["\u0275did"](2,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"-disabled":0,selected:1})],function(e,n){var t=n.component,l=e(n,3,0,null!=n.context.$implicit.disableBecause,t.currentTab&&n.context.$implicit.name===t.currentTab.name);e(n,2,0,"tab-show",l)},function(e,n){e(n,1,0,n.context.$implicit.disableBecause||n.context.$implicit.title,n.context.$implicit.title)})}function tw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","tabs--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,nw)),l["\u0275did"](3,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","tabs-buttons"],["style","display:none;"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"button",[["class","tab-left icon-context icon-arrow-left4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"button",[["class","tab-right icon-context icon-arrow-right5"]],null,null,null,null,null))],function(e,n){e(n,3,0,n.component.availableTabs)},null)}function lw(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{tabContentOutlet:0}),(e()(),l["\u0275eld"](1,0,null,null,13,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,12,"div",[["class","op-modal--modal-container -wide wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ew)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,tw)),l["\u0275did"](10,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](11,0,[[1,0],["tabContentOutlet",1]],null,0,"div",[["class","tab-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,2,"div",[["class","modal--form-actions"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,0,"button",[["class","button -highlight"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveChanges()&&l);return l},null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,8,0,!!t.prependModalComponent),e(n,10,0,!!t.tabPortalHost)},function(e,n){var t=n.component;e(n,5,0,t.text.closePopup),e(n,6,0,t.text.title),e(n,13,0,t.text.applyButton),e(n,14,0,t.text.cancelButton)})}var iw=l["\u0275ccf"]("ng-component",Nn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,lw,Jy)),l["\u0275did"](1,245760,null,0,Nn,[Mn.a,[2,An],B.a,l.Injector,l.ApplicationRef,l.ComponentFactoryResolver,Sn,y,dn,Fn,On,qe,l.ChangeDetectorRef,Ne,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ow=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function rw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[2,Pt.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.component.text[n.context.$implicit.id])})}function uw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[["class","relation-filter-selector"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,12,"h5",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](4,0,null,null,7,"select",[["class","form--select form--inline-select"],["id",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,5).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,5).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedRelationFilter=t)&&i);"ngModelChange"===n&&(i=!1!==o.onRelationFilterSelected()&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,Pt.p,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.p]),l["\u0275did"](7,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](9,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,rw)),l["\u0275did"](11,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](13,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,5,0,t.compareRelationFilters),e(n,7,0,t.selectedRelationFilter),e(n,11,0,t.availableRelationFilters)},function(e,n){var t=n.component;e(n,2,0,t.text.first_part),e(n,4,0,l["\u0275nov"](n,9).ngClassUntouched,l["\u0275nov"](n,9).ngClassTouched,l["\u0275nov"](n,9).ngClassPristine,l["\u0275nov"](n,9).ngClassDirty,l["\u0275nov"](n,9).ngClassValid,l["\u0275nov"](n,9).ngClassInvalid,l["\u0275nov"](n,9).ngClassPending),e(n,13,0,t.text.second_part)})}var aw=l["\u0275ccf"]("wp-table-configuration-relation-selector",it,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-table-configuration-relation-selector",[],null,null,null,uw,ow)),l["\u0275did"](1,114688,null,0,it,[l.Injector,B.a,en,Ne],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),sw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function cw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"enterprise-banner",[["class","ee-relation-columns-upsale"],["opReferrer","wp-list-columns#relations"]],null,null,null,mf,gf)),l["\u0275did"](1,49152,null,0,hf,[B.a],{textMessage:[0,"textMessage"],linkMessage:[1,"linkMessage"],opReferrer:[2,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.upsaleRelationColumns,t.text.upsaleCheckOutLink,"wp-list-columns#relations")},null)}function dw(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{select2Columns:0}),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","columns-modal--content select2-modal-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"label",[["class","hidden-for-sighted"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,[[1,0],["select2Columns",1]],null,0,"input",[["type","hidden"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"p",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,cw)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.component.eeShowBanners)},function(e,n){var t=n.component;e(n,2,0,t.text.selectedColumns),e(n,6,0,t.text.columnsHelp)})}var pw=l["\u0275ccf"]("ng-component",Ye,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,dw,sw)),l["\u0275did"](1,4440064,null,0,Ye,[l.Injector,B.a,qe,Ne,Ge],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),hw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function fw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.display_mode.hierarchy_hint)})}function gw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.href),e(n,2,0,n.context.$implicit.href)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.name,t.currentGroup&&t.currentGroup.href===n.context.$implicit.href)})}function mw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,65,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,64,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,3).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,3).onReset()&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Pt.t,[],null,null),l["\u0275did"](3,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](5,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](6,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,15,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,14,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,13,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,6,"input",[["name","display_mode_switch"],["type","radio"],["value","default"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,11)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,11).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,11)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,11)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,12).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,12).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.displayMode=t)&&i);return i},null,null)),l["\u0275did"](11,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](12,212992,null,0,Pt.n,[l.Renderer2,l.ElementRef,Pt.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.n]),l["\u0275did"](14,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](16,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](17,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-no-hierarchy"]],[[1,"icon-title",0]],null,null,Zt,Gt)),l["\u0275did"](18,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](20,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](22,0,null,null,0,"span",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,16,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,null,null,15,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,14,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,6,"input",[["name","display_mode_switch"],["type","radio"],["value","hierarchy"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,27)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,27).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,27)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,27)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,28).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,28).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.displayMode=t)&&i);return i},null,null)),l["\u0275did"](27,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](28,212992,null,0,Pt.n,[l.Renderer2,l.ElementRef,Pt.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.n]),l["\u0275did"](30,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](32,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](33,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-hierarchy"]],[[1,"icon-title",0]],null,null,Zt,Gt)),l["\u0275did"](34,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](36,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275and"](16777216,null,null,1,null,fw)),l["\u0275did"](39,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](40,0,null,null,17,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](41,0,null,null,16,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](42,0,null,null,15,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](43,0,null,null,6,"input",[["name","display_mode_switch"],["type","radio"],["value","grouped"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,44)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,44).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,44)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,44)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,45).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,45).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.displayMode=t)&&i);return i},null,null)),l["\u0275did"](44,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](45,212992,null,0,Pt.n,[l.Renderer2,l.ElementRef,Pt.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.n]),l["\u0275did"](47,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](49,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](50,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-group-by"]],[[1,"icon-title",0]],null,null,Zt,Gt)),l["\u0275did"](51,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](53,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](55,0,null,null,2,"select",[["class","form--select form--inline-select"],["id","selected_grouping"],["name","selected_grouping"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateGroup(t.target.value)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,gw)),l["\u0275did"](57,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](58,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](59,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](60,0,null,null,5,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](61,0,null,null,4,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](62,0,null,null,3,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](63,0,null,null,0,"input",[["name","display_sums_switch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!=(i.displaySums=!i.displaySums)&&l);return l},null,null)),(e()(),l["\u0275ted"](64,null,[" "," "])),(e()(),l["\u0275eld"](65,0,null,null,0,"span",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,12,0,"display_mode_switch","default");e(n,14,0,"display_mode_switch",t.displayMode);e(n,18,0,"icon-no-hierarchy");e(n,28,0,"display_mode_switch","hierarchy");e(n,30,0,"display_mode_switch",t.displayMode);e(n,34,0,"icon-hierarchy"),e(n,39,0,"hierarchy"===t.displayMode);e(n,45,0,"display_mode_switch","grouped");e(n,47,0,"display_mode_switch",t.displayMode);e(n,51,0,"icon-group-by"),e(n,57,0,t.availableGroups)},function(e,n){var t=n.component;e(n,1,0,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending),e(n,6,0,t.text.choose_mode),e(n,10,0,l["\u0275nov"](n,16).ngClassUntouched,l["\u0275nov"](n,16).ngClassTouched,l["\u0275nov"](n,16).ngClassPristine,l["\u0275nov"](n,16).ngClassDirty,l["\u0275nov"](n,16).ngClassValid,l["\u0275nov"](n,16).ngClassInvalid,l["\u0275nov"](n,16).ngClassPending),e(n,17,0,t.text.display_mode.default),e(n,20,0,t.text.display_mode.default),e(n,22,0,t.text.default),e(n,26,0,l["\u0275nov"](n,32).ngClassUntouched,l["\u0275nov"](n,32).ngClassTouched,l["\u0275nov"](n,32).ngClassPristine,l["\u0275nov"](n,32).ngClassDirty,l["\u0275nov"](n,32).ngClassValid,l["\u0275nov"](n,32).ngClassInvalid,l["\u0275nov"](n,32).ngClassPending),e(n,33,0,t.text.display_mode.hierarchy),e(n,36,0,t.text.display_mode.hierarchy),e(n,43,0,l["\u0275nov"](n,49).ngClassUntouched,l["\u0275nov"](n,49).ngClassTouched,l["\u0275nov"](n,49).ngClassPristine,l["\u0275nov"](n,49).ngClassDirty,l["\u0275nov"](n,49).ngClassValid,l["\u0275nov"](n,49).ngClassInvalid,l["\u0275nov"](n,49).ngClassPending),e(n,50,0,t.text.label_group_by),e(n,53,0,t.text.label_group_by),e(n,63,0,t.displaySums),e(n,64,0,t.text.display_sums),e(n,65,0,t.text.display_sums_hint)})}var vw=l["\u0275ccf"]("ng-component",Ke,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,mw,hw)),l["\u0275did"](1,114688,null,0,Ke,[l.Injector,B.a,$e,Qe,Ue],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),bw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function yw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"query-filters",[],null,[[null,"filtersChanged"]],function(e,n,t){var l=!0,i=e.component;"filtersChanged"===n&&(l=!1!==(i.filters=t)&&l);return l},Sf,kf)),l["\u0275did"](1,770048,null,0,wf,[en,Ze,B.a,Ge],{filters:[0,"filters"]},{filtersChanged:"filtersChanged"})],function(e,n){e(n,1,0,n.component.filters)},null)}function ww(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,yw)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,!!n.component.filters)},null)}var kw=l["\u0275ccf"]("ng-component",nn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,ww,bw)),l["\u0275did"](1,114688,null,0,nn,[l.Injector,B.a,en,Ze,Ge],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Cw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Iw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["selected",""]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.column.href),e(n,2,0,n.parent.context.$implicit.column.href)},function(e,n){e(n,0,0,n.parent.context.$implicit.column.name)})}function Pw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.href),e(n,2,0,n.context.$implicit.href)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function jw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"input",[["type","radio"]],[[8,"textContent",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["\u0275nov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,3).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(e.parent.context.$implicit.direction=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](3,212992,null,0,Pt.n,[l.Renderer2,l.ElementRef,Pt.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.n]),l["\u0275did"](5,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](7,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275ted"](8,null,[" "," "]))],function(e,n){e(n,3,0,l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.parent.context.index,"--sort-direction"),n.context.$implicit.$href),e(n,5,0,l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.parent.context.index,"--sort-direction"),n.parent.context.$implicit.direction)},function(e,n){e(n,1,0,n.context.$implicit.name,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending),e(n,8,0,n.context.$implicit.name)})}function _w(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,16,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,11,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"label",[["class","form--label hidden-for-sighted"]],[[8,"htmlFor",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,8,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,7,"select",[["class","form--select"]],[[8,"id",0],[8,"name",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateSelection(e.context.$implicit,t.target.value)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Iw)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](8,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](9,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](10,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Pw)),l["\u0275did"](12,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](13,0,null,null,3,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,jw)),l["\u0275did"](16,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,7,0,!!n.context.$implicit.column.href),e(n,9,0,t.emptyColumn.href),e(n,10,0,t.emptyColumn.href),e(n,12,0,t.availableColumns),e(n,16,0,t.availableDirections)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"form--row modal-sorting-row-",n.context.index,"")),e(n,2,0,l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.context.index,""),t.text["sort_criteria_"+n.context.index]),e(n,5,0,l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.context.index,""),l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.context.index,"")),e(n,8,0,t.emptyColumn.name,!n.context.$implicit.column.href)})}function Rw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"form",[["name","modalSortingForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,2).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,2).onReset()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Pt.t,[],null,null),l["\u0275did"](2,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](4,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](5,0,null,null,2,"div",[["class","modal-content-container loading-indicator--location"],["data-indicator-name","sorting-modal"],["id","modal-sorting"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,_w)),l["\u0275did"](7,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,7,0,n.component.sortationObjects)},function(e,n){e(n,0,0,l["\u0275nov"](n,4).ngClassUntouched,l["\u0275nov"](n,4).ngClassTouched,l["\u0275nov"](n,4).ngClassPristine,l["\u0275nov"](n,4).ngClassDirty,l["\u0275nov"](n,4).ngClassValid,l["\u0275nov"](n,4).ngClassInvalid,l["\u0275nov"](n,4).ngClassPending)})}var Sw=l["\u0275ccf"]("ng-component",ln,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Rw,Cw)),l["\u0275did"](1,114688,null,0,ln,[l.Injector,B.a,We],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),xw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Tw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){var t=n.component;e(n,0,0,t.text.zoom[n.context.$implicit],t.zoomLevel===n.context.$implicit)})}function Ow(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.id),e(n,2,0,n.context.$implicit.id)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.name,t.labels[n.parent.context.$implicit]===n.context.$implicit.id)})}function Ew(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","form--row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"label",[["class","form--label"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["\u0275ted"](3,null,[" "," "])),(e()(),l["\u0275eld"](4,0,null,null,4,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,3,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"select",[["class","form--select"]],[[8,"id",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateLabels(e.context.$implicit,t.target.value)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ow)),l["\u0275did"](8,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,8,0,n.component.availableAttributes)},function(e,n){var t=n.component;e(n,2,0,l["\u0275inlineInterpolate"](1,"modal-timelines-label-",n.context.$implicit,"")),e(n,3,0,t.text.labels[n.context.$implicit]),e(n,6,0,l["\u0275inlineInterpolate"](1,"modal-timelines-label-",n.context.$implicit,""))})}function Dw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,14,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"legend",[["class","form--fieldset-legend"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,4,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,3,"div",[["class","form--text-select-container -slim"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,2,"select",[["class","form--select"],["id","modal-timelines-zoomlevel"]],[[1,"disabled",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.zoomLevel=t.target.value)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Tw)),l["\u0275did"](9,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](10,0,null,null,4,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,0,"legend",[["class","form--fieldset-legend"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ew)),l["\u0275did"](14,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,9,0,t.availableZoomLevels),e(n,14,0,t.availableLabels)},function(e,n){var t=n.component;e(n,2,0,t.text.zoom.level),e(n,3,0,t.text.zoom.description),e(n,7,0,!0===t.autoZoom?"disabled":void 0),e(n,11,0,t.text.labels.title),e(n,12,0,t.text.labels.description)})}function Fw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,12,"form",[["class","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,3).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,3).onReset()&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Pt.t,[],null,null),l["\u0275did"](3,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](5,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](6,0,null,null,5,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"label",[["class","form--label"],["for","display_timelines_switch"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,1,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"input",[["id","display_timelines_switch"],["name","display_timelines_switch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!=(i.timelineVisible=!i.timelineVisible)&&l);return l},null,null)),(e()(),l["\u0275eld"](11,0,null,null,0,"p",[["class","form--field-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Dw)),l["\u0275did"](13,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,13,0,n.component.timelineVisible)},function(e,n){var t=n.component;e(n,1,0,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending),e(n,7,0,t.text.display_timelines),e(n,10,0,t.timelineVisible),e(n,11,0,t.text.display_timelines_hint)})}var Aw=l["\u0275ccf"]("ng-component",on,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Fw,xw)),l["\u0275did"](1,114688,null,0,on,[l.Injector,B.a,M,qe],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Nw=function(){function e(e){this.I18n=e,this.isRequired=!1,this.isDisabled=!1,this.currentValueInvalid=!1,this.onValueChange=new l.EventEmitter,this.onMultiToggle=new l.EventEmitter,this.onValueKeydown=new l.EventEmitter,this.text={requiredPlaceholder:this.I18n.t("js.placeholders.selection"),placeholder:this.I18n.t("js.placeholders.default"),switch_to_single_select:this.I18n.t("js.work_packages.label_switch_to_single_select"),switch_to_multi_select:this.I18n.t("js.work_packages.label_switch_to_multi_select")},this.isMultiselect=!1,this.compareByValue=Np.compareByAttribute("value")}return e.prototype.ngOnInit=function(){this.ensureSingleInitialSelectionIsNotArray(),this.isMultiselect=this.hasMultipleSelectedOptions()},e.prototype.hasMultipleSelectedOptions=function(){return this.selectedOption instanceof Array&&this.selectedOption.length>1},e.prototype.emitValueChange=function(){this.onValueChange.emit(_.castArray(this.selectedOption||[]))},e.prototype.toggleMultiselect=function(){this.isMultiselect=!this.isMultiselect,this.isMultiselect?this._selectedOption=_.castArray(this.selectedOption||[]):Array.isArray(this.selectedOption)&&(0===this.selectedOption.length?this.onEmptySelection():this._selectedOption=this.selectedOption[0],this.emitValueChange())},Object.defineProperty(e.prototype,"availableMultiOptions",{get:function(){return this.availableOptions.filter(function(e){return!0!==e.singleOnly})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedOption",{get:function(){return this._selectedOption},set:function(e){this._selectedOption=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullOption",{get:function(){return{name:this.text.placeholder,value:""}},enumerable:!0,configurable:!0}),e.prototype.ensureSingleInitialSelectionIsNotArray=function(){Array.isArray(this.initialSelection)&&(1===this.initialSelection.length?this.selectedOption=this.initialSelection[0]:this.selectedOption=this.initialSelection)},e.prototype.onEmptySelection=function(){var e=_.find(this.availableOptions,function(e){return!0===e.selectWhenEmptySelection});e&&(this.selectedOption=e)},e}(),Mw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Vw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0],[1,"label",0],[8,"selected",0],[1,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[2,Pt.p]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,"");e(n,2,0,"")},function(e,n){var t=n.component;e(n,0,0,t.text.requiredPlaceholder,t.text.requiredPlaceholder,t.currentValueInvalid||0==t.availableOptions.length,t.currentValueInvalid||0==t.availableOptions.length||void 0)})}function qw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[1,"label",0],[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[2,Pt.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name,n.context.$implicit.name)})}function Lw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"select",[["class","focus-input wp-inline-edit--field inplace-edit--field form--select"]],[[1,"aria-required",0],[1,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,1).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedOption=t)&&i);"keydown"===n&&(i=!1!==o.onValueKeydown.emit(t)&&i);"change"===n&&(i=!1!==o.emitValueChange()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Pt.p,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275did"](2,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.p]),l["\u0275did"](5,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](7,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,Vw)),l["\u0275did"](9,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,qw)),l["\u0275did"](11,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.compareByValue),e(n,2,0,t.isRequired),e(n,5,0,t.isDisabled,t.selectedOption),e(n,9,0,t.currentValueInvalid||0==t.availableOptions.length),e(n,11,0,t.availableOptions)},function(e,n){var t=n.component;e(n,0,0,t.isRequired,t.selectHtmlId||void 0,l["\u0275nov"](n,2).required?"":null,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}function $w(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0],[1,"label",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[2,Pt.q]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,"");e(n,2,0,"")},function(e,n){var t=n.component;e(n,0,0,t.text.requiredPlaceholder,t.text.requiredPlaceholder,t.currentValueInvalid||0==t.availableOptions.length)})}function Hw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[1,"label",0],[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[2,Pt.q]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name,n.context.$implicit.name)})}function Bw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"select",[["class","focus-input wp-inline-edit--field inplace-edit--textarea -animated form--select"],["multiple",""],["size","5"]],[[1,"aria-required",0],[1,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,1).onChange(t.target)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedOption=t)&&i);"keydown"===n&&(i=!1!==o.onValueKeydown.emit(t)&&i);"change"===n&&(i=!1!==o.emitValueChange()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Pt.q,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275did"](2,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.q]),l["\u0275did"](5,671744,null,0,Pt.l,[[8,null],[6,Pt.f],[8,null],[6,Pt.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](7,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,$w)),l["\u0275did"](9,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Hw)),l["\u0275did"](11,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.compareByValue),e(n,2,0,t.isRequired),e(n,5,0,t.isDisabled,t.selectedOption),e(n,9,0,t.currentValueInvalid||0==t.availableOptions.length),e(n,11,0,t.availableMultiOptions)},function(e,n){var t=n.component;e(n,0,0,t.isRequired,t.selectHtmlId||void 0,l["\u0275nov"](n,2).required?"":null,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}function zw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-minus2 icon4"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,"icon-minus2 icon4",n.component.text.switch_to_single_select)},null)}function Ww(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon4"]],null,null,null,Zt,Gt)),l["\u0275did"](1,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,"icon-add icon4",n.component.text.switch_to_multi_select)},null)}function Qw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"div",[["class","inline-label"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Lw)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Bw)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,null,null,4,"a",[["class","wp-inline-edit--toggle-multiselect form-label no-decoration-on-hover -transparent"],["href",""]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleMultiselect()&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,zw)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ww)),l["\u0275did"](9,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.isMultiselect),e(n,4,0,t.isMultiselect),e(n,7,0,t.isMultiselect),e(n,9,0,!t.isMultiselect)},null)}l["\u0275ccf"]("multi-toggled-select",Nw,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"multi-toggled-select",[],null,null,null,Qw,Mw)),l["\u0275did"](1,114688,null,0,Nw,[B.a],null,null)],function(e,n){e(n,1,0)},null)},{availableOptions:"availableOptions",initialSelection:"initialSelection",selectHtmlId:"selectHtmlId",isRequired:"isRequired",isDisabled:"isDisabled",currentValueInvalid:"currentValueInvalid"},{onValueChange:"onValueChange",onMultiToggle:"onMultiToggle",onValueKeydown:"onValueKeydown"},[]);var Uw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Kw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"enterprise-banner",[["class","ee-attribute-highlighting-upsale"],["opReferrer","wp-attribute-highlighting#attribute-highlighting"]],null,null,null,mf,gf)),l["\u0275did"](1,49152,null,0,hf,[B.a],{textMessage:[0,"textMessage"],linkMessage:[1,"linkMessage"],opReferrer:[2,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.upsaleAttributeHighlighting,t.text.upsaleCheckOutLink,"wp-attribute-highlighting#attribute-highlighting")},null)}function Gw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,51,"div",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Kw)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,48,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,5).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,5).onReset()&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Pt.t,[],null,null),l["\u0275did"](5,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](7,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](8,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,12,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,11,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,10,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,6,"input",[["name","highlighting_mode_switch"],["type","radio"],["value","inline"]],[[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,13)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,13).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,13)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,13)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,14).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,14).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.highlightingMode=t)&&i);"change"===n&&(i=!1!==o.updateMode(t.target.value)&&i);return i},null,null)),l["\u0275did"](13,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](14,212992,null,0,Pt.n,[l.Renderer2,l.ElementRef,Pt.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.n]),l["\u0275did"](16,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](18,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275ted"](19,null,[" "," \xa0 "])),(e()(),l["\u0275eld"](20,0,null,null,1,"multi-toggled-select",[],null,[[null,"onValueChange"]],function(e,n,t){var l=!0,i=e.component;"onValueChange"===n&&(l=!1!==(i.selectedAttributes=t)&&l);return l},Qw,Mw)),l["\u0275did"](21,114688,null,0,Nw,[B.a],{availableOptions:[0,"availableOptions"],initialSelection:[1,"initialSelection"],isDisabled:[2,"isDisabled"]},{onValueChange:"onValueChange"}),(e()(),l["\u0275eld"](22,0,null,null,18,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,17,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,null,null,16,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,6,"input",[["name","entire_row_switch"],["type","radio"]],[[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,26)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,26).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,26)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,26)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,27).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,27).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.entireRowMode=t)&&i);"change"===n&&(i=!1!==o.updateMode("entire-row")&&i);return i},null,null)),l["\u0275did"](26,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](27,212992,null,0,Pt.n,[l.Renderer2,l.ElementRef,Pt.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.n]),l["\u0275did"](29,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](31,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](32,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](34,0,null,null,6,"select",[["class","form--select form--inline-select"],["id","selected_attribute"],["name","selected_attribute"]],[[1,"disabled",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateMode(t.target.value)&&l);return l},null,null)),(e()(),l["\u0275eld"](35,0,null,null,2,"option",[["value","status"]],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](36,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](37,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275eld"](38,0,null,null,2,"option",[["value","priority"]],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](39,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](40,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275eld"](41,0,null,null,10,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](42,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](43,0,null,null,8,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](44,0,null,null,6,"input",[["name","highlighting_mode_switch"],["type","radio"],["value","none"]],[[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,45)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,45).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,45)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,45)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,46).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,46).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.highlightingMode=t)&&i);"change"===n&&(i=!1!==o.updateMode(t.target.value)&&i);return i},null,null)),l["\u0275did"](45,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](46,212992,null,0,Pt.n,[l.Renderer2,l.ElementRef,Pt.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.n]),l["\u0275did"](48,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](50,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](51,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,t.eeShowBanners);e(n,14,0,"highlighting_mode_switch","inline");e(n,16,0,"highlighting_mode_switch",t.highlightingMode),e(n,21,0,t.availableMappedHighlightedAttributes,t.selectedAttributes,"inline"!==t.highlightingMode);e(n,27,0,"entire_row_switch",!0);e(n,29,0,"entire_row_switch",t.entireRowMode);e(n,36,0,"status");e(n,37,0,"status");e(n,39,0,"priority");e(n,40,0,"priority");e(n,46,0,"highlighting_mode_switch","none");e(n,48,0,"highlighting_mode_switch",t.highlightingMode)},function(e,n){var t=n.component;e(n,3,0,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending),e(n,8,0,t.text.highlighting_mode.description),e(n,12,0,t.disabledValue(t.eeShowBanners),l["\u0275nov"](n,18).ngClassUntouched,l["\u0275nov"](n,18).ngClassTouched,l["\u0275nov"](n,18).ngClassPristine,l["\u0275nov"](n,18).ngClassDirty,l["\u0275nov"](n,18).ngClassValid,l["\u0275nov"](n,18).ngClassInvalid,l["\u0275nov"](n,18).ngClassPending),e(n,19,0,t.text.highlighting_mode.inline),e(n,25,0,t.disabledValue(t.eeShowBanners),l["\u0275nov"](n,31).ngClassUntouched,l["\u0275nov"](n,31).ngClassTouched,l["\u0275nov"](n,31).ngClassPristine,l["\u0275nov"](n,31).ngClassDirty,l["\u0275nov"](n,31).ngClassValid,l["\u0275nov"](n,31).ngClassInvalid,l["\u0275nov"](n,31).ngClassPending),e(n,32,0,t.text.highlighting_mode.entire_row_by),e(n,34,0,t.disabledValue(t.eeShowBanners)),e(n,35,0,t.text.highlighting_mode.status,"status"===t.lastEntireRowAttribute),e(n,38,0,t.text.highlighting_mode.priority,"priority"===t.lastEntireRowAttribute),e(n,44,0,t.disabledValue(t.eeShowBanners),l["\u0275nov"](n,50).ngClassUntouched,l["\u0275nov"](n,50).ngClassTouched,l["\u0275nov"](n,50).ngClassPristine,l["\u0275nov"](n,50).ngClassDirty,l["\u0275nov"](n,50).ngClassValid,l["\u0275nov"](n,50).ngClassInvalid,l["\u0275nov"](n,50).ngClassPending),e(n,51,0,t.text.highlighting_mode.none)})}var Yw=l["\u0275ccf"]("ng-component",an,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Gw,Uw)),l["\u0275did"](1,114688,null,0,an,[l.Injector,B.a,s,y,Ge,un],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Zw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Jw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"a",[],[[1,"href",4],[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[["class","export-label"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,l["\u0275inlineInterpolate"](1,"icon-export-",n.context.$implicit.identifier," icon-big"))},function(e,n){e(n,1,0,n.context.$implicit.url,l["\u0275inlineInterpolate"](1,"export-",n.context.$implicit.identifier,"")),e(n,4,0,n.context.$implicit.label)})}function Xw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","export-options"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Jw)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.exportOptions)},null)}function ek(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Xw)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,7,0,n.component.exportOptions)},function(e,n){var t=n.component;e(n,4,0,t.text.closePopup),e(n,5,0,t.text.title)})}var nk=l["\u0275ccf"]("ng-component",db,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,ek,Zw)),l["\u0275did"](1,245760,null,0,db,[Mn.a,B.a,l.ElementRef,Ee,y,l.ChangeDetectorRef,qe],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),tk=function(){function e(e,n,t,i){this.states=e,this.querySpace=n,this.authorisationService=t,this.I18n=i,this.onChange=new l.EventEmitter,this.text={showInMenu:this.I18n.t("js.label_star_query"),visibleForOthers:this.I18n.t("js.label_public_query")}}return Object.defineProperty(e.prototype,"canStar",{get:function(){return this.isSave||this.authorisationService.can("query","star")||this.authorisationService.can("query","unstar")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canPublish",{get:function(){var e=this.querySpace.queryForm.value;return this.authorisationService.can("query","updateImmediately")&&e.schema.public.writable},enumerable:!0,configurable:!0}),e.prototype.updateStarred=function(e){this.isStarred=e,this.changed()},e.prototype.updatePublic=function(e){this.isPublic=e,this.changed()},e.prototype.changed=function(){this.onChange.emit({isStarred:!!this.isStarred,isPublic:!!this.isPublic})},e}(),lk=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ik(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,19,"div",[["class","form--field -wide-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,18,"div",[["class","form--field-container -vertical"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"input",[["class","form--check-box"],["id","show-public"],["name","is_public"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,5).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,5).onTouched()&&i);"ngModelChange"===n&&(i=!1!==o.updatePublic(t)&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,Pt.b,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.b]),l["\u0275did"](7,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](9,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275ted"](10,null,[" "," "])),(e()(),l["\u0275eld"](11,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,5,"input",[["class","form--check-box"],["id","show-in-menu"],["name","show_in_menu"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,14).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,14).onTouched()&&i);"ngModelChange"===n&&(i=!1!==o.updateStarred(t)&&i);return i},null,null)),l["\u0275did"](14,16384,null,0,Pt.b,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.b]),l["\u0275did"](16,671744,null,0,Pt.l,[[8,null],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](18,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275ted"](19,null,[" "," "]))],function(e,n){var t=n.component;e(n,7,0,"is_public",!t.canPublish,t.isPublic);e(n,16,0,"show_in_menu",!t.canStar,t.isStarred)},function(e,n){var t=n.component;e(n,4,0,l["\u0275nov"](n,9).ngClassUntouched,l["\u0275nov"](n,9).ngClassTouched,l["\u0275nov"](n,9).ngClassPristine,l["\u0275nov"](n,9).ngClassDirty,l["\u0275nov"](n,9).ngClassValid,l["\u0275nov"](n,9).ngClassInvalid,l["\u0275nov"](n,9).ngClassPending),e(n,10,0,t.text.visibleForOthers),e(n,13,0,l["\u0275nov"](n,18).ngClassUntouched,l["\u0275nov"](n,18).ngClassTouched,l["\u0275nov"](n,18).ngClassPristine,l["\u0275nov"](n,18).ngClassDirty,l["\u0275nov"](n,18).ngClassValid,l["\u0275nov"](n,18).ngClassInvalid,l["\u0275nov"](n,18).ngClassPending),e(n,19,0,t.text.showInMenu)})}l["\u0275ccf"]("query-sharing-form",tk,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"query-sharing-form",[],null,null,null,ik,lk)),l["\u0275did"](1,49152,null,0,tk,[s,y,Dn,B.a],null,null)],null,null)},{isSave:"isSave",isStarred:"isStarred",isPublic:"isPublic"},{onChange:"onChange"},[]);var ok=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function rk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"query-sharing-form",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.setValues(t)&&l);return l},ik,lk)),l["\u0275did"](7,49152,null,0,tk,[s,y,Dn,B.a],{isSave:[0,"isSave"],isStarred:[1,"isStarred"],isPublic:[2,"isPublic"]},{onChange:"onChange"}),(e()(),l["\u0275eld"](8,0,null,null,2,"div",[["class","form--space"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"button",[["class","button -highlight -with-icon icon-checkmark"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveQuery(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,7,0,!1,t.isStarred,t.isPublic)},function(e,n){var t=n.component;e(n,4,0,t.text.close_popup),e(n,5,0,t.text.label_visibility_settings),e(n,9,0,t.text.button_save),e(n,10,0,t.text.button_cancel,t.isBusy)})}var uk=l["\u0275ccf"]("ng-component",hb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,rk,ok)),l["\u0275did"](1,245760,null,0,hb,[l.ElementRef,Mn.a,B.a,s,y,l.ChangeDetectorRef,Yn,On,Tn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ak=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function sk(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{queryNameField:0}),(e()(),l["\u0275eld"](1,0,null,null,30,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,29,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,6).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,6).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.closeMe(t)&&i);return i},null,null)),l["\u0275did"](6,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](7,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,23,"form",[["class","form"],["name","modalSaveForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,Pt.t,[],null,null),l["\u0275did"](10,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](12,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](13,0,null,null,11,"div",[["class","form--field -required"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"label",[["class","form--label"],["for","save-query-name"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,8,"div",[["class","form--text-field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,[[1,0],["queryNameField",1]],null,7,"input",[["class","form--text-field"],["id","save-query-name"],["name","save-query-name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,18)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,18).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,18)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,18)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.queryName=t)&&i);return i},null,null)),l["\u0275did"](18,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](19,16384,null,0,Pt.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,Pt.f,function(e){return[e]},[Pt.o]),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](22,671744,null,0,Pt.l,[[2,Pt.c],[6,Pt.f],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](24,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](25,0,null,null,3,"section",[["class","form--section"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,1,"query-sharing-form",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.setValues(t)&&l);return l},ik,lk)),l["\u0275did"](28,49152,null,0,tk,[s,y,Dn,B.a],{isSave:[0,"isSave"],isStarred:[1,"isStarred"],isPublic:[2,"isPublic"]},{onChange:"onChange"}),(e()(),l["\u0275eld"](29,0,null,null,2,"div",[["class","form--space"]],null,null,null,null,null)),(e()(),l["\u0275eld"](30,0,null,null,0,"button",[["class","button -highlight -with-icon icon-checkmark"]],[[8,"textContent",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveQueryAs(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](31,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,19,0,"");e(n,22,0,"save-query-name",t.queryName);e(n,28,0,!0,t.isStarred,t.isPublic)},function(e,n){var t=n.component;e(n,5,0,t.text.close_popup),e(n,7,0,t.text.save_as),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,14,0,t.text.label_name),e(n,17,0,l["\u0275nov"](n,19).required?"":null,l["\u0275nov"](n,24).ngClassUntouched,l["\u0275nov"](n,24).ngClassTouched,l["\u0275nov"](n,24).ngClassPristine,l["\u0275nov"](n,24).ngClassDirty,l["\u0275nov"](n,24).ngClassValid,l["\u0275nov"](n,24).ngClassInvalid,l["\u0275nov"](n,24).ngClassPending),e(n,26,0,t.text.label_visibility_settings),e(n,30,0,t.text.button_save,t.isBusy||!t.queryName),e(n,31,0,t.text.button_cancel)})}var ck=l["\u0275ccf"]("ng-component",pb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,sk,ak)),l["\u0275did"](1,245760,null,0,pb,[l.ElementRef,Mn.a,B.a,s,y,Yn,On,l.ChangeDetectorRef,Tn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),dk=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" #"])),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.context.$implicit.id),e(n,3,0,n.context.$implicit.subject||"")})}function hk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"p",[["class","danger-zone--warning"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[["class","icon icon-error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[": "])),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,pk)),l["\u0275did"](8,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](9,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,8,0,n.component.singleWorkPackageChildren)},function(e,n){var t=n.component;e(n,3,0,t.text.warning),e(n,5,0,t.text.hasChildren(t.singleWorkPackage)),e(n,10,0,t.text.deletesChildren)})}function fk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,[" "," #"," "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,hk)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,7,0,t.singleWorkPackageChildren&&t.singleWorkPackageChildren.length>0)},function(e,n){var t=n.component;e(n,2,0,t.text.text),e(n,5,0,t.singleWorkPackage.type.name,t.singleWorkPackage.id,t.singleWorkPackage.subject)})}function gk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,[" (+ ",") "]))],null,function(e,n){e(n,1,0,n.component.text.childCount(n.parent.context.$implicit))})}function mk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" #"])),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,gk)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,6,0,n.component.children(n.context.$implicit).length>0)},function(e,n){e(n,2,0,n.context.$implicit.id),e(n,4,0,n.context.$implicit.subject)})}function vk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"p",[["class","danger-zone--warning"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[["class","icon icon-error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,mk)),l["\u0275did"](6,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.workPackages)},function(e,n){e(n,3,0,n.component.text.text)})}function bk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,5,"input",[["class","form--check-box"],["id","confirm-children-deletion"],["name","confirm-children-deletion"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,4).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.childrenDeletionConfirmed=t)&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Pt.b,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.b]),l["\u0275did"](6,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](8,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275ted"](9,null,[" "," "]))],function(e,n){e(n,6,0,"confirm-children-deletion",n.component.childrenDeletionConfirmed)},function(e,n){var t=n.component;e(n,3,0,l["\u0275nov"](n,8).ngClassUntouched,l["\u0275nov"](n,8).ngClassTouched,l["\u0275nov"](n,8).ngClassPristine,l["\u0275nov"](n,8).ngClassDirty,l["\u0275nov"](n,8).ngClassValid,l["\u0275nov"](n,8).ngClassInvalid,l["\u0275nov"](n,8).ngClassPending),e(n,9,0,t.text.label_confirm_children_deletion)})}function yk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,21,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,20,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["id","wp_destroy_modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,16,"form",[["class","form danger-zone"],["name","modalWpDestroyForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,7).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,7).onReset()&&i);return i},null,null)),l["\u0275did"](6,16384,null,0,Pt.t,[],null,null),l["\u0275did"](7,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](9,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](10,0,null,null,8,"section",[["class","form--section -inner-scrolling"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,0,"h3",[["class","form--section-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,6,"div",[["class","modal-inner-scrolling-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,fk)),l["\u0275did"](14,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,vk)),l["\u0275did"](16,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,bk)),l["\u0275did"](18,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](19,0,null,null,2,"div",[["class","form--space -left-spacing"]],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,0,"button",[["class","button -danger"]],[[8,"textContent",0],[1,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmDeletion(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](21,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,14,0,t.singleWorkPackage),e(n,16,0,t.workPackages.length>1),e(n,18,0,t.mustConfirmChildren)},function(e,n){var t=n.component;e(n,4,0,t.text.close),e(n,5,0,l["\u0275nov"](n,9).ngClassUntouched,l["\u0275nov"](n,9).ngClassTouched,l["\u0275nov"](n,9).ngClassPristine,l["\u0275nov"](n,9).ngClassDirty,l["\u0275nov"](n,9).ngClassValid,l["\u0275nov"](n,9).ngClassInvalid,l["\u0275nov"](n,9).ngClassPending),e(n,11,0,t.text.title),e(n,20,0,t.text.confirm,t.busy||t.blockedDueToUnconfirmedChildren||void 0),e(n,21,0,t.text.cancel)})}var wk,kk=l["\u0275ccf"]("ng-component",cs,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,yk,dk)),l["\u0275did"](1,245760,null,0,cs,[l.ElementRef,as,Mn.a,B.a,l.ChangeDetectorRef,h.G,s,Pa,Yn,On,Tn,ss],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);!function(e){e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT_ARROW=37]="LEFT_ARROW",e[e.UP_ARROW=38]="UP_ARROW",e[e.RIGHT_ARROW=39]="RIGHT_ARROW",e[e.DOWN_ARROW=40]="DOWN_ARROW",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.KEY_0=48]="KEY_0",e[e.KEY_1=49]="KEY_1",e[e.KEY_2=50]="KEY_2",e[e.KEY_3=51]="KEY_3",e[e.KEY_4=52]="KEY_4",e[e.KEY_5=53]="KEY_5",e[e.KEY_6=54]="KEY_6",e[e.KEY_7=55]="KEY_7",e[e.KEY_8=56]="KEY_8",e[e.KEY_9=57]="KEY_9",e[e.KEY_A=65]="KEY_A",e[e.KEY_B=66]="KEY_B",e[e.KEY_C=67]="KEY_C",e[e.KEY_D=68]="KEY_D",e[e.KEY_E=69]="KEY_E",e[e.KEY_F=70]="KEY_F",e[e.KEY_G=71]="KEY_G",e[e.KEY_H=72]="KEY_H",e[e.KEY_I=73]="KEY_I",e[e.KEY_J=74]="KEY_J",e[e.KEY_K=75]="KEY_K",e[e.KEY_L=76]="KEY_L",e[e.KEY_M=77]="KEY_M",e[e.KEY_N=78]="KEY_N",e[e.KEY_O=79]="KEY_O",e[e.KEY_P=80]="KEY_P",e[e.KEY_Q=81]="KEY_Q",e[e.KEY_R=82]="KEY_R",e[e.KEY_S=83]="KEY_S",e[e.KEY_T=84]="KEY_T",e[e.KEY_U=85]="KEY_U",e[e.KEY_V=86]="KEY_V",e[e.KEY_W=87]="KEY_W",e[e.KEY_X=88]="KEY_X",e[e.KEY_Y=89]="KEY_Y",e[e.KEY_Z=90]="KEY_Z",e[e.LEFT_META=91]="LEFT_META",e[e.RIGHT_META=92]="RIGHT_META",e[e.SELECT=93]="SELECT",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.MULTIPLY=106]="MULTIPLY",e[e.ADD=107]="ADD",e[e.SUBTRACT=109]="SUBTRACT",e[e.DECIMAL=110]="DECIMAL",e[e.DIVIDE=111]="DIVIDE",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUM_LOCK=144]="NUM_LOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.SEMICOLON=186]="SEMICOLON",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.DASH=189]="DASH",e[e.PERIOD=190]="PERIOD",e[e.FORWARD_SLASH=191]="FORWARD_SLASH",e[e.GRAVE_ACCENT=192]="GRAVE_ACCENT",e[e.OPEN_BRACKET=219]="OPEN_BRACKET",e[e.BACK_SLASH=220]="BACK_SLASH",e[e.CLOSE_BRACKET=221]="CLOSE_BRACKET",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE"}(wk||(wk={}));var Ck=function(){function e(e,n,t,l,i,o,r,u,a,s,c,d,p){this.ref=e,this.element=n,this.QueryDm=t,this.$state=l,this.$transitions=i,this.I18n=o,this.states=r,this.CurrentProject=u,this.loadingIndicator=a,this.pathHelper=s,this.wpStaticQueries=c,this.mainMenuService=d,this.toggleService=p,this.loading=!1,this.noResults=!1,this.text={search:this.I18n.t("js.toolbar.search_query_label"),label:this.I18n.t("js.toolbar.search_query_label"),scope_default:this.I18n.t("js.label_default_queries"),scope_starred:this.I18n.t("js.label_starred_queries"),scope_global:this.I18n.t("js.label_global_queries"),scope_private:this.I18n.t("js.label_custom_queries"),no_results:this.I18n.t("js.work_packages.query.text_no_results")},this.hiddenCategories=[],this.reportsBodySelector=".controller-work_packages\\/reports",this.initialized=!1}return e.prototype.ngOnInit=function(){var e=this;this.queryResultsContainer=jQuery(this._queryResultsContainerElement.nativeElement),this.projectIdentifier=this.element.nativeElement.getAttribute("data-project-identifier"),this.mainMenuService.onActivate("work_packages","work_packages_query_select").subscribe(function(){return e.initializeAutocomplete()}),this.addClickHandler()},e.prototype.ngOnDestroy=function(){this.unregisterTransitionListener()},e.prototype.initializeAutocomplete=function(){this.initialized||(this.searchInput=jQuery(this._wpQueryMenuSearchInput.nativeElement),this.buttonArrowLeft=jQuery(".main-menu--arrow-left-to-project",jQuery("#main-menu-work-packages-wrapper").parent()),this.initialized=!0,this.buttonArrowLeft.focus(),this.setupAutoCompletion(this.searchInput),this.updateMenuOnChanges(),this.loadQueries())},e.prototype.transformQueries=function(e){var n=e.elements.map(function(e){return{label:e.name,query:e,query_props:null}}).concat(this.wpStaticQueries.all);return this.sortQueries(n)},e.prototype.sortQueries=function(e){var n=this,t={starred:[],default:[],public:[],private:[]},l=0;return e.forEach(function(e){return e.auto_id=l++,e.query?e.query.starred?(e.category="starred",t.starred.push(e)):!e.query.starred&&e.query.public?(e.category="public",t.public.push(e)):e.query.starred||e.query.public?void 0:(e.category="private",t.private.push(e)):(e.category="default",t.default.push(e))}),_.flatten([t.starred,t.default,t.public,t.private].map(function(e){return n.sortByLabel(e)}))},e.prototype.sortByLabel=function(e){return e.sort(function(e,n){return e.label.toLowerCase().localeCompare(n.label.toLowerCase())})},e.prototype.loadQueries=function(){var e=this;return this.loadingPromise=this.QueryDm.listNonHidden(this.CurrentProject.identifier).then(function(n){e.searchInput.querycomplete("option",{source:e.transformQueries(n)}),e.searchInput.querycomplete("search",e.searchInput.val()),_.each(e.hiddenCategories,function(n){var t=jQuery(n).attr("category");e.expandCollapseCategory(t)}),e.ref.detectChanges()})},Object.defineProperty(e.prototype,"loadingPromise",{set:function(e){var n=this;this.loading=!0,e.then(function(){return n.loading=!1}).catch(function(){return n.loading=!1})},enumerable:!0,configurable:!0}),e.prototype.setupAutoCompletion=function(e){var n=this;this.defineJQueryQueryComplete(),e.querycomplete({delay:100,source:[],select:function(e,n){return!1},response:function(e,t){n.noResults=0===t.content.length},close:function(e,t){var l=n.queryResultsContainer.find("ul.ui-autocomplete");l.is(":visible")||n.noResults||l.show()},focus:function(e,t){for(var l=e;l&&l.originalEvent;)l=l.originalEvent;return l&&"keydown"===l.type&&n.queryResultsContainer.find("#wp-query-menu-item-"+t.item.auto_id+" .wp-query-menu--item-link").focus(),!1},appendTo:".wp-query-menu--results-container",classes:{"ui-autocomplete":"wp-query-menu--search-ul -inplace","ui-menu-divider":"wp-query-menu--category-icon"},autoFocus:!1,minLength:0})},e.prototype.defineJQueryQueryComplete=function(){var e=this;jQuery.widget("custom.querycomplete",jQuery.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items",".wp-query-menu--item"),this._search("")},_renderItem:function(n,t){var l=jQuery("<a>").addClass("wp-query-menu--item-link").attr("href",e.buildQueryItemUrl(t)).text(t.label),i=jQuery("<li>").addClass("ui-menu-item wp-query-menu--item").attr("id","wp-query-menu-item-"+t.auto_id).attr("data-category",t.category||"").data("ui-autocomplete-item",t).append(l).appendTo(n);return e.setInitialHighlighting(i,t),i},_renderMenu:function(n,t){var l,i=this;if(_.each(t,function(t){if(t.category!==l){l=t.category;var o=e.labelFunction(l);n.append('<a tabindex="0" class="wp-query-menu--category-icon wp-query-menu--category-toggle" data-category="'+l+'" aria-hidden="true"></a>'),jQuery("<li>").addClass("ui-autocomplete--category wp-query-menu--category-toggle ellipsis").attr("title",o).attr("data-category",l).text(o).appendTo(n)}i._renderItemData(n,t)}),""===e.searchInput.val()){var o=e.queryResultsContainer.find(".wp-query-menu--item.selected");o.length>0&&setTimeout(function(){return o[0].scrollIntoView({behavior:"auto",block:"center"})},20)}}})},e.prototype.setInitialHighlighting=function(e,n){var t=this.getQueryParams(n),l=this.$state.params.query_id,i=this.$state.params.query_props,o=this.$state.includes("work-packages"),r=jQuery("body").hasClass("controller-work_packages/reports"),u=t.query_id&&(l||"").toString()===t.query_id.toString(),a=!n.query&&n.query_props&&n.query_props===i,s=o&&!l&&!i&&"all_open"===n.identifier,c=r&&"summary"===n.identifier;(u||a||s||c)&&e.addClass("selected")},e.prototype.labelFunction=function(e){switch(e){case"starred":return this.text.scope_starred;case"public":return this.text.scope_global;case"private":return this.text.scope_private;case"default":return this.text.scope_default;default:return""}},e.prototype.updateMenuOnChanges=function(){var e=this;this.states.changes.queries.pipe(Object(Ln.b)(this)).subscribe(function(){return e.loadQueries()})},e.prototype.expandCollapseCategory=function(e){jQuery('[data-category="'+e+'"]').not(".ui-autocomplete--category").toggleClass("-hidden"),jQuery('.wp-query-menu--category-icon[data-category="'+e+'"]').toggleClass("-collapsed")},e.prototype.loadQuery=function(e){var n=this.getQueryParams(e),t=_.toString(this.$state.params.query_id),l={reload:!1};n.query_id&&n.query_id===t.toString()&&(l.reload=!0),this.$state.go("work-packages.list",n,l),this.toggleService.closeWhenOnMobile()},e.prototype.getQueryParams=function(e){var n={query_id:e.query?_.toString(e.query.id):null,query_props:e.query?null:e.query_props};return this.projectIdentifier&&(n.projects="projects",n.projectPath=this.projectIdentifier),n},e.prototype.buildQueryItemUrl=function(e){if(e.static_link)return e.static_link;var n=this.getQueryParams(e);return this.$state.href("work-packages.list",n)},e.prototype.highlightSelected=function(e){this.highlightBySelector("#wp-query-menu-item-"+e.auto_id)},e.prototype.highlightBySelector=function(e){this.queryResultsContainer.find(".ui-menu-item").removeClass("selected"),this.queryResultsContainer.find(e).addClass("selected")},e.prototype.addClickHandler=function(){var e=this;this.queryResultsContainer.on("click keydown",".ui-menu-item a",function(n){if("keydown"===n.type&&n.which!==wk.ENTER)return!0;var t=jQuery(n.target),l=t.closest(".wp-query-menu--item").data("ui-autocomplete-item"),i="click"===n.type&&us.isClickedWithModifier(n),o=!!l.static_link;return i||o?(n.stopImmediatePropagation(),"keydown"===n.type&&(window.location.href=t.attr("href")),!0):(n.preventDefault(),e.loadQuery(l),e.highlightSelected(l),!1)}).on("click keydown",".wp-query-menu--category-toggle",function(n){if("keydown"===n.type&&n.which!==wk.ENTER)return!0;var t=jQuery(n.target).data("category");return t&&e.expandCollapseCategory(t),e.hiddenCategories=e.queryResultsContainer.find(".ui-autocomplete--category.hidden"),n.preventDefault(),!1})},e}();gt.DynamicBootstrapper.register({selector:"wp-query-select",cls:Ck});var Ik=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Pk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","loading-indicator -compact"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","block-1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"div",[["class","block-2"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"div",[["class","block-3"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"div",[["class","block-4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"div",[["class","block-5"]],null,null,null,null,null))],null,null)}function jk(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{_wpQueryMenuSearchInput:0}),l["\u0275qud"](402653184,2,{_queryResultsContainerElement:0}),(e()(),l["\u0275eld"](2,0,null,null,9,"div",[["class","wp-query-menu--container"],["id","querySelectDropdown"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,8,"div",[["class","wp-query-menu--search-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,3,"div",[["class","wp-query-menu--search-bar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"label",[["class","hidden-for-sighted"],["for","query-title-filter"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,[[1,0],["wpQueryMenuSearchInput",1]],null,0,"input",[["class","wp-query-menu--search-input ui-autocomplete--input ellipsis"],["id","query-title-filter"],["name","query-title-filter"],["type","text"]],[[1,"placeholder",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"i",[["class","icon-search wp-query-menu--search-icon"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,[[2,0],["queryResultsContainer",1]],null,3,"div",[["class","wp-query-menu--results-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"p",[["class","wp-query-menu--no-results-container"]],[[8,"hidden",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Pk)),l["\u0275did"](11,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,11,0,n.component.loading)},function(e,n){var t=n.component;e(n,5,0,t.text.label),e(n,6,0,t.text.search),e(n,9,0,!t.noResults||t.loading,t.text.no_results)})}var _k=l["\u0275ccf"]("wp-query-select",Ck,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-query-select",[],null,null,null,jk,Ik)),l["\u0275did"](1,245760,null,0,Ck,[l.ChangeDetectorRef,l.ElementRef,Ae,h.G,h.O,B.a,s,Vn,Sn,ve,Bn,vt,js],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Rk=function(){function e(e){this.elementRef=e,this.configuration={actionsColumnEnabled:!1,columnMenuEnabled:!1,contextMenuEnabled:!1}}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.queryProps=JSON.parse(e.dataset.queryProps)},e}();gt.DynamicBootstrapper.register({selector:"macro.embedded-table",cls:Rk,embeddable:!0});var Sk=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function xk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-table-entry",[],null,null,null,cy,sy)),l["\u0275did"](1,114688,null,0,ay,[l.ElementRef],{queryProps:[0,"queryProps"],configuration:[1,"configuration"]},null)],function(e,n){var t=n.component;e(n,1,0,t.queryProps,t.configuration)},null)}var Tk=l["\u0275ccf"]("macro.embedded-table",Rk,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"macro",[["class","embedded-table"]],null,null,null,xk,Sk)),l["\u0275did"](1,114688,null,0,Rk,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ok=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ek(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function Dk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.name),e(n,2,0,n.context.$implicit.name)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.name,t.selectedType===n.context.$implicit.name)})}function Fk(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{typeSelect:0}),(e()(),l["\u0275eld"](1,0,null,null,33,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,32,"div",[["class","op-modal--modal-container loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ek)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,24,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,23,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);"submit"===n&&(i=!1!==o.applyAndClose(t)&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,Pt.t,[],null,null),l["\u0275did"](10,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](12,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](13,0,null,null,11,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,9,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-type"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,6,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,[[1,0],["typeSelect",1]],null,5,"select",[["class","form--select"],["id","selected-type"],["name","selected-type"],["tabindex","1"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.selectedType=t.target.value)&&l);return l},null,null)),(e()(),l["\u0275eld"](20,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](21,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],null,null),l["\u0275did"](22,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,Dk)),l["\u0275did"](24,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](25,0,null,null,5,"div",[["class","form--field -wide-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,4,"div",[["class","form--field-container -vertical"]],null,null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,3,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](28,0,null,null,1,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,0,"input",[["id","wp_button_macro_style"],["name","button_style"],["tabindex","2"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.buttonStyle=t.target.checked)&&l);return l},null,null)),(e()(),l["\u0275ted"](30,null,[" "," "])),(e()(),l["\u0275eld"](31,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](33,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](34,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose),e(n,24,0,t.availableTypes)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,14,0,t.text.selected_type),e(n,16,0,t.text.selected_type),e(n,20,0,t.text.none,!t.selectedType),e(n,29,0,t.buttonStyle),e(n,30,0,t.text.button_style),e(n,31,0,t.text.button_style_hint),e(n,33,0,t.text.button_cancel,t.text.button_cancel),e(n,34,0,t.text.button_save,t.text.button_save)})}var Ak=l["\u0275ccf"]("ng-component",ct,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Fk,Ok)),l["\u0275did"](1,4440064,null,0,ct,[l.ElementRef,Mn.a,Vn,vn,l.ChangeDetectorRef,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Nk=function(){function e(){this.stopEventPropagation=!0,this.eventHandler=new l.EventEmitter}return e.prototype.handleClick=function(e){return"dblclick"!==e.type&&2!==e.tapCount||(this.eventHandler.emit(e),this.eventStopReturnCode(e))},e.prototype.eventStopReturnCode=function(e){return!this.stopEventPropagation||(e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1)},e}(),Mk=function(){function e(e){this.handler=e,this.requests=new a.a,this.responses$=this.requests.pipe(Object(Un.a)(this.handler))}return e.prototype.request=function(e){this.requests.next(e)},e.prototype.observe=function(e){return this.responses$.pipe(Object(D.a)(e))},e}(),Vk=function(){function e(){this.causedUpdates=[]}return e.prototype.includes=function(e){return this.causedUpdates.includes(this.cacheValue(e))},e.prototype.add=function(e){this.causedUpdates.push(this.cacheValue(e))},e.prototype.cacheValue=function(e){return e.updatedAt+e.$href},e}(),qk=function(){function e(e,n,t,l,i,o,r,u,a,s,c,d,p,h){var f=this;this.querySpace=e,this.states=n,this.injector=t,this.$state=l,this.I18n=i,this.currentProject=o,this.wpCreate=r,this.wpInlineCreate=u,this.wpNotifications=a,this.dragService=s,this.reorderService=c,this.authorisationService=d,this.cdRef=p,this.causedUpdates=h,this.showStatusButton=!0,this.trackByHref=Np.trackByHref,this.text={removeCard:this.I18n.t("js.card.remove_from_list"),addNewCard:this.I18n.t("js.card.add_new")},this.canAdd=!1,this.canReference=!1,this.inReference=!1,this.referenceClass=this.wpInlineCreate.referenceComponentClass,this.referenceOutputs={onCancel:function(){return f.setReferenceMode(!1)},onReferenced:function(e){return f.addWorkPackageToQuery(e,0)}},this.cardsRemovable=!1,this.queryUpdates=new Mk(function(e){return f.reorderService.saveOrderInQuery(f.query,e)})}return e.prototype.ngOnInit=function(){var e=this;this.registerDragAndDrop(),this.registerCreationCallback(),this.queryUpdates.observe(Object(Ln.a)(this)).subscribe(function(n){e.causedUpdates.add(n),e.querySpace.query.putValue(n)},function(n){return e.wpNotifications.handleRawError(n)}),this.authorisationService.observeUntil(Object(Ln.a)(this)).subscribe(function(){e.canAdd=e.wpInlineCreate.canAdd,e.canReference=e.wpInlineCreate.canReference,e.cdRef.detectChanges()}),this.querySpace.query.values$().pipe(Object(Ln.b)(this),Object(g.a)(function(n){return!e.causedUpdates.includes(n)})).subscribe(function(n){e.query=n,e.workPackages=n.results.elements,e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){this.dragService.remove(this.container.nativeElement)},e.prototype.handleDblClick=function(e){this.goToWpFullView(e.id)},e.prototype.goToWpFullView=function(e){this.$state.go("work-packages.show",{workPackageId:e})},e.prototype.wpTypeAttribute=function(e){return e.type.name},e.prototype.wpSubject=function(e){return e.subject},e.prototype.cardHighlightingClass=function(e){return this.cardHighlighting(e)},e.prototype.typeHighlightingClass=function(e){return this.attributeHighlighting("type",e)},e.prototype.cardHighlighting=function(e){return["status","priority","type"].includes(this.highlightingMode)?Ol.backgroundClass(this.highlightingMode,e[this.highlightingMode].id):""},e.prototype.attributeHighlighting=function(e,n){return Ol.inlineClass(e,n.type.id)},e.prototype.registerDragAndDrop=function(){var e=this;this.dragService.register({dragContainer:this.container.nativeElement,scrollContainers:[this.container.nativeElement],moves:function(n){var t=n.dataset.workPackageId,l=e.states.workPackages.get(t).value;return e.canDragOutOf(l)&&!n.dataset.isNew},accepts:function(){return e.dragInto},onMoved:function(n){var t=n.dataset.workPackageId,l=ug.findIndex(n),i=e.reorderService.move(e.currentOrder,t,l);e.updateOrder(i)},onRemoved:function(n){var t=n.dataset.workPackageId,l=e.reorderService.remove(e.currentOrder,t);e.updateOrder(l)},onAdded:function(n){return r.b(e,void 0,void 0,function(){var e,t,l,i;return r.e(this,function(o){switch(o.label){case 0:return e=n.dataset.workPackageId,t=ug.findIndex(n),l=this.states.workPackages.get(e).value,[4,this.addWorkPackageToQuery(l,t)];case 1:return i=o.sent(),n.parentElement.removeChild(n),[2,i]}})})}})},Object.defineProperty(e.prototype,"currentOrder",{get:function(){return this.workPackages.filter(function(e){return e&&!e.isNew}).map(function(e){return e.id})},enumerable:!0,configurable:!0}),e.prototype.updateOrder=function(e){var n=this;e=_.uniq(e),this.workPackages=e.map(function(e){return n.states.workPackages.get(e).value}),this.queryUpdates.request(e),this.cdRef.detectChanges()},Object.defineProperty(e.prototype,"workPackages",{get:function(){return this._workPackages},set:function(e){this.activeInlineCreateWp?this._workPackages=[this.activeInlineCreateWp].concat(e):this._workPackages=e.slice()},enumerable:!0,configurable:!0}),e.prototype.addWorkPackageToQuery=function(e,n){return void 0===n&&(n=-1),r.b(this,void 0,void 0,function(){var t,l;return r.e(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this.workPackageAddedHandler(e)];case 1:return i.sent(),[4,this.reorderService.add(this.currentOrder,e.id,n)];case 2:return t=i.sent(),this.updateOrder(t),[2,!0];case 3:return l=i.sent(),this.wpNotifications.handleRawError(l,e),[3,4];case 4:return[2,!1]}})})},e.prototype.addNewCard=function(){var e=this;this.wpCreate.createOrContinueWorkPackage(this.currentProject.identifier).then(function(n){e.activeInlineCreateWp=n.workPackage,e.workPackages=e.workPackages,e.cdRef.detectChanges()})},e.prototype.setReferenceMode=function(e){this.inReference=e,this.cdRef.detectChanges()},e.prototype.removeCard=function(e){var n=this.workPackages.indexOf(e);if(this.workPackages.splice(n,1),this.activeInlineCreateWp=void 0,!e.isNew){var t=this.reorderService.remove(this.currentOrder,e.id);this.updateOrder(t)}},e.prototype.onCardSaved=function(e){return r.b(this,void 0,void 0,function(){var n,t;return r.e(this,function(l){switch(l.label){case 0:return this.activeInlineCreateWp&&this.activeInlineCreateWp.__initialized_at===e.__initialized_at?(n=this.workPackages.indexOf(this.activeInlineCreateWp),this.activeInlineCreateWp=void 0,[4,this.reorderService.add(this.currentOrder,e.id,n)]):[3,2];case 1:t=l.sent(),this.updateOrder(t),this.wpInlineCreate.newInlineWorkPackageCreated.next(e.id),l.label=2;case 2:return[2]}})})},e.prototype.registerCreationCallback=function(){var e=this;this.wpCreate.onNewWorkPackage().pipe(Object(Ln.b)(this)).subscribe(function(n){return r.b(e,void 0,void 0,function(){return r.e(this,function(e){return this.onCardSaved(n),[2]})})})},e}(),Lk=[['.wp-cards-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;padding:0 15px;border-radius:2px;overflow-y:scroll;scrollbar-color:transparent transparent;scrollbar-width:thin}.wp-cards-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px;width:10px}.wp-cards-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:0 0}.wp-cards-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;visibility:hidden}.wp-cards-container[_ngcontent-%COMP%]:hover{scrollbar-color:#ddd transparent}.wp-cards-container[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{visibility:visible}.wp-card[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;border:1px solid var(--widget-box-block-border-color);border-radius:2px;padding:10px;margin-top:10px;position:relative;box-shadow:1px 1px 3px 0 #d3d3d3;background:var(--body-background);font-size:var(--card-font-size)}.wp-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #d3d3d3}.wp-card.-new[_ngcontent-%COMP%]{padding-right:25px}.wp-card[_ngcontent-%COMP%]:last-of-type{margin-bottom:3px}.wp-card--content[_ngcontent-%COMP%]:not(.-new){display:grid;grid-template-columns:auto 1fr auto;grid-template-rows:auto auto auto;grid-row-gap:10px;grid-template-areas:"type type type" "subject subject subject" "attributeTag avatar idlink";overflow:hidden}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--type[_ngcontent-%COMP%]{grid-area:type}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--subject[_ngcontent-%COMP%]{grid-area:subject;max-width:230px;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;white-space:normal}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--assignee[_ngcontent-%COMP%]{grid-area:avatar;place-self:center left}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--id[_ngcontent-%COMP%]{grid-area:idlink;place-self:center right}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--status[_ngcontent-%COMP%]{grid-area:attributeTag;max-width:120px;margin-right:5px;overflow:hidden}.wp-card--highlighting[_ngcontent-%COMP%]{width:5px;height:100%;position:absolute;top:0;left:0;border-radius:2px 0 0 2px}wp-edit-field[_ngcontent-%COMP%]{width:initial}.wp-inline-create-button[_ngcontent-%COMP%]{font-size:.9rem;padding-top:1rem;text-align:center}.wp-card--inline-cancel-button[_ngcontent-%COMP%]{position:absolute;right:0;top:5px;opacity:0}.wp-card--inline-cancel-button.-show[_ngcontent-%COMP%], .wp-card[_ngcontent-%COMP%]:hover   .wp-card--inline-cancel-button[_ngcontent-%COMP%]{opacity:1}.wp-inline-create--reference-container[_ngcontent-%COMP%]{margin-bottom:3rem}']],$k=l["\u0275crt"]({encapsulation:0,styles:Lk,data:{}});function Hk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","wp-inline-create--reference-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,16777216,null,null,3,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](2,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"],ndcDynamicInjector:[1,"ndcDynamicInjector"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](4,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicOutputs:[0,"ndcDynamicOutputs"]},null)],function(e,n){var t=n.component;e(n,2,0,t.referenceClass,t.injector),e(n,4,0,t.referenceOutputs)},null)}function Bk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"a",[["class","wp-card--inline-cancel-button -no-decoration"]],[[8,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.removeCard(e.parent.context.$implicit)&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-show":0}),l["\u0275did"](3,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-close"]],null,null,null,Zt,Gt)),l["\u0275did"](5,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=e(n,2,0,n.parent.context.$implicit.isNew);e(n,1,0,"wp-card--inline-cancel-button -no-decoration",t);e(n,5,0,"icon icon-close")},function(e,n){e(n,0,0,n.component.text.removeCard)})}function zk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"wp-edit-field-group",[],null,null,null,Da,Ea)),l["\u0275did"](1,245760,null,0,Oa,[s,l.Injector,ur,ar,On,Ia,Pa,h.O,Ne,h.G,B.a],{workPackage:[0,"workPackage"],initializeEditMode:[1,"initializeEditMode"]},null),(e()(),l["\u0275eld"](2,0,null,0,4,"div",[["class","wp-card--content -new"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"wp-edit-field",[["class","wp-card--type"]],null,null,null,Ga,Ka)),l["\u0275did"](4,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-edit-field",[["class","wp-card--subject -bold"],["fieldName","subject"]],null,null,null,Ga,Ka)),l["\u0275did"](6,114688,null,0,Ua,[s,l.Injector,l.ElementRef,On,Ne,Qa,ar,yn,Oa,Tn,B.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit,n.parent.context.$implicit.isNew);e(n,4,0,"type",n.parent.context.$implicit.id,"work-packages--type-selector");e(n,6,0,"subject",n.parent.context.$implicit.id)},null)}function Wk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-status-button",[["class","wp-card--status"]],null,null,null,Xs,Ys)),l["\u0275did"](1,245760,null,0,Ks,[B.a,l.ChangeDetectorRef,yn,gn,ar],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,1,0,n.parent.parent.context.$implicit)},null)}function Qk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-avatar",[["class","wp-card--assignee"],["data-class-list","avatar-mini"]],null,null,null,Ti,Ri)),l["\u0275did"](1,4243456,null,0,ji,[l.ElementRef,l.ChangeDetectorRef,_i.DomSanitizer,ve],{user:[0,"user"]},null)],function(e,n){e(n,1,0,n.parent.parent.context.$implicit.assignee)},null)}function Uk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","wp-card--content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"span",[["class","wp-card--type"]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](2,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275eld"](3,0,null,null,4,"a",[["class","wp-card--id"],["uiSref","work-packages.show"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,5).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Mu.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](5,737280,null,0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](6,{workPackageId:0}),(e()(),l["\u0275ted"](7,null,[" #"," "])),(e()(),l["\u0275eld"](8,0,null,null,0,"span",[["class","wp-card--subject"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Wk)),l["\u0275did"](10,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Qk)),l["\u0275did"](12,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"wp-card--type",t.typeHighlightingClass(n.parent.context.$implicit));var l=e(n,6,0,n.parent.context.$implicit.id);e(n,5,0,"work-packages.show",l),e(n,10,0,t.showStatusButton),e(n,12,0,n.parent.context.$implicit.assignee)},function(e,n){var t=n.component;e(n,1,0,t.wpTypeAttribute(n.parent.context.$implicit)),e(n,7,0,n.parent.context.$implicit.id),e(n,8,0,t.wpSubject(n.parent.context.$implicit))})}function Kk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"div",[["class","wp-card"]],[[1,"data-is-new",0],[1,"data-work-package-id",0]],[[null,"doubleClickOrTap"],[null,"dblclick"],[null,"tap"]],function(e,n,t){var i=!0,o=e.component;"dblclick"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"tap"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"doubleClickOrTap"===n&&(i=!1!==o.handleDblClick(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-draggable":0,"-new":1}),l["\u0275did"](3,16384,null,0,Nk,[],null,{eventHandler:"doubleClickOrTap"}),(e()(),l["\u0275eld"](4,0,null,null,1,"div",[["class","wp-card--highlighting"]],null,null,null,null,null)),l["\u0275did"](5,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Bk)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,zk)),l["\u0275did"](9,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Uk)),l["\u0275did"](11,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,t.canDragOutOf(n.context.$implicit),n.context.$implicit.isNew);e(n,1,0,"wp-card",l);e(n,5,0,"wp-card--highlighting",t.cardHighlightingClass(n.context.$implicit)),e(n,7,0,n.context.$implicit.isNew||t.cardsRemovable),e(n,9,0,n.context.$implicit.isNew),e(n,11,0,!n.context.$implicit.isNew)},function(e,n){e(n,0,0,n.context.$implicit.isNew||void 0,n.context.$implicit.id)})}function Gk(e){return l["\u0275vid"](2,[l["\u0275qud"](402653184,1,{container:0}),(e()(),l["\u0275eld"](1,0,[[1,0],["container",1]],null,4,"div",[["class","wp-cards-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Hk)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Kk)),l["\u0275did"](5,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,3,0,t.inReference),e(n,5,0,t.workPackages,t.trackByHref)},null)}var Yk=l["\u0275ccf"]("wp-card-view",qk,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-card-view",[],null,null,null,Gk,$k)),l["\u0275did"](1,245760,null,0,qk,[y,s,l.Injector,h.G,B.a,Vn,ur,wc,On,Fg,fd,Dn,l.ChangeDetectorRef,Vk],null,null)],function(e,n){e(n,1,0)},null)},{canDragOutOf:"dragOutOfHandler",dragInto:"dragInto",highlightingMode:"highlightingMode",workPackageAddedHandler:"workPackageAddedHandler",showStatusButton:"showStatusButton",cardsRemovable:"cardsRemovable"},{},[]),Zk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.isLocked=function(){return"locked"===this.status},n.prototype.isOpen=function(){return"open"===this.status},n.prototype.isClosed=function(){return"closed"===this.status},n}(z),Jk=function(){return function(e){this.I18n=e,this.text={isLocked:this.I18n.t("js.boards.version.is_locked"),isClosed:this.I18n.t("js.boards.version.is_closed")}}}(),Xk=[[".version-board-header[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]],eC=l["\u0275crt"]({encapsulation:0,styles:Xk,data:{}});function nC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","version-board-header"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-closed":0,"-locked":1}),(e()(),l["\u0275eld"](3,0,null,null,0,"h2",[["class","editable-toolbar-title--fixed"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"span",[["class","version-board-header--info-row -italic -small-font"]],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,[" "," "]))],function(e,n){var t=n.component,l=e(n,2,0,t.version.isClosed(),t.version.isLocked());e(n,1,0,"version-board-header",l)},function(e,n){var t=n.component;e(n,3,0,t.version.name),e(n,5,0,t.version.endDate)})}function tC(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,nC)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.version)},null)}var lC=l["\u0275ccf"]("ng-component",Jk,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[["class","title-container -small"]],null,null,null,tC,eC)),l["\u0275did"](1,49152,null,0,Jk,[B.a],null,null)],null,null)},{version:"resource"},{},[]),iC=function(e){function n(n,t,l){var i=e.call(this,n,t)||this;return i.halResourceService=n,i.pathHelper=t,i.payloadDm=l,i}return r.d(n,e),n.prototype.createForm=function(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var t=this.extractPayload(e,n);return this.halResourceService.post(this.pathHelper.api.v3.grids.form().toString(),t).toPromise()},n.prototype.create=function(e,n){void 0===n&&(n=null);var t=this.extractPayload(e,n);return this.halResourceService.post(this.pathHelper.api.v3.grids.path,t).toPromise()},n.prototype.update=function(e,n){var t=this.extractPayload(e,n);return this.halResourceService.patch(this.pathHelper.api.v3.grids.id(e.idFromLink).toString(),t).toPromise()},n.prototype.updateForm=function(e,n){void 0===n&&(n=null);var t=this.extractPayload(e,n);return this.halResourceService.post(this.pathHelper.api.v3.grids.id(e.idFromLink).form.toString(),t).toPromise()},n.prototype.extractPayload=function(e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),e&&n){var t=this.payloadDm.extract(e,n);return t.widgets&&(t.widgets=e.widgets.map(function(e){return{startRow:e.startRow,endRow:e.endRow,startColumn:e.startColumn,endColumn:e.endColumn,identifier:e.identifier,options:e.options}})),t}return e instanceof z?{}:e},n.prototype.listUrl=function(){return this.pathHelper.api.v3.grids.toString()},n.prototype.oneUrl=function(e){return this.pathHelper.api.v3.grids.id(e).toString()},n}(Fe),oC=function(){function e(e){this.grid=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this.grid.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.grid.name},set:function(e){this.grid.name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return!!this.grid.updateImmediately},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFree",{get:function(){return!this.isAction},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAction",{get:function(){return"action"===this.grid.options.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionAttribute",{get:function(){if(!this.isFree)return this.grid.options.attribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightingMode",{get:function(){return this.grid.options.highlightingMode||"none"},set:function(e){this.grid.options.highlightingMode=e},enumerable:!0,configurable:!0}),e.prototype.addQuery=function(e){e.isNew=!0,this.grid.widgets.push(e)},e.prototype.removeQuery=function(e){this.grid.widgets=this.grid.widgets.filter(function(n){return n.options.query_id!==e.options.query_id})},Object.defineProperty(e.prototype,"queries",{get:function(){return this.grid.widgets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createdAt",{get:function(){return this.grid.createdAt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this.grid.options.filters||[]},set:function(e){this.grid.options.filters=e},enumerable:!0,configurable:!0}),e.prototype.sortWidgets=function(){this.grid.widgets=this.grid.widgets.sort(function(e,n){return e.startColumn-n.startColumn})},e.prototype.showStatusButton=function(){return"status"!==this.actionAttribute},e}(),rC=function(){function e(e,n,t,l,i){this.GridDm=e,this.PathHelper=n,this.authorisationService=t,this.CurrentProject=l,this.halResourceService=i}return e.prototype.allInScope=function(e){var n=this;void 0===e&&(e=this.CurrentProject.identifier);var t=this.boardPath(e);return Object(Qn.a)(this.GridDm.list({filters:[["scope","=",[t]]]})).pipe(Object(_n.a)(function(e){return n.authorisationService.initModelAuth("boards",e.$links)}),Object(v.a)(function(e){return e.elements.map(function(e){return new oC(e)})}))},e.prototype.one=function(e){return Object(Qn.a)(this.GridDm.one(e)).pipe(Object(v.a)(function(e){return new oC(e)}))},e.prototype.save=function(e){var n=this;return this.fetchSchema(e).then(function(t){return n.GridDm.update(e.grid,t)}).then(function(n){return e.grid=n,e})},e.prototype.fetchSchema=function(e){return this.GridDm.updateForm(e.grid).then(function(e){return e.schema})},e.prototype.boardPath=function(e){return void 0===e&&(e=this.CurrentProject.identifier),this.PathHelper.projectBoardsPath(e)},e.prototype.create=function(e,n,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(l){return[2,this.createGrid(e,n,t).then(function(e){return new oC(e)})]})})},e.prototype.delete=function(e){return e.grid.delete?e.grid.delete():Promise.reject("Deletion not possible")},e.prototype.createGrid=function(e,n,t){var l=this,i=this.boardPath(),o=_.set({name:n},"_links.scope.href",i);return o.options={type:e},t&&(o.options.attribute=t),this.GridDm.createForm(o).then(function(e){var n=l.halResourceService.createHalResource(e.payload.$source);return l.GridDm.create(n,e.schema)})},e}(),uC=function(e){function n(n){var t=e.call(this)||this;return t.boardDm=n,t._state=Object(u.h)(),t}return r.d(n,e),n.prototype.load=function(e){var n=this;return this.boardDm.one(parseInt(e)).toPromise().then(function(t){return n.updateValue(e,t),t})},n.prototype.loadAll=function(e){var n=this;return void 0===e&&(e=[]),Promise.all(e.map(function(e){return n.load(e)})).then(function(){})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this._state},enumerable:!0,configurable:!0}),n.prototype.update=function(e){this.updateValue(e.id,e)},n}(fn),aC=function(){return function(){}}(),sC=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function cC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,1,"ui-view",[],null,null,null,kt.c,kt.a)),l["\u0275did"](1,245760,null,0,Ki.a,[h.P,"UIView.PARENT_INJECT",l.ViewContainerRef],null,null)],function(e,n){e(n,1,0)},null)}var dC=l["\u0275ccf"]("boards-entry",aC,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"boards-entry",[],null,null,null,cC,sC)),l["\u0275prd"](4608,null,uC,uC,[rC]),l["\u0275did"](2,49152,null,0,aC,[],null,null)],null,null)},{},{},[]),pC=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"height",{get:function(){return this.endRow-this.startRow},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.endColumn-this.startColumn},enumerable:!0,configurable:!0}),n}(z),hC=function(){function e(e,n,t,l,i,o,r){this.CurrentProject=e,this.pathHelper=n,this.QueryDm=t,this.halResourceService=l,this.QueryFormDm=i,this.notifications=o,this.I18n=r,this.v3=this.pathHelper.api.v3}return e.prototype.create=function(e,n){var t=this,l=JSON.stringify(n);return this.QueryFormDm.loadWithParams({pageSize:0,filters:l},void 0,this.CurrentProject.identifier,this.buildQueryRequest(e)).then(function(e){if(e.schema.public.writable){var n=t.QueryFormDm.buildQueryResource(e);return t.QueryDm.create(n,e)}throw new Error(t.I18n.t("js.boards.error_permission_missing"))})},e.prototype.addFreeQuery=function(e,n){var t=this.freeBoardQueryFilter();return this.addQuery(e,n,[t])},e.prototype.addQuery=function(e,n,t){return r.b(this,void 0,void 0,function(){var l,i,o,u,a;return r.e(this,function(r){switch(r.label){case 0:l=e.queries.length,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.create(n,t)];case 2:return i=r.sent(),o={_type:"GridWidget",identifier:"work_package_query",startRow:1,endRow:2,startColumn:l+1,endColumn:l+2,options:{query_id:i.id,filters:t}},u=this.halResourceService.createHalResourceOfClass(pC,o),e.addQuery(u),[3,4];case 3:return a=r.sent(),this.notifications.addError(a),console.error(a),[3,4];case 4:return[2,e]}})})},e.prototype.buildQueryRequest=function(e){return r.a({hidden:!0,public:!0,_links:{sortBy:[{href:this.v3.resource("/queries/sort_bys/manualSorting-asc")}]}},e)},e.prototype.freeBoardQueryFilter=function(){return{manualSort:{operator:"ow",values:[]}}},e}(),fC=function(){function e(){}return e.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return _.get(window.gon,e,null)},Object.defineProperty(e.prototype,"gon",{get:function(){return window.gon},enumerable:!0,configurable:!0}),e}(),gC=function(){function e(){this.mapping={}}return e.prototype.add=function(e,n){this.mapping[e]=n},e.prototype.available=function(){return _.map(this.mapping,function(e,n){return{attribute:n,text:e.localizedName}})},e.prototype.get=function(e){if(this.mapping[e])return this.mapping[e];throw"No action service exists for "+e},e}(),mC=function(){function e(e,n,t,l,i,o,r,u,a){var s=this;this.boardDm=e,this.PathHelper=n,this.Gon=t,this.CurrentProject=l,this.halResourceService=i,this.boardCache=o,this.boardActions=r,this.I18n=u,this.boardsList=a,this.text={unnamed_board:this.I18n.t("js.boards.label_unnamed_board"),action_board:function(e){return s.I18n.t("js.boards.board_type.action_by_attribute",{attribute:e})},unnamed_list:this.I18n.t("js.boards.label_unnamed_list")}}return e.prototype.loadAllBoards=function(e,n){var t=this;return void 0===e&&(e=this.CurrentProject.identifier),void 0===n&&(n=!1),n||void 0===this.loadAllPromise?this.loadAllPromise=this.boardDm.allInScope().toPromise().then(function(e){return e.forEach(function(e){return t.buildOrderAndUpdate(e)}),e}):this.loadAllPromise},e.prototype.canManage=function(e){return!!e.grid.$links.delete},e.prototype.save=function(e){var n=this;return this.reorderWidgets(e),this.boardDm.save(e).then(function(e){return n.boardCache.update(e),e})},e.prototype.create=function(e){return r.b(this,void 0,void 0,function(){var n;return r.e(this,function(t){switch(t.label){case 0:return[4,this.boardDm.create(e.type,this.boardName(e),e.attribute)];case 1:return n=t.sent(),"free"!==e.type?[3,3]:[4,this.boardsList.addFreeQuery(n,{name:this.text.unnamed_list})];case 2:return t.sent(),[3,5];case 3:return[4,this.boardActions.get(e.attribute).addActionQueries(n)];case 4:t.sent(),t.label=5;case 5:return[4,this.save(n)];case 6:return t.sent(),[2,n]}})})},e.prototype.delete=function(e){var n=this;return this.boardDm.delete(e).then(function(){return n.boardCache.clearSome(e.id)})},e.prototype.boardName=function(e){return e.boardName?e.boardName:"action"===e.type?this.text.action_board(e.attribute):this.text.unnamed_board},e.prototype.reorderWidgets=function(e){e.grid.columnCount=Math.max(e.grid.widgets.length,1),e.grid.widgets.map(function(e,n){return e.startColumn=n+1,e.endColumn=n+2,e})},e.prototype.buildOrderAndUpdate=function(e){e.sortWidgets(),this.boardCache.update(e)},e}(),vC=function(e){function n(n,t,l,i,o,r,u,a,s,c){var d=e.call(this,t,l,n)||this;return d.elementRef=n,d.locals=t,d.cdRef=l,d.state=i,d.boardService=o,d.boardActions=r,d.boardCache=u,d.wpNotifications=a,d.loadingIndicatorService=s,d.I18n=c,d.showClose=!0,d.confirmed=!1,d.available=d.boardActions.available(),d.inFlight=!1,d.text={close_popup:d.I18n.t("js.close_popup_title"),free_board:d.I18n.t("js.boards.board_type.free"),free_board_text:d.I18n.t("js.boards.board_type.free_text"),action_board:d.I18n.t("js.boards.board_type.action"),action_board_text:d.I18n.t("js.boards.board_type.action_text"),select_attribute:d.I18n.t("js.boards.board_type.select_attribute"),placeholder:d.I18n.t("js.placeholders.selection")},d}return r.d(n,e),n.prototype.createFree=function(){this.create({type:"free"})},n.prototype.createAction=function(){this.create({type:"action",attribute:this.actionAttributeSelect.nativeElement.value})},n.prototype.create=function(e){var n=this;this.inFlight=!0,this.loadingIndicatorService.modal.promise=this.boardService.create(e).then(function(e){n.inFlight=!1,n.closeMe(),n.boardCache.update(e),n.state.go("boards.show",{board_id:e.id,isNew:!0})}).catch(function(e){n.inFlight=!1,n.wpNotifications.handleRawError(e)})},n}(Le.a),bC=function(){function e(e,n,t,l,i,o,r,u,a,s){var c=this;this.boardService=e,this.boardCache=n,this.I18n=t,this.notifications=l,this.opModalService=i,this.loadingIndicatorService=o,this.authorisationService=r,this.injector=u,this.bannerService=a,this.domSanitizer=s,this.text={name:this.I18n.t("js.modals.label_name"),board:this.I18n.t("js.label_board"),boards:this.I18n.t("js.label_board_plural"),type:this.I18n.t("js.boards.label_board_type"),type_free:this.I18n.t("js.boards.board_type.free"),action_by_attribute:function(e){return c.I18n.t("js.boards.board_type.action_by_attribute",{attribute:e})},createdAt:this.I18n.t("js.label_created_on"),delete:this.I18n.t("js.button_delete"),areYouSure:this.I18n.t("js.text_are_you_sure"),deleteSuccessful:this.I18n.t("js.notice_successful_delete"),noResults:this.I18n.t("js.notice_no_results_to_display"),teaser_text:this.I18n.t("js.boards.upsale.teaser_text"),enterprise:this.I18n.t("js.boards.upsale.upgrade_to_ee_text"),upgrade:this.I18n.t("js.boards.upsale.upgrade"),personal_demo:this.I18n.t("js.boards.upsale.personal_demo")},this.canAdd=!1,this.boards$=this.boardCache.observeAll()}return e.prototype.ngOnInit=function(){var e=this;this.authorisationService.observeUntil(Object(Ln.a)(this)).subscribe(function(){e.canAdd=e.authorisationService.can("boards","create")})},e.prototype.ngOnDestroy=function(){},e.prototype.ngAfterViewInit=function(){this.loadingIndicatorService.indicator("boards-module").promise=this.boardService.loadAllBoards()},e.prototype.newBoard=function(){this.opModalService.show(vC,this.injector)},e.prototype.destroyBoard=function(e){var n=this;window.confirm(this.text.areYouSure)&&this.boardService.delete(e).then(function(){n.boardCache.clearSome(e.id),n.notifications.addSuccess(n.text.deleteSuccessful)}).catch(function(e){return n.notifications.addError("Deletion failed: "+e)})},e.prototype.showBoardIndexView=function(){return!this.bannerService.eeShowBanners},e.prototype.eeLink=function(){return pf+"&op_referrer=boards"},e.prototype.demoLink=function(){return"https://www.openproject.org/enterprise-demo/"},e.prototype.teaserVideoURL=function(){return this.domSanitizer.bypassSecurityTrustResourceUrl("https://player.vimeo.com/video/337280106")},e}(),yC=[[".boards--listing-group[_ngcontent-%COMP%]{position:relative}.boards--teaser-video-container[_ngcontent-%COMP%]{height:50vh;text-align:center}.boards--teaser-video-container[_ngcontent-%COMP%]   .boards--teaser-video[_ngcontent-%COMP%]{width:100%;height:100%}"]],wC=l["\u0275crt"]({encapsulation:0,styles:yC,data:{}});function kC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"a",[["class","button -alt-highlight"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.newBoard()&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon4"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"icon-add icon4")},function(e,n){e(n,4,0,n.component.text.board)})}function CC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","toolbar-items"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,kC)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.canAdd)},null)}function IC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"tr",[["id","empty-row-notification"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"td",[["colspan","4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 icon-context"]],null,null,null,Zt,Gt)),l["\u0275did"](4,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,4,0,"icon-info1 icon-context")},function(e,n){e(n,6,0,n.component.text.noResults)})}function PC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.type_free)})}function jC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.action_by_attribute(n.parent.context.$implicit.actionAttribute))})}function _C(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"accessible-by-keyboard",[["linkClass","icon icon-delete"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.destroyBoard(e.parent.context.$implicit)&&l);return l},al,ul)),l["\u0275did"](1,49152,null,0,rl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275ted"](2,0,[" "," "]))],function(e,n){e(n,1,0,"icon icon-delete")},function(e,n){e(n,2,0,n.component.text.delete)})}function RC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,16,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"td",[["class","name"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"a",[["uiSref","boards.show"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,4).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](3,16384,null,0,Mu.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](4,737280,null,0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](5,{board_id:0}),(e()(),l["\u0275eld"](6,0,null,null,4,"td",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,PC)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,jC)),l["\u0275did"](10,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](11,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"op-date-time",[],null,null,null,Ht,$t)),l["\u0275did"](13,114688,null,0,Lt,[qt],{dateTimeValue:[0,"dateTimeValue"]},null),(e()(),l["\u0275eld"](14,0,null,null,2,"td",[["class","buttons"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,_C)),l["\u0275did"](16,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=e(n,5,0,n.context.$implicit.id);e(n,4,0,"boards.show",t),e(n,8,0,n.context.$implicit.isFree),e(n,10,0,n.context.$implicit.isAction),e(n,13,0,n.context.$implicit.createdAt),e(n,16,0,n.context.$implicit.editable)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function SC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,33,"div",[["class","generic-table--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,32,"div",[["class","generic-table--results-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,31,"table",[["class","generic-table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,9,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](5,245760,null,0,Rl,[l.ElementRef],null,null),(e()(),l["\u0275eld"](6,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](7,245760,null,0,Rl,[l.ElementRef],null,null),(e()(),l["\u0275eld"](8,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](9,245760,null,0,Rl,[l.ElementRef],null,null),(e()(),l["\u0275eld"](10,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](11,245760,null,0,Rl,[l.ElementRef],null,null),(e()(),l["\u0275eld"](12,0,null,null,0,"col",[],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,15,"thead",[],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,14,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](19,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275eld"](28,0,null,null,0,"div",[["class","generic-table--empty-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,4,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,IC)),l["\u0275did"](31,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,RC)),l["\u0275did"](33,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,5,0),e(n,7,0),e(n,9,0),e(n,11,0),e(n,31,0,0===n.context.ngIf.length),e(n,33,0,n.context.ngIf)},function(e,n){var t=n.component;e(n,18,0,t.text.name),e(n,22,0,t.text.type),e(n,26,0,t.text.createdAt)})}function xC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","boards--teaser-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,["",""])),(e()(),l["\u0275eld"](3,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,["",""])),(e()(),l["\u0275eld"](5,0,null,null,1,"a",[["class","button -alt-highlight -with-icon icon-checkmark"],["target","blank"]],[[8,"href",4]],null,null,null,null)),(e()(),l["\u0275ted"](6,null,[" "," "])),(e()(),l["\u0275eld"](7,0,null,null,1,"a",[["class","button -highlight-inverted"]],[[8,"href",4]],null,null,null,null)),(e()(),l["\u0275ted"](8,null,[" "," "])),(e()(),l["\u0275eld"](9,0,null,null,1,"div",[["class","boards--teaser-video-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"iframe",[["allow","autoplay; fullscreen"],["allowfullscreen",""],["class","boards--teaser-video"],["frameborder","0"]],[[8,"src",5]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,2,0,t.text.teaser_text),e(n,4,0,t.text.enterprise),e(n,5,0,t.eeLink()),e(n,6,0,t.text.upgrade),e(n,7,0,t.demoLink()),e(n,8,0,t.text.personal_demo),e(n,10,0,t.teaserVideoURL())})}function TC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"h2",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,CC)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,null,null,3,"div",[["class","boards--listing-group loading-indicator--location"],["data-indicator-name","boards-module"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,2,null,SC)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,It.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275and"](16777216,null,null,1,null,xC)),l["\u0275did"](10,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.showBoardIndexView()),e(n,7,0,t.showBoardIndexView()&&l["\u0275unv"](n,7,0,l["\u0275nov"](n,8).transform(t.boards$))),e(n,10,0,!t.showBoardIndexView())},function(e,n){e(n,2,0,n.component.text.boards)})}var OC=l["\u0275ccf"]("ng-component",bC,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,TC,wC)),l["\u0275did"](1,4440064,null,0,bC,[mC,uC,B.a,Tn,Mn.b,Sn,Dn,l.Injector,Ge,_i.DomSanitizer],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),EC=function(){function e(e,n,t){this.injector=e,this.locals=n,this.I18n=t,this.highlightingMode="none",this.entireCardMode=!1,this.lastEntireCardAttribute="type",this.text={highlighting_mode:{description:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.description"),none:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.none"),type:this.I18n.t("js.work_packages.properties.type"),priority:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.priority"),entire_card_by:this.I18n.t("js.card.highlighting.entire_card_by")}}}return e.prototype.onSave=function(){this.updateMode(this.highlightingMode),this.board.highlightingMode=this.highlightingMode},e.prototype.ngOnInit=function(){this.board=this.locals.board,this.highlightingMode=this.board.highlightingMode,this.updateMode(this.highlightingMode)},e.prototype.updateMode=function(e){this.highlightingMode="entire-card"===e?this.lastEntireCardAttribute:e,-1!==["priority","type"].indexOf(this.highlightingMode)?(this.lastEntireCardAttribute=this.highlightingMode,this.entireCardMode=!0):this.entireCardMode=!1},e}(),DC=function(){function e(e){this.I18n=e,this._tabs=[{name:"highlighting",title:this.I18n.t("js.work_packages.table_configuration.highlighting"),componentClass:EC}]}return Object.defineProperty(e.prototype,"tabs",{get:function(){return this._tabs},enumerable:!0,configurable:!0}),e}(),FC=function(e){function n(n,t,l,i,o,r,u,a,s,c){var d=e.call(this,n,s,c)||this;return d.locals=n,d.I18n=t,d.boardService=l,d.boardCache=i,d.boardConfigurationService=o,d.injector=r,d.appRef=u,d.componentFactoryResolver=a,d.cdRef=s,d.elementRef=c,d.closeOnEscape=!1,d.closeOnOutsideClick=!1,d.text={title:d.I18n.t("js.boards.configuration_modal.title"),closePopup:d.I18n.t("js.close_popup_title"),applyButton:d.I18n.t("js.modals.button_apply"),cancelButton:d.I18n.t("js.modals.button_cancel")},d}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.tabPortalHost=new cn(this.boardConfigurationService.tabs,this.tabContentOutlet.nativeElement,this.componentFactoryResolver,this.appRef,this.injector),setTimeout(function(){var n=e.availableTabs[0].name;e.switchTo(n)})},n.prototype.ngOnDestroy=function(){this.tabPortalHost.dispose()},Object.defineProperty(n.prototype,"availableTabs",{get:function(){return this.tabPortalHost.availableTabs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentTab",{get:function(){return this.tabPortalHost.currentTab},enumerable:!0,configurable:!0}),n.prototype.switchTo=function(e){this.tabPortalHost.switchTo(e)},n.prototype.saveChanges=function(){var e=this;this.tabPortalHost.activeComponents.forEach(function(e){e.onSave()});var n=this.locals.board;this.boardService.save(n).then(function(n){e.boardCache.update(n),e.service.close()})},n.prototype.onClose=function(){return this.afterFocusOn.focus(),!0},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),n}(Le.a),AC=function(e){function n(n,t,l,i,o,r,u,a,s){var c=e.call(this,n,t)||this;return c.elementRef=n,c.opContextMenu=t,c.opModalService=l,c.boardService=i,c.BoardCache=o,c.Notifications=r,c.State=u,c.injector=a,c.I18n=s,c.text={deleteSuccessful:c.I18n.t("js.notice_successful_delete")},c}return r.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"locals",{get:function(){return{contextMenuId:"boardsToolbarMenu",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.open=function(e){this.buildItems(),this.opContextMenu.show(this,e)},n.prototype.buildItems=function(){var e=this;this.items=[{linkText:this.I18n.t("js.toolbar.settings.configure_view"),icon:"icon-settings",onClick:function(n){return e.opContextMenu.close(),e.opModalService.show(FC,e.injector,{board:e.board}),!0}},{linkText:this.I18n.t("js.toolbar.settings.page_settings"),icon:"icon-edit",onClick:function(n){return e.board.grid.updateImmediately&&jQuery(".board--header-container .editable-toolbar-title--input").trigger("op:selectableTitle:trigger"),!0}},{linkText:this.I18n.t("js.toolbar.settings.delete"),icon:"icon-delete",onClick:function(n){return e.board.grid.delete&&window.confirm(e.I18n.t("js.text_query_destroy_confirmation"))&&e.boardService.delete(e.board).then(function(){e.BoardCache.clearSome(e.board.id),e.State.go("^",{flash_message:{type:"success",message:e.text.deleteSuccessful}})}),!0}}]},n}(ps),NC=t("9Bt9"),MC=t("qAlS"),VC=t("Fzqc"),qC=t("CNfY"),LC=function(){return function(e){this.i18n=e,this.resourceChanged=new l.EventEmitter}}(),$C=function(e){function n(n,t,i,o,r,u,a,s,c,d,p,h,f,g,m,v){var b=e.call(this,t)||this;return b.QueryDm=n,b.I18n=t,b.boardCache=i,b.notifications=o,b.querySpace=r,b.wpNotificationService=u,b.wpStatesInitialization=a,b.authorisationService=s,b.wpInlineCreate=c,b.injector=d,b.wpEditing=p,b.loadingIndicator=h,b.wpCacheService=f,b.boardService=g,b.boardActionRegistry=m,b.causedUpdates=v,b.onRemove=new l.EventEmitter,b.actionResourceClass="",b.showAddButton=!1,b.text={addCard:b.I18n.t("js.boards.add_card"),updateSuccessful:b.I18n.t("js.notice_successful_update"),areYouSure:b.I18n.t("js.text_are_you_sure"),unnamed_list:b.I18n.t("js.boards.label_unnamed_list"),click_to_remove:b.I18n.t("js.boards.click_to_remove_list")},b.canDragInto=!1,b.initiallyFocused=!1,b.workPackageAddedHandler=function(e){return b.addWorkPackage(e)},b.canDragOutOf=!1,b.canDragOutOfHandler=function(e){return b.canMove(e)},b}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.initiallyFocused=this.resource.isNew,this.resource.isNew=!1,this.authorisationService.observeUntil(Object(Ln.a)(this)).subscribe(function(){e.board.isAction||(e.showAddButton=e.canDragInto&&(e.wpInlineCreate.canAdd||e.canReference))}),this.querySpace.query.values$().pipe(Object(Ln.b)(this)).subscribe(function(n){e.query=n,e.canDragOutOf=!!e.query.updateOrderedWorkPackages,e.loadActionAttribute(n)}),this.updateQuery()},n.prototype.ngOnDestroy=function(){},n.prototype.ngOnChanges=function(e){e.filters&&!e.resource&&this.updateQuery()},Object.defineProperty(n.prototype,"errorMessage",{get:function(){return this.I18n.t("js.boards.error_loading_the_list",{error_message:this.loadingError})},enumerable:!0,configurable:!0}),n.prototype.canMove=function(e){if(this.board.isAction){var n=e.schema[this.board.actionAttribute];return this.canDragOutOf&&n.writable}return this.canDragOutOf},Object.defineProperty(n.prototype,"canReference",{get:function(){return this.wpInlineCreate.canReference},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canManage",{get:function(){return this.boardService.canManage(this.board)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canDelete",{get:function(){return this.canManage&&!!this.query.delete},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canRename",{get:function(){return this.canManage&&!!this.query.updateImmediately&&this.board.isFree},enumerable:!0,configurable:!0}),n.prototype.addReferenceCard=function(){this.cardView.setReferenceMode(!0)},n.prototype.addNewCard=function(){this.cardView.addNewCard()},n.prototype.deleteList=function(e){var n=this;e=e||this.query,window.confirm(this.text.areYouSure)&&this.QueryDm.delete(e).then(function(){return n.onRemove.emit()})},n.prototype.renameQuery=function(e,n){var t=this;this.inFlight=!0,this.query.name=n,this.QueryDm.patch(this.query.id,{name:n}).toPromise().then(function(){t.inFlight=!1,t.notifications.addSuccess(t.text.updateSuccessful)}).catch(function(){return t.inFlight=!1})},n.prototype.boardListActionColorClass=function(e){var n=this.board.actionAttribute;return e&&e.id?Ol.backgroundClass(n,e.id):""},Object.defineProperty(n.prototype,"listName",{get:function(){return this.query&&this.query.name},enumerable:!0,configurable:!0}),n.prototype.showCardStatusButton=function(){return this.board.showStatusButton()},n.prototype.refreshQueryUnlessCaused=function(e){void 0===e&&(e=!0);var n=this.querySpace.query.value;this.causedUpdates.includes(n)||this.updateQuery(e)},n.prototype.updateQuery=function(e){void 0===e&&(e=!0),this.setQueryProps(this.filters),this.loadQuery(e)},n.prototype.loadActionAttribute=function(e){var n=this;if(!this.board.isAction)return this.actionResource=void 0,this.headerComponent=void 0,void(this.canDragInto=!!e.updateOrderedWorkPackages);var t=this.actionService.getFilterHref(e);this.actionResource&&t===this.actionResource.href||this.actionService.getLoadedFilterValue(e).then(function(t){return r.b(n,void 0,void 0,function(){var n;return r.e(this,function(l){switch(l.label){case 0:return this.actionResource=t,this.headerComponent=this.actionService.headerComponent(),this.buttonPlaceholder=this.actionService.disabledAddButtonPlaceholder(t),this.actionResourceClass=this.boardListActionColorClass(t),this.canDragInto=this.actionService.dragIntoAllowed(e,t),[4,this.actionService.canAddToQuery(e)];case 1:return n=l.sent(),this.showAddButton=this.canDragInto&&this.wpInlineCreate.canAdd&&n,[2]}})})})},Object.defineProperty(n.prototype,"actionService",{get:function(){return this.boardActionRegistry.get(this.board.actionAttribute)},enumerable:!0,configurable:!0}),n.prototype.addWorkPackage=function(e){var n=this.querySpace.query.value,t=this.wpEditing.changesetFor(e),l=this.board.actionAttribute;if(l&&!t.isWritable(l))throw this.I18n.t("js.boards.error_attribute_not_writable",{attribute:t.humanName(l)});return new xa(this.injector,t,n.filters).applyDefaultsFromFilters(),t.empty?this.wpCacheService.updateWorkPackage(e):t.save()},n.prototype.loadQuery=function(e){var n=this;void 0===e&&(e=!0);var t,l,i=this.resource.options.query_id.toString(),o=this.QueryDm.stream(this.columnsQueryProps,i);e&&(o=o.pipe((t=this.indicatorInstance,l=50,function(e){return t.start(),e.pipe(Object(_n.a)(function(){return t.delayedStop(l)},function(){return t.stop()},function(){return t.stop()}))}))),o.subscribe(function(e){return n.wpStatesInitialization.updateQuerySpace(e,e.results)},function(e){return n.loadingError=n.wpNotificationService.retrieveErrorMessage(e)})},Object.defineProperty(n.prototype,"indicatorInstance",{get:function(){return this.loadingIndicator.indicator(jQuery(this.indicator.nativeElement))},enumerable:!0,configurable:!0}),n.prototype.setQueryProps=function(e){var n=(this.resource.options.filters||[]).concat(e),t={"columns[]":["id","subject"],showHierarchies:!1,pageSize:500,filters:JSON.stringify(n)};this.columnsQueryProps=t},n}(LC),HC=function(e){function n(n,t,l,i,o,r,u,a,s,c){var d=e.call(this,n,t)||this;return d.elementRef=n,d.opContextMenu=t,d.opModalService=l,d.authorisationService=i,d.boardList=o,d.injector=r,d.querySpace=u,d.cdRef=a,d.I18n=s,d.boardActions=c,d.board=d.boardList.board,d}return r.d(n,e),n.prototype.open=function(e){return r.b(this,void 0,void 0,function(){var n;return r.e(this,function(t){switch(t.label){case 0:return n=this,[4,this.buildItems()];case 1:return n.items=t.sent(),this.opContextMenu.show(this,e),[2]}})})},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.buildItems=function(){return r.b(this,void 0,void 0,function(){var e,n,t,l,i=this;return r.e(this,function(o){switch(o.label){case 0:return e=[{disabled:!this.boardList.canDelete,linkText:this.I18n.t("js.boards.lists.delete"),onClick:function(){return i.boardList.deleteList(),!0}}],this.board.isAction?(n=this.boardActions.get(this.board.actionAttribute),t=this.querySpace.query.value,[4,n.getAdditionalListMenuItems(t)]):[3,2];case 1:return l=o.sent(),[2,e.concat(l)];case 2:return[2,e]}})})},n}(ps),BC=function(e){function n(n,t,l,i,o,r,u,a,s,c){var d=e.call(this,n,t)||this;return d.elementRef=n,d.opContextMenu=t,d.opModalService=l,d.authorisationService=i,d.wpInlineCreate=o,d.boardList=r,d.injector=u,d.querySpace=a,d.cdRef=s,d.I18n=c,d.focusAfterClose=!0,d}return r.d(n,e),n.prototype.open=function(e){this.items=this.buildItems(),this.opContextMenu.show(this,e)},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"left top",at:"left bottom"}),t},n.prototype.buildItems=function(){var e=this;return[{disabled:!this.wpInlineCreate.canAdd,linkText:this.I18n.t("js.card.add_new"),onClick:function(){return e.boardList.addNewCard(),!0}},{disabled:!this.wpInlineCreate.canReference,linkText:this.I18n.t("js.relation_buttons.add_existing"),onClick:function(){return e.boardList.addReferenceCard(),!0}}]},n}(ps),zC=function(){function e(e,n,t,i,o,r,u,s){var c=this;this.querySpace=e,this.pathHelper=n,this.wpNotificationsService=t,this.CurrentProject=i,this.halResourceService=o,this.schemaCacheService=r,this.cdRef=u,this.I18n=s,this.text={placeholder:this.I18n.t("js.relations_autocomplete.placeholder")},this.appendToContainer=".board--container",this.onCancel=new l.EventEmitter,this.onReferenced=new l.EventEmitter,this.isLoading=!1,this.searchInput$=new a.a,this.results$=this.searchInput$.pipe(Object(Yu.a)(250),Object(Zu.a)(),Object(_n.a)(function(){return c.isLoading=!0}),Object(Un.a)(function(e){return c.autocompleteWorkPackages(e)}))}return e.prototype.ngAfterContentInit=function(){var e=this;this.ngSelectComponent&&(this.ngSelectComponent.open(),setTimeout(function(){e.ngSelectComponent.focus()},25))},e.prototype.cancel=function(){this.onCancel.emit()},e.prototype.addWorkPackageToQuery=function(e){var n=this;e&&this.schemaCacheService.ensureLoaded(e).then(function(){n.onReferenced.emit(e),n.ngSelectComponent.close()})},e.prototype.autocompleteWorkPackages=function(e){var n=this;if(0===e.length)return this.isLoading=!1,Object(Gu.a)([]);var t=this.pathHelper.api.v3.withOptionalProject(this.CurrentProject.id).work_packages,l=new se,i=this.querySpace.rows.getValueOr([]);return l.add("subjectOrId","**",[e]),i.length>0&&l.add("id","!",i.map(function(e){return e.id})),this.halResourceService.get(t.filtered(l)).pipe(Object(v.a)(function(e){return e.elements}),Object(H.a)(function(e){return n.wpNotificationsService.handleRawError(e),Object(Gu.a)([])}),Object(_n.a)(function(){return n.isLoading=!1}))},e}(),WC=function(e){function n(n,t,l,i,o,r){var u=e.call(this,n)||this;return u.injector=n,u.querySpace=t,u.halResourceService=l,u.pathHelperService=i,u.Gon=o,u.wpRelationsHierarchyService=r,u.referenceComponentClass=zC,u.referenceTarget=null,u.buttonTexts={reference:u.I18n.t("js.relation_buttons.add_existing_child"),create:u.I18n.t("js.relation_buttons.add_new_child")},u}return r.d(n,e),Object.defineProperty(n.prototype,"canAdd",{get:function(){return this.authorisationService.can("work_packages","createWorkPackage")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canReference",{get:function(){return this.authorisationService.can("work_packages","editWorkPackage")},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},n}(wc),QC=[[".board-list--query-container[_ngcontent-%COMP%]{max-width:inherit;overflow:hidden;height:100%}.board-list--query-container.-with-create-button[_ngcontent-%COMP%]{display:grid;grid-template:34px minmax(0,1fr)/1fr}.board-list--button-container[_ngcontent-%COMP%]{background-color:var(--body-background);position:-webkit-sticky;position:sticky;top:0;z-index:20}.board-list--container[_ngcontent-%COMP%]{height:100%;max-width:300px;display:flex;flex-direction:column}.board-list--container[_ngcontent-%COMP%]:hover   .board-list--menu[_ngcontent-%COMP%]{visibility:visible}.board-list--action-bar[_ngcontent-%COMP%]{width:calc(100% - 30px);height:5px;margin:auto}.board-list--header[_ngcontent-%COMP%]{padding:5px 15px;display:flex;align-items:center;max-height:52px}.board-list--header[_ngcontent-%COMP%]   editable-toolbar-title[_ngcontent-%COMP%]{flex:1;margin-bottom:0;margin-right:.25rem}.notification-box[_ngcontent-%COMP%]{margin-top:0;z-index:100}.board-list--add-button[_ngcontent-%COMP%]{background-color:var(--body-background);width:calc(100% - 30px - 10px);margin:0 15px;box-shadow:1px 1px 3px 0 #d3d3d3}.board-list--add-button[_ngcontent-%COMP%]:hover{background-color:#eeeeee50}.board-list--add-button[_ngcontent-%COMP%]:disabled{background-color:#cccccc50}.board-list--menu[_ngcontent-%COMP%]{visibility:hidden}.board-list--menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .board-list--menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .board-list--menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, .board-list--menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}.board-list--menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .board-list--menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--light-gray)}"]],UC=l["\u0275crt"]({encapsulation:0,styles:QC,data:{}});function KC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","board-list--action-bar"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(e,n){e(n,1,0,"board-list--action-bar",n.component.actionResourceClass)},null)}function GC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](1,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](3,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["\u0275pod"](4,{resource:0}),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.headerComponent);var l=e(n,4,0,t.actionResource);e(n,3,0,l)},null)}function YC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"editable-toolbar-title",[["class","-small title-container"]],null,[[null,"onSave"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.renameQuery(i.query,t)&&l);return l},Cb,bb)),l["\u0275did"](1,638976,null,0,gb,[l.Injector],{inputTitle:[0,"inputTitle"],editable:[1,"editable"],inFlight:[2,"inFlight"],initialFocus:[3,"initialFocus"],smallHeader:[4,"smallHeader"]},{onSave:"onSave"})],function(e,n){var t=n.component;e(n,1,0,t.query.name,t.canRename,t.inFlight,t.initiallyFocused,!0)},null)}function ZC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["boardListDropdown",""],["class","board-list--more-menu"]],null,null,null,null,null)),l["\u0275did"](1,4210688,null,0,HC,[l.ElementRef,Qa,Mn.b,Dn,$C,l.Injector,y,l.ChangeDetectorRef,B.a,gC],null,null),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-show-more-horizontal"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon-show-more-horizontal")},null)}function JC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.buttonPlaceholder.text)})}function XC(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"button",[["class","board-list--add-button board-list--card-add-button button"]],[[8,"title",0],[8,"disabled",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.addNewCard()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,JC)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,l["\u0275inlineInterpolate"](1,"icon-",t.buttonPlaceholder?t.buttonPlaceholder.icon:"add","")),e(n,5,0,t.buttonPlaceholder)},function(e,n){var t=n.component;e(n,0,0,t.text.addCard,!t.showAddButton)})}function eI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"button",[["addCardDropdown",""],["class","board-list--add-button board-list--card-dropdown-button button"]],[[8,"title",0]],null,null,null,null)),l["\u0275did"](1,4210688,null,0,BC,[l.ElementRef,Qa,Mn.b,Dn,wc,$C,l.Injector,y,l.ChangeDetectorRef,B.a],null,null),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-small icon-add"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon-small icon-add")},function(e,n){e(n,0,0,n.component.text.addCard)})}function nI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,20,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,KC)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,7,"div",[["class","board-list--header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,GC)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,YC)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](8,0,null,null,2,"div",[["class","board-list--menu"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ZC)),l["\u0275did"](10,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](11,0,null,null,9,"div",[["class","board-list--query-container drop-zone"]],null,null,null,null,null)),l["\u0275did"](12,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](13,{"-with-create-button":0}),(e()(),l["\u0275eld"](14,0,null,null,4,"div",[["class","board-list--button-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,XC)),l["\u0275did"](16,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,eI)),l["\u0275did"](18,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](19,0,null,null,1,"wp-card-view",[],null,null,null,Gk,$k)),l["\u0275did"](20,245760,[[2,4]],0,qk,[y,s,l.Injector,h.G,B.a,Vn,ur,wc,On,Fg,fd,Dn,l.ChangeDetectorRef,Vk],{canDragOutOf:[0,"canDragOutOf"],dragInto:[1,"dragInto"],highlightingMode:[2,"highlightingMode"],workPackageAddedHandler:[3,"workPackageAddedHandler"],showStatusButton:[4,"showStatusButton"],cardsRemovable:[5,"cardsRemovable"]},null)],function(e,n){var t=n.component;e(n,2,0,t.board.isAction),e(n,5,0,t.headerComponent),e(n,7,0,!t.headerComponent),e(n,10,0,t.canDelete);var l=e(n,13,0,t.board.isAction||t.showAddButton);e(n,12,0,"board-list--query-container drop-zone",l),e(n,16,0,t.board.isAction),e(n,18,0,!t.board.isAction&&t.showAddButton),e(n,20,0,t.canDragOutOfHandler,t.canDragInto,t.board.highlightingMode,t.workPackageAddedHandler,t.showCardStatusButton(),t.board.isFree&&t.canDragOutOf)},null)}function tI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](4,0,null,null,2,"a",[["role","button"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.onRemove.emit()&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](6,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,2,0,t.errorMessage),e(n,6,0,t.text.click_to_remove)})}function lI(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{indicator:0}),l["\u0275qud"](671088640,2,{cardView:0}),(e()(),l["\u0275eld"](2,0,[[1,0],["loadingIndicator",1]],null,6,"div",[["class","board-list--container loading-indicator--location"]],[[1,"data-query-name",0]],null,null,null,null)),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](4,{"-action-list":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,nI)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,tI)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,4,0,t.board.isAction);e(n,3,0,"board-list--container loading-indicator--location",l),e(n,6,0,t.query),e(n,8,0,t.loadingError)},function(e,n){e(n,2,0,n.component.listName)})}l["\u0275ccf"]("board-list",$C,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"board-list",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,lI,UC)),l["\u0275prd"](512,null,wc,WC,[l.Injector,y,Y,ve,fC,ia]),l["\u0275prd"](512,null,Vk,Vk,[]),l["\u0275did"](3,770048,null,0,$C,[Ae,B.a,uC,Tn,y,On,Fn,Dn,wc,l.Injector,ar,Sn,yn,mC,gC,Vk],null,null)],function(e,n){e(n,3,0)},function(e,n){e(n,0,0,l["\u0275nov"](n,3).gridColumnStart,l["\u0275nov"](n,3).gridColumnEnd,l["\u0275nov"](n,3).gridRowStart,l["\u0275nov"](n,3).gridRowEnd)})},{resource:"resource",board:"board",filters:"filters"},{resourceChanged:"resourceChanged",onRemove:"onRemove"},[]);var iI=function(){function e(e,n,t,l,i,o,r,u){this.currentProjectService=e,this.querySpace=n,this.halResourceService=t,this.wpStatesInitialization=l,this.wpTableFilters=i,this.urlParamsHelper=o,this.$state=r,this.queryFormDm=u,this.onFiltersChanged=new yh(Object(Ln.a)(this)),this.initialized=!1}return e.prototype.doInitialize=function(){this.initialized||(this.initialized=!0,this.loadQueryForm(),this.updateChecksumOnFilterChanges(),this.board.isAction&&this.wpTableFilters.hidden.push(this.board.actionAttribute))},e.prototype.ngOnDestroy=function(){},e.prototype.updateChecksumOnFilterChanges=function(){var e=this;this.wpTableFilters.observeUntil(Object(Ln.a)(this)).pipe(Object(Xn.skip)(1)).subscribe(function(){var n=e.wpTableFilters.current,t=e.urlParamsHelper.buildV3GetFilters(n),l=JSON.stringify(t);e.onFiltersChanged.emit(t),e.$state.go(".",{query_props:l},{custom:{notify:!1}})})},e.prototype.loadQueryForm=function(){var e=this;this.queryFormDm.loadWithParams({filters:JSON.stringify(this.filters)},void 0,this.currentProjectService.id).then(function(n){var t=e.halResourceService.createHalResourceOfClass(Pd,n.payload.$source);e.querySpace.query.putValue(t),e.wpStatesInitialization.updateStatesFromForm(t,n)})},e}(),oI=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function rI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-container",[],null,null,null,Ff,Tf)),l["\u0275did"](1,180224,null,0,xf,[en,Ze],null,null)],null,null)}l["\u0275ccf"]("board-filter",iI,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"board-filter",[],null,null,null,rI,oI)),l["\u0275did"](1,180224,null,0,iI,[Vn,y,Y,Fn,en,Ee,h.G,dn],null,null)],null,null)},{board:"board",filters:"filters"},{onFiltersChanged:"onFiltersChanged"},[]);var uI=function(e){function n(n,t,l,i,o,r,u,a){var s=e.call(this,t,l,n)||this;return s.elementRef=n,s.locals=t,s.cdRef=l,s.boardActions=i,s.state=o,s.boardService=r,s.boardCache=u,s.I18n=a,s.confirmed=!1,s.availableValues=[],s.trackByHref=Np.trackByHref,s.closeOnOutsideClick=!1,s.text={title:s.I18n.t("js.boards.add_list"),button_continue:s.I18n.t("js.button_continue"),button_cancel:s.I18n.t("js.button_cancel"),close_popup:s.I18n.t("js.close_popup_title"),free_board:s.I18n.t("js.boards.board_type.free"),free_board_text:s.I18n.t("js.boards.board_type.free_text"),action_board:s.I18n.t("js.boards.board_type.action"),action_board_text:s.I18n.t("js.boards.board_type.action_text"),select_attribute:s.I18n.t("js.boards.board_type.select_attribute"),placeholder:s.I18n.t("js.placeholders.selection")},s.referenceOutputs={onCreate:function(e){return s.onNewActionCreated(e)},onChange:function(e){return s.onModelChange(e)},onAfterViewInit:function(e){return e.focusInputField()}},s}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.board=this.locals.board,this.queries=this.locals.queries,this.actionService=this.boardActions.get(this.board.actionAttribute),this.actionService.getAvailableValues(this.board,this.queries).then(function(e){n.availableValues=e})},n.prototype.onModelChange=function(e){this.selectedAttribute=e},n.prototype.create=function(){var e=this;this.actionService.addActionQuery(this.board,this.selectedAttribute).then(function(n){return e.boardService.save(n)}).then(function(n){e.closeMe(),e.boardCache.update(n),e.state.go("boards.show",{board_id:n.id,isNew:!0})})},n.prototype.onNewActionCreated=function(e){this.selectedAttribute=e,this.create()},n.prototype.autocompleterComponent=function(){return this.actionService.autocompleterComponent()},n}(Le.a),aI=t("xXU7"),sI=function(){function e(e){this.queryDm=e}return e.prototype.monitor=function(e){var n=this,t=new Date;return Object(aI.a)(2e3).pipe(Object(pn.a)(0),Object(Un.a)(function(){var l=n.queryForUpdates(e,t);return t=new Date,l}),Object(g.a)(function(e){return e.count>0}))},e.prototype.queryForUpdates=function(e,n){return this.queryDm.list({filters:[["id","=",e],["updatedAt","<>d",[n.toISOString()]]]})},e}(),cI=function(){function e(e,n,t,l,i,o,r,u,a,s,c,d,p){var h=this;this.state=e,this.I18n=n,this.notifications=t,this.wpNotifications=l,this.BoardList=i,this.opModalService=o,this.injector=r,this.BoardCache=u,this.dynamicCss=a,this.Boards=s,this.Banner=c,this.Drag=d,this.QueryUpdated=p,this.isNew=!!this.state.params.isNew,this.inFlight=!1,this.text={button_more:this.I18n.t("js.button_more"),delete:this.I18n.t("js.button_delete"),areYouSure:this.I18n.t("js.text_are_you_sure"),deleteSuccessful:this.I18n.t("js.notice_successful_delete"),updateSuccessful:this.I18n.t("js.notice_successful_update"),unnamedBoard:this.I18n.t("js.boards.label_unnamed_board"),loadingError:"No such board found",addList:this.I18n.t("js.boards.add_list"),upsaleBoards:this.I18n.t("js.boards.upsale.boards"),upsaleCheckOutLink:this.I18n.t("js.boards.upsale.check_out_link"),unnamed_list:this.I18n.t("js.boards.label_unnamed_list")},this.boardSaver=new Mk(function(e){h.inFlight=!0;var n=h.Boards.save(e).then(function(e){return h.inFlight=!1,e}).catch(function(e){throw h.inFlight=!1,e});return Object(Qn.a)(n)}),this.trackByQueryId=function(e,n){return n.options.query_id}}return Object.defineProperty(e.prototype,"container",{set:function(e){var n=this;void 0!==e&&(void 0===this._container&&this.Drag.addScrollContainer(e.nativeElement),setTimeout(function(){return n._container=e.nativeElement}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{set:function(e){void 0!==e&&setTimeout(function(){return e.doInitialize()})},enumerable:!0,configurable:!0}),e.prototype.goBack=function(){this.state.go("^")},e.prototype.ngOnInit=function(){var e=this,n=this.state.params.board_id.toString(),t=!1;this.Boards.loadAllBoards(),this.boardSaver.observe(Object(Ln.a)(this)).subscribe(function(n){e.BoardCache.update(n),e.notifications.addSuccess(e.text.updateSuccessful)},function(n){return e.wpNotifications.handleRawError(n)}),this.BoardCache.observe(n).pipe(Object(Ln.b)(this)).subscribe(function(n){e.board=n;var l=e.state.params.query_props;e.filters=l?JSON.parse(l):e.board.filters,t||(e.dynamicCss.requireHighlighting(),t=!0),e.setupQueryUpdatedMonitoring()})},e.prototype.ngOnDestroy=function(){},e.prototype.saveWithNameAndFilters=function(e,n){e.name=n,e.filters=this.filters;this.state.go(".",{isNew:!1,query_props:null},{custom:{notify:!1}}),this.saveBoard(e)},e.prototype.showError=function(e){void 0===e&&(e=this.text.loadingError),this.notifications.addError(e)},e.prototype.saveBoard=function(e){this.boardSaver.request(e)},e.prototype.addList=function(e){var n=this;if(e.isFree)return this.BoardList.addFreeQuery(e,{name:this.text.unnamed_list}).then(function(e){return n.Boards.save(e)}).then(function(e){n.BoardCache.update(e)}).catch(function(e){return n.showError(e)});var t=this.lists.map(function(e){return e.query});this.opModalService.show(uI,this.injector,{board:e,queries:t})},e.prototype.moveList=function(e,n){Object(NC.k)(e.queries,n.previousIndex,n.currentIndex),this.saveBoard(e)},e.prototype.removeList=function(e,n){e.removeQuery(n),this.saveBoard(e)},e.prototype.showBoardListView=function(){return!this.Banner.eeShowBanners},e.prototype.opReferrer=function(e){return e.isFree?"boards#free":"boards#status"},e.prototype.updateFilters=function(e){this.filters=e},e.prototype.setupQueryUpdatedMonitoring=function(){var e=this;this.currentQueryUpdatedMonitoring&&this.currentQueryUpdatedMonitoring.unsubscribe(),this.currentQueryUpdatedMonitoring=this.QueryUpdated.monitor(this.board.queries.map(function(e){return e.options.query_id})).pipe(Object(Ln.b)(this)).subscribe(function(n){return e.requestRefreshOfUpdatedLists(n.elements)})},e.prototype.requestRefreshOfUpdatedLists=function(e){var n=this;e.forEach(function(e){n.lists.filter(function(n){return e.id.toString()===n.resource.options.query_id.toString()}).forEach(function(e){return e.refreshQueryUnlessCaused(!1)})})},e}(),dI=[[".router--boards-full-view #content-wrapper{padding-bottom:0;padding-left:0}.router--boards-full-view #content{height:100%}.boards-list--container{display:flex;flex-direction:row;flex-wrap:nowrap;flex-grow:1;padding-bottom:5px;overflow-y:auto}.boards-list--item{flex:0 0 300px;max-width:300px;position:relative}.boards-list--item:first-of-type{margin-left:5px}.board--header-container{display:flex;align-items:flex-start;margin-bottom:0;margin-left:20px}.boards-list-item-handle{position:absolute;font-size:14px;left:0;top:18px;z-index:100;opacity:0;cursor:grab}.board--container.-free .boards-list-item-handle{top:13px}.boards-list-item-handle:before{padding:0;color:var(--light-gray)}.boards-list--item:hover .boards-list-item-handle{opacity:1}.boards-list--add-item{flex:0 0 auto;height:42px;line-height:42px;margin:5px 0 0 15px;font-size:14px;cursor:pointer;color:var(--gray-dark)}.board--container.-free .boards-list--add-item{margin-top:0}.boards-list--add-item:hover{color:var(--body-font-color)}.board--container{position:relative;display:flex;flex-direction:column;height:100%}.boards-filters-container .advanced-filters--container{margin-bottom:1rem;margin-left:20px}"]],pI=l["\u0275crt"]({encapsulation:2,styles:dI,data:{}});function hI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"button",[["boardsToolbarMenu",""],["class","button last board--settings-dropdown toolbar-icon"]],[[8,"title",0]],null,null,null,null)),l["\u0275did"](2,4341760,null,0,AC,[l.ElementRef,Qa,Mn.b,mC,uC,Tn,h.G,l.Injector,B.a],{board:[0,"board"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-show-more"]],null,null,null,Zt,Gt)),l["\u0275did"](4,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,n.component.board);e(n,4,0,"button--icon icon-show-more")},function(e,n){var t=n.component;e(n,1,0,l["\u0275inlineInterpolate"](1,"",t.text.button_more,""))})}function fI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"ul",[["class","toolbar-items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"wp-filter-button",[],null,null,null,eb,Jv)),l["\u0275did"](3,180224,null,0,Zv,[B.a,Ze,en],null,null),(e()(),l["\u0275eld"](4,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,bi,vi)),l["\u0275did"](6,49152,null,0,mi,[B.a],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,hI)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.component.board.editable)},null)}function gI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["cdkDragHandle",""],["class","boards-list-item-handle icon icon-drag-handle cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,[[5,4]],0,NC.d,[l.ElementRef,[2,NC.l]],null,null)],null,null)}function mI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,43,"div",[["cdkDrag",""],["class","boards-list--item cdk-drag"],["vsDragScroll",""],["wp-isolated-query-space",""]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),l["\u0275prd"](6144,null,NC.l,null,[NC.c]),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275did"](15,4866048,[[4,4]],3,NC.c,[l.ElementRef,[3,NC.b],It.DOCUMENT,l.NgZone,l.ViewContainerRef,MC.a,NC.j,NC.a,[2,VC.b],NC.h,l.ChangeDetectorRef],{data:[0,"data"]},null),l["\u0275qud"](603979776,5,{_handles:1}),l["\u0275qud"](335544320,6,{_previewTemplate:0}),l["\u0275qud"](335544320,7,{_placeholderTemplate:0}),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](20,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),l["\u0275did"](21,671744,null,0,qC.b,[NC.c,qC.a,l.NgZone,l.ChangeDetectorRef],{scrollContainer:[0,"scrollContainer"]},null),l["\u0275prd"](512,null,qe,qe,[s,y]),l["\u0275prd"](512,null,$e,$e,[s,y]),l["\u0275prd"](512,null,We,We,[s,y]),l["\u0275prd"](512,null,en,en,[s,y]),l["\u0275prd"](512,null,Ue,Ue,[y]),l["\u0275prd"](512,null,M,M,[y]),l["\u0275prd"](512,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](512,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](512,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](512,null,Ce,Ce,[y,ke]),l["\u0275prd"](512,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](512,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](512,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](512,null,zn,zn,[y]),l["\u0275prd"](512,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](512,null,ar,dr,[l.Injector,yn]),(e()(),l["\u0275and"](16777216,null,null,1,null,gI)),l["\u0275did"](39,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](40,0,null,null,3,"board-list",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],[[null,"onRemove"]],function(e,n,t){var l=!0,i=e.component;"onRemove"===n&&(l=!1!==i.removeList(i.board,e.context.$implicit)&&l);return l},lI,UC)),l["\u0275prd"](512,null,wc,WC,[l.Injector,y,Y,ve,fC,ia]),l["\u0275prd"](512,null,Vk,Vk,[]),l["\u0275did"](43,770048,[[1,4]],0,$C,[Ae,B.a,uC,Tn,y,On,Fn,Dn,wc,l.Injector,ar,Sn,yn,mC,gC,Vk],{resource:[0,"resource"],board:[1,"board"],filters:[2,"filters"]},{onRemove:"onRemove"}),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,15,0,n.context.$implicit),e(n,21,0,t._container),e(n,39,0,t.board.editable),e(n,43,0,n.context.$implicit,t.board,t.filters)},function(e,n){e(n,0,0,l["\u0275nov"](n,15).disabled,l["\u0275nov"](n,15)._dragRef.isDragging()),e(n,40,0,l["\u0275nov"](n,43).gridColumnStart,l["\u0275nov"](n,43).gridColumnEnd,l["\u0275nov"](n,43).gridRowStart,l["\u0275nov"](n,43).gridRowEnd)})}function vI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","boards-list--add-item -no-text-select"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.addList(i.board)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","boards-list--add-item-text"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon-context"]],null,null,null,Zt,Gt)),l["\u0275did"](3,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"icon-add icon-context")},function(e,n){e(n,4,0,n.component.text.addList)})}function bI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,[[2,0],["container",1]],null,8,"div",[["cdkDropList",""],["cdkDropListOrientation","horizontal"],["class","boards-list--container cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0,i=e.component;"cdkDropListDropped"===n&&(l=!1!==i.moveList(i.board,t)&&l);return l},null,null)),l["\u0275prd"](6144,null,NC.b,null,[NC.f]),l["\u0275did"](2,1196032,null,1,NC.f,[l.ElementRef,NC.j,l.ChangeDetectorRef,[2,VC.b],[3,NC.g],[2,It.DOCUMENT],NC.h],{orientation:[0,"orientation"],disabled:[1,"disabled"]},{dropped:"cdkDropListDropped"}),l["\u0275qud"](603979776,4,{_draggables:1}),l["\u0275prd"](256,null,NC.g,void 0,[]),(e()(),l["\u0275and"](16777216,null,null,1,null,mI)),l["\u0275did"](6,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,vI)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"horizontal",!t.board.editable),e(n,6,0,t.board.queries,t.trackByQueryId),e(n,8,0,t.board.editable)},function(e,n){e(n,0,0,l["\u0275nov"](n,2).id,l["\u0275nov"](n,2).disabled,l["\u0275nov"](n,2)._dropListRef.isDragging(),l["\u0275nov"](n,2)._dropListRef.isReceiving())})}function yI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"enterprise-banner",[],null,null,null,mf,gf)),l["\u0275did"](1,49152,null,0,hf,[B.a],{leftMargin:[0,"leftMargin"],textMessage:[1,"textMessage"],linkMessage:[2,"linkMessage"],opReferrer:[3,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,!0,t.text.upsaleBoards,t.text.upsaleCheckOutLink,t.opReferrer(t.board))},null)}function wI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,53,"div",[["class","board--container"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-editable":0,"-free":1}),(e()(),l["\u0275eld"](3,0,null,null,46,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](22,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),l["\u0275prd"](512,null,qe,qe,[s,y]),l["\u0275prd"](512,null,$e,$e,[s,y]),l["\u0275prd"](512,null,We,We,[s,y]),l["\u0275prd"](512,null,Ue,Ue,[y]),l["\u0275prd"](512,null,M,M,[y]),l["\u0275prd"](512,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](512,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](512,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](512,null,Ce,Ce,[y,ke]),l["\u0275prd"](512,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](512,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](512,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),(e()(),l["\u0275eld"](35,0,null,null,11,"div",[["class","toolbar-container -editable"]],null,null,null,null,null)),(e()(),l["\u0275eld"](36,0,null,null,10,"div",[["id","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](37,0,null,null,9,"div",[["class","title-container board--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](38,0,null,null,4,"div",[["class","wp-show--back-button hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](39,0,null,null,3,"accessible-by-keyboard",[["linkClass","board--back-button button"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.goBack()&&l);return l},al,ul)),l["\u0275did"](40,49152,null,0,rl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](41,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-back-up"]],null,null,null,Zt,Gt)),l["\u0275did"](42,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](43,0,null,null,1,"editable-toolbar-title",[["class","title-container"]],null,[[null,"onSave"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.saveWithNameAndFilters(i.board,t)&&l);return l},Cb,bb)),l["\u0275did"](44,638976,null,0,gb,[l.Injector],{inputTitle:[0,"inputTitle"],editable:[1,"editable"],inFlight:[2,"inFlight"],showSaveCondition:[3,"showSaveCondition"],initialFocus:[4,"initialFocus"]},{onSave:"onSave"}),(e()(),l["\u0275and"](16777216,null,null,1,null,fI)),l["\u0275did"](46,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](47,0,null,null,2,"div",[["class","boards-filters-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](48,0,null,null,1,"board-filter",[],null,[[null,"onFiltersChanged"]],function(e,n,t){var l=!0,i=e.component;"onFiltersChanged"===n&&(l=!1!==i.updateFilters(t)&&l);return l},rI,oI)),l["\u0275did"](49,180224,[[3,4]],0,iI,[Vn,y,Y,Fn,en,Ee,h.G,dn],{board:[0,"board"],filters:[1,"filters"]},{onFiltersChanged:"onFiltersChanged"}),(e()(),l["\u0275and"](16777216,null,null,1,null,bI)),l["\u0275did"](51,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,yI)),l["\u0275did"](53,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,t.board.editable,t.board.isFree);e(n,1,0,"board--container",l);e(n,40,0,"board--back-button button");e(n,42,0,"button--icon icon-back-up"),e(n,44,0,t.board.name,t.board.editable,t.inFlight,!!t.state.params.query_props,t.isNew),e(n,46,0,t.showBoardListView()),e(n,49,0,t.board,t.filters),e(n,51,0,t.showBoardListView()),e(n,53,0,!t.showBoardListView())},null)}function kI(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{lists:1}),l["\u0275qud"](671088640,2,{container:0}),l["\u0275qud"](671088640,3,{content:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,wI)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,4,0,n.component.board)},null)}var CI=l["\u0275ccf"]("board",cI,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"board",[],null,null,null,kI,pI)),l["\u0275prd"](131584,null,Fg,Fg,[It.DOCUMENT]),l["\u0275did"](2,245760,null,0,cI,[h.G,B.a,Tn,On,hC,Mn.b,l.Injector,uC,rn,mC,Ge,Fg,sI],null,null)],function(e,n){e(n,2,0)},null)},{},{},[]),II=[["ng-select.wp-inline-create--reference-autocompleter{border:none}ng-select.wp-inline-create--reference-autocompleter .ng-clear-wrapper{display:none}"]],PI=l["\u0275crt"]({encapsulation:2,styles:II,data:{}});function jI(e){return l["\u0275vid"](0,[(e()(),l["\u0275ted"](0,null,[" "," #"," "," "]))],null,function(e,n){e(n,0,0,n.context.item.type.name,n.context.item.id,n.context.item.subject)})}function _I(e){return l["\u0275vid"](0,[(e()(),l["\u0275ted"](0,null,[" "," #"," "," "]))],null,function(e,n){e(n,0,0,n.context.item.type.name,n.context.item.id,n.context.item.subject)})}function RI(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{ngSelectComponent:0}),(e()(),l["\u0275eld"](1,0,null,null,19,"ng-select",[["class","ng-select"],["ngClass","wp-inline-create--reference-autocompleter"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null]],[[null,"close"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,4).handleKeyDown(t)&&i);"close"===n&&(i=!1!==o.cancel()&&i);"change"===n&&(i=!1!==o.addWorkPackageToQuery(t)&&i);return i},Ct.b,Ct.a)),l["\u0275prd"](5120,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](4,4964352,[[1,4]],11,jt.a,[[8,null],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],appendTo:[1,"appendTo"],loading:[2,"loading"],closeOnSelect:[3,"closeOnSelect"],typeahead:[4,"typeahead"],multiple:[5,"multiple"]},{changeEvent:"change",closeEvent:"close"}),l["\u0275qud"](335544320,2,{optionTemplate:0}),l["\u0275qud"](335544320,3,{optgroupTemplate:0}),l["\u0275qud"](335544320,4,{labelTemplate:0}),l["\u0275qud"](335544320,5,{multiLabelTemplate:0}),l["\u0275qud"](335544320,6,{headerTemplate:0}),l["\u0275qud"](335544320,7,{footerTemplate:0}),l["\u0275qud"](335544320,8,{notFoundTemplate:0}),l["\u0275qud"](335544320,9,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,10,{loadingTextTemplate:0}),l["\u0275qud"](335544320,11,{tagTemplate:0}),l["\u0275qud"](603979776,12,{ngOptions:1}),l["\u0275pid"](131072,It.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["\u0275and"](0,[[4,2]],null,1,null,jI)),l["\u0275did"](18,16384,null,0,jt.g,[l.TemplateRef],null,null),(e()(),l["\u0275and"](0,[[2,2]],null,1,null,_I)),l["\u0275did"](20,16384,null,0,jt.f,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,3,0,"wp-inline-create--reference-autocompleter");e(n,4,0,l["\u0275unv"](n,4,0,l["\u0275nov"](n,16).transform(t.results$)),t.appendToContainer,t.isLoading,!1,t.searchInput$,!1)},function(e,n){e(n,1,0,!l["\u0275nov"](n,4).multiple,l["\u0275nov"](n,4).typeahead,l["\u0275nov"](n,4).multiple,l["\u0275nov"](n,4).addTag,l["\u0275nov"](n,4).searchable,l["\u0275nov"](n,4).isOpen,l["\u0275nov"](n,4).disabled,l["\u0275nov"](n,4).filtered)})}var SI=l["\u0275ccf"]("board-inline-add-autocompleter",zC,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"board-inline-add-autocompleter",[],null,null,null,RI,PI)),l["\u0275did"](1,1097728,null,0,zC,[y,ve,On,Vn,Y,gn,l.ChangeDetectorRef,B.a],null,null)],null,null)},{appendToContainer:"appendToContainer"},{onCancel:"onCancel",onReferenced:"onReferenced"},[]),xI=function(){return function(e,n,t,l){var i=this;this.boardService=e,this.boardCache=n,this.currentProject=t,this.mainMenuService=l,this.trackById=Np.compareByAttribute("id"),this.currentProjectIdentifier=this.currentProject.identifier,this.boards$=this.boardCache.observeAll().pipe(Object(v.a)(function(e){return e.sort(function(e,n){return e.name<n.name?-1:e.name>n.name?1:0})})),this.mainMenuService.onActivate("board_view").subscribe(function(){return i.boardService.loadAllBoards()})}}();gt.DynamicBootstrapper.register({selector:"boards-menu",cls:xI});var TI=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function OI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"a",[["class","main-menu--children-sub-item ellipsis"],["uiSref","boards.show"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,3).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Mu.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](3,737280,null,0,Mu.b,[h.P,[2,Mu.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"],options:[2,"options"]},null),l["\u0275pod"](4,{board_id:0,query_props:1,projects:2,projectPath:3}),l["\u0275pod"](5,{reload:0})],function(e,n){var t=n.component,l=e(n,4,0,n.context.$implicit.id,"","projects",t.currentProjectIdentifier),i=e(n,5,0,!0);e(n,3,0,"boards.show",l,i)},function(e,n){e(n,1,0,n.context.$implicit.name)})}function EI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"ul",[["class","main-menu--children boards--menu-items"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,OI)),l["\u0275did"](3,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,3,0,n.context.ngIf,t.trackById)},null)}function DI(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,2,null,EI)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,It.AsyncPipe,[l.ChangeDetectorRef])],function(e,n){var t=n.component;e(n,1,0,l["\u0275unv"](n,1,0,l["\u0275nov"](n,2).transform(t.boards$)))},null)}var FI=l["\u0275ccf"]("boards-menu",xI,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"boards-menu",[],null,null,null,DI,TI)),l["\u0275did"](1,49152,null,0,xI,[mC,uC,Vn,vt],null,null)],null,null)},{},{},[]),AI=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function NI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"a",[["class","tab-show"],["href",""],["role","button"]],[[1,"title",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchTo(e.context.$implicit.name)&&l);return l},null,null)),l["\u0275did"](2,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"-disabled":0,selected:1})],function(e,n){var t=n.component,l=e(n,3,0,null!=n.context.$implicit.disableBecause,t.currentTab&&n.context.$implicit.name===t.currentTab.name);e(n,2,0,"tab-show",l)},function(e,n){e(n,1,0,n.context.$implicit.disableBecause||n.context.$implicit.title,n.context.$implicit.title)})}function MI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","tabs--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,NI)),l["\u0275did"](3,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","tabs-buttons"],["style","display:none;"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"button",[["class","tab-left icon-context icon-arrow-left4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"button",[["class","tab-right icon-context icon-arrow-right5"]],null,null,null,null,null))],function(e,n){e(n,3,0,n.component.availableTabs)},null)}function VI(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{tabContentOutlet:0}),(e()(),l["\u0275eld"](1,0,null,null,11,"div",[["class","op-modal--portal"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,10,"div",[["class","op-modal--modal-container -wide wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,MI)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](9,0,[[1,0],["tabContentOutlet",1]],null,0,"div",[["class","tab-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,2,"div",[["class","modal--form-actions"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,0,"button",[["class","button -highlight"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveChanges()&&l);return l},null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){e(n,8,0,!!n.component.tabPortalHost)},function(e,n){var t=n.component;e(n,5,0,t.text.closePopup),e(n,6,0,t.text.title),e(n,11,0,t.text.applyButton),e(n,12,0,t.text.cancelButton)})}var qI=l["\u0275ccf"]("ng-component",FC,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,VI,AI)),l["\u0275did"](1,245760,null,0,FC,[Mn.a,B.a,mC,uC,DC,l.Injector,l.ApplicationRef,l.ComponentFactoryResolver,l.ChangeDetectorRef,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),LI=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function $I(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,36,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,35,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,3).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,3).onReset()&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Pt.t,[],null,null),l["\u0275did"](3,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](5,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](6,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,18,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,17,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,16,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,6,"input",[["name","entire_card_switch"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,11)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,11).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,11)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,11)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,12).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,12).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.entireCardMode=t)&&i);"change"===n&&(i=!1!==o.updateMode("entire-card")&&i);return i},null,null)),l["\u0275did"](11,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](12,212992,null,0,Pt.n,[l.Renderer2,l.ElementRef,Pt.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.n]),l["\u0275did"](14,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](16,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](17,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](19,0,null,null,6,"select",[["class","form--select form--inline-select"],["id","selected_attribute"],["name","selected_attribute"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateMode(t.target.value)&&l);return l},null,null)),(e()(),l["\u0275eld"](20,0,null,null,2,"option",[["value","type"]],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](21,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](22,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275eld"](23,0,null,null,2,"option",[["value","priority"]],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](24,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](25,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275eld"](26,0,null,null,10,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](28,0,null,null,8,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,6,"input",[["name","highlighting_mode_switch"],["type","radio"],["value","none"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,30)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,30).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,30)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,30)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,31).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,31).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.highlightingMode=t)&&i);"change"===n&&(i=!1!==o.updateMode(t.target.value)&&i);return i},null,null)),l["\u0275did"](30,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275did"](31,212992,null,0,Pt.n,[l.Renderer2,l.ElementRef,Pt.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,Pt.g,function(e,n){return[e,n]},[Pt.d,Pt.n]),l["\u0275did"](33,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](35,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](36,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,12,0,"entire_card_switch",!0);e(n,14,0,"entire_card_switch",t.entireCardMode);e(n,21,0,"type");e(n,22,0,"type");e(n,24,0,"priority");e(n,25,0,"priority");e(n,31,0,"highlighting_mode_switch","none");e(n,33,0,"highlighting_mode_switch",t.highlightingMode)},function(e,n){var t=n.component;e(n,1,0,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending),e(n,6,0,t.text.highlighting_mode.description),e(n,10,0,l["\u0275nov"](n,16).ngClassUntouched,l["\u0275nov"](n,16).ngClassTouched,l["\u0275nov"](n,16).ngClassPristine,l["\u0275nov"](n,16).ngClassDirty,l["\u0275nov"](n,16).ngClassValid,l["\u0275nov"](n,16).ngClassInvalid,l["\u0275nov"](n,16).ngClassPending),e(n,17,0,t.text.highlighting_mode.entire_card_by),e(n,20,0,t.text.highlighting_mode.type,"type"===t.lastEntireCardAttribute),e(n,23,0,t.text.highlighting_mode.priority,"priority"===t.lastEntireCardAttribute),e(n,29,0,l["\u0275nov"](n,35).ngClassUntouched,l["\u0275nov"](n,35).ngClassTouched,l["\u0275nov"](n,35).ngClassPristine,l["\u0275nov"](n,35).ngClassDirty,l["\u0275nov"](n,35).ngClassValid,l["\u0275nov"](n,35).ngClassInvalid,l["\u0275nov"](n,35).ngClassPending),e(n,36,0,t.text.highlighting_mode.none)})}var HI=l["\u0275ccf"]("ng-component",EC,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,$I,LI)),l["\u0275did"](1,114688,null,0,EC,[l.Injector,Mn.a,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),BI=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function zI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function WI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,Pt.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,Pt.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.attribute),e(n,2,0,n.context.$implicit.attribute)},function(e,n){e(n,0,0,n.context.$implicit.text)})}function QI(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{actionAttributeSelect:0}),(e()(),l["\u0275eld"](1,0,null,null,28,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,27,"div",[["class","op-modal--modal-container confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,zI)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,23,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,7,"section",[["class","new-board--section"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,4,"button",[["class","button"]],[[8,"disabled",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,11).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,11).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.createFree()&&i);return i},null,null)),l["\u0275did"](11,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](12,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon4 icon-add"]],null,null,null,Zt,Gt)),l["\u0275did"](13,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](14,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,14,"section",[["class","new-board--section"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,6,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,null,null,5,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,4,"div",[["class","form--select-container -slim"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,0,"label",[["class","form--label"],["for","new_board_action_select"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](22,0,[[1,0],["actionAttributeSelect",1]],null,2,"select",[["class","new-board--action-select"],["id","new_board_action_select"],["name","new_board_action_select"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,WI)),l["\u0275did"](24,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](25,0,null,null,4,"button",[["class","button"]],[[8,"disabled",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,26).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,26).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.createAction()&&i);return i},null,null)),l["\u0275did"](26,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](27,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon4 icon-add"]],null,null,null,Zt,Gt)),l["\u0275did"](28,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](29,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose);e(n,13,0,"icon4 icon-add"),e(n,24,0,t.available);e(n,28,0,"icon4 icon-add")},function(e,n){var t=n.component;e(n,8,0,t.text.free_board),e(n,9,0,t.text.free_board_text),e(n,10,0,t.inFlight),e(n,14,0,t.text.free_board),e(n,16,0,t.text.action_board),e(n,17,0,t.text.action_board_text),e(n,21,0,t.text.select_attribute),e(n,25,0,t.inFlight),e(n,29,0,t.text.action_board)})}var UI=l["\u0275ccf"]("ng-component",vC,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,QI,BI)),l["\u0275did"](1,245760,null,0,vC,[l.ElementRef,Mn.a,l.ChangeDetectorRef,h.G,mC,gC,uC,On,Sn,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),KI=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function GI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function YI(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,18,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,17,"div",[["class","op-modal--modal-container confirm-dialog--modal loading-indicator--location -slim"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,GI)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"h3",[["class","icon-context icon-add"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,9,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,8,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,6,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"label",[["class","form--label"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](11,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](12,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](14,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"],ndcDynamicOutputs:[1,"ndcDynamicOutputs"]},null),l["\u0275pod"](15,{availableValues:0,appendTo:1,model:2,classes:3,finishedLoading:4}),(e()(),l["\u0275eld"](16,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,0,"button",[["class","button -highlight"]],[[8,"disabled",0],[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.create()&&l);return l},null,null)),(e()(),l["\u0275eld"](18,0,null,null,0,"button",[["class","confirm-form-submit--cancel button"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,4,0,t.showClose),e(n,12,0,t.autocompleterComponent());var l=e(n,15,0,t.availableValues,"body","","new-list--action-select",!0);e(n,14,0,l,t.referenceOutputs)},function(e,n){var t=n.component;e(n,5,0,t.text.title),e(n,10,0,t.actionService.localizedName),e(n,17,0,!t.selectedAttribute,t.text.button_continue,t.text.button_continue),e(n,18,0,t.text.button_cancel,t.text.button_cancel)})}var ZI=l["\u0275ccf"]("ng-component",uI,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,YI,KI)),l["\u0275did"](1,245760,null,0,uI,[l.ElementRef,Mn.a,l.ChangeDetectorRef,gC,h.G,mC,uC,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),JI=t("XFe1"),XI=t("qfZ4"),eP=function(){function e(e,n,t,l,i,o,r,u,a,s,c,d){this.states=e,this.$state=n,this.wpTableFilters=t,this.wpListService=l,this.querySpace=i,this.wpListChecksumService=o,this.titleService=r,this.urlParamsHelper=u,this.element=a,this.i18n=s,this.notificationsService=c,this.sanitizer=d,this.static=!1}return e.prototype.ngOnInit=function(){this.querySpace.stopAllSubscriptions.next(),this.setCalendarOptions()},e.prototype.ngOnDestroy=function(){},e.prototype.onCalendarInitialized=function(){this.setupWorkPackagesListener()},e.prototype.updateTimeframe=function(e){var n=this.calendarElement.fullCalendar("getView"),t=n.start.format("YYYY-MM-DD"),l=n.end.format("YYYY-MM-DD"),i=this.wpTableFilters.isEmpty;if(i&&this.querySpace.query.value);else if(i){var o=this.defaultQueryProps(t,l);this.$state.params.query_props&&(o=decodeURIComponent(this.$state.params.query_props||"")),this.wpListService.fromQueryParams({query_props:o},this.projectIdentifier).toPromise()}else{this.$state.params;this.wpTableFilters.modify("datesInterval",function(e){e.values[0]=t,e.values[1]=l})}},e.prototype.addTooltip=function(e){var n=e.detail.event,t=e.detail.element,l=n.workPackage;jQuery(t).tooltip({content:this.contentString(l),items:".fc-content",close:function(){jQuery(".ui-helper-hidden-accessible").remove()},track:!0})},e.prototype.toWPFullView=function(e){var n=e.detail.event.workPackage;this.removeTooltip(e.detail.jsEvent.currentTarget),this.wpListChecksumService.clear(),window.history.pushState({},this.titleService.current,window.location.href),this.$state.go("work-packages.show",{workPackageId:n.id},{inherit:!1})},Object.defineProperty(e.prototype,"calendarElement",{get:function(){return jQuery(this.element.nativeElement).find("ng-fullcalendar")},enumerable:!0,configurable:!0}),e.prototype.setCalendarsDate=function(){var e=this.querySpace.query.value;if(e){var n=_.find(e.filters||[],{id:"datesInterval"}),t=null,l="month";if(n){var i=C(n.values[0]),o=C(n.values[1]).diff(i,"days");t=i.add(o/2,"days"),7===o&&(l="basicWeek")}t?this.calendarElement.fullCalendar("changeView",l,t):this.calendarElement.fullCalendar("changeView",l)}},e.prototype.setupWorkPackagesListener=function(){var e=this;this.querySpace.results.values$().pipe(Object(Ln.b)(this)).subscribe(function(n){e.warnOnTooManyResults(n),e.mapToCalendarEvents(n.elements),e.setCalendarsDate()})},e.prototype.mapToCalendarEvents=function(e){var n=this,t=e.map(function(e){var t=n.eventDate(e,"start"),l=n.eventDate(e,"due"),i=C(l).add(1,"days");return{title:e.subject,start:t,end:i,allDay:!0,className:"__hl_background_type_"+e.type.id,workPackage:e}});this.ucCalendar.renderEvents(t)},e.prototype.warnOnTooManyResults=function(n){if(n.count<n.total){var t=this.i18n.t("js.calendar.too_many",{count:n.total,max:e.MAX_DISPLAYED});this.notificationsService.addNotice(t)}},e.prototype.setCalendarOptions=function(){this.static?this.calendarOptions=this.staticOptions:this.calendarOptions=this.dynamicOptions},Object.defineProperty(e.prototype,"dynamicOptions",{get:function(){var e=this;return{editable:!1,eventLimit:!1,locale:this.i18n.locale,height:function(){return jQuery(window).height()-e.calendarElement.offset().top-12},header:{left:"prev,next today",center:"title",right:"month,basicWeek"},views:{month:{fixedWeekCount:!1}}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"staticOptions",{get:function(){var e=this;return{editable:!1,eventLimit:!1,locale:this.i18n.locale,height:function(){for(var n=jQuery(e.element.nativeElement);!n.height()&&n.parent();)n=n.parent();var t=jQuery(e.element.nativeElement).position().top,l=n.position().top;return n.height()-(t-l)},header:!1,defaultView:"basicWeek"}},enumerable:!0,configurable:!0}),e.prototype.defaultQueryProps=function(n,t){var l={c:["id"],t:"id:asc",f:[{n:"status",o:"o",v:[]},{n:"datesInterval",o:"<>d",v:[n,t]}],pp:e.MAX_DISPLAYED};return JSON.stringify(l)},e.prototype.eventDate=function(e,n){return e.isMilestone?e.date:e[n+"Date"]},e.prototype.contentString=function(e){return"\n        "+this.sanitizedValue(e,"type")+" #"+e.id+": "+this.sanitizedValue(e,"subject",null)+'\n        <ul class="tooltip--map">\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.projectName")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"project")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.status")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"status")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.startDate")+':</span>\n            <span class="tooltip--map--value">'+this.eventDate(e,"start")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.dueDate")+':</span>\n            <span class="tooltip--map--value">'+this.eventDate(e,"due")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.assignee")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"assignee")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.priority")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"priority")+"</span>\n          </li>\n        </ul>\n        "},e.prototype.sanitizedValue=function(e,n,t){void 0===t&&(t="name");var i=e[n];return i=(i=t&&i?i[t]:i)||this.i18n.t("js.placeholders.default"),this.sanitizer.sanitize(l.SecurityContext.HTML,i)},e.prototype.removeTooltip=function(e){jQuery(e).tooltip({close:function(){jQuery(".ui-helper-hidden-accessible").remove()},disabled:!0})},e.MAX_DISPLAYED=100,e}(),nP=[[".wp-calendar--container[_ngcontent-%COMP%]{min-height:200px}"]],tP=l["\u0275crt"]({encapsulation:0,styles:nP,data:{}});function lP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","wp-calendar--container loading-indicator--location"],["style","position: relative"]],[[1,"data-indicator-name",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"ng-fullcalendar",[],null,[[null,"initialized"],[null,"viewRender"],[null,"eventRender"],[null,"eventClick"]],function(e,n,t){var l=!0,i=e.component;"initialized"===n&&(l=!1!==i.onCalendarInitialized()&&l);"viewRender"===n&&(l=!1!==i.updateTimeframe(t)&&l);"eventRender"===n&&(l=!1!==i.addTooltip(t)&&l);"eventClick"===n&&(l=!1!==i.toWPFullView(t)&&l);return l},JI.b,JI.a)),l["\u0275did"](2,14794752,[[1,4],["ucCalendar",4]],0,XI.a,[l.ElementRef,l.NgZone],{options:[0,"options"]},{eventClick:"eventClick",viewRender:"viewRender",eventRender:"eventRender",initialized:"initialized"})],function(e,n){e(n,2,0,n.component.calendarOptions)},function(e,n){e(n,0,0,"table")})}function iP(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{ucCalendar:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,lP)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.calendarOptions)},null)}var oP=l["\u0275ccf"]("wp-calendar",eP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-calendar",[],null,null,null,iP,tP)),l["\u0275did"](1,245760,null,0,eP,[s,h.G,en,Yn,y,Pn,Ds,Ee,l.ElementRef,B.a,Tn,_i.DomSanitizer],null,null)],function(e,n){e(n,1,0)},null)},{projectIdentifier:"projectIdentifier",static:"static"},{},[]),rP=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.projectIdentifier=n.$state.params.projectPath||null,n}return r.d(n,e),Object.defineProperty(n.prototype,"loadingIndicator",{set:function(e){this.loadingIndicatorService.indicator("calendar-entry").promise=e},enumerable:!0,configurable:!0}),n.prototype.refresh=function(e,n){return this.loadingIndicator=this.wpListService.loadCurrentQueryFromParams(this.projectIdentifier)},n}(Zn),uP=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function aP(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{calendarElement:0}),(e()(),l["\u0275eld"](1,0,null,null,16,"div",[["class","work-packages-list-view--container loading-indicator--location"],["data-indicator-name","calendar-entry"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,11,"div",[["class","toolbar-container -editable"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,10,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),l["\u0275ted"](6,null,[" "," "])),(e()(),l["\u0275eld"](7,0,null,null,6,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,1,"wp-filter-button",[],null,null,null,eb,Jv)),l["\u0275did"](10,180224,null,0,Zv,[B.a,Ze,en],null,null),(e()(),l["\u0275eld"](11,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,bi,vi)),l["\u0275did"](13,49152,null,0,mi,[B.a],null,null),(e()(),l["\u0275eld"](14,0,null,null,1,"filter-container",[],null,null,null,Ff,Tf)),l["\u0275did"](15,180224,null,0,xf,[en,Ze],null,null),(e()(),l["\u0275eld"](16,0,null,null,1,"wp-calendar",[],null,null,null,iP,tP)),l["\u0275did"](17,245760,[[1,4]],0,eP,[s,h.G,en,Yn,y,Pn,Ds,Ee,l.ElementRef,B.a,Tn,_i.DomSanitizer],{projectIdentifier:[0,"projectIdentifier"]},null)],function(e,n){e(n,17,0,n.component.projectIdentifier)},function(e,n){e(n,6,0,n.component.I18n.t("js.calendar.title"))})}var sP=l["\u0275ccf"]("ng-component",rP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,aP,uP)),l["\u0275did"](1,245760,null,0,rP,[l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),cP=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){this.elementRef.nativeElement},e}();gt.DynamicBootstrapper.register({selector:"wp-embedded-calendar",cls:cP});var dP=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,65,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](17,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),l["\u0275prd"](512,null,en,en,[s,y]),l["\u0275prd"](512,null,Ce,Ce,[y,ke]),l["\u0275prd"](512,null,qe,qe,[s,y]),l["\u0275prd"](512,null,$e,$e,[s,y]),l["\u0275prd"](512,null,We,We,[s,y]),l["\u0275prd"](512,null,Ue,Ue,[y]),l["\u0275prd"](512,null,M,M,[y]),l["\u0275prd"](512,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](512,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](512,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](512,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](512,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](512,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](512,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),(e()(),l["\u0275eld"](32,0,null,null,1,"wp-calendar",[],null,null,null,iP,tP)),l["\u0275did"](33,245760,null,0,eP,[s,h.G,en,Yn,y,Pn,Ds,Ee,l.ElementRef,B.a,Tn,_i.DomSanitizer],{static:[0,"static"]},null),(e()(),l["\u0275eld"](34,0,null,null,31,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](65,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null)],function(e,n){e(n,33,0,!0)},null)}var hP=l["\u0275ccf"]("wp-embedded-calendar",cP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-calendar",[],null,null,null,pP,dP)),l["\u0275did"](1,114688,null,0,cP,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),fP=function(){return function(){this.setHostClass=!0}}(),gP=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function mP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-info1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[["class","generic-table--no-results-title"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.component.title)})}l["\u0275ccf"]("no-results",fP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,mP,gP)),l["\u0275did"](1,49152,null,0,fP,[],null,null)],null,function(e,n){e(n,0,0,l["\u0275nov"](n,1).setHostClass)})},{title:"title"},{},[]);var vP=function(e){function n(n,t,l,i,o){var r=e.call(this,l)||this;return r.halResource=n,r.pathHelper=t,r.i18n=l,r.timezone=i,r.domSanitizer=o,r.text={title:r.i18n.t("js.grid.widgets.documents.title"),noResults:r.i18n.t("js.grid.widgets.documents.no_results")},r.entries=[],r.entriesLoaded=!1,r}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this,n=JSON.stringify([["created_on","desc"]]),t=this.pathHelper.api.v3.apiV3Base+"/documents?sortBy="+n+"&pageSize=10";this.halResource.get(t).toPromise().then(function(n){e.entries=n.elements,e.entriesLoaded=!0})},n.prototype.documentPath=function(e){return this.pathHelper.appBasePath+"/documents/"+e.id},n.prototype.documentCreated=function(e){return this.timezone.formattedDatetime(e.createdAt)},n.prototype.documentDescription=function(e){return this.domSanitizer.sanitize(l.SecurityContext.HTML,e.description.html)},Object.defineProperty(n.prototype,"noEntries",{get:function(){return!this.entries.length&&this.entriesLoaded},enumerable:!0,configurable:!0}),n}(LC),bP=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function yP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,mP,gP)),l["\u0275did"](1,49152,null,0,fP,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).setHostClass)})}function wP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"h4",[["class","document-category-elements--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"p",[["class","document-category-elements--date"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"em",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"div",[["class","wiki grid--widget-limited-text"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,2,0,t.documentPath(n.context.$implicit),n.context.$implicit.title),e(n,4,0,t.documentCreated(n.context.$implicit)),e(n,5,0,t.documentDescription(n.context.$implicit))})}function kP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"h3",[["cdkDragHandle",""],["class","widget-box--header cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-context icon-notes"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","widget-box--header-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,4,"div",[["class","grid--widget-content"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,yP)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,wP)),l["\u0275did"](8,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,6,0,t.noEntries),e(n,8,0,t.entries)},function(e,n){e(n,3,0,n.component.text.title)})}var CP=l["\u0275ccf"]("ng-component",vP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,kP,bP)),l["\u0275did"](1,114688,null,0,vP,[Y,ve,B.a,qt,_i.DomSanitizer],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).gridColumnStart,l["\u0275nov"](n,1).gridColumnEnd,l["\u0275nov"](n,1).gridRowStart,l["\u0275nov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),IP=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.listUrl=function(){return this.pathHelper.api.v3.news.toString()},n.prototype.oneUrl=function(e){return this.pathHelper.api.v3.news.id(e).toString()},n}(Fe),PP=function(e){function n(n,t,l,i,o,r){var u=e.call(this,l)||this;return u.halResource=n,u.pathHelper=t,u.i18n=l,u.timezone=i,u.userCache=o,u.newsDm=r,u.text={title:u.i18n.t("js.grid.widgets.news.title"),createdBy:u.i18n.t("js.label_created_by"),at:u.i18n.t("js.grid.widgets.news.at"),noResults:u.i18n.t("js.grid.widgets.news.no_results")},u.entries=[],u.entriesLoaded=!1,u}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.newsDm.list({sortBy:[["created_on","desc"]],pageSize:3}).then(function(n){e.entries=n.elements,e.entriesLoaded=!0,e.entries.forEach(function(n){n.author&&e.userCache.require(n.author.idFromLink).then(function(e){n.author=e})})})},n.prototype.newsPath=function(e){return this.pathHelper.appBasePath+"/news/"+e.id},n.prototype.newsProjectPath=function(e){return this.pathHelper.projectPath(e.project.idFromLink)},n.prototype.newsProjectName=function(e){return e.project.name},n.prototype.newsAuthorName=function(e){return e.author.name},n.prototype.newsAuthorPath=function(e){return this.pathHelper.userPath(e.author.id)},n.prototype.newsAuthorAvatar=function(e){return e.author.avatar},n.prototype.newsCreated=function(e){return this.timezone.formattedDatetime(e.createdAt)},Object.defineProperty(n.prototype,"noEntries",{get:function(){return!this.entries.length&&this.entriesLoaded},enumerable:!0,configurable:!0}),n}(LC),jP=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function _P(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,mP,gP)),l["\u0275did"](1,49152,null,0,fP,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).setHostClass)})}function RP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"img",[["class","avatar avatar-mini avatar--fallback"],["data-avatar-fallback-remove","true"]],[[1,"src",4],[1,"title",0],[1,"alt",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.newsAuthorAvatar(n.parent.parent.context.$implicit),t.newsAuthorName(n.parent.parent.context.$implicit),t.newsAuthorName(n.parent.parent.context.$implicit))})}function SP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,RP)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,n.component.newsAuthorAvatar(n.parent.context.$implicit))},null)}function xP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"p",[["class","widget-box--additional-info"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,[" "," "])),(e()(),l["\u0275eld"](2,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](3,null,[" "," "," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.text.createdBy),e(n,2,0,t.newsAuthorPath(n.parent.context.$implicit),t.newsAuthorName(n.parent.context.$implicit)),e(n,3,0,t.text.at,t.newsCreated(n.parent.context.$implicit))})}function TP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"li",[["class","-widget-box--arrow-multiline"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,SP)),l["\u0275did"](3,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](4,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[": "])),(e()(),l["\u0275eld"](6,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,xP)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,3,0,n.context.$implicit.author),e(n,8,0,n.context.$implicit.author)},function(e,n){var t=n.component;e(n,4,0,t.newsProjectPath(n.context.$implicit),t.newsProjectName(n.context.$implicit)),e(n,6,0,t.newsPath(n.context.$implicit),n.context.$implicit.title)})}function OP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"h3",[["cdkDragHandle",""],["class","widget-box--header cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-context icon-news"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","widget-box--header-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"div",[["class","grid--widget-content"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,_P)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,2,"ul",[["class","widget-box--arrow-links"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,TP)),l["\u0275did"](9,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,6,0,t.noEntries),e(n,9,0,t.entries)},function(e,n){e(n,3,0,n.component.text.title)})}var EP=l["\u0275ccf"]("ng-component",PP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,OP,jP)),l["\u0275did"](1,114688,null,0,PP,[Y,ve,B.a,qt,Xd,IP],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).gridColumnStart,l["\u0275nov"](n,1).gridColumnEnd,l["\u0275nov"](n,1).gridRowStart,l["\u0275nov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),DP=["wp-embedded-table[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;overflow:hidden}.widget-box--header[_ngcontent-%COMP%]{display:flex}.widget-box--header[_ngcontent-%COMP%]   .icon-context[_ngcontent-%COMP%]{padding-top:5px}"],FP=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.configuration={actionsColumnEnabled:!1,columnMenuEnabled:!1,hierarchyToggleEnabled:!0,contextMenuEnabled:!1},n}return r.d(n,e),n.prototype.ngOnInit=function(){this.configuration.forcePerPageOption=this.calculatePerPageOption()},n.prototype.calculatePerPageOption=function(){if(this.resource){var e=this.resource.height,t=e*n.gridAreaHeight+(e-1)*n.gridAreaSpace,l=Math.floor((t-n.widgetSpaceOutsideTable)/n.wpLineHeight);return l<1?1:l}return!1},n.widgetSpaceOutsideTable=230,n.wpLineHeight=40,n.gridAreaHeight=100,n.gridAreaSpace=20,n}(LC),AP=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={title:n.i18n.t("js.grid.widgets.work_packages_assigned.title")},n}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this);var n=new se;n.add("assignee","=",["me"]),n.add("status","o",[]),this.queryProps={"columns[]":["id","project","type","subject"],filters:n.toJson()}},n}(FP),NP=[DP],MP=l["\u0275crt"]({encapsulation:0,styles:NP,data:{}});function VP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"h3",[["cdkDragHandle",""],["class","widget-box--header cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-context icon-assigned-to-me"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","widget-box--header-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,33,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](35,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275eld"](36,0,null,null,1,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](37,4964352,null,0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"],externalHeight:[2,"externalHeight"]},null)],function(e,n){var t=n.component;e(n,37,0,t.configuration,t.queryProps,!0)},function(e,n){e(n,3,0,n.component.text.title)})}var qP=l["\u0275ccf"]("ng-component",AP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,VP,MP)),l["\u0275did"](1,114688,null,0,AP,[B.a],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).gridColumnStart,l["\u0275nov"](n,1).gridColumnEnd,l["\u0275nov"](n,1).gridRowStart,l["\u0275nov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),LP=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={title:n.i18n.t("js.grid.widgets.work_packages_accountable.title")},n}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this);var n=new se;n.add("responsible","=",["me"]),n.add("status","o",[]),this.queryProps={"columns[]":["id","project","type","subject"],filters:n.toJson()}},n}(FP),$P=[DP],HP=l["\u0275crt"]({encapsulation:0,styles:$P,data:{}});function BP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"h3",[["cdkDragHandle",""],["class","widget-box--header cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-context icon-assigned-to-me"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","widget-box--header-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,33,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](35,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275eld"](36,0,null,null,1,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](37,4964352,null,0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"],externalHeight:[2,"externalHeight"]},null)],function(e,n){var t=n.component;e(n,37,0,t.configuration,t.queryProps,!0)},function(e,n){e(n,3,0,n.component.text.title)})}var zP=l["\u0275ccf"]("ng-component",LP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,BP,HP)),l["\u0275did"](1,114688,null,0,LP,[B.a],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).gridColumnStart,l["\u0275nov"](n,1).gridColumnEnd,l["\u0275nov"](n,1).gridRowStart,l["\u0275nov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),WP=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={title:n.i18n.t("js.grid.widgets.work_packages_created.title")},n}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this);var n=new se;n.add("author","=",["me"]),n.add("status","o",[]),this.queryProps={"columns[]":["id","project","type","subject"],filters:n.toJson()}},n}(FP),QP=[DP],UP=l["\u0275crt"]({encapsulation:0,styles:QP,data:{}});function KP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"h3",[["cdkDragHandle",""],["class","widget-box--header cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-context icon-assigned-to-me"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","widget-box--header-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,33,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](35,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275eld"](36,0,null,null,1,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](37,4964352,null,0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"],externalHeight:[2,"externalHeight"]},null)],function(e,n){var t=n.component;e(n,37,0,t.configuration,t.queryProps,!0)},function(e,n){e(n,3,0,n.component.text.title)})}var GP=l["\u0275ccf"]("ng-component",WP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,KP,UP)),l["\u0275did"](1,114688,null,0,WP,[B.a],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).gridColumnStart,l["\u0275nov"](n,1).gridColumnEnd,l["\u0275nov"](n,1).gridRowStart,l["\u0275nov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),YP=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={title:n.i18n.t("js.grid.widgets.work_packages_watched.title")},n}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this);var n=new se;n.add("watcher","=",["me"]),n.add("status","o",[]),this.queryProps={"columns[]":["id","project","type","subject"],filters:n.toJson()}},n}(FP),ZP=[DP],JP=l["\u0275crt"]({encapsulation:0,styles:ZP,data:{}});function XP(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"h3",[["cdkDragHandle",""],["class","widget-box--header cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-context icon-assigned-to-me"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","widget-box--header-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,33,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](35,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275eld"](36,0,null,null,1,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](37,4964352,null,0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"],externalHeight:[2,"externalHeight"]},null)],function(e,n){var t=n.component;e(n,37,0,t.configuration,t.queryProps,!0)},function(e,n){e(n,3,0,n.component.text.title)})}var ej=l["\u0275ccf"]("ng-component",YP,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,XP,JP)),l["\u0275did"](1,114688,null,0,YP,[B.a],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).gridColumnStart,l["\u0275nov"](n,1).gridColumnEnd,l["\u0275nov"](n,1).gridRowStart,l["\u0275nov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),nj=t("0mNj"),tj=function(e){function n(n,t,l,i){var o=e.call(this,n)||this;return o.i18n=n,o.urlParamsHelper=t,o.queryDm=l,o.queryFormDm=i,o.text={title:o.i18n.t("js.grid.widgets.work_packages_table.title")},o.inFlight=!1,o.configuration={actionsColumnEnabled:!1,columnMenuEnabled:!0,hierarchyToggleEnabled:!0,contextMenuEnabled:!1},o}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;this.resource.options.queryId?(this.queryId=this.resource.options.queryId,e.prototype.ngOnInit.call(this)):this.createInitial().then(function(t){n.resource.options={queryId:t.id},n.resourceChanged.emit(n.resource),n.queryId=t.id,e.prototype.ngOnInit.call(n)})},n.prototype.ngAfterViewInit=function(){var e=this;this.querySpaceDirective.querySpace.query.values$().pipe(Object(F.a)(1),Object(Ln.b)(this)).subscribe(function(n){e.query=n,e.queryId=n.id}),this.querySpaceDirective.querySpace.query.values$().pipe(Object(nj.a)(2),Object(Ln.b)(this)).subscribe(function(n){e.queryId=n.id,e.ensureFormAndSaveQuery(n)})},n.prototype.ngOnDestroy=function(){},n.prototype.ensureFormAndSaveQuery=function(e){var n=this;this.queryForm?this.saveQuery(e):this.queryFormDm.load(e).then(function(t){n.queryForm=t,n.saveQuery(e)})},n.prototype.renameQuery=function(e,n){e.name=n,this.ensureFormAndSaveQuery(e)},n.prototype.saveQuery=function(e){var n=this;this.inFlight=!0,this.queryDm.update(e,this.queryForm).toPromise().then(function(e){return n.inFlight=!1,e}).catch(function(){return n.inFlight=!1})},n.prototype.createInitial=function(){var e=this;return this.queryFormDm.loadWithParams({pageSize:0},void 0,null,this.buildQueryRequest()).then(function(n){var t=e.queryFormDm.buildQueryResource(n);return t.name=e.text.title,e.queryDm.create(t,n)})},n.prototype.buildQueryRequest=function(){return{hidden:!0}},n}(FP),lj=[DP],ij=l["\u0275crt"]({encapsulation:0,styles:lj,data:{}});function oj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"h3",[["cdkDragHandle",""],["class","widget-box--header cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](2,0,null,null,1,"span",[["cdkDragHandle",""],["class","grid--area-drag-handle\n               icon\n               icon-drag-handle cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](3,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-context icon-view-timeline"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"editable-toolbar-title",[["class","widget-box--header-title title-container"]],null,[[null,"onSave"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.renameQuery(i.query,t)&&l);return l},Cb,bb)),l["\u0275did"](6,638976,null,0,gb,[l.Injector],{inputTitle:[0,"inputTitle"],editable:[1,"editable"],inFlight:[2,"inFlight"]},{onSave:"onSave"})],function(e,n){var t=n.component;e(n,6,0,t.query.name,!!t.query.updateImmediately,t.inFlight)},null)}function rj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](1,4964352,null,0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryId:[1,"queryId"],externalHeight:[2,"externalHeight"]},null)],function(e,n){var t=n.component;e(n,1,0,t.configuration,t.queryId,!0)},null)}function uj(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{querySpaceDirective:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,oj)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,33,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,en,en,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](34,16384,[[1,4]],0,gd,[l.ElementRef,y,l.Injector],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,rj)),l["\u0275did"](36,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.query),e(n,36,0,t.queryId)},null)}var aj=l["\u0275ccf"]("ng-component",tj,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,uj,ij)),l["\u0275did"](1,4440064,null,0,tj,[B.a,Ee,Ae,dn],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).gridColumnStart,l["\u0275nov"](n,1).gridColumnEnd,l["\u0275nov"](n,1).gridRowStart,l["\u0275nov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),sj=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={title:n.i18n.t("js.grid.widgets.work_packages_calendar.title")},n}return r.d(n,e),n}(LC),cj=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function dj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"h3",[["cdkDragHandle",""],["class","widget-box--header cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-context icon-calendar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","widget-box--header-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,33,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,Ze,Ze,[]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](21,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),l["\u0275prd"](512,null,en,en,[s,y]),l["\u0275prd"](512,null,Ce,Ce,[y,ke]),l["\u0275prd"](512,null,qe,qe,[s,y]),l["\u0275prd"](512,null,$e,$e,[s,y]),l["\u0275prd"](512,null,We,We,[s,y]),l["\u0275prd"](512,null,Ue,Ue,[y]),l["\u0275prd"](512,null,M,M,[y]),l["\u0275prd"](512,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](512,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](512,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](512,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](512,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](512,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](512,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),(e()(),l["\u0275eld"](36,0,null,null,1,"wp-calendar",[],null,null,null,iP,tP)),l["\u0275did"](37,245760,null,0,eP,[s,h.G,en,Yn,y,Pn,Ds,Ee,l.ElementRef,B.a,Tn,_i.DomSanitizer],{static:[0,"static"]},null)],function(e,n){e(n,37,0,!0)},function(e,n){e(n,3,0,n.component.text.title)})}var pj=l["\u0275ccf"]("ng-component",sj,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,dj,cj)),l["\u0275did"](1,49152,null,0,sj,[B.a],null,null)],null,function(e,n){e(n,0,0,l["\u0275nov"](n,1).gridColumnStart,l["\u0275nov"](n,1).gridColumnEnd,l["\u0275nov"](n,1).gridRowStart,l["\u0275nov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),hj=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.listUrl=function(){return this.pathHelper.api.v3.time_entries.toString()},n.prototype.oneUrl=function(e){return this.pathHelper.api.v3.time_entries.id(e).toString()},n}(Fe),fj=function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;return o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o.confirmed=!1,o.text={title:o.I18n.t("js.modals.form_submit.title"),text:o.I18n.t("js.modals.form_submit.text"),button_continue:o.I18n.t("js.button_continue"),button_cancel:o.I18n.t("js.button_cancel"),close_popup:o.I18n.t("js.close_popup_title")},o.options=t.options||{},o.closeOnEscape=_.defaultTo(o.options.closeByEscape,!0),o.closeOnOutsideClick=_.defaultTo(o.options.closeByDocument,!0),o.showClose=_.defaultTo(o.options.showClose,!0),o.text=_.defaults(o.options.text,o.text),o}return r.d(n,e),n.prototype.confirmAndClose=function(e){this.confirmed=!0,this.closeMe(e)},n}(Le.a),gj=function(){function e(e,n){this.opModalService=e,this.injector=n}return e.prototype.confirm=function(e){var n=this;return new Promise(function(t,l){n.opModalService.show(fj,n.injector,{options:e}).closingEvent.subscribe(function(e){e.confirmed?t():l()})})},e}(),mj=function(e){function n(n,t,l,i,o){var r=e.call(this,l)||this;return r.timeEntryDm=n,r.timezone=t,r.i18n=l,r.pathHelper=i,r.confirmDialog=o,r.text={title:r.i18n.t("js.grid.widgets.time_entries_current_user.title"),activity:r.i18n.t("js.time_entry.activity"),comment:r.i18n.t("js.time_entry.comment"),hour:r.i18n.t("js.time_entry.hours"),workPackage:r.i18n.t("js.label_work_package"),edit:r.i18n.t("js.button_edit"),delete:r.i18n.t("js.button_delete"),confirmDelete:{text:r.i18n.t("js.text_are_you_sure"),title:r.i18n.t("js.modals.form_submit.title")},noResults:r.i18n.t("js.grid.widgets.time_entries_current_user.no_results")},r.entries=[],r.entriesLoaded=!1,r.rows=[],r}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.timeEntryDm.list({filters:[["spentOn",">t-",["7"]],["user_id","=",["me"]]]}).then(function(n){e.buildEntries(n.elements),e.entriesLoaded=!0})},Object.defineProperty(n.prototype,"total",{get:function(){var e=this,n=this.entries.reduce(function(n,t){return n+e.timezone.toHours(t.hours)},0);return this.i18n.t("js.units.hour",{count:this.formatNumber(n)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anyEntries",{get:function(){return!!this.entries.length},enumerable:!0,configurable:!0}),n.prototype.activityName=function(e){return e.activity.name},n.prototype.projectName=function(e){return e.project.name},n.prototype.workPackageName=function(e){return"#"+e.workPackage.id+": "+e.workPackage.name},n.prototype.workPackageId=function(e){return e.workPackage.id},n.prototype.comment=function(e){return e.comment&&e.comment.raw},n.prototype.hours=function(e){return this.formatNumber(this.timezone.toHours(e.hours))},n.prototype.editPath=function(e){return this.pathHelper.timeEntryEditPath(e.id)},n.prototype.deletePath=function(e){return this.pathHelper.timeEntryPath(e.id)},n.prototype.workPackagePath=function(e){return this.pathHelper.workPackagePath(e.workPackage.idFromLink)},n.prototype.deleteIfConfirmed=function(e,n){var t=this;e.preventDefault(),this.confirmDialog.confirm({text:this.text.confirmDelete,closeByEscape:!0,showClose:!0,closeByDocument:!0}).then(function(){n.delete().then(function(){var e=t.entries.filter(function(e){return n.id!==e.id});t.buildEntries(e)})}).catch(function(){})},n.prototype.buildEntries=function(e){var n=this;this.entries=e;var t={};e.forEach(function(e){var l=e.spentOn;t[l]||(t[l]=0),t[l]=t[l]+n.timezone.toHours(e.hours)});var l=e.sort(function(e,n){return n.spentOn.localeCompare(e.spentOn)});this.rows=[];var i=null;l.forEach(function(e){e.spentOn!==i&&(i=e.spentOn,n.rows.push({date:n.timezone.formattedDate(i),sum:n.formatNumber(t[i])})),n.rows.push({date:i,entry:e})})},n.prototype.formatNumber=function(e){return this.i18n.toNumber(e,{precision:2})},Object.defineProperty(n.prototype,"noEntries",{get:function(){return!this.entries.length&&this.entriesLoaded},enumerable:!0,configurable:!0}),n}(LC),vj=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function bj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,mP,gP)),l["\u0275did"](1,49152,null,0,fP,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).setHostClass)})}function yj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"td",[["class","activity"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.activityName(n.parent.context.$implicit.entry))})}function wj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"td",[["colspan","3"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.date)})}function kj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"td",[["class","subject"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,[" "," - "])),(e()(),l["\u0275eld"](2,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.projectName(n.parent.context.$implicit.entry)),e(n,2,0,t.workPackagePath(n.parent.context.$implicit.entry),t.workPackageName(n.parent.context.$implicit.entry))})}function Cj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"td",[["class","comments"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.comment(n.parent.context.$implicit.entry))})}function Ij(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"td",[["class","hours"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.hours(n.parent.context.$implicit.entry))})}function Pj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"td",[["class","hours"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"em",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.sum)})}function jj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"a",[],[[8,"href",4],[8,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-edit"]],null,null,null,Zt,Gt)),l["\u0275did"](2,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon-context icon-edit")},function(e,n){var t=n.component;e(n,0,0,t.editPath(n.parent.context.$implicit.entry),t.text.edit)})}function _j(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"a",[],[[8,"href",4],[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.deleteIfConfirmed(t,e.parent.context.$implicit.entry)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-delete"]],null,null,null,Zt,Gt)),l["\u0275did"](2,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon-context icon-delete")},function(e,n){var t=n.component;e(n,0,0,t.deletePath(n.parent.context.$implicit.entry),t.text.delete)})}function Rj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,17,"tr",[["class","time-entry"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,yj)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,wj)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,kj)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Cj)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ij)),l["\u0275did"](10,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Pj)),l["\u0275did"](12,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](13,0,null,null,4,"td",[["class","buttons"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,jj)),l["\u0275did"](15,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,_j)),l["\u0275did"](17,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.entry),e(n,4,0,n.context.$implicit.sum),e(n,6,0,n.context.$implicit.entry),e(n,8,0,n.context.$implicit.entry),e(n,10,0,n.context.$implicit.entry),e(n,12,0,n.context.$implicit.sum),e(n,15,0,n.context.$implicit.entry&&n.context.$implicit.entry.updateImmediately),e(n,17,0,n.context.$implicit.entry&&n.context.$implicit.entry.delete)},null)}function Sj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,34,"div",[["class","generic-table--results-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,33,"table",[["class","generic-table time-entries"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,9,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](4,245760,null,0,Rl,[l.ElementRef],null,null),(e()(),l["\u0275eld"](5,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](6,245760,null,0,Rl,[l.ElementRef],null,null),(e()(),l["\u0275eld"](7,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](8,245760,null,0,Rl,[l.ElementRef],null,null),(e()(),l["\u0275eld"](9,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Tl,xl)),l["\u0275did"](10,245760,null,0,Rl,[l.ElementRef],null,null),(e()(),l["\u0275eld"](11,0,null,null,0,"col",[],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,19,"thead",[["class","-sticky"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,18,"tr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](28,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](30,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["\u0275eld"](31,0,null,null,0,"div",[["class","generic-table--empty-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,2,"tbody",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Rj)),l["\u0275did"](34,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0),e(n,6,0),e(n,8,0),e(n,10,0),e(n,34,0,t.rows)},function(e,n){var t=n.component;e(n,17,0,t.text.activity),e(n,21,0,t.text.workPackage),e(n,25,0,t.text.comment),e(n,29,0,t.text.hour)})}function xj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","total-hours"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Total: "])),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Sj)),l["\u0275did"](6,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,6,0,n.component.anyEntries)},function(e,n){e(n,4,0,n.component.total)})}function Tj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"h3",[["cdkDragHandle",""],["class","widget-box--header cdk-drag-handle"]],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,NC.d,[l.ElementRef,[2,NC.l]],null,null),(e()(),l["\u0275eld"](2,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-context icon-time"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","widget-box--header-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,bj)),l["\u0275did"](5,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,xj)),l["\u0275did"](7,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.noEntries),e(n,7,0,!t.noEntries)},function(e,n){e(n,3,0,n.component.text.title)})}var Oj=l["\u0275ccf"]("ng-component",mj,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,Tj,vj)),l["\u0275did"](1,114688,null,0,mj,[hj,qt,B.a,ve,gj],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["\u0275nov"](n,1).gridColumnStart,l["\u0275nov"](n,1).gridColumnEnd,l["\u0275nov"](n,1).gridRowStart,l["\u0275nov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),Ej=function(){function e(e,n,t,l){this.startRow=e,this.endRow=n,this.startColumn=t,this.endColumn=l}return Object.defineProperty(e.prototype,"guid",{get:function(){return this.storedGuid||(this.storedGuid=this.newGuid()),this.storedGuid},enumerable:!0,configurable:!0}),e.prototype.newGuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e}(),Dj=function(e){function n(n){var t=e.call(this,n.startRow,n.endRow,n.startColumn,n.endColumn)||this;return t.widget=n,t}return r.d(n,e),n.prototype.moveRight=function(){this.startColumn++,this.endColumn++},n.prototype.moveLeft=function(){this.startColumn--,this.endColumn--},n.prototype.growColumn=function(){this.endColumn++},n.prototype.overlaps=function(e){return this.rowOverlaps(e)&&this.columnOverlaps(e)},n.prototype.rowOverlaps=function(e){return this.startRow<e.endRow&&this.endRow>=e.endRow||this.startRow<=e.startRow&&this.endRow>e.startRow||this.startRow>e.startRow&&this.endRow<e.endRow},n.prototype.columnOverlaps=function(e){return this.startColumn<e.endColumn&&this.endColumn>=e.endColumn||this.startColumn<=e.startColumn&&this.endColumn>e.startColumn||this.startColumn>e.startColumn&&this.endColumn<e.endColumn},n.prototype.startColumnOverlaps=function(e){return this.startColumn<e.startColumn&&this.endColumn>e.startColumn&&this.rowOverlaps(e)},n.prototype.writeAreaChangeToWidget=function(){this.widget.startRow=this.startRow,this.widget.endRow=this.endRow,this.widget.startColumn=this.startColumn,this.widget.endColumn=this.endColumn},n}(Ej),Fj=function(){function e(e){this.gridDm=e,this.numColumns=0,this.numRows=0,this.widgetResources=[]}return Object.defineProperty(e.prototype,"gridResource",{set:function(e){this.resource=e,this.fetchSchema(),this.numRows=this.resource.rowCount,this.numColumns=this.resource.columnCount,this.widgetResources=this.resource.widgets,this.buildAreas(!1)},enumerable:!0,configurable:!0}),e.prototype.setMousedOverArea=function(e){this.mousedOverArea=e},e.prototype.buildAreas=function(e){void 0===e&&(e=!0),this.gridAreas=this.buildGridAreas(),this.gridAreaIds=this.buildGridAreaIds(),this.widgetAreas=this.buildGridWidgetAreas(),this.resource.widgets=this.widgetResources,this.resource.rowCount=this.numRows,this.resource.columnCount=this.numColumns,e&&this.saveGrid()},e.prototype.saveGrid=function(){this.gridDm.update(this.resource,this.schema)},e.prototype.buildGridAreas=function(){for(var e=[],n=1;n<=this.numRows;n++)e.push.apply(e,this.buildGridAreasRow(n));return e},e.prototype.buildGridAreasColumn=function(e){for(var n=[],t=1;t<=this.numRows;t++){var l=new Ej(t,t+1,e,e+1);n.push(l)}return n},e.prototype.buildGridAreasRow=function(e){for(var n=[],t=1;t<=this.numColumns;t++){var l=new Ej(e,e+1,t,t+1);n.push(l)}return n},e.prototype.buildGridWidgetAreas=function(){return this.widgetResources.map(function(e){return new Dj(e)})},e.prototype.writeAreaChangesToWidgets=function(){this.widgetAreas.forEach(function(e){e.writeAreaChangeToWidget()})},e.prototype.addColumn=function(e){this.numColumns++,this.widgetResources.filter(function(n){return n.startColumn>e}).forEach(function(e){e.startColumn++,e.endColumn++}),this.buildAreas()},e.prototype.addRow=function(e){this.numRows++,this.widgetResources.filter(function(n){return n.startRow>e}).forEach(function(e){e.startRow++,e.endRow++}),this.buildAreas()},e.prototype.removeColumn=function(e){this.numColumns--,this.widgetResources=this.widgetResources.filter(function(n){return!(n.startColumn===e&&n.endColumn===e+1)}),this.widgetResources.forEach(function(n){n.startColumn<=e&&n.endColumn>=e+1&&n.endColumn--}),this.widgetResources.filter(function(n){return n.startColumn>e}).forEach(function(e){e.startColumn--,e.endColumn--}),this.buildAreas()},e.prototype.removeRow=function(e){this.numRows--,this.widgetResources=this.widgetResources.filter(function(n){return!(n.startRow===e&&n.endRow===e+1)}),this.widgetResources.forEach(function(n){n.startRow<=e&&n.endRow>=e+1&&n.endRow--}),this.widgetResources.filter(function(n){return n.startRow>e}).forEach(function(e){e.startRow--,e.endRow--}),this.buildAreas()},e.prototype.resetAreas=function(e){void 0===e&&(e=null),this.widgetAreas.filter(function(n){return!e||n.guid!==e.guid}).forEach(function(e){e.startRow=e.widget.startRow,e.endRow=e.widget.endRow,e.startColumn=e.widget.startColumn,e.endColumn=e.widget.endColumn}),this.numRows=this.resource.rowCount,this.numColumns=this.resource.columnCount},e.prototype.buildGridAreaIds=function(){return this.gridAreas.map(function(e){return e.guid})},e.prototype.fetchSchema=function(){var e=this;this.gridDm.updateForm(this.resource).then(function(n){e.schema=n.schema})},e}(),Aj=function(e){function n(n,t,l,i){var o=e.call(this,n,t)||this;return o.elementRef=n,o.opContextMenu=t,o.I18n=l,o.layout=i,o}return r.d(n,e),n.prototype.open=function(e){this.buildItems(),this.opContextMenu.show(this,e)},Object.defineProperty(n.prototype,"locals",{get:function(){return{items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(e){return{my:"right top",at:"right bottom",of:this.$element,collision:"flipfit"}},n.prototype.buildItems=function(){var e=this.layout,n=this.columnNumber,t=[{linkText:I18n.t("js.label_add_column_before"),onClick:function(){return e.addColumn(n-1),!0}},{linkText:I18n.t("js.label_add_column_after"),onClick:function(){return e.addColumn(n),!0}}];e.numColumns>1&&t.push({linkText:I18n.t("js.label_remove_column"),onClick:function(){return e.removeColumn(n),!0}}),this.items=t},n}(ps),Nj=function(e){function n(n,t,l,i){var o=e.call(this,n,t)||this;return o.elementRef=n,o.opContextMenu=t,o.I18n=l,o.layout=i,o}return r.d(n,e),n.prototype.open=function(e){this.buildItems(),this.opContextMenu.show(this,e)},Object.defineProperty(n.prototype,"locals",{get:function(){return{items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(e){return{my:"left top",at:"right top",of:this.$element,collision:"flipfit"}},n.prototype.buildItems=function(){var e=this.layout,n=this.rowNumber,t=[{linkText:I18n.t("js.label_add_row_before"),onClick:function(){return e.addRow(n-1),!0}},{linkText:I18n.t("js.label_add_row_after"),onClick:function(){return e.addRow(n),!0}}];e.numRows>1&&t.push({linkText:I18n.t("js.label_remove_row"),onClick:function(){return e.removeRow(n),!0}}),this.items=t},n}(ps),Mj=function(){function e(){this.resizing=!1,this.end=new l.EventEmitter,this.start=new l.EventEmitter,this.move=new l.EventEmitter,this.customHandler=!1,this.cursorClass="nwse-resize"}return e.prototype.ngOnDestroy=function(){this.removeEventListener()},e.prototype.startResize=function(e){e.preventDefault(),e.stopPropagation(),1!==e.buttons&&1!==e.which||(this.oldX=e.clientX,this.oldY=e.clientY,this.newX=e.clientX,this.newY=e.clientY,this.resizing=!0,this.setResizeCursor(),this.bindEventListener(e)),this.start.emit()},e.prototype.onMouseUp=function(e,n){this.setAutoCursor(),this.removeEventListener();var t={x:this.newX-this.oldX,y:this.newY-this.oldY};this.end.emit(t)},e.prototype.onMouseMove=function(e,n){n.preventDefault(),n.stopPropagation(),this.newX=n.clientX,this.newY=n.clientY;var t={x:this.newX-this.oldX,y:this.newY-this.oldY};this.move.emit(t)},e.prototype.bindEventListener=function(e){this.mouseMoveHandler=this.onMouseMove.bind(this,e.currentTarget),this.mouseUpHandler=this.onMouseUp.bind(this,e.currentTarget),window.addEventListener("mousemove",this.mouseMoveHandler),window.addEventListener("mouseup",this.mouseUpHandler)},e.prototype.removeEventListener=function(){window.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler)},e.prototype.setResizeCursor=function(){this.setCursor(this.cursorClass+" !important")},e.prototype.setAutoCursor=function(){this.setCursor("auto")},e.prototype.setCursor=function(e){document.getElementsByTagName("body")[0].setAttribute("style","cursor: "+e)},e}(),Vj=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function qj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","resizer"]],null,null,null,null,null))],null,null)}function Lj(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,qj)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275ncd"](null,0)],function(e,n){e(n,1,0,!n.component.customHandler)},null)}l["\u0275ccf"]("resizer",Mj,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"resizer",[],null,[[null,"mousedown"]],function(e,n,t){var i=!0;return"mousedown"===n&&(i=!1!==l["\u0275nov"](e,1).startResize(t)&&i),i},Lj,Vj)),l["\u0275did"](1,180224,null,0,Mj,[],null,null)],null,null)},{customHandler:"customHandler",cursorClass:"cursorClass"},{end:"end",start:"start",move:"move"},["*"]);var $j=function(){function e(e){this.layout=e}return e.prototype.down=function(e,n){var t=[],l=this.layout.widgetAreas.slice(0);for(n&&(l=l.filter(function(e){return e.guid!==n.guid})),l.sort(function(e,n){return n.startRow-e.startRow});null!==e;)t.push(e),l=l.filter(function(n){return n.guid!==e.guid}),e=this.moveOneDown(t,l)},e.prototype.moveOneDown=function(e,n){var t=this.firstAreaToMove(e,n);if(t){var l=t[0],i=t[1],o=l.widget.height;return l.startRow=i.endRow,l.endRow=l.startRow+o,this.layout.numRows<l.endRow-1&&(this.layout.numRows=l.endRow-1),l}return null},e.prototype.firstAreaToMove=function(e,n){var t=null,l=null;if(n.forEach(function(n){e.forEach(function(e){if(e.overlaps(n))return t=e,void(l=n)})}),null!==l){var i=t;return e.forEach(function(e){e.endRow>i.endRow&&l.startColumn>=e.startColumn&&l.startColumn<e.endColumn&&(i=e)}),[l,i]}return null},e}(),Hj=function(){function e(e,n){this.layout=e,this.move=n}return e.prototype.entered=function(e){if(this.draggedArea){var n=e.container.data;this.layout.resetAreas(this.draggedArea),this.moveAreasOnDragging(n)}},e.prototype.moveAreasOnDragging=function(e){if(this.placeholderArea){var n=this.draggedArea;this.placeholderArea.startRow=e.startRow,this.placeholderArea.startRow+this.placeholderArea.widget.height>this.layout.numRows+1?this.placeholderArea.endRow=this.layout.numRows+1:this.placeholderArea.endRow=e.startRow+this.placeholderArea.widget.height,this.placeholderArea.startColumn=e.startColumn,this.placeholderArea.startColumn+this.placeholderArea.widget.width>this.layout.numColumns+1?this.placeholderArea.endColumn=this.layout.numColumns+1:this.placeholderArea.endColumn=e.startColumn+this.placeholderArea.widget.width,this.move.down(this.placeholderArea,n)}},Object.defineProperty(e.prototype,"currentlyDragging",{get:function(){return!!this.draggedArea},enumerable:!0,configurable:!0}),e.prototype.isDragged=function(e){return this.currentlyDragging&&this.draggedArea.guid===e.guid},e.prototype.start=function(e){this.draggedArea=e,this.placeholderArea=new Dj(e.widget)},e.prototype.stop=function(e,n){this.draggedArea&&(this.draggedArea=null,this.placeholderArea=null)},e.prototype.drop=function(e){var n=e.container.data,t=e.previousContainer.data;t.startRow=n.startRow,n.startRow+t.widget.height>this.layout.numRows+1?t.endRow=this.layout.numRows+1:t.endRow=n.startRow+t.widget.height,t.startColumn=n.startColumn,n.startColumn+t.widget.width>this.layout.numColumns+1?t.endColumn=this.layout.numColumns+1:t.endColumn=n.startColumn+t.widget.width,this.layout.writeAreaChangesToWidgets(),this.layout.buildAreas()},e}(),Bj=function(){function e(e,n){this.layout=e,this.move=n}return e.prototype.end=function(e,n){this.placeholderArea&&this.resizedArea&&(this.resizedArea.endRow=this.placeholderArea.endRow,this.resizedArea.endColumn=this.placeholderArea.endColumn,this.layout.writeAreaChangesToWidgets(),this.layout.buildAreas(),this.resizedArea=null,this.placeholderArea=null)},e.prototype.start=function(e){var n=this;this.placeholderArea=new Dj(e.widget),this.resizedArea=e;var t=this.layout.gridAreas.filter(function(e){return e.startRow>=n.placeholderArea.startRow&&e.startColumn>=n.placeholderArea.startColumn});this.targetIds=t.map(function(e){return e.guid})},e.prototype.moving=function(e){this.placeholderArea&&this.resizedArea&&this.layout.mousedOverArea&&this.targetIds.includes(this.layout.mousedOverArea.guid)&&(this.layout.resetAreas(),this.placeholderArea.endRow=this.layout.mousedOverArea.endRow,this.placeholderArea.endColumn=this.layout.mousedOverArea.endColumn,this.move.down(this.placeholderArea,this.resizedArea))},e.prototype.isTarget=function(e){var n=e.guid;return this.placeholderArea&&this.targetIds.includes(n)},Object.defineProperty(e.prototype,"currentlyResizing",{get:function(){return this.placeholderArea},enumerable:!0,configurable:!0}),e}(),zj=function(){function e(e){this.Hook=e}return Object.defineProperty(e.prototype,"registered",{get:function(){var e=[];return _.each(this.Hook.call("gridWidgets"),function(n){e=e.concat(n)}),e},enumerable:!0,configurable:!0}),e}(),Wj=function(e){function n(n,t,l,i,o){var r=e.call(this,t,l,n)||this;return r.elementRef=n,r.locals=t,r.cdRef=l,r.widgetsService=i,r.i18n=o,r.text={title:r.i18n.t("js.grid.add_modal.choose_widget"),close_popup:r.i18n.t("js.button_close")},r}return r.d(n,e),Object.defineProperty(n.prototype,"selectable",{get:function(){var e=this;return this.eligibleWidgets.map(function(n){return{identifier:n.identifier,title:e.i18n.t("js.grid.widgets."+n.identifier+".title"),component:n.component}}).sort(function(e,n){return e.title.localeCompare(n.title)})},enumerable:!0,configurable:!0}),n.prototype.select=function(e,n){this.chosenWidget=n,this.closeMe(e)},n.prototype.trackWidgetBy=function(e){return e.identifier},Object.defineProperty(n.prototype,"eligibleWidgets",{get:function(){var e=this.locals.schema.widgets.allowedValues.map(function(e){return e.identifier});return this.widgetsService.registered.filter(function(n){return e.includes(n.identifier)})},enumerable:!0,configurable:!0}),n}(Le.a),Qj=function(){function e(e,n,t,l,i,o){this.opModalService=e,this.injector=n,this.halResource=t,this.layout=l,this.drag=i,this.resize=o}return e.prototype.isAddable=function(e){return!this.drag.currentlyDragging&&!this.resize.currentlyResizing&&this.layout.mousedOverArea===e&&this.layout.gridAreaIds.includes(e.guid)},e.prototype.widget=function(e,n){var t=this;this.select(e,n).then(function(e){var n=new Dj(e);n.endColumn=n.endColumn+1,n.endRow=n.endRow+2;var l=t.layout.numRows+1,i=t.layout.numColumns+1;t.layout.widgetAreas.forEach(function(e){n.startColumnOverlaps(e)&&i>e.startColumn&&(i=e.startColumn)}),i<n.endColumn&&(n.endColumn=i),t.layout.widgetAreas.forEach(function(e){n.overlaps(e)&&l>e.startRow&&(l=e.startRow)}),l<n.endRow&&(n.endRow=l),n.writeAreaChangeToWidget(),t.layout.widgetResources.push(n.widget),t.layout.buildAreas()}).catch(function(){})},e.prototype.select=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(Wj,t.injector,{schema:n}).closingEvent.subscribe(function(n){var o=n.chosenWidget;if(o){var r={_type:"GridWidget",identifier:o.identifier,startRow:e.startRow,endRow:e.endRow,startColumn:e.startColumn,endColumn:e.endColumn,options:{}},u=t.halResource.createHalResource(r);l(u)}else i()})})},e}(),Uj=function(){function e(e){this.layout=e}return e.prototype.widget=function(e){var n=e.widget;this.layout.widgetResources=this.layout.widgetResources.filter(function(e){return e.identifier!==n.identifier||e.startColumn!==n.startColumn||e.endColumn!==n.endColumn||e.startRow!==n.startRow||e.endRow!==n.endRow}),this.layout.buildAreas()},e}(),Kj=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.$initialize=function(n){var t=this;e.prototype.$initialize.call(this,n),this.widgets=this.widgets.map(function(e){return new pC(t.injector,e,!0,t.halInitializer,"GridWidget")})},n}(z),Gj=function(){function e(e,n,t,l,i,o,r){this.sanitization=e,this.widgetsService=n,this.drag=t,this.resize=l,this.layout=i,this.add=o,this.remove=r,this.uiWidgets=[],this.GRID_AREA_HEIGHT=100}return e.prototype.ngOnInit=function(){this.layout.gridResource=this.grid},e.prototype.ngOnDestroy=function(){this.uiWidgets.forEach(function(e){return e.destroy()})},e.prototype.widgetComponent=function(e){if(!e)return null;var n=this.widgetsService.registered.find(function(n){return n.identifier===e.identifier});return n?n.component:(Object(mn.a)("No widget registered with identifier "+e.identifier),null)},e.prototype.widgetComponentOutput=function(e){return{resourceChanged:this.layout.saveGrid.bind(this.layout)}},Object.defineProperty(e.prototype,"gridColumnStyle",{get:function(){return this.sanitization.bypassSecurityTrustStyle("repeat("+this.layout.numColumns+", 1fr)")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnNumbers",{get:function(){return Array.from(Array(this.layout.numColumns+1).keys()).slice(1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridRowStyle",{get:function(){return this.sanitization.bypassSecurityTrustStyle("repeat("+this.layout.numRows+", "+this.GRID_AREA_HEIGHT+"px)")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowNumbers",{get:function(){return Array.from(Array(this.layout.numRows+1).keys()).slice(1)},enumerable:!0,configurable:!0}),e.prototype.identifyGridArea=function(e,n){return n.guid},e}(),Yj=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Zj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","grid--header"],["gridColumnContextMenu",""]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null]],null,null,null,null)),l["\u0275did"](1,4210688,null,0,Aj,[l.ElementRef,Qa,B.a,Fj],{columnNumber:[0,"columnNumber"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},function(e,n){e(n,0,0,1,1,n.context.$implicit,n.context.$implicit+1)})}function Jj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","grid--header"],["gridRowContextMenu",""]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null]],null,null,null,null)),l["\u0275did"](1,4210688,null,0,Nj,[l.ElementRef,Qa,B.a,Fj],{rowNumber:[0,"rowNumber"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit,n.context.$implicit+1,1,2)})}function Xj(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function e_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"resizer",[],null,[[null,"end"],[null,"start"],[null,"move"],[null,"mousedown"]],function(e,n,t){var i=!0,o=e.component;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,1).startResize(t)&&i);"end"===n&&(i=!1!==o.resize.end(e.parent.context.$implicit,t)&&i);"start"===n&&(i=!1!==o.resize.start(e.parent.context.$implicit)&&i);"move"===n&&(i=!1!==o.resize.moving(t)&&i);return i},Lj,Vj)),l["\u0275did"](1,180224,null,0,Mj,[],null,{end:"end",start:"start",move:"move"})],null,null)}function n_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,22,"div",[["cdkDropList",""],["class","grid--area -widgeted cdk-drop-list"]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null],[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],null,null,null,null)),l["\u0275did"](1,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-dragged":0}),l["\u0275did"](3,1196032,null,1,NC.f,[l.ElementRef,NC.j,l.ChangeDetectorRef,[2,VC.b],[3,NC.g],[2,It.DOCUMENT],NC.h],{connectedTo:[0,"connectedTo"],data:[1,"data"],id:[2,"id"]},null),l["\u0275qud"](603979776,1,{_draggables:1}),l["\u0275prd"](256,null,NC.g,void 0,[]),l["\u0275prd"](2048,null,NC.b,null,[NC.f]),(e()(),l["\u0275eld"](7,16777216,null,null,13,"div",[["cdkDrag",""],["class","grid--area-content widget-box cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],[[null,"cdkDragStarted"],[null,"cdkDragEnded"]],function(e,n,t){var l=!0,i=e.component;"cdkDragStarted"===n&&(l=!1!==i.drag.start(e.context.$implicit)&&l);"cdkDragEnded"===n&&(l=!1!==i.drag.stop(e.context.$implicit,t)&&l);return l},null,null)),l["\u0275prd"](6144,null,NC.l,null,[NC.c]),l["\u0275did"](9,4866048,[[1,4]],3,NC.c,[l.ElementRef,[3,NC.b],It.DOCUMENT,l.NgZone,l.ViewContainerRef,MC.a,NC.j,NC.a,[2,VC.b],NC.h,l.ChangeDetectorRef],null,{started:"cdkDragStarted",ended:"cdkDragEnded"}),l["\u0275qud"](603979776,2,{_handles:1}),l["\u0275qud"](335544320,3,{_previewTemplate:0}),l["\u0275qud"](335544320,4,{_placeholderTemplate:0}),(e()(),l["\u0275and"](0,null,null,1,null,Xj)),l["\u0275did"](14,16384,[[4,4]],0,NC.e,[l.TemplateRef],null,null),(e()(),l["\u0275eld"](15,0,null,null,0,"div",[["class","grid--widget-remove"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.remove.widget(e.context.$implicit)&&l);return l},null,null)),(e()(),l["\u0275eld"](16,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](17,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](19,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"],ndcDynamicOutputs:[1,"ndcDynamicOutputs"]},null),l["\u0275pod"](20,{resource:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,e_)),l["\u0275did"](22,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,t.drag.isDragged(n.context.$implicit));e(n,1,0,"grid--area -widgeted",l),e(n,3,0,t.layout.gridAreaIds,n.context.$implicit,n.context.$implicit.guid),e(n,17,0,t.widgetComponent(n.context.$implicit.widget));var i=e(n,20,0,n.context.$implicit.widget);e(n,19,0,i,t.widgetComponentOutput(n.context.$implicit.widget)),e(n,22,0,!t.drag.currentlyDragging)},function(e,n){e(n,0,0,n.context.$implicit.startRow,n.context.$implicit.endRow,n.context.$implicit.startColumn,n.context.$implicit.endColumn,l["\u0275nov"](n,3).id,l["\u0275nov"](n,3).disabled,l["\u0275nov"](n,3)._dropListRef.isDragging(),l["\u0275nov"](n,3)._dropListRef.isReceiving()),e(n,7,0,l["\u0275nov"](n,9).disabled,l["\u0275nov"](n,9)._dragRef.isDragging())})}function t_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","grid--widget-add"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.add.widget(e.parent.context.$implicit,i.layout.schema)&&l);return l},null,null))],null,null)}function l_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["cdkDropList",""],["class","grid--area cdk-drop-list"]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null],[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"mouseover"],[null,"cdkDropListDropped"],[null,"cdkDropListEntered"]],function(e,n,t){var l=!0,i=e.component;"mouseover"===n&&(l=!1!==i.layout.setMousedOverArea(e.context.$implicit)&&l);"cdkDropListDropped"===n&&(l=!1!==i.drag.drop(t)&&l);"cdkDropListEntered"===n&&(l=!1!==i.drag.entered(t)&&l);return l},null,null)),l["\u0275prd"](6144,null,NC.b,null,[NC.f]),l["\u0275did"](2,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"-drop-target":0,"-resize-target":1,"-addable":2}),l["\u0275did"](4,1196032,null,1,NC.f,[l.ElementRef,NC.j,l.ChangeDetectorRef,[2,VC.b],[3,NC.g],[2,It.DOCUMENT],NC.h],{connectedTo:[0,"connectedTo"],data:[1,"data"],id:[2,"id"]},{dropped:"cdkDropListDropped",entered:"cdkDropListEntered"}),l["\u0275qud"](603979776,5,{_draggables:1}),l["\u0275prd"](256,null,NC.g,void 0,[]),(e()(),l["\u0275and"](16777216,null,null,1,null,t_)),l["\u0275did"](8,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,t.drag.currentlyDragging,t.resize.isTarget(n.context.$implicit),t.add.isAddable(n.context.$implicit));e(n,2,0,"grid--area",l),e(n,4,0,t.layout.gridAreaIds,n.context.$implicit,n.context.$implicit.guid),e(n,8,0,t.add.isAddable(n.context.$implicit))},function(e,n){e(n,0,0,n.context.$implicit.startRow,n.context.$implicit.endRow,n.context.$implicit.startColumn,n.context.$implicit.endColumn,l["\u0275nov"](n,4).id,l["\u0275nov"](n,4).disabled,l["\u0275nov"](n,4)._dropListRef.isDragging(),l["\u0275nov"](n,4)._dropListRef.isReceiving())})}function i_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","grid--area -resizing"]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.resize.placeholderArea.startRow,t.resize.placeholderArea.endRow,t.resize.placeholderArea.startColumn,t.resize.placeholderArea.endColumn)})}function o_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","grid--area -widgeted -placeholder"]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","widget-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cu.b,Cu.a)),l["\u0275did"](3,573440,null,0,tr.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["\u0275prd"](131584,null,tr.f,tr.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](5,802816,null,0,tr.b,[l.Injector,tr.f,tr.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"],ndcDynamicOutputs:[1,"ndcDynamicOutputs"]},null),l["\u0275pod"](6,{resource:0})],function(e,n){var t=n.component;e(n,3,0,t.widgetComponent(t.drag.placeholderArea.widget));var i=e(n,6,0,t.drag.placeholderArea.widget);e(n,5,0,i,l["\u0275EMPTY_MAP"])},function(e,n){var t=n.component;e(n,0,0,t.drag.placeholderArea.startRow,t.drag.placeholderArea.endRow,t.drag.placeholderArea.startColumn,t.drag.placeholderArea.endColumn)})}function r_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","grid--column-headers"]],[[4,"grid-template-columns",null]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Zj)),l["\u0275did"](2,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](3,0,null,null,2,"div",[["class","grid--row-headers"]],[[4,"grid-template-rows",null]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Jj)),l["\u0275did"](5,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](6,0,null,null,8,"div",[["class","grid--container"]],[[4,"grid-template-columns",null],[4,"grid-template-rows",null]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,n_)),l["\u0275did"](8,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,l_)),l["\u0275did"](10,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,i_)),l["\u0275did"](12,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,o_)),l["\u0275did"](14,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.columnNumbers),e(n,5,0,t.rowNumbers),e(n,8,0,t.layout.widgetAreas,t.identifyGridArea),e(n,10,0,t.layout.gridAreas,t.identifyGridArea),e(n,12,0,t.resize.placeholderArea),e(n,14,0,t.drag.placeholderArea)},function(e,n){var t=n.component;e(n,0,0,t.gridColumnStyle),e(n,3,0,t.gridRowStyle),e(n,6,0,t.gridColumnStyle,t.gridRowStyle)})}l["\u0275ccf"]("grid",Gj,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"grid",[],null,null,null,r_,Yj)),l["\u0275prd"](512,null,Fj,Fj,[iC]),l["\u0275prd"](512,null,$j,$j,[Fj]),l["\u0275prd"](512,null,Hj,Hj,[Fj,$j]),l["\u0275prd"](512,null,Bj,Bj,[Fj,$j]),l["\u0275prd"](512,null,Qj,Qj,[Mn.b,l.Injector,Y,Fj,Hj,Bj]),l["\u0275prd"](512,null,Uj,Uj,[Fj]),l["\u0275did"](7,245760,null,0,Gj,[_i.DomSanitizer,zj,Hj,Bj,Fj,Qj,Uj],null,null)],function(e,n){e(n,7,0)},null)},{grid:"grid"},{},[]);var u_=function(){function e(e,n,t,l,i){this.gridDm=e,this.pathHelper=n,this.halResourceService=t,this.i18n=l,this.title=i,this.text={title:this.i18n.t("js.label_my_page"),html_title:this.i18n.t("js.label_my_page")}}return e.prototype.ngOnInit=function(){var e=this;this.loadMyPage().then(function(n){e.grid=n}),this.setHtmlTitle()},e.prototype.loadMyPage=function(){var e=this;return this.gridDm.list({filters:[["scope","=",[this.pathHelper.myPagePath()]]]}).then(function(n){return 0===n.total?e.myPageForm():n.elements[0]})},e.prototype.myPageForm=function(){var e=this;return new Promise(function(n,t){var l={_links:{scope:{href:e.pathHelper.myPagePath()}}};e.gridDm.createForm(l).then(function(l){var i=l.payload.$source,o=e.halResourceService.createHalResource(i);e.gridDm.create(o,l.schema).then(function(e){n(e)}).catch(function(){t()})})})},e.prototype.setHtmlTitle=function(){this.title.setTitle(this.text.html_title)},e}(),a_=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function s_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"grid",[],null,null,null,r_,Yj)),l["\u0275prd"](512,null,Fj,Fj,[iC]),l["\u0275prd"](512,null,$j,$j,[Fj]),l["\u0275prd"](512,null,Hj,Hj,[Fj,$j]),l["\u0275prd"](512,null,Bj,Bj,[Fj,$j]),l["\u0275prd"](512,null,Qj,Qj,[Mn.b,l.Injector,Y,Fj,Hj,Bj]),l["\u0275prd"](512,null,Uj,Uj,[Fj]),l["\u0275did"](7,245760,null,0,Gj,[_i.DomSanitizer,zj,Hj,Bj,Fj,Qj,Uj],{grid:[0,"grid"]},null)],function(e,n){e(n,7,0,n.component.grid)},null)}function c_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"h2",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,s_)),l["\u0275did"](2,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.grid)},function(e,n){e(n,0,0,n.component.text.title)})}var d_=l["\u0275ccf"]("ng-component",u_,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,c_,a_)),l["\u0275did"](1,114688,null,0,u_,[iC,ve,Y,B.a,_i.Title],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),p_=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function h_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","grid--addable-widget"]],[[8,"id",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.select(t,e.context.$implicit)&&l);return l},null,null))],null,function(e,n){e(n,0,0,n.context.$implicit.identifier,n.context.$implicit.title)})}function f_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","op-modal--portal ngdialog-theme-openproject grid--add-modal"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","op-modal--modal-container confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,h_)),l["\u0275did"](8,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,8,0,t.selectable,t.trackWidgetBy)},function(e,n){var t=n.component;e(n,4,0,t.text.close_popup),e(n,5,0,t.text.title)})}var g_=l["\u0275ccf"]("ng-component",Wj,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,f_,p_)),l["\u0275did"](1,245760,null,0,Wj,[l.ElementRef,Mn.a,l.ChangeDetectorRef,zj,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),m_=function(){function e(e,n,t,l){this.I18n=e,this.injector=n,this.PathHelper=t,this.currentProjectService=l,this._searchTerm=new mt.a(""),this.searchTerm$=this._searchTerm.asObservable(),this._currentTab=new mt.a("work_packages"),this.currentTab$=this._currentTab.asObservable(),this._projectScope=new mt.a(""),this.projectScope$=this._projectScope.asObservable(),this._tabs=new mt.a([]),this.tabs$=this._tabs.asObservable(),this._resultsHidden=new mt.a(!1),this.resultsHidden$=this._resultsHidden.asObservable(),this.initialize()}return e.prototype.initialize=function(){var e=this.loadGonData();e&&(e.available_search_types&&this._tabs.next(e.available_search_types),e.search_term&&this._searchTerm.next(e.search_term),e.current_tab&&this._currentTab.next(e.current_tab),e.project_scope?this._projectScope.next(e.project_scope):this.currentProjectService.path||this._projectScope.next("all"))},e.prototype.loadGonData=function(){try{return window.gon.global_search}catch(e){return null}},e.prototype.submitSearch=function(){window.location.href=this.searchPath()},e.prototype.searchPath=function(){var e=this.PathHelper.staticBase;return this.currentProjectService.path&&"all"!==this.projectScope&&(e=this.currentProjectService.path),e=e+"/search?"+this.searchQueryParams()},Object.defineProperty(e.prototype,"searchTerm",{get:function(){return this._searchTerm.value},set:function(e){this._searchTerm.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabs",{get:function(){return this._tabs.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTab",{get:function(){return this._currentTab.value},set:function(e){this._currentTab.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectScope",{get:function(){return this._projectScope.value},set:function(e){this._projectScope.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsHidden",{get:function(){return this._resultsHidden.value},set:function(e){this._resultsHidden.next(e)},enumerable:!0,configurable:!0}),e.prototype.searchQueryParams=function(){var e;return e="q="+encodeURIComponent(this.searchTerm),this.currentTab.length>0&&"all"!==this.currentTab&&(e=e+"&"+this.currentTab+"=1"),this.projectScope.length>0&&(e=e+"&scope="+this.projectScope),e},e.prototype.isAfterSearch=function(){return jQuery("body.controller-search").length>0},e}(),v_=function(){function e(e,n,t,l,i,o,r,u,s){this.elementRef=e,this.I18n=n,this.PathHelperService=t,this.halResourceService=l,this.dynamicCssService=i,this.globalSearchService=o,this.currentProjectService=r,this.deviceService=u,this.cdRef=s,this.currentValue="",this.expanded=!1,this.noResults=!0,this.searchTermChanged$=new a.a,this.isFirstFocus=!0,this.text={all_projects:this.I18n.t("js.global_search.all_projects"),current_project:this.I18n.t("js.global_search.current_project"),current_project_and_all_descendants:this.I18n.t("js.global_search.current_project_and_all_descendants"),search:this.I18n.t("js.global_search.search"),search_dots:this.I18n.t("js.global_search.search")+" ...",close_search:this.I18n.t("js.global_search.close_search")},this.projectScopeTypes=["all_projects","current_project","current_project_and_all_descendants"]}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.ngSelectComponent.filterValue=this.currentValue=this.globalSearchService.searchTerm,this.expanded=this.ngSelectComponent.filterValue.length>0,jQuery("#top-menu").toggleClass("-global-search-expanded",this.expanded),this.searchTermChanged$.pipe(Object(Zu.a)(),Object(Yu.a)(250),Object(Ln.b)(this)).subscribe(function(n){e.currentValue.trim().length>0&&e.getSearchResult(e.currentValue),e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){this.unregister()},e.prototype.handleClick=function(e){e.stopPropagation(),e.preventDefault(),cb.insideOrSelf(this.btn.nativeElement,e.target)&&(this.deviceService.isMobile?(this.toggleMobileSearch(),jQuery(".ng-input input").focus()):0===this.ngSelectComponent.filterValue.length?this.ngSelectComponent.focus():this.submitNonEmptySearch())},e.prototype.toggleMobileSearch=function(){this.expanded=!this.expanded,jQuery("#top-menu").toggleClass("-global-search-expanded",this.expanded)},e.prototype.onChange=function(e){var n=e;n.id?window.location.href=this.wpPath(n.id):(this.globalSearchService.searchTerm=this.currentValue,this.searchInScope(n.projectScope))},e.prototype.redirectToWp=function(e,n){return n.stopImmediatePropagation(),!!us.isClickedWithModifier(n)||(window.location.href=this.wpPath(e),n.preventDefault(),!1)},e.prototype.wpPath=function(e){return this.PathHelperService.workPackagePath(e)},e.prototype.search=function(e){this.currentValue=this.ngSelectComponent.filterValue,this.openCloseMenu(e)},e.prototype.openCloseMenu=function(e){this.ngSelectComponent.isOpen=e.trim().length>0},e.prototype.onFocus=function(){this.expanded=!0,jQuery("#top-menu").addClass("-global-search-expanded"),this.isFirstFocus&&(this.currentValue||"").length>0&&(this.isFirstFocus=!1,this.getSearchResult(this.ngSelectComponent.filterValue)),this.openCloseMenu(this.currentValue)},e.prototype.onFocusOut=function(){this.deviceService.isMobile||(this.expanded=this.ngSelectComponent.filterValue.length>0,this.ngSelectComponent.isOpen=!1,jQuery("#top-menu").toggleClass("-global-search-expanded",this.expanded))},e.prototype.clearSearch=function(){this.currentValue=this.ngSelectComponent.filterValue="",this.openCloseMenu(this.currentValue)},e.prototype.onEnterBeforeResultsLoaded=function(){this.noResults&&this.searchInScope(this.currentScope)},e.prototype.statusHighlighting=function(e){return Ol.inlineClass("status",e)},e.prototype.getSearchResult=function(e){var n=this;this.autocompleteWorkPackages(e).then(function(e){n.results=n.suggestions.concat(e.map(function(e){return{id:e.id,subject:e.subject,status:e.status.name,statusId:e.status.idFromLink,$href:e.$href}}))})},e.prototype.customSearchFn=function(e,n){return void 0===n.id||-1!==n.subject.toLowerCase().indexOf(e.toLowerCase())},e.prototype.autocompleteWorkPackages=function(e){var n=this;this.dynamicCssService.requireHighlighting(),this.$element.find(".ui-autocomplete--loading").show(),this.noResults=!0;var t=!1;e.match(/^#\d+$/)&&(e=e.replace(/^#/,""),t=!0);var l=this.PathHelperService.api.v3.wpBySubjectOrId(e,t);return this.addSuggestions(),this.halResourceService.get(l).toPromise().then(function(e){return n.hideSpinner(),e.elements}).catch(function(){return n.hideSpinner(),[]})},e.prototype.addSuggestions=function(){var e=this;this.suggestions=[],this.currentProjectService.path&&(this.suggestions.push("current_project_and_all_descendants"),this.suggestions.push("current_project")),"current_project"===this.globalSearchService.projectScope&&this.suggestions.reverse(),this.suggestions.push("all_projects"),this.suggestions=this.suggestions.map(function(n){return{projectScope:n,text:e.text[n]}})},e.prototype.searchInScope=function(e){switch(e){case"all_projects":var n=!1;"all"!==this.globalSearchService.projectScope&&(n=!0,this.globalSearchService.resultsHidden=!0),this.globalSearchService.projectScope="all",this.submitNonEmptySearch(n);break;case"current_project":this.globalSearchService.projectScope="current_project",this.submitNonEmptySearch();break;case"current_project_and_all_descendants":this.globalSearchService.projectScope="",this.submitNonEmptySearch()}},e.prototype.submitNonEmptySearch=function(e){if(void 0===e&&(e=!1),this.globalSearchService.searchTerm=this.currentValue,this.currentValue.length>0){if(this.ngSelectComponent.close(),!e&&this.globalSearchService.isAfterSearch()&&"work_packages"===this.globalSearchService.currentTab)return void window.history.replaceState({},I18n.t("global_search.search")+": "+this.ngSelectComponent.filterValue,this.globalSearchService.searchPath());this.globalSearchService.submitSearch()}},e.prototype.blur=function(){this.ngSelectComponent.filterValue="",document.activeElement.blur()},e.prototype.hideSpinner=function(){this.$element.find(".ui-autocomplete--loading").hide(),this.noResults=!1},Object.defineProperty(e.prototype,"currentScope",{get:function(){var e=this.globalSearchService.projectScope;return""===e?"current_project_and_all_descendants":e},enumerable:!0,configurable:!0}),e.prototype.unregister=function(){this.unregisterGlobalListener&&(this.unregisterGlobalListener(),this.unregisterGlobalListener=void 0)},e}();gt.DynamicBootstrapper.register({selector:"global-search-input",cls:v_});var b_=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function y_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","top-menu-search--back-button"],["href","#"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleMobileSearch()&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-arrow-left1"]],null,null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.text.close_search,""))})}function w_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","global-search--option"],["tabindex","-1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","global-search--option-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"span",[["class","global-search--search-term"]],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,[" "," "])),(e()(),l["\u0275eld"](5,0,null,null,1,"span",[["class","global-search--project-scope"]],[[8,"title",0]],null,null,null,null)),(e()(),l["\u0275ted"](6,null,[" "," \u21b5 "]))],null,function(e,n){e(n,4,0,n.component.currentValue),e(n,5,0,l["\u0275inlineInterpolate"](1,"",n.parent.context.item.projectScope,"")),e(n,6,0,n.parent.context.item.text)})}function k_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","global-search--option"],["tabindex","-1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"a",[["class","global-search--option-wrapper"]],[[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.redirectToWp(e.parent.context.item.id,t)&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"span",[["class","global-search--wp-id"]],[[8,"title",0]],null,null,null,null)),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275did"](4,4734976,null,0,jt.n,[l.ElementRef,l.Renderer2],{term:[0,"term"]},null),(e()(),l["\u0275ted"](5,null,[" #"," "])),(e()(),l["\u0275eld"](6,0,null,null,2,"span",[["class","global-search--wp-subject"]],null,null,null,null,null)),l["\u0275did"](7,4734976,null,0,jt.n,[l.ElementRef,l.Renderer2],{term:[0,"term"]},null),(e()(),l["\u0275ted"](8,null,[" "," "]))],function(e,n){var t=n.component;e(n,3,0,"global-search--wp-id",t.statusHighlighting(n.parent.context.item.statusId)),e(n,4,0,t.currentValue),e(n,7,0,t.currentValue)},function(e,n){e(n,1,0,n.component.wpPath(n.parent.context.item.id)),e(n,2,0,l["\u0275inlineInterpolate"](1,"",n.parent.context.item.status,"")),e(n,5,0,n.parent.context.item.id),e(n,8,0,n.parent.context.item.subject)})}function C_(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,w_)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["\u0275and"](0,[["workPackageItemTemplate",2]],null,0,null,k_))],function(e,n){e(n,1,0,!n.context.item.id,l["\u0275nov"](n,2))},null)}function I_(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{btn:0}),l["\u0275qud"](402653184,2,{ngSelectComponent:0}),(e()(),l["\u0275eld"](2,0,null,null,31,"div",[["class","top-menu-search"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,6,"div",[["class","top-menu-search--loading ui-autocomplete--loading"],["style","display: none"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"div",[["class","loading-indicator -small"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"div",[["class","block-1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"div",[["class","block-2"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"div",[["class","block-3"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,0,"div",[["class","block-4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"div",[["class","block-5"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,y_)),l["\u0275did"](11,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](12,0,null,null,17,"ng-select",[["accesskey","4"],["class","ng-select"],["id","global-search-input"],["name","global-search-input"],["role","listbox"]],[[2,"-expanded",null],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null]],[[null,"focus"],[null,"search"],[null,"open"],[null,"close"],[null,"change"],[null,"keydown.enter"],[null,"keydown.escape"],[null,"clear"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"keydown"===n&&(i=!1!==l["\u0275nov"](e,15).handleKeyDown(t)&&i);"focus"===n&&(i=!1!==o.onFocus()&&i);"search"===n&&(i=!1!==o.search(t)&&i);"open"===n&&(i=!1!==o.openCloseMenu(o.currentValue)&&i);"close"===n&&(i=!1!==(l["\u0275nov"](e,15).filterValue=o.currentValue)&&i);"change"===n&&(i=!1!==o.onChange(t)&&i);"keydown.enter"===n&&(i=!1!==o.onEnterBeforeResultsLoaded()&&i);"keydown.escape"===n&&(i=!1!==o.blur()&&i);"clear"===n&&(i=!1!==o.clearSearch()&&i);return i},Ct.b,Ct.a)),l["\u0275prd"](5120,null,Pt.g,function(e){return[e]},[jt.a]),l["\u0275did"](14,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](15,4964352,[[2,4],["select",4]],11,jt.a,[[8,null],[8,null],[8,null],jt.b,jt.d,l.ElementRef,l.ChangeDetectorRef,jt.m],{items:[0,"items"],placeholder:[1,"placeholder"],openOnEnter:[2,"openOnEnter"],searchFn:[3,"searchFn"],typeahead:[4,"typeahead"]},{focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear"}),l["\u0275qud"](335544320,3,{optionTemplate:0}),l["\u0275qud"](335544320,4,{optgroupTemplate:0}),l["\u0275qud"](335544320,5,{labelTemplate:0}),l["\u0275qud"](335544320,6,{multiLabelTemplate:0}),l["\u0275qud"](335544320,7,{headerTemplate:0}),l["\u0275qud"](335544320,8,{footerTemplate:0}),l["\u0275qud"](335544320,9,{notFoundTemplate:0}),l["\u0275qud"](335544320,10,{typeToSearchTemplate:0}),l["\u0275qud"](335544320,11,{loadingTextTemplate:0}),l["\u0275qud"](335544320,12,{tagTemplate:0}),l["\u0275qud"](603979776,13,{ngOptions:1}),l["\u0275did"](27,4210688,null,0,Ei,[f.a,l.ElementRef],null,null),(e()(),l["\u0275and"](0,[[3,2]],null,1,null,C_)),l["\u0275did"](29,16384,null,0,jt.f,[l.TemplateRef],null,null),(e()(),l["\u0275eld"](30,0,[[1,0],["btn",1]],null,3,"a",[["class","top-menu-search--button search-form-normal"],["id","top-menu-search-button"],["role","button"],["tabindex","0"]],[[8,"title",0],[2,"-input-focused",null]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,31).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,31).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleClick(t)&&i);return i},null,null)),l["\u0275did"](31,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](32,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon5 icon-search ellipsis"]],null,null,null,Zt,Gt)),l["\u0275did"](33,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,11,0,t.expanded);e(n,14,0,"top-menu-search--input");e(n,15,0,t.results,l["\u0275inlineInterpolate"](1,"",t.text.search_dots,""),!1,t.customSearchFn,t.searchTermChanged$);e(n,33,0,"icon5 icon-search ellipsis")},function(e,n){var t=n.component;e(n,12,0,t.expanded,!l["\u0275nov"](n,15).multiple,l["\u0275nov"](n,15).typeahead,l["\u0275nov"](n,15).multiple,l["\u0275nov"](n,15).addTag,l["\u0275nov"](n,15).searchable,l["\u0275nov"](n,15).isOpen,l["\u0275nov"](n,15).disabled,l["\u0275nov"](n,15).filtered),e(n,30,0,l["\u0275inlineInterpolate"](1,"",t.text.search,""),t.expanded)})}var P_=l["\u0275ccf"]("global-search-input",v_,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"global-search-input",[],null,[[null,"click"]],function(e,n,t){var i=!0;return"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i),i},I_,b_)),l["\u0275did"](1,245760,null,0,v_,[l.ElementRef,B.a,ve,Y,rn,m_,Vn,Ps,l.ChangeDetectorRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),j_=function(){function e(e,n,t,l,i,o,r,u,a,s,c){this.FocusHelper=e,this.elementRef=n,this.renderer=t,this.I18n=l,this.halResourceService=i,this.globalSearchService=o,this.wpTableFilters=r,this.querySpace=u,this.wpFilters=a,this.cdRef=s,this.UrlParamsHelper=c,this.resultsHidden=!1,this.tableConfiguration={actionsColumnEnabled:!1,columnMenuEnabled:!0,contextMenuEnabled:!1,inlineCreateEnabled:!1,withFilters:!0,showFilterButton:!0,filterButtonText:this.I18n.t("js.button_advanced_filter")}}return e.prototype.ngAfterViewInit=function(){var e=this;Object(ys.a)(this.globalSearchService.searchTerm$,this.globalSearchService.projectScope$).pipe(Object(nj.a)(1),Object(Zu.a)(),Object(Yu.a)(10),Object(Ln.b)(this)).subscribe(function(n){n[0],n[1];e.wpFilters.visible=!1,e.setQueryProps()}),this.globalSearchService.resultsHidden$.pipe(Object(Ln.b)(this)).subscribe(function(n){return e.resultsHidden=n})},e.prototype.ngOnInit=function(){this.setQueryProps()},e.prototype.ngOnDestroy=function(){},e.prototype.setQueryProps=function(){var e=[],n=["id","project","subject","type","status","updatedAt"];this.globalSearchService.searchTerm.length>0&&e.push({search:{operator:"**",values:[this.globalSearchService.searchTerm]}}),"current_project"===this.globalSearchService.projectScope&&(e.push({subprojectId:{operator:"!*",values:[]}}),n=["id","subject","type","status","updatedAt"]),""===this.globalSearchService.projectScope&&e.push({subprojectId:{operator:"*",values:[]}}),this.queryProps={"columns[]":n,filters:JSON.stringify(e),sortBy:JSON.stringify([["updatedAt","desc"]]),showHierarchies:!1}},e}();gt.DynamicBootstrapper.register({selector:"global-search-work-packages",cls:j_});var __=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function R_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-table",[],null,null,null,Um,Bm)),l["\u0275did"](1,4964352,null,0,et,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"]},null)],function(e,n){var t=n.component;e(n,1,0,t.tableConfiguration,t.queryProps)},null)}function S_(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,R_)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,!n.component.resultsHidden)},null)}l["\u0275ccf"]("global-search-work-packages",j_,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"global-search-work-packages",[],null,null,null,S_,__)),l["\u0275did"](1,4440064,null,0,j_,[f.a,l.ElementRef,l.Renderer2,B.a,Y,m_,en,y,Ze,l.ChangeDetectorRef,Ee],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var x_=function(){return function(){}}();gt.DynamicBootstrapper.register({selector:"global-search-work-packages-entry",cls:x_});var T_=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function O_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,33,null,null,null,null,null,null,null)),l["\u0275prd"](4608,null,Te,Te,[l.Injector]),l["\u0275prd"](4608,null,zn,zn,[y]),l["\u0275prd"](4608,null,Pn,Pn,[Ee,h.G]),l["\u0275prd"](4608,null,Ce,Ce,[y,ke]),l["\u0275prd"](4608,null,qe,qe,[s,y]),l["\u0275prd"](4608,null,$e,$e,[s,y]),l["\u0275prd"](4608,null,We,We,[s,y]),l["\u0275prd"](4608,null,Ue,Ue,[y]),l["\u0275prd"](4608,null,M,M,[y]),l["\u0275prd"](4608,null,Qe,Qe,[y,$e,We]),l["\u0275prd"](4608,null,un,un,[s,Ge,rn,y]),l["\u0275prd"](4608,null,In,In,[y,qe,Y,yn,Cn]),l["\u0275prd"](4608,null,En,En,[y,Qe,qe,On,Y,yn,Cn]),l["\u0275prd"](4608,null,Fn,Fn,[s,y,qe,$e,We,en,Ue,M,Qe,un,In,Ce,En,yn,Pn,Dn]),l["\u0275prd"](4608,null,Yn,Yn,[Tn,B.a,Ee,Dn,h.G,Ae,dn,s,y,Ce,Fn,Wn]),l["\u0275prd"](4608,null,Ia,Ia,[y,s,yn]),l["\u0275prd"](4608,null,Pa,Pa,[y,Ia]),l["\u0275prd"](4608,null,as,as,[L.c,h.G,ve,Ee,Tn,B.a,zn]),l["\u0275prd"](4608,null,ia,ia,[h.G,s,zn,On,ve,yn]),l["\u0275prd"](4608,null,yc,yc,[at,Ee,M,ve]),l["\u0275prd"](135680,null,wc,wc,[l.Injector]),l["\u0275prd"](135680,null,dd,dd,[l.Injector,ia]),l["\u0275prd"](135680,null,pd,pd,[l.Injector]),l["\u0275prd"](4608,null,ar,dr,[l.Injector,yn]),l["\u0275prd"](4608,null,ur,Ta,[l.Injector,at,yn,Y,ar,y,vn]),l["\u0275prd"](4608,null,fd,fd,[s,ve,Ae,On]),l["\u0275prd"](4608,null,$a,$a,[]),l["\u0275prd"](512,null,y,y,[]),l["\u0275did"](29,16384,null,0,gd,[l.ElementRef,y,l.Injector],null,null),l["\u0275prd"](512,null,en,en,[s,y]),l["\u0275prd"](512,null,Ze,Ze,[]),(e()(),l["\u0275eld"](32,0,null,null,1,"global-search-work-packages",[],null,null,null,S_,__)),l["\u0275did"](33,4440064,null,0,j_,[f.a,l.ElementRef,l.Renderer2,B.a,Y,m_,en,y,Ze,l.ChangeDetectorRef,Ee],null,null)],function(e,n){e(n,33,0)},null)}var E_=l["\u0275ccf"]("global-search-work-packages-entry",x_,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"global-search-work-packages-entry",[],null,null,null,O_,T_)),l["\u0275did"](1,49152,null,0,x_,[],null,null)],null,null)},{},{},[]),D_=function(e){function n(n){var t=e.call(this)||this;return t.globalSearchService=n,t.classes=["global-search--tabs","scrollable-tabs"],t}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.currentTabSub=this.globalSearchService.currentTab$.subscribe(function(n){e.currentTabId=n}),this.tabsSub=this.globalSearchService.tabs$.subscribe(function(n){e.tabs=n})},n.prototype.clickTab=function(n){e.prototype.clickTab.call(this,n),this.globalSearchService.currentTab=n,this.globalSearchService.submitSearch()},n.prototype.ngOnDestroy=function(){this.currentTabSub.unsubscribe(),this.tabsSub.unsubscribe()},n}(function(){function e(){this.currentTabId="",this.tabs=[],this.classes=["scrollable-tabs"],this.hideLeftButton=!0,this.hideRightButton=!0}return e.prototype.ngAfterViewInit=function(){this.container=this.scrollContainer.nativeElement,this.pane=this.scrollPane.nativeElement,this.determineScrollButtonVisibility(),this.scrollIntoVisibleArea(this.currentTabId)},e.prototype.clickTab=function(e){this.currentTabId=e},e.prototype.onScroll=function(e){this.determineScrollButtonVisibility()},e.prototype.determineScrollButtonVisibility=function(){this.hideLeftButton=this.pane.scrollLeft<=0,this.hideRightButton=this.pane.scrollWidth-this.pane.scrollLeft<=this.container.clientWidth},e.prototype.scrollRight=function(){this.pane.scrollLeft+=this.container.clientWidth},e.prototype.scrollLeft=function(){this.pane.scrollLeft-=this.container.clientWidth},e.prototype.scrollIntoVisibleArea=function(e){var n=jQuery(this.pane).find("[tab-id="+e+"]"),t=n.position().left+Number(n.outerWidth());this.pane.scrollLeft+this.container.clientWidth<t&&(this.pane.scrollLeft=t-this.container.clientWidth+40)},e}());gt.DynamicBootstrapper.register({selector:"global-search-tabs",cls:D_});var F_=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function A_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[],[[2,"selected",null],[1,"tab-id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"a",[["href","#"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.clickTab(e.context.$implicit.id)&&l);return l},null,null))],null,function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.id===t.currentTabId,n.context.$implicit.id),e(n,1,0,n.context.$implicit.name)})}function N_(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{scrollContainer:0}),l["\u0275qud"](402653184,2,{scrollPane:0}),l["\u0275qud"](402653184,3,{scrollRightBtn:0}),l["\u0275qud"](402653184,4,{scrollLeftBtn:0}),(e()(),l["\u0275eld"](4,0,[[1,0],["scrollContainer",1]],null,8,"div",[],null,null,null,null,null)),l["\u0275did"](5,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),(e()(),l["\u0275eld"](6,0,[[2,0],["scrollPane",1]],null,2,"ul",[["class","tabrow"]],null,[[null,"scroll"]],function(e,n,t){var l=!0,i=e.component;"scroll"===n&&(l=!1!==i.onScroll(t)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,A_)),l["\u0275did"](8,278528,null,0,It.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](9,0,[[4,0],["scrollLeftBtn",1]],null,1,"div",[["class","scrollable-tabs--button -left"]],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.scrollLeft()&&l);return l},null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"span",[["class","icon-arrow-left2"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,[[3,0],["scrollRightBtn",1]],null,1,"div",[["class","scrollable-tabs--button -right"]],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.scrollRight()&&l);return l},null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"span",[["class","icon-arrow-right2"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,5,0,t.classes),e(n,8,0,t.tabs)},function(e,n){var t=n.component;e(n,9,0,t.hideLeftButton),e(n,11,0,t.hideRightButton)})}var M_=l["\u0275ccf"]("global-search-tabs",D_,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"global-search-tabs",[],null,null,null,N_,F_)),l["\u0275did"](1,4440064,null,0,D_,[m_],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),V_=function(){function e(e,n,t,l,i){this.elementRef=e,this.cdRef=n,this.globalSearchService=t,this.I18n=l,this.injector=i,this.currentProjectService=this.injector.get(Vn),this.text={all_projects:this.I18n.t("js.global_search.title.all_projects"),project_and_subprojects:this.I18n.t("js.global_search.title.project_and_subprojects"),search_for:this.I18n.t("js.global_search.title.search_for"),in:this.I18n.t("js.label_in")}}return e.prototype.ngOnInit=function(){var e=this;Object(ys.a)(this.globalSearchService.searchTerm$,this.globalSearchService.projectScope$).pipe(Object(Zu.a)(),Object(Ln.b)(this)).subscribe(function(n){var t=n[0],l=n[1];e.searchTerm=t,e.project=e.projectText(l),e.searchTitle=e.text.search_for+" "+e.searchTerm+" "+(""===e.project?"":e.text.in)+" "+e.project,e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},e.prototype.projectText=function(e){var n=this.currentProjectService.name?this.currentProjectService.name:"";switch(e){case"all":return this.text.all_projects;case"current_project":return n;case"":return n+" "+this.text.project_and_subprojects;default:return""}},e}();gt.DynamicBootstrapper.register({selector:"global-search-title",cls:V_});var q_=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function L_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,8,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,6,"h2",[],[[1,"title",0]],null,null,null,null)),(e()(),l["\u0275ted"](4,null,[" "," "])),(e()(),l["\u0275eld"](5,0,null,null,1,"i",[],null,null,null,null,null)),(e()(),l["\u0275ted"](6,null,['"','"'])),(e()(),l["\u0275ted"](7,null,[" "," "])),(e()(),l["\u0275eld"](8,0,null,null,1,"i",[],null,null,null,null,null)),(e()(),l["\u0275ted"](9,null,["",""])),(e()(),l["\u0275eld"](10,0,null,null,0,"ul",[["class","toolbar-items"]],null,null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.searchTitle),e(n,4,0,t.text.search_for),e(n,6,0,t.searchTerm),e(n,7,0,""===t.project?"":t.text.in),e(n,9,0,t.project)})}var $_,H_=l["\u0275ccf"]("global-search-title",V_,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"global-search-title",[],null,null,null,L_,q_)),l["\u0275did"](1,245760,null,0,V_,[l.ElementRef,l.ChangeDetectorRef,m_,B.a,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{searchTerm:"searchTerm",project:"project",projectScope:"projectScope",searchTitle:"searchTitle"},{},[]);!function(e){function n(e,n){var l=document.createElement("canvas"),i=l.getContext("2d"),o=n.width,r=n.height;o>r?o>e&&(r*=e/o,o=e):r>e&&(o*=e/r,r=e),l.width=o,l.height=r,i.drawImage(n,0,0,o,r);var u=l.toDataURL("image/jpeg");return[u,t(u)]}function t(e){for(var n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),t=e.split(",")[0].split(":")[1].split(";")[0],l=n.length,i=new Uint8Array(l),o=0;o<l;o++)i[o]=n.charCodeAt(o);return new Blob([i],{type:t})}e.resizeFile=function(e,t){return new Promise(function(l,i){var o=new FileReader;o.onload=function(t){var i=new Image;i.onload=function(){return l(n(e,i))},i.src=t.target.result},o.readAsDataURL(t)})},e.resizeImage=n}($_||($_={}));var B_=function(){function e(e,n,t,l){this.I18n=e,this.elementRef=n,this.notificationsService=t,this.opFileUpload=l,this.busy=!1,this.fileInvalid=!1,this.text={label_choose_avatar:this.I18n.t("js.avatars.label_choose_avatar"),upload_instructions:this.I18n.t("js.avatars.text_upload_instructions"),error_too_large:this.I18n.t("js.avatars.error_image_too_large"),wrong_file_format:this.I18n.t("js.avatars.wrong_file_format"),button_update:this.I18n.t("js.button_update"),uploading:this.I18n.t("js.avatars.uploading_avatar"),preview:this.I18n.t("js.label_preview")}}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.target=e.getAttribute("target"),this.method=e.getAttribute("method")},e.prototype.onFilePickerChanged=function(e){var n=this,t=Array.from(this.avatarFilePicker.nativeElement.files);if(0!==t.length){var l=t[0];-1!==["image/jpeg","image/png","image/gif"].indexOf(l.type)?$_.resizeFile(128,l).then(function(e){var t=e[0],i=e[1];i.name=l.name,n.avatarFile=i,n.avatarPreviewUrl=t}):this.fileInvalid=!0}},e.prototype.uploadAvatar=function(e){var n=this;e.preventDefault(),this.busy=!0;var t=this.opFileUpload.uploadSingle(this.target,this.avatarFile,this.method,"text");this.notificationsService.addAttachmentUpload(this.text.uploading,[t]),t[1].subscribe(function(e){switch(e.type){case 0:return;case 4:return n.avatarFile.progress=100,n.busy=!1,void window.location.reload();default:return}},function(e){n.notificationsService.addError(e.error),n.busy=!1})},e}(),z_=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function W_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.wrong_file_format)})}function Q_(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"fieldset",[["class","preview"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"legend",[["class","preview--legend"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"img",[["class","avatars--local-avatar-preview"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.text.preview),e(n,2,0,t.avatarPreviewUrl)})}function U_(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{avatarFilePicker:0}),(e()(),l["\u0275eld"](1,0,null,null,10,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"label",[["class","form--label"],["for","avatar_file_input"]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](3,278528,null,0,It.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](4,{"-error":0}),(e()(),l["\u0275eld"](5,0,null,null,1,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,[[1,0],["avatarFilePicker",1]],null,0,"input",[["accept","image/jpeg,image/png,image/gif"],["id","avatar_file_input"],["name","avatar_file_input"],["type","file"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.onFilePickerChanged(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](7,0,null,null,4,"div",[["class","form--field-instructions"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,2,"div",[["class","avatars--error-pane"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,W_)),l["\u0275did"](11,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Q_)),l["\u0275did"](13,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](14,0,null,null,0,"button",[["class","button -highlight -with-icon icon-checkmark"],["type","submit"]],[[1,"disabled",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.uploadAvatar(t)&&l);return l},null,null))],function(e,n){var t=n.component,l=e(n,4,0,t.fileInvalid);e(n,3,0,"form--label",l),e(n,11,0,t.fileInvalid),e(n,13,0,t.avatarPreviewUrl)},function(e,n){var t=n.component;e(n,2,0,t.text.label_choose_avatar),e(n,8,0,t.text.upload_instructions),e(n,14,0,!t.avatarFile||t.busy||void 0,t.text.button_update)})}var K_,G_=l["\u0275ccf"]("avatar-upload-form",B_,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"avatar-upload-form",[],null,null,null,U_,z_)),l["\u0275did"](1,114688,null,0,B_,[B.a,l.ElementRef,Tn,Qu],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Y_=t("/+cc"),Z_=function(){function e(e){this.widgetName=e,K_.register(e,this)}return e.prototype.renderItem=function(e,n){n.text(e.label)},e.prototype.fuzzySearch=function(e,n){if(""===n)return e;if(n.length>=3){var t=this.literalSearch(e,n);if(t.length>0)return t}return this.fuseInstance.search(n)},e.prototype.literalSearch=function(e,n){var t=[],l=n.toLowerCase();return e.forEach(function(e){-1!==e.label.toLowerCase().indexOf(l)&&t.push(e)}),t},e.prototype.augmentedResultSet=function(e,n){var t=[];return n.forEach(function(e){t.push({label:e.label,object:e.object,render:"match"})}),t},e.prototype.setup=function(e,n){this.currentPage=0,this.input=e,this.input[this.widgetName].call(this.input,this.setupParams(n));this.fuseInstance=new Y_(n,{shouldSort:!0,tokenize:!1,threshold:.2,location:0,distance:1e4,maxPatternLength:16,minMatchCharLength:2,keys:["label"]})},e.prototype.setupParams=function(e){var n=this;return{delay:50,source:function(t,l){var i=n.fuzzySearch(e,t.term);l(n.augmentedResultSet(e,i))},select:function(e,t){"match"===t.item.render&&n.onItemSelected(t.item.object)},create:function(){return n.input.focus()},response:function(e,t){n.onNoResultsFound(e,t)},autoFocus:!0,minLength:0}},e}();!function(e){e.register=function(e,n){jQuery.widget("custom."+e,jQuery.ui.autocomplete,{_create:function(){n.currentPage=0,this._super(),this.widget().menu("option","items","> .ui-matched-item"),this._search("")},_renderMenu:function(e,n){jQuery(e).unbind("scroll"),this._renderLazyMenu(e,n)},_renderMenuPage:function(e,t,l){void 0===l&&(l=null);var i=this,o=t.length,r=t,u=n.maxItemsPerPage;if(null!==l&&(r=t.slice(l*u,l*u+u),o=Math.min(t.length,l*u+u)),jQuery.each(r,function(n,t){i._renderItemData(e,t)}),e.css("height","auto"),o<t.length){var a=32*o;a<.55*document.body.offsetHeight&&e.css("height",a-50)}},_pages:function(e){return Math.ceil(e.length/n.maxItemsPerPage)},_repositionMenu:function(e){var n=this.menu;n.refresh(),this._resizeMenu(),e.position(jQuery.extend({of:this.element},this.options.position)),this.options.autoFocus&&n.next(new jQuery.Event("mouseover"))},_resizeMenu:function(){this.menu.element.outerWidth(this.element.outerWidth())},_renderItem:function(e,t){var l=this.element.val(),i="disabled"===t.render,o=jQuery("<div>").addClass("ui-menu-item-wrapper");n.renderItem(t,o);var r=jQuery("<li>").toggleClass("ui-state-disabled",i).toggleClass("ui-matched-item",!i).append(o).appendTo(e);return""!==l&&r.mark(l,{className:"ui-autocomplete-match"}),r},_renderLazyMenu:function(e,t){var l=this,i=jQuery(e),o=this._pages(t);if(o<=1)return l._renderMenuPage(e,t);l._renderMenuPage(e,t,0),i.scroll(function(){if(function(e){var n=e.outerHeight(),t=e[0].scrollHeight;return e.scrollTop()>=t-n}(i)){if(++n.currentPage>=o)return;l._renderMenuPage(e,t,n.currentPage),l._repositionMenu(e)}})}})}}(K_||(K_={}));var J_=function(e){function n(n,t,l,i,o,r){var u=e.call(this,"projectMenuAutocomplete")||this;return u.PathHelper=n,u.elementRef=t,u.http=l,u.cdRef=i,u.I18n=o,u.currentProject=r,u.results=null,u.loaded=!1,u.text={label:o.t("js.projects.autocompleter.label"),no_results:o.t("js.select2.no_matches"),loading:o.t("js.ajax.loading")},u}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.dropdownMenu=this.$element.parents("li.drop-down"),this.input=this.$element.find(".project-menu-autocomplete--input"),this.noResults=this.$element.find(".project-menu-autocomplete--no-results"),this.dropdownMenu.on("opened",function(){return e.open()}),this.dropdownMenu.on("closed",function(){return e.close()})},n.prototype.close=function(){this.input.projectMenuAutocomplete("destroy"),this.$element.find(".project-search-results").css("visibility","hidden")},n.prototype.open=function(){var e=this;this.$element.find(".project-search-results").css("visibility","visible"),this.loadProjects().then(function(n){var t=_.map(n,function(e){return{label:e.name,render:"match",object:e}});e.setup(e.input,t),e.addInputHandlers(),e.addClickHandler(),e.loaded=!0,e.cdRef.detectChanges(),e.scrollCurrentProjectIntoView()})},Object.defineProperty(n.prototype,"maxItemsPerPage",{get:function(){return 250},enumerable:!0,configurable:!0}),n.prototype.onItemSelected=function(e){window.location.href=this.projectLink(e.identifier)},n.prototype.onNoResultsFound=function(e,n){this.noResults.toggle(0===n.content.length)},n.prototype.renderItem=function(e,n){var t=jQuery("<a>").attr("href",this.projectLink(e.object.identifier)).text(e.label).appendTo(n);e.object.level>0&&t.text("\xbb "+e.label).css("padding-left",4+16*e.object.level+"px"),e.object.identifier===this.currentProject.identifier&&n.addClass("selected")},n.prototype.projectLink=function(e){var n=jQuery('meta[name="current_menu_item"]').attr("content"),t=this.PathHelper.projectPath(e);return n&&(t+="?jump="+encodeURIComponent(n)),t},Object.defineProperty(n.prototype,"loadingText",{get:function(){return this.loaded?"":this.text.loading},enumerable:!0,configurable:!0}),n.prototype.loadProjects=function(){var e=this;if(null!==this.results)return Promise.resolve(this.results);var n=this.PathHelper.projectLevelListPath();return this.http.get(n).toPromise().then(function(n){return e.results=e.augmentWithParents(n.projects)})},n.prototype.augmentWithParents=function(e){var n=[],t=-1;return e.map(function(e){for(;t>=e.level;)n.pop(),t--;return n.push(e),t=e.level,e.parents=n.slice(0,-1),e})},n.prototype.augmentedResultSet=function(e,n){var t=n.map(function(e){return e.object.identifier}),l=_.flatten(n.map(function(e){return e.object.parents})),i=[];return e.forEach(function(e){var n,o=e.object.identifier;if(t.indexOf(o)>=0)n="match";else{if(!_.find(l,function(e){return e.identifier===o}))return;n="disabled"}i.push({label:e.label,object:e.object,render:n})}),i},n.prototype.addInputHandlers=function(){var e=this;this.input.off("blur"),this.input.keydown(function(n){return n.which!==il.a.ESCAPE||(e.input.val(""),e.input[e.widgetName].call(e.input,"search",""),!1)})},n.prototype.addClickHandler=function(){var e=!1;this.$element.find(".project-menu-autocomplete--results").on("click",".ui-menu-item a",function(e){return us.isClickedWithModifier(e)&&e.stopImmediatePropagation(),!0}).on("touchend",".ui-menu-item a",function(n){e||(window.location.href=n.target.href)}).on("touchmove",".ui-menu-item a",function(){e=!0}).on("touchstart",".ui-menu-item a",function(){e=!1})},n.prototype.setupParams=function(n){var t=e.prototype.setupParams.call(this,n);return t.appendTo=".project-menu-autocomplete--wrapper",t.classes={"ui-autocomplete":"-inplace project-menu-autocomplete--results"},t.position={of:".project-menu-autocomplete--input-container"},t},n.prototype.scrollCurrentProjectIntoView=function(){var e=document.querySelector(".ui-menu-item-wrapper.selected");if(e){var n=e.offsetHeight,t=document.getElementsByClassName("project-menu-autocomplete--results")[0],l=e.offsetTop-t.offsetHeight/2+n/2;t.scrollTop=l%n==0?l:l-l%n}},n}(Z_);gt.DynamicBootstrapper.register({selector:"project-menu-autocomplete",cls:J_});var X_=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function eR(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","dropdown dropdown-relative project-search-results"],["id","project_autocompletion_wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","project-menu-autocomplete--wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","project-menu-autocomplete--input-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"label",[["class","hidden-for-sighted"],["for","project_autocompletion_input"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"input",[["class","ui-autocomplete--input project-menu-autocomplete--input"],["id","project_autocompletion_input"],["name","project_autocompletion_input"],["type","text"]],[[1,"placeholder",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"i",[["class","project-menu-autocomplete--search-icon icon-search"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"p",[["class","project-menu-autocomplete--no-results"],["hidden",""]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.text.label),e(n,4,0,t.loadingText),e(n,6,0,t.text.no_results)})}var nR=l["\u0275ccf"]("project-menu-autocomplete",J_,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"project-menu-autocomplete",[],null,null,null,eR,X_)),l["\u0275did"](1,114688,null,0,J_,[ve,l.ElementRef,L.c,l.ChangeDetectorRef,B.a,Vn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),tR=t("5Lfy"),lR=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function iR(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","op-modal--modal-container dynamic-content-modal--wrapper loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null))],null,null)}var oR=l["\u0275ccf"]("ng-component",tR.a,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,iR,lR)),l["\u0275did"](1,245760,null,0,tR.a,[l.ElementRef,Mn.a,l.ChangeDetectorRef,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),rR=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function uR(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function aR(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","op-modal--modal-container confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,uR)),l["\u0275did"](4,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"button",[["class","confirm-form-submit--cancel button"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"button",[["class","confirm-form-submit--continue button -highlight"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmAndClose(t)&&l);return l},null,null))],function(e,n){e(n,4,0,n.component.showClose)},function(e,n){var t=n.component;e(n,5,0,t.text.title),e(n,7,0,t.text.text),e(n,9,0,t.text.button_cancel,t.text.button_cancel),e(n,10,0,t.text.button_continue,t.text.button_continue)})}var sR=l["\u0275ccf"]("ng-component",fj,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,aR,rR)),l["\u0275did"](1,245760,null,0,fj,[l.ElementRef,Mn.a,l.ChangeDetectorRef,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),cR=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.password_confirmation=null,n}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.text.title=I18n.t("js.password_confirmation.title"),this.text.field_description=I18n.t("js.password_confirmation.field_description"),this.text.confirm_button=I18n.t("js.button_confirm"),this.text.password=I18n.t("js.label_password"),this.closeOnEscape=!1,this.closeOnOutsideClick=!1,this.showClose=!1},n.prototype.confirmAndClose=function(n){this.passwordValuePresent()&&e.prototype.confirmAndClose.call(this,n)},n.prototype.onOpen=function(n){e.prototype.onOpen.call(this,n),this.passwordConfirmationField.nativeElement.focus()},n.prototype.passwordValuePresent=function(){return null!==this.password_confirmation&&this.password_confirmation.length>0},n}(fj),dR=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pR(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{passwordConfirmationField:0}),(e()(),l["\u0275eld"](1,0,null,null,23,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,22,"div",[["class","op-modal--modal-container password-confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"h3",[["class","icon-context icon-locked"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,16,"div",[["class","op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,15,"form",[["class","request-for-confirmation--form form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,8).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,8).onReset()&&i);"submit"===n&&(i=!1!==o.confirmAndClose(t)&&i);return i},null,null)),l["\u0275did"](7,16384,null,0,Pt.t,[],null,null),l["\u0275did"](8,4210688,null,0,Pt.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,Pt.c,null,[Pt.k]),l["\u0275did"](10,16384,null,0,Pt.j,[[4,Pt.c]],null,null),(e()(),l["\u0275eld"](11,0,null,null,10,"div",[["class","form--field -required"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"label",[["class","form--label"],["for","request_for_confirmation_password"]],[[1,"aria-label",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,6,"div",[["class","form--text-field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,[[1,0],["passwordConfirmationField",1]],null,5,"input",[["class","form--text-field"],["id","request_for_confirmation_password"],["name","request_for_confirmation_password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,16)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,16).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,16)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,16)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.password_confirmation=t)&&i);return i},null,null)),l["\u0275did"](16,16384,null,0,Pt.d,[l.Renderer2,l.ElementRef,[2,Pt.a]],null,null),l["\u0275prd"](1024,null,Pt.g,function(e){return[e]},[Pt.d]),l["\u0275did"](18,671744,null,0,Pt.l,[[2,Pt.c],[8,null],[8,null],[6,Pt.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,Pt.h,null,[Pt.l]),l["\u0275did"](20,16384,null,0,Pt.i,[[4,Pt.h]],null,null),(e()(),l["\u0275eld"](21,0,null,null,0,"div",[["class","form--field-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,1,"button",[["class","confirm-form-submit--continue button"]],[[1,"title",0],[8,"textContent",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmAndClose(t)&&l);return l},null,null)),(e()(),l["\u0275ted"](-1,null,[' [attr.title]="text.button_cancel"> ']))],function(e,n){e(n,18,0,"request_for_confirmation_password",n.component.password_confirmation)},function(e,n){var t=n.component;e(n,4,0,t.text.title),e(n,6,0,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending),e(n,12,0,t.text.field_description,t.text.password),e(n,15,0,l["\u0275nov"](n,20).ngClassUntouched,l["\u0275nov"](n,20).ngClassTouched,l["\u0275nov"](n,20).ngClassPristine,l["\u0275nov"](n,20).ngClassDirty,l["\u0275nov"](n,20).ngClassValid,l["\u0275nov"](n,20).ngClassInvalid,l["\u0275nov"](n,20).ngClassPending),e(n,21,0,t.text.field_description),e(n,23,0,t.text.confirm_button,t.text.confirm_button,!t.passwordValuePresent())})}var hR=l["\u0275ccf"]("ng-component",cR,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,pR,dR)),l["\u0275did"](1,245760,null,0,cR,[l.ElementRef,Mn.a,l.ChangeDetectorRef,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),fR=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function gR(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["class","help-text--edit-button button"]],[[1,"href",4],[1,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-edit"]],null,null,null,Zt,Gt)),l["\u0275did"](2,49152,null,0,Kt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,2,0,"button--icon icon-edit")},function(e,n){var t=n.component;e(n,0,0,t.helpTextLink,t.text.edit),e(n,3,0,t.text.edit)})}function mR(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","op-modal--portal  loading-indicator--location"],["data-indicator-name","modal"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,11,"div",[["class","op-modal--modal-container attribute-help-text--modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.closeMe(t)&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](6,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[["class","icon-context icon-help1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,0,"span",[["class","ellipsis"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"div",[["class","op-modal--modal-body -formattable"],["tabindex","0"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,2,"div",[["class","modal--form-actions"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,gR)),l["\u0275did"](12,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,12,0,n.component.helpText.editText)},function(e,n){var t=n.component;e(n,4,0,t.text.close),e(n,8,0,t.helpText.attributeCaption),e(n,9,0,t.helpText.helpText.html)})}var vR=l["\u0275ccf"]("ng-component",tc,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,mR,fR)),l["\u0275did"](1,245760,null,0,tc,[Mn.a,B.a,l.ChangeDetectorRef,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),bR=function(){function e(e,n,t){this.toggleService=e,this.cdRef=n,this.elementRef=t,this.mainMenu=jQuery("#main-menu")[0],this.moving=!1}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.toggleService.titleData$.pipe(Object(Zu.a)(),Object(Ln.b)(this)).subscribe(function(n){e.toggleTitle=n,e.cdRef.detectChanges()}),this.resizeEvent="main-menu-resize",this.localStorageKey="openProject-mainMenuWidth"},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.resizeStart=function(){this.elementWidth=this.mainMenu.clientWidth},e.prototype.resizeMove=function(e){this.toggleService.saveWidth(this.elementWidth+e.x)},e.prototype.resizeEnd=function(){var e=new Event(this.resizeEvent);window.dispatchEvent(e)},e}();gt.DynamicBootstrapper.register({selector:"main-menu-resizer",cls:bR});var yR=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function wR(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"resizer",[["class","main-menu--resizer"]],null,[[null,"end"],[null,"start"],[null,"move"],[null,"mousedown"]],function(e,n,t){var i=!0,o=e.component;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,1).startResize(t)&&i);"end"===n&&(i=!1!==o.resizeEnd()&&i);"start"===n&&(i=!1!==o.resizeStart()&&i);"move"===n&&(i=!1!==o.resizeMove(t)&&i);return i},Lj,Vj)),l["\u0275did"](1,180224,null,0,Mj,[],{customHandler:[0,"customHandler"],cursorClass:[1,"cursorClass"]},{end:"end",start:"start",move:"move"}),(e()(),l["\u0275eld"](2,0,null,0,2,"a",[["class","main-menu--navigation-toggler"],["href","#"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.toggleService.toggleNavigation(t)&&i);return i},null,null)),l["\u0275did"](3,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-resizer-vertical-lines"]],null,null,null,null,null))],function(e,n){e(n,1,0,!0,"col-resize")},function(e,n){e(n,2,0,n.component.toggleTitle)})}var kR=l["\u0275ccf"]("main-menu-resizer",bR,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"main-menu-resizer",[],null,null,null,wR,yR)),l["\u0275did"](1,245760,null,0,bR,[js,l.ChangeDetectorRef,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),CR=function(){function e(e,n,t,l){this.toggleService=e,this.cdRef=n,this.deviceService=t,this.injector=l,this.toggleTitle="",this.currentProject=this.injector.get(Vn)}return e.prototype.ngOnInit=function(){var e=this;this.toggleService.initializeMenu(),this.toggleService.titleData$.pipe(Object(Zu.a)(),Object(Ln.b)(this)).subscribe(function(n){e.toggleTitle=n,e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},e}();gt.DynamicBootstrapper.register({selector:"main-menu-toggle",cls:CR});var IR=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function PR(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["aria-haspopup","true"],["id","main-menu-toggle"],["tabindex","0"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.toggleService.toggleNavigation(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,ol,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](2,0,null,null,1,"a",[["icon","icon-hamburger"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-hamburger"]],null,null,null,null,null))],null,function(e,n){e(n,0,0,n.component.toggleTitle)})}function jR(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,PR)),l["\u0275did"](1,16384,null,0,It.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,null!==t.currentProject.id||t.deviceService.isMobile)},null)}var _R=l["\u0275ccf"]("main-menu-toggle",CR,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"main-menu-toggle",[],null,null,null,jR,IR)),l["\u0275did"](1,245760,null,0,CR,[js,l.ChangeDetectorRef,Ps,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),RR=function(){function e(e,n,t){this.element=e,this.confirmDialog=n,this.I18n=t,this.confirmed=!1,this.text={title:this.I18n.t("js.modals.form_submit.title"),text:this.I18n.t("js.modals.form_submit.text")}}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.element.nativeElement),this.$element.is("form")?this.$form=this.$element:this.$form=this.$element.closest("form"),this.$form.on("submit",function(n){return!!e.confirmed||(n.preventDefault(),e.openConfirmationDialog(),!1)})},e.prototype.openConfirmationDialog=function(){var e=this;this.confirmDialog.confirm({text:this.text,closeByEscape:!0,showClose:!0,closeByDocument:!0}).then(function(){e.confirmed=!0,e.$form.trigger("submit")}).catch(function(){return e.confirmed=!1})},e}();gt.DynamicBootstrapper.register({selector:"confirm-form-submit",cls:RR});var SR=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function xR(e){return l["\u0275vid"](0,[],null,null)}var TR=l["\u0275ccf"]("confirm-form-submit",RR,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"confirm-form-submit",[],null,null,null,xR,SR)),l["\u0275did"](1,114688,null,0,RR,[l.ElementRef,gj,B.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),OR=function(){function e(e){this.sanitizer=e}return e.prototype.sanitize=function(e){return this.sanitizer.sanitize(l.SecurityContext.HTML,e)||""},e}(),ER=t("yLKq"),DR=function(){function e(){}return e.prototype.intercept=function(e,n){var t=jQuery("meta[name=csrf-token]").attr("content"),l=e.headers.set("X-Authentication-Scheme","Session").set("X-Requested-With","XMLHttpRequest");t&&(l=l.set("X-CSRF-TOKEN",t));var i=e.clone({withCredentials:!0,headers:l});return n.handle(i)},e}(),FR=function(){function e(e,n,t){this.halResourceService=e,this.states=n,this.pathHelper=t}return e.prototype.loadAll=function(e){var n=this,t=this.pathHelper.api.v3.withOptionalProject(e).types.toString();return this.halResourceService.get(t).toPromise().then(function(e){return _.each(e.elements,function(e){return n.states.types.get(e.href).putValue(e)}),e.elements})},e.prototype.load=function(){return this.halResourceService.get(this.pathHelper.api.v3.root.toString()).toPromise()},e}(),AR=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.one=function(e){return this.halResourceService.get(this.pathHelper.api.v3.statuses.id(e).toString()).toPromise()},e.prototype.list=function(){return this.halResourceService.get(this.pathHelper.api.v3.statuses.toString()).toPromise()},e}(),NR=function(){function e(e,n,t){this.componentFactoryResolver=e,this.appRef=n,this.injector=t}return e.prototype.render=function(e,n){var t=this;e.innerHTML=n;var l=[];return gt.DynamicBootstrapper.getEmbeddable().forEach(function(n){for(var i=e.querySelectorAll(n.selector),o=0,r=i.length;o<r;o++){var u=t.componentFactoryResolver.resolveComponentFactory(n.cls).create(t.injector,[],i[o]);l.push(u),t.appRef.attachView(u.hostView),u.changeDetectorRef.detectChanges()}}),function(){l.forEach(function(e){t.appRef.detachView(e.hostView),e.destroy()}),l.length=0,e.innerHTML=""}},e}(),MR=function(e){function n(n,t){var l=e.call(this)||this;return l.states=n,l.statusDm=t,l}return r.d(n,e),n.prototype.load=function(e){return this.statusDm.one(e)},n.prototype.loadAll=function(e){return this.statusDm.list()},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.statuses},enumerable:!0,configurable:!0}),n}(fn),VR=function(){function e(e,n,t,l){this.boardListsService=e,this.I18n=n,this.statusCache=t,this.statusDm=l}return Object.defineProperty(e.prototype,"localizedName",{get:function(){return this.I18n.t("js.work_packages.properties.status")},enumerable:!0,configurable:!0}),e.prototype.getFilterHref=function(e){var n=_.find(e.filters,function(e){return"status"===e.id});if(n){var t=n.values[0];return t instanceof z?t.href:t}},e.prototype.getLoadedFilterValue=function(e){var n=this.getFilterHref(e);if(n){var t=z.idFromLink(n);return this.statusCache.require(t)}return Promise.resolve(void 0)},e.prototype.canAddToQuery=function(e){return Promise.resolve(!0)},e.prototype.addActionQueries=function(e){var n=this;return this.getStatuses().then(function(t){return Promise.all(t.map(function(t){return t.isDefault?n.addActionQuery(e,t):Promise.resolve(e)})).then(function(){return e})})},e.prototype.addActionQuery=function(e,n){var t={name:n.name},l={status:{operator:"=",values:[n.id]}};return this.boardListsService.addQuery(e,t,[l])},e.prototype.getAvailableValues=function(e,n){var t=this,l=new Set(n.map(function(e){return t.getFilterHref(e)}));return this.getStatuses().then(function(e){return e.filter(function(e){return!l.has(e.href)})})},e.prototype.getAdditionalListMenuItems=function(e){return Promise.resolve([])},e.prototype.dragIntoAllowed=function(e,n){return!0},e.prototype.autocompleterComponent=function(){return _t},e.prototype.headerComponent=function(){},e.prototype.disabledAddButtonPlaceholder=function(e){},e.prototype.getStatuses=function(){return this.statusDm.list().then(function(e){return e.elements})},e}(),qR=function(e){function n(n,t){var l=e.call(this)||this;return l.states=n,l.versionDm=t,l}return r.d(n,e),n.prototype.load=function(e){return this.versionDm.one(e)},n.prototype.loadAll=function(e){return this.versionDm.list()},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.versions},enumerable:!0,configurable:!0}),n}(fn),LR=function(e){function n(n){var t=e.call(this)||this;return t.halResourceService=n,t.$formCache=Object(u.h)(),t}return r.d(n,e),n.prototype.load=function(e){return this.halResourceService.post(e,{}).toPromise()},n.prototype.loadAll=function(e){var n=this;return Promise.all(e.map(function(e){return n.load(e)})).then(function(e){})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.$formCache},enumerable:!0,configurable:!0}),n}(fn),$R=function(){function e(e,n,t,l,i,o,r,u,a){this.boardListsService=e,this.I18n=n,this.versionDm=t,this.versionCache=l,this.currentProject=i,this.wpNotifications=o,this.state=r,this.formCache=u,this.pathHelper=a}return Object.defineProperty(e.prototype,"localizedName",{get:function(){return this.I18n.t("js.work_packages.properties.version")},enumerable:!0,configurable:!0}),e.prototype.getFilterHref=function(e){var n=_.find(e.filters,function(e){return"version"===e.id});if(n){var t=n.values[0];return t instanceof z?t.href:t}},e.prototype.getLoadedFilterValue=function(e){var n=this.getFilterHref(e);if(n){var t=z.idFromLink(n);return this.versionCache.require(t)}return Promise.resolve(void 0)},e.prototype.canAddToQuery=function(e){var n=_.get(e,"results.createWorkPackage.href",null);return n?this.formCache.require(n).then(function(e){return e.schema.version.writable}):Promise.resolve(!1)},e.prototype.addActionQueries=function(e){var n=this;return this.getVersions().then(function(t){return Promise.all(t.map(function(t){var l=_.get(t,"definingProject.name",null);return t.isOpen()&&l&&l===n.currentProject.name?n.addActionQuery(e,t):Promise.resolve(e)})).then(function(){return e})})},e.prototype.addActionQuery=function(e,n){var t={name:n.name},l={version:{operator:"=",values:[n.id]}};return this.boardListsService.addQuery(e,t,[l])},e.prototype.getAvailableValues=function(e,n){var t=this,l=new Set(n.map(function(e){return t.getFilterHref(e)}));return this.getVersions().then(function(e){return e.filter(function(e){return!l.has(e.href)})})},e.prototype.getAdditionalListMenuItems=function(e){var n=this;return this.getLoadedFilterValue(e).then(function(e){return e?n.buildItemsForVersion(e):[]})},e.prototype.autocompleterComponent=function(){return Ft},e.prototype.headerComponent=function(){return Jk},e.prototype.disabledAddButtonPlaceholder=function(e){return e.isLocked()?{icon:"locked",text:this.I18n.t("js.boards.version.locked")}:e.isClosed()?{icon:"not-supported",text:this.I18n.t("js.boards.version.closed")}:void 0},e.prototype.dragIntoAllowed=function(e,n){return n instanceof Zk&&n.isOpen()},e.prototype.getVersions=function(){return null===this.currentProject.id?Promise.resolve([]):this.versionDm.listForProject(this.currentProject.id).then(function(e){return e.elements})},e.prototype.patchVersionStatus=function(e,n){var t=this;this.versionDm.patch(e,{status:n}).then(function(e){t.versionCache.updateValue(e.id,e),t.state.go(".",{},{reload:!0})}).catch(function(e){return t.wpNotifications.handleRawError(e)})},e.prototype.buildItemsForVersion=function(e){var n=this,t=e.id;return[{hidden:!e.isOpen()||e.isLocked()&&!e.$links.update,linkText:this.I18n.t("js.boards.version.lock_version"),onClick:function(){return n.patchVersionStatus(e,"locked"),!0}},{hidden:!e.isLocked()||e.isOpen()&&!e.$links.update,linkText:this.I18n.t("js.boards.version.unlock_version"),onClick:function(){return n.patchVersionStatus(e,"open"),!0}},{hidden:e.isClosed()||!e.isClosed()&&!e.$links.update,linkText:this.I18n.t("js.boards.version.close_version"),onClick:function(){return n.patchVersionStatus(e,"closed"),!0}},{hidden:!e.isClosed()||e.isClosed()&&!e.$links.update,linkText:this.I18n.t("js.boards.version.open_version"),onClick:function(){return n.patchVersionStatus(e,"open"),!0}},{linkText:this.I18n.t("js.boards.version.show_version"),href:this.pathHelper.versionShowPath(t),onClick:function(e){return!us.isClickedWithModifier(e)&&(window.open(n.pathHelper.versionShowPath(t),"_blank"),!0)}},{hidden:!e.$links.update,linkText:this.I18n.t("js.boards.version.edit_version"),href:this.pathHelper.versionEditPath(t),onClick:function(e){return!us.isClickedWithModifier(e)&&(window.open(n.pathHelper.versionEditPath(t),"_blank"),!0)}}]},e}(),HR=function(e){function n(n){var t=e.call(this)||this;return t.I18n=n,t.text={internal_error:t.I18n.t("js.errors.internal")},t}return r.d(n,e),n.prototype.handleError=function(n){var t=this.text.internal_error;n instanceof jn?(console.error("Returned error resource %O",n),t+=" "+n.errorMessages.join("\n")):n instanceof z?(console.error("Returned hal resource %O",n),t+="Resource returned "+n.name):t=n,e.prototype.handleError.call(this,t)},n}(l.ErrorHandler),BR={preview:1,newWorkPackage:2,edit:3,quickSearch:4,projectSearch:5,help:6,moreMenu:7,details:8},zR=function(){function e(e,n,t){var l=this;this.PathHelper=e,this.FocusHelper=n,this.currentProject=t,this.shortcuts={"?":function(){return l.showHelpModal()},"g m":this.globalAction("myPagePath"),"g o":this.projectScoped("projectPath"),"g w p":this.projectScoped("projectWorkPackagesPath"),"g w i":this.projectScoped("projectWikiPath"),"g a":this.projectScoped("projectActivityPath"),"g c":this.projectScoped("projectCalendarPath"),"g n":this.projectScoped("projectNewsPath"),"g t":this.projectScoped("projectTimelinesPath"),"n w p":this.projectScoped("projectWorkPackageNewPath"),"g e":this.accessKey("edit"),"g p":this.accessKey("preview"),"d w p":this.accessKey("details"),m:this.accessKey("moreMenu"),p:this.accessKey("projectSearch"),s:this.accessKey("quickSearch"),k:function(){return l.focusPrevItem()},j:function(){return l.focusNextItem()}}}return e.prototype.register=function(){var e=this;_.each(this.shortcuts,function(e,n){return Mousetrap.bind(n,e)}),jQuery(".help-link-shortcuts-link").click(function(){return e.showHelpModal(),!1})},e.prototype.accessKey=function(e){var n=this,t=BR[e];return function(){var e=jQuery("[accesskey="+t+"]:first");e.is("input")||"global-search-input"===e.attr("id")?setTimeout(function(){return n.FocusHelper.focus(e)},0):e.is("[href]")?n.clickLink(e[0]):e[0].click()}},e.prototype.globalAction=function(e){var n=this;return function(){var t=n.PathHelper[e]();window.location.href=t}},e.prototype.projectScoped=function(e){var n=this;return function(){var t=n.currentProject.identifier;if(t){var l=n.PathHelper[e](t);window.location.href=l}}},e.prototype.clickLink=function(e){var n=!1;if(document.createEvent){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});n=!e.dispatchEvent(t)}else e.fireEvent&&(n=!e.fireEvent("onclick"));n||(window.location.href=e.href)},e.prototype.showHelpModal=function(){window.open(this.PathHelper.keyboardShortcutsHelpPath())},e.prototype.findListInPage=function(){var e=jQuery("table.keyboard-accessible-list"),n=[];return e.find("tbody tr").each(function(e,t){var l=jQuery(t).find(":visible:tabbable")[0];void 0!==l&&n.push(l)}),n},e.prototype.focusItemOffset=function(e){var n,t=this.findListInPage();null!==t&&(n=t.indexOf(jQuery(document.activeElement).closest("table.keyboard-accessible-list tbody tr").find(":visible:tabbable")[0]),jQuery(t[(n+e+t.length)%t.length]).focus())},e.prototype.focusNextItem=function(){this.focusItemOffset(1)},e.prototype.focusPrevItem=function(){this.focusItemOffset(-1)},e.ngInjectableDef=l.defineInjectable({factory:function(){return new e(l.inject(ve),l.inject(f.a),l.inject(Vn))},token:e,providedIn:"root"}),e}();var WR=t("KuCF");function QR(e,n){void 0===n&&(n="add"),e&&document.body.classList[n](e)}function UR(e,n){if(void 0===n&&(n="add"),e){var t=jQuery("#main-menu ."+e)[0];if(t){t.classList[n]("selected");var l=(t.getAttribute("title")||"").split(":").slice(-1)[0];"add"===n&&(l=I18n.t("js.description_current_position")+l),t.setAttribute("title",l)}}}function KR(e,n,t){e.urlService.config.strictMode(!1),e.urlService.config.type("opQueryString",{encode:encodeURIComponent,decode:decodeURIComponent,raw:!0,dynamic:!0,is:function(e){return"string"==typeof e},equals:function(e,n){return _.isEqual(e,n)}})}t("Iia5");function GR(e){e.urlService.rules.when(new RegExp("^/projects/(.*)/boards$"),function(e){return"/projects/"+e[1]+"/boards/"})}function YR(e){return function(){var n=e.get(gC),t=e.get(VR),l=e.get($R);n.add("status",t),n.add("version",l)}}var ZR=function(){return function(){}}(),JR=function(e){return function(){return e.register()}},XR=function(){return function(){}}();var eS=function(){return function(){}}(),nS=function(e){return function(){var n=e.get(h.O),t=e.get(h.G),l=e.get(Tn),i=e.get(Vn),o=e.get(Ts),r=e.get(ss),u=document.querySelector(Gi);n.onEnter({},function(e,n){QR(_.get(n,"data.bodyClasses"),"add"),e.from().data&&_.get(n,"data.menuItem")!==e.from().data.menuItem&&UR(_.get(n,"data.menuItem"),"add")}),n.onExit({},function(e,n){QR(_.get(n,"data.bodyClasses"),"remove"),e.to().data&&_.get(n,"data.menuItem")!==e.to().data.menuItem&&UR(_.get(n,"data.menuItem"),"remove")}),n.onStart({},function(e){var n=e.router.stateService,a=e.params("to"),s=(e.from(),e.to());if(a.start_onboarding_tour&&"work-packages.list"!==s.name){var c=Object.assign({},e.params());return c.start_onboarding_tour=void 0,n.target(e.to(),c)}r.sync(e);var d=window.MiniProfiler;d&&d.pageTransition();var p=a.projectPath||i.identifier;if(!a.projects&&p){var h=_.clone(a);return _.assign(h,{projectPath:p,projects:"projects"}),n.target(s,h,{location:"replace"})}if(null===u){e.options().source;var f=window.location.pathname,g=t.href(s,a);if(f!==g)return window.location.href=g,!1}return QR(_.get(s,"data.bodyClasses"),"add"),o.setIfFirst(s.name,a),e.to().name!==e.from().name&&l.clear(),a.flash_message&&l.add(a.flash_message),!0})}},tS=function(){return function(){}}(),lS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.schemas.get(this.href)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableAttributes",{get:function(){return _.keys(this.$source).filter(function(e){return 0!==e.indexOf("_")})},enumerable:!0,configurable:!0}),n}(z),iS=(function(){}(),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.types.get(this.href)},enumerable:!0,configurable:!0}),n}(z)),oS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.forValue=function(e){return this.dependencies[e]},n}(z),rS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(zu),uS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.getErrors=function(){var e,n=_.values(this.validationErrors),t=n.length;return 0===t?null:(1===t?e=new jn(this.injector,n[0],!0,this.halInitializer,"Error"):((e=new jn(this.injector,{},!0,this.halInitializer,"Error")).errorIdentifier="urn:openproject-org:api:v3:errors:MultipleErrors",e.errors=n),e.isValidationError=!0,e)},n}(z),aS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"_type",{get:function(){return"QueryFilterInstanceSchema"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableOperators",{get:function(){return this.operator.allowedValues},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allowedFilterValue",{get:function(){return this.filter.allowedValues instanceof zu?this.filter.allowedValues.elements[0]:this.filter.allowedValues[0]},enumerable:!0,configurable:!0}),n.prototype.$initialize=function(n){e.prototype.$initialize.call(this,n),n._dependencies&&(this.dependency=new oS(this.injector,n._dependencies[0],!0,this.halInitializer,"SchemaDependency"))},n.prototype.getFilter=function(){var e=this.operator.allowedValues[0],n=this.filter.allowedValues[0],t={name:n.name,_links:{filter:n.$source._links.self,schema:this.$source._links.self,operator:e.$source._links.self}};this.definesAllowedValues()?t._links.values=[]:t.values=[];var l=new Je(this.injector,t,!0,this.halInitializer,"QueryFilterInstance");return l.schema=this,l},n.prototype.isValueRequired=function(){return!!this.values},n.prototype.isResourceValue=function(){return!(!this.values||!this.values.allowedValues)},n.prototype.resultingSchema=function(e){var t=this.$source,l=this.dependency.forValue(e.href.toString()),i={};return _.merge(i,t,l),new n(this.injector,i,!0,this.halInitializer,"QueryFilterInstanceSchema")},n.prototype.definesAllowedValues=function(){return _.some(this._dependencies[0].dependencies,function(e){return e.values&&e.values._links&&e.values._links.allowedValues})},n}(lS),sS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(z),cS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$source.id||this.idFromLink},set:function(e){this.$source.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"idFromLink",{get:function(){if(this.$href){var e=z.idFromLink(this.$href);return decodeURIComponent(e)}return""},enumerable:!0,configurable:!0}),n}(z),dS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(z),pS=Uu(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return r.d(n,e),n}(z)),hS=Uu(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return r.d(n,e),n}(z)),fS=Uu(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return r.d(n,e),n}(z)),gS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.statuses.get(this.href)},enumerable:!0,configurable:!0}),n}(z),mS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(z),vS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(z),bS={WorkPackage:{cls:Ku,attrTypes:{parent:"WorkPackage",ancestors:"WorkPackage",children:"WorkPackage",relations:"Relation",schema:"Schema",status:"Status",type:"Type"}},Activity:{cls:z,attrTypes:{user:"User"}},"Activity::Comment":{cls:z,attrTypes:{user:"User"}},"Activity::Revision":{cls:z,attrTypes:{user:"User"}},Relation:{cls:sd,attrTypes:{from:"WorkPackage",to:"WorkPackage"}},Schema:{cls:lS},Type:{cls:iS},Status:{cls:gS},SchemaDependency:{cls:oS},Error:{cls:jn},User:{cls:Pi},Collection:{cls:zu},WorkPackageCollection:{cls:rS},Query:{cls:Pd,attrTypes:{filters:"QueryFilterInstance"}},Form:{cls:uS},QueryFilterInstance:{cls:Je,attrTypes:{schema:"QueryFilterInstanceSchema",filter:"QueryFilter",operator:"QueryOperator"}},QueryFilterInstanceSchema:{cls:aS},QueryFilter:{cls:Xe},Root:{cls:sS},QueryOperator:{cls:cS},HelpText:{cls:dS},CustomAction:{cls:md},WikiPage:{cls:pS},MeetingContent:{cls:hS},Post:{cls:fS},Grid:{cls:Kj},GridWidget:{cls:pC},TimeEntry:{cls:mS},News:{cls:vS},Version:{cls:Zk}};var yS=function(e){return function(){_.each(bS,function(n,t){return e.registerResource(t,n)})}},wS=function(){return function(){}}();var kS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(Na),CS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return null==this.value?"":this.value.toLocaleString(this.I18n.locale,{useGrouping:!0,maximumFractionDigits:20})},enumerable:!0,configurable:!0}),n}(Na),IS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return parseInt(this.resource[this.name])},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return isNaN(this.value)},n}(Na),PS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.attribute&&this.attribute.name:null},enumerable:!0,configurable:!0}),n}(Na),jS=function(){function e(){}return Object.defineProperty(e,"UNESCAPED_EXPRESSION",{get:function(){return"{{"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ESCAPED_EXPRESSION",{get:function(){return"{{ \\$root\\.DOUBLE_LEFT_CURLY_BRACE }}"},enumerable:!0,configurable:!0}),e.escape=function(e){return e.replace(new RegExp(this.UNESCAPED_EXPRESSION,"g"),this.ESCAPED_EXPRESSION)},e.unescape=function(e){return e.replace(new RegExp(this.ESCAPED_EXPRESSION,"g"),this.UNESCAPED_EXPRESSION)},e}(),_S=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.appRef=n.$injector.get(l.ApplicationRef),n}return r.d(n,e),n.prototype.render=function(e,n){var t=document.createElement("div");t.classList.add("read-value--html","wiki","highlight","-multiline"),t.innerHTML=n,e.innerHTML="",e.appendChild(t),gt.DynamicBootstrapper.bootstrapOptionalEmbeddable(this.appRef,t)},Object.defineProperty(n.prototype,"isFormattable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){if(!this.schema)return null;var e=this.resource[this.name];return e&&e.html?this.unescape(e.html):""},enumerable:!0,configurable:!0}),n.prototype.unescape=function(e){return e?jS.unescape(e):""},n}(Na),RS=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.$injector.get(qt),n}return r.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.timezoneService.formattedDuration(this.value)},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return 0===this.timezoneService.toHours(this.value)},n}(Na),SS=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.wpTableHighlighting=n.$injector.get(un),n}return r.d(n,e),Object.defineProperty(n.prototype,"shouldHighlight",{get:function(){return!1!==this.context.options.colorize&&("table"!==this.context.container||this.wpTableHighlighting.shouldHighlightInline(this.name))},enumerable:!0,configurable:!0}),n}(Na),xS=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.$injector.get(qt),n}return r.d(n,e),n.prototype.render=function(n,t){if(e.prototype.render.call(this,n,t),this.shouldHighlight&&this.canOverdue){var l=this.timezoneService.daysFromToday(this.value);n.classList.add(Ol.overdueDate(l))}},Object.defineProperty(n.prototype,"canOverdue",{get:function(){return-1!==["dueDate","date"].indexOf(this.name)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.value?this.timezoneService.formattedDate(this.value):""},enumerable:!0,configurable:!0}),n}(SS),TS=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.$injector.get(qt),n}return r.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.value?this.timezoneService.formattedDatetime(this.value):""},enumerable:!0,configurable:!0}),n}(Na),OS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.translatedValue()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return this.translatedValue()},enumerable:!0,configurable:!0}),n.prototype.translatedValue=function(){return this.value?this.I18n.t("js.general_text_yes"):this.I18n.t("js.general_text_no")},n.prototype.isEmpty=function(){return!1},n}(Na),ES=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={linkTitle:n.I18n.t("js.work_packages.message_successful_show_in_fullscreen"),none:n.I18n.t("js.filter.noneElement")},n.$state=n.$injector.get(h.G),n.keepTab=n.$injector.get(_e),n.uiStateBuilder=new Re(n.$state,n.keepTab),n}return r.d(n,e),n.prototype.render=function(e,n){if(this.isEmpty())e.innerText=this.placeholder;else{var t=this.uiStateBuilder.linkToShow(this.wpId,this.text.linkTitle,this.valueString);e.innerHTML="",e.appendChild(t)}},Object.defineProperty(n.prototype,"value",{get:function(){return this.resource[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.isEmpty()?this.text.none:this.value.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"wpId",{get:function(){return this.isEmpty()?null:this.value.$loaded?this.value.id:this.value.href.match(/(\d+)$/)[0]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"writable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return"#"+this.wpId},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return!this.value},Object.defineProperty(n.prototype,"unknownAttribute",{get:function(){return!1},enumerable:!0,configurable:!0}),n}(Na),DS=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.template="/components/wp-display/field-types/wp-display-spent-time-field.directive.html",n.text={linkTitle:n.I18n.t("js.work_packages.message_view_spent_time")},n.PathHelper=n.$injector.get(ve),n.projectCacheService=n.$injector.get(Es),n}return r.d(n,e),n.prototype.render=function(e,n){var t=this;if(this.value){var l=document.createElement("a");l.textContent=n,l.setAttribute("title",this.text.linkTitle),this.resource.project&&this.projectCacheService.require(this.resource.project.idFromLink).then(function(e){var n=URI(t.PathHelper.projectTimeEntriesPath(e.identifier)).search({work_package_id:t.resource.id}).toString();l.href=n}),e.innerHTML="",e.appendChild(l)}},n}(RS),FS=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={linkTitle:n.I18n.t("js.work_packages.message_successful_show_in_fullscreen")},n.$state=n.$injector.get(h.G),n.keepTab=n.$injector.get(_e),n.uiStateBuilder=new Re(n.$state,n.keepTab),n}return r.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.resource.isNew?null:this.resource[this.name]},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){if(this.value){var t=this.uiStateBuilder.linkToShow(this.value,n,this.value);e.appendChild(t)}},n.prototype.isEmpty=function(){return!1},n}(Na),AS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.render=function(n,t){e.prototype.render.call(this,n,t),this.shouldHighlight&&this.addHighlight(n)},Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.attribute&&this.attribute.name:null},enumerable:!0,configurable:!0}),n.prototype.addHighlight=function(e){if(this.attribute instanceof z){var n=Ol.inlineClass(this.name,this.attribute.id);e.classList.add(n)}},n}(SS),NS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"shouldHighlight",{get:function(){return!0},enumerable:!0,configurable:!0}),n}(AS),MS=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.userDisplayPortal=n.$injector.get(Ha),n.portalCleanup=n.$injector.get($a),n}return r.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.attribute&&this.attribute.name:null},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){var t=this;this.placeholder===n?this.renderEmpty(e):(this.outlet=this.userDisplayPortal.create(e,[this.attribute]),this.portalCleanup.add(function(){return t.outlet.dispose()}))},n}(Na),VS=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.userDisplayPortal=n.$injector.get(Ha),n.portalCleanup=n.$injector.get($a),n}return r.d(n,e),n.prototype.render=function(e,n){var t=this.value;e.innerHTML="",e.setAttribute("title",t.join(", ")),0===t.length?this.renderEmpty(e):this.renderValues(this.attribute,e)},n.prototype.renderValues=function(e,n){var t=document.createDocumentFragment();if(this.renderAbridgedValues(n,e),e.length>2){var l=document.createElement("span");l.innerHTML="... ",t.appendChild(l);var i=this.optionDiv(e.length.toString(),"badge","-secondary");t.appendChild(i)}n.appendChild(t)},n.prototype.renderAbridgedValues=function(e,n){var t=this,l=_.take(n,2);this.outlet=this.userDisplayPortal.create(e,l),this.portalCleanup.add(function(){return t.outlet.dispose()})},n}(Ma);var qS=function(e,n){return function(){e.defaultFieldType="text",e.addFieldType(xu,"text",["String"]).addFieldType(iu,"integer",["Integer"]).addFieldType(Yr,"duration",["Duration"]).addFieldType(ju,"select",["Priority","Status","Type","User","Version","Category","CustomOption","Project"]).addFieldType(vu,"multi-select",["[]CustomOption","[]User"]).addFieldType(eu,"float",["Float"]).addFieldType(Du,"workPackage",["WorkPackage"]).addFieldType(Vr,"boolean",["Boolean"]).addFieldType(Qr,"date",["Date"]).addFieldType(pu,"wiki-textarea",["Formattable"]).addFieldType(qv,"_comment",["comment"]),n.register(Ft,"Version")}},LS=function(e){return function(){e.defaultFieldType="text",e.addFieldType(kS,"text",["String"]).addFieldType(CS,"float",["Float"]).addFieldType(IS,"integer",["Integer"]).addFieldType(AS,"highlight",["Status","Priority"]).addFieldType(NS,"type",["Type"]).addFieldType(PS,"resource",["Project","Version","Category","CustomOption"]).addFieldType(Ma,"resources",["[]CustomOption"]).addFieldType(VS,"users",["[]User"]).addFieldType(_S,"formattable",["Formattable"]).addFieldType(RS,"duration",["Duration"]).addFieldType(xS,"date",["Date"]).addFieldType(TS,"datetime",["DateTime"]).addFieldType(OS,"boolean",["Boolean"]).addFieldType(qa,"progress",["percentageDone"]).addFieldType(ES,"work_package",["WorkPackage"]).addFieldType(DS,"spentTime",["spentTime"]).addFieldType(FS,"id",["id"]).addFieldType(MS,"user",["User"])}},$S=function(){return function(){}}(),HS=function(){function e(){}return e.bootstrapAttributeGroups=function(e){return this.bootstrapAttributeGroupsCalled?function(){}:(this.bootstrapAttributeGroupsCalled=!0,function(){var n=e.get(at);n.register("attributeGroupComponent",function(e,n){return"WorkPackageFormAttributeGroup"===e.type?yy:n.isNew||"WorkPackageFormChildrenQueryGroup"!==e.type?n.isNew||"WorkPackageFormRelationQueryGroup"!==e.type?null:Ey:Zm}),n.register("workPackageAttachmentUploadComponent",function(e){return ko}),n.register("workPackageAttachmentListComponent",function(e){return go})})},e.bootstrapAttributeGroupsCalled=!1,e}(),BS=function(){return function(){}}();function zS(e){return function(){e.get(at).register("gridWidgets",function(){return[{identifier:"work_packages_assigned",component:AP},{identifier:"work_packages_accountable",component:LP},{identifier:"work_packages_created",component:WP},{identifier:"work_packages_watched",component:YP},{identifier:"work_packages_table",component:tj},{identifier:"work_packages_calendar",component:sj},{identifier:"time_entries_current_user",component:mj},{identifier:"documents",component:vP},{identifier:"news",component:PP}]})}}var WS=function(){function e(e){var n=this;this.injector=e,this._knownHookNames=["workPackageTableContextMenu","workPackageSingleContextMenu","workPackageNewInitialization"],this.services={confirmDialog:this.injector.get(gj),externalQueryConfiguration:this.injector.get(lt),externalRelationQueryConfiguration:this.injector.get(ut),halResource:this.injector.get(Y),hooks:this.injector.get(at),i18n:this.injector.get(B.a),notifications:this.injector.get(Tn),wpNotifications:this.injector.get(On),opModalService:this.injector.get(Mn.b),opFileUpload:this.injector.get(Qu),helpTextDm:this.injector.get(ec),attributeHelpTexts:this.injector.get(nc),displayField:this.injector.get(Aa),editField:this.injector.get(yr),wpCache:this.injector.get(yn),macros:this.injector.get(ft),htmlSanitizeService:this.injector.get(OR),ckEditorPreview:this.injector.get(NR),pathHelperService:this.injector.get(ve),states:this.injector.get(s)},this.classes={modals:{passwordConfirmation:cR,attributeHelpTexts:tc,dynamicContent:tR.a},HalResource:z,DisplayField:Na},this.hooks={},this.zone=this.injector.get(l.NgZone),this._knownHookNames.forEach(function(e){n.hooks[e]=function(t){return n.services.hooks.register(e,t)}})}return e.prototype.runInZone=function(e){this.zone.run(e)},e.prototype.bootstrap=function(e){gt.DynamicBootstrapper.bootstrapOptionalEmbeddable(this.injector.get(l.ApplicationRef),e)},e}();function QS(e){return function(){Object(mn.a)("Registering OpenProject plugin context");var n=new WS(e);window.OpenProject.pluginContext.putValue(n)}}var US=function(){return function(){}}();function KS(e){return function(){e.get(at).register("openProjectAngularBootstrap",function(){return[{selector:"avatar-upload-form",cls:B_}]})}}var GS=function(){return function(){}}(),YS=function(e){function n(n,t,l,i){var o=e.call(this,n,t,l,i)||this;return o.resource=n,o.name=t,o.schema=l,o.context=i,o.wpCacheService=o.$injector.get(yn),o.loadIfNecessary(),o}return r.d(n,e),n.prototype.loadIfNecessary=function(){var e=this;this.value&&!1===this.value.$loaded&&this.value.$load().then(function(){"WorkPackage"===e.resource.$source._type&&e.wpCacheService.touch(e.resource.id)})},Object.defineProperty(n.prototype,"title",{get:function(){return""},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){var t=this;this.isEmpty()?e.textContent=this.placeholder:this.value.elements.forEach(function(n,l){t.resource.showCosts?t.renderCostAsLink(n,e,l):t.renderCostAsText(n,e,l)})},n.prototype.isEmpty=function(){return!this.value||!this.value.elements||0===this.value.elements.length},n.prototype.renderCostAsLink=function(e,n,t){var l=this.resource.showCosts,i=document.createElement("a");if(i.href=l.href+"?cost_type_id="+e.costObjectId,i.setAttribute("target","_blank"),i.textContent=e.spentUnits+" "+e.costType.name,n.appendChild(i),t<this.value.elements.length-1){var o=document.createElement("span");o.textContent=", ",n.appendChild(o)}},n.prototype.renderCostAsText=function(e,n,t){if(document.createElement("span").textContent=e.spentUnits+" "+e.costType.name,t<this.value.elements.length-1){var l=document.createElement("span");l.textContent=", ",n.appendChild(l)}},n}(Na),ZS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.isEmpty=function(){return!this.value||!parseFloat(this.value.match(/\d+/g)[0])},n}(Na),JS=Uu(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(z));var XS=function(){return function(){}}(),ex=Uu(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return r.d(n,e),n}(z));var nx=function(){return function(){}}(),tx=Uu(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return r.d(n,e),n}(z));var lx=function(){return function(){}}(),ix=function(){return function(){}}(),ox=function(){return function(){}}(),rx=function(){return function(){}}();t("T61X");var ux=function(){return function(){}}(),ax=function(){return function(){}}(),sx=function(){return function(){}}(),cx=function(){return function(){}}(),dx=t("ZYCi"),px=l["\u0275cmf"](yt,[],function(e){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[kt.b,Mt,Et,Bt,Ut,_l,El,Vl,li,hi,yi,Ii,Vi,Oi,zi,Ui,Xi,Eo,jo,wo,Bo,Uo,Zo,nr,jr,Fr,Mr,$r,Gr,Xr,lu,uu,mu,ku,Su,Eu,Nu,Hs,Kd,Wp,bv,Rv,Vv,Bv,Qv,Yv,Ob,Wb,Yb,ty,uy,Km,dy,gy,by,Oy,tv,My,Pm,Zy,iw,aw,pw,vw,kw,Sw,Aw,Yw,nk,uk,ck,kk,_k,rv,Tk,Ak,Yk,lC,dC,OC,CI,SI,FI,qI,HI,UI,ZI,sP,hP,oP,CP,EP,qP,zP,GP,ej,aj,pj,Oj,d_,g_,P_,E_,M_,H_,G_,nR,oR,sR,hR,vR,kR,_R,TR]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](5120,l.LOCALE_ID,l["\u0275angular_packages_core_core_s"],[[3,l.LOCALE_ID]]),l["\u0275mpd"](4608,It.NgLocalization,It.NgLocaleLocalization,[l.LOCALE_ID,[2,It["\u0275angular_packages_common_common_a"]]]),l["\u0275mpd"](4608,l.Compiler,l.Compiler,[]),l["\u0275mpd"](5120,l.APP_ID,l["\u0275angular_packages_core_core_h"],[]),l["\u0275mpd"](5120,l.IterableDiffers,l["\u0275angular_packages_core_core_q"],[]),l["\u0275mpd"](5120,l.KeyValueDiffers,l["\u0275angular_packages_core_core_r"],[]),l["\u0275mpd"](4608,_i.DomSanitizer,_i["\u0275DomSanitizerImpl"],[It.DOCUMENT]),l["\u0275mpd"](6144,l.Sanitizer,null,[_i.DomSanitizer]),l["\u0275mpd"](4608,_i.HAMMER_GESTURE_CONFIG,fc.CustomHammerConfig,[]),l["\u0275mpd"](5120,_i.EVENT_MANAGER_PLUGINS,function(e,n,t,l,i,o,r,u){return[new _i["\u0275DomEventsPlugin"](e,n,t),new _i["\u0275KeyEventsPlugin"](l),new _i["\u0275HammerGesturesPlugin"](i,o,r,u)]},[It.DOCUMENT,l.NgZone,l.PLATFORM_ID,It.DOCUMENT,It.DOCUMENT,_i.HAMMER_GESTURE_CONFIG,l["\u0275Console"],[2,_i.HAMMER_LOADER]]),l["\u0275mpd"](4608,_i.EventManager,_i.EventManager,[_i.EVENT_MANAGER_PLUGINS,l.NgZone]),l["\u0275mpd"](135680,_i["\u0275DomSharedStylesHost"],_i["\u0275DomSharedStylesHost"],[It.DOCUMENT]),l["\u0275mpd"](4608,_i["\u0275DomRendererFactory2"],_i["\u0275DomRendererFactory2"],[_i.EventManager,_i["\u0275DomSharedStylesHost"]]),l["\u0275mpd"](6144,l.RendererFactory2,null,[_i["\u0275DomRendererFactory2"]]),l["\u0275mpd"](6144,_i["\u0275SharedStylesHost"],null,[_i["\u0275DomSharedStylesHost"]]),l["\u0275mpd"](4608,l.Testability,l.Testability,[l.NgZone]),l["\u0275mpd"](4608,Pt.u,Pt.u,[]),l["\u0275mpd"](4608,NC.h,NC.h,[It.DOCUMENT,l.NgZone,MC.a,NC.j]),l["\u0275mpd"](4608,tr.h,tr.h,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275mpd"](5120,tr.i,tr.d,[]),l["\u0275mpd"](4608,tr.j,tr.j,[l.Injector]),l["\u0275mpd"](4608,rn,rn,[It.DOCUMENT,ve]),l["\u0275mpd"](4608,Ge,Ge,[It.DOCUMENT]),l["\u0275mpd"](4608,Ne,Ne,[L.c,ve,B.a]),l["\u0275mpd"](4608,Tn,Tn,[Ne]),l["\u0275mpd"](4608,Sn,Sn,[]),l["\u0275mpd"](4608,Dn,Dn,[]),l["\u0275mpd"](4608,ec,ec,[Y,ve]),l["\u0275mpd"](4608,nc,nc,[ec]),l["\u0275mpd"](4608,OR,OR,[_i.DomSanitizer]),l["\u0275mpd"](4608,qt,qt,[Ne,B.a]),l["\u0275mpd"](4608,_s,_s,[It.DOCUMENT]),l["\u0275mpd"](4608,fC,fC,[]),l["\u0275mpd"](4608,ss,ss,[l.Injector]),l["\u0275mpd"](5120,h.F,ER.f,[h.P]),l["\u0275mpd"](5120,"UIView.PARENT_INJECT",ER.m,[h.F]),l["\u0275mpd"](5120,h.G,ER.g,[h.P]),l["\u0275mpd"](5120,h.U,ER.i,[h.P]),l["\u0275mpd"](5120,h.V,ER.j,[h.P]),l["\u0275mpd"](5120,h.Y,ER.k,[h.P]),l["\u0275mpd"](5120,h.Z,ER.l,[h.P]),l["\u0275mpd"](5120,h.Q,ER.e,[h.P]),l["\u0275mpd"](4608,Ts,Ts,[]),l["\u0275mpd"](4608,L.k,L.q,[It.DOCUMENT,l.PLATFORM_ID,L.o]),l["\u0275mpd"](4608,L.r,L.r,[L.k,L.p]),l["\u0275mpd"](5120,L.a,function(e){return[e,new DR]},[L.r]),l["\u0275mpd"](4608,Iu,Iu,[]),l["\u0275mpd"](4608,ye,ye,[Y,ve]),l["\u0275mpd"](4608,Oe,Oe,[]),l["\u0275mpd"](4608,iC,iC,[Y,ve,Oe]),l["\u0275mpd"](4608,IP,IP,[Y,ve]),l["\u0275mpd"](4608,Os,Os,[Y,ve]),l["\u0275mpd"](4608,ke,ke,[ye]),l["\u0275mpd"](4608,Ee,Ee,[ke]),l["\u0275mpd"](4608,De,De,[]),l["\u0275mpd"](4608,Ae,Ae,[Y,ve,Ee,De,Oe]),l["\u0275mpd"](4608,dn,dn,[Y,ve]),l["\u0275mpd"](4608,wn,wn,[Y,ve]),l["\u0275mpd"](4608,Qh,Qh,[Y,ve]),l["\u0275mpd"](4608,hj,hj,[Y,ve]),l["\u0275mpd"](4608,FR,FR,[Y,s,ve]),l["\u0275mpd"](4608,Jd,Jd,[Y,ve]),l["\u0275mpd"](4608,AR,AR,[Y,ve]),l["\u0275mpd"](4608,Dt,Dt,[Y,ve]),l["\u0275mpd"](4608,Mn.b,Mn.b,[l.ComponentFactoryResolver,f.a,l.ApplicationRef,h.O,l.Injector]),l["\u0275mpd"](4608,ft,ft,[Mn.b,l.Injector]),l["\u0275mpd"](4608,Do,Do,[ve]),l["\u0275mpd"](4608,NR,NR,[l.ComponentFactoryResolver,l.ApplicationRef,l.Injector]),l["\u0275mpd"](4608,_a,_a,[l.ApplicationRef,l.ComponentFactoryResolver]),l["\u0275mpd"](4608,Ha,Ha,[l.ApplicationRef,l.ComponentFactoryResolver,l.Injector]),l["\u0275mpd"](4608,lt,lt,[l.ComponentFactoryResolver,f.a,l.ApplicationRef,h.O,l.Injector]),l["\u0275mpd"](4608,ut,ut,[l.ComponentFactoryResolver,f.a,l.ApplicationRef,h.O,l.Injector]),l["\u0275mpd"](4608,gn,gn,[s,Y]),l["\u0275mpd"](4608,vn,vn,[Y,ve,s]),l["\u0275mpd"](4608,yn,yn,[s,gn,vn]),l["\u0275mpd"](4608,Hn,Hn,[]),l["\u0275mpd"](4608,Bn,Bn,[B.a,h.G,Vn,ve,Hn]),l["\u0275mpd"](4608,Wn,Wn,[Y,dn]),l["\u0275mpd"](4608,_e,_e,[h.G,h.O]),l["\u0275mpd"](4608,On,On,[B.a,h.G,yn,Y,Tn,Sn]),l["\u0275mpd"](4608,rr,rr,[Ne,qt]),l["\u0275mpd"](4608,Cn,Cn,[wn,ve,Y]),l["\u0275mpd"](4608,ns,ns,[]),l["\u0275mpd"](4608,rC,rC,[iC,ve,Dn,Vn,Y]),l["\u0275mpd"](4608,uC,uC,[rC]),l["\u0275mpd"](4608,gC,gC,[]),l["\u0275mpd"](4608,hC,hC,[Vn,ve,Ae,Y,dn,Tn,B.a]),l["\u0275mpd"](4608,mC,mC,[rC,ve,fC,Vn,Y,uC,gC,B.a,hC]),l["\u0275mpd"](4608,DC,DC,[B.a]),l["\u0275mpd"](4608,MR,MR,[s,AR]),l["\u0275mpd"](4608,VR,VR,[hC,B.a,MR,AR]),l["\u0275mpd"](4608,qR,qR,[s,Dt]),l["\u0275mpd"](4608,LR,LR,[Y]),l["\u0275mpd"](4608,$R,$R,[hC,B.a,Dt,qR,Vn,On,h.G,LR,ve]),l["\u0275mpd"](4608,sI,sI,[Ae]),l["\u0275mpd"](4608,at,at,[]),l["\u0275mpd"](4608,zj,zj,[at]),l["\u0275mpd"](4608,m_,m_,[B.a,l.Injector,ve,Vn]),l["\u0275mpd"](4608,l.NgModuleFactoryLoader,l.SystemJsNgModuleLoader,[l.Compiler,[2,l.SystemJsNgModuleLoaderConfig]]),l["\u0275mpd"](4608,Ds,Ds,[_i.Title]),l["\u0275mpd"](4608,Es,Es,[s,Os]),l["\u0275mpd"](4608,Xd,Xd,[s,Jd]),l["\u0275mpd"](4608,Qu,Qu,[L.c,Y]),l["\u0275mpd"](4608,Ps,Ps,[]),l["\u0275mpd"](4608,ap,ap,[B.a,On,Tn]),l["\u0275mpd"](4608,Qa,Qa,[l.ComponentFactoryResolver,f.a,l.ApplicationRef,h.O,l.Injector]),l["\u0275mpd"](4608,gj,gj,[Mn.b,l.Injector]),l["\u0275mpd"](4608,js,js,[B.a,l.Injector,Ps]),l["\u0275mpd"](4608,vt,vt,[]),l["\u0275mpd"](4608,st.ModalWrapperAugmentService,st.ModalWrapperAugmentService,[It.DOCUMENT,l.Injector,Mn.b]),l["\u0275mpd"](1073742336,It.CommonModule,It.CommonModule,[]),l["\u0275mpd"](512,B.a,B.a,[]),l["\u0275mpd"](512,l.ErrorHandler,HR,[B.a]),l["\u0275mpd"](512,ve,ve,[]),l["\u0275mpd"](512,f.a,f.a,[]),l["\u0275mpd"](512,Vn,Vn,[ve]),l["\u0275mpd"](512,zR,zR,[ve,f.a,Vn]),l["\u0275mpd"](512,It.LocationStrategy,It.PathLocationStrategy,[It.PlatformLocation,[2,It.APP_BASE_HREF]]),l["\u0275mpd"](1024,WR.b,function(){return[{states:[{name:"root",url:"/{projects}/{projectPath}",component:Yi,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0},flash_message:{dynamic:!0,value:null,inherit:!1}}}],useHash:!1,config:KR}]},[]),l["\u0275mpd"](1024,WR.a,function(){return[{states:[{name:"root",url:"/{projects}/{projectPath}",component:Yi,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0},flash_message:{dynamic:!0,value:null,inherit:!1}}}],useHash:!1,config:KR},{states:[{name:"boards",parent:"root",url:"/boards/?query_props",data:{bodyClasses:"router--boards-view-base",menuItem:"board-view-menu-item"},params:{query_props:{type:"opQueryString",dynamic:!0}},redirectTo:"boards.list",component:aC},{name:"boards.list",component:bC,data:{parent:"boards",bodyClasses:"router--boards-list-view",menuItem:"board-view-menu-item"}},{name:"boards.show",url:"{board_id}",params:{board_id:{type:"int"},isNew:{type:"bool",inherit:!1,dynamic:!0}},reloadOnSearch:!1,component:cI,data:{parent:"boards",bodyClasses:"router--boards-full-view",menuItem:"board-view-menu-item"}}],config:GR},{states:[{name:"work-packages.calendar",url:"/calendar",component:rP,reloadOnSearch:!1,data:{bodyClasses:"router--work-packages-calendar",menuItem:"calendar-menu-item",parent:"work-packages"}}]},{states:[{name:"my_page",url:"/my/page",component:u_,data:{bodyClasses:"router--work-packages-my-page",parent:"work-packages"}}]},{states:[{name:"work-packages",parent:"root",component:Uv,url:"/work_packages?query_id&query_props&start_onboarding_tour",redirectTo:"work-packages.list",data:{bodyClasses:"router--work-packages-base",menuItem:"work-packages-menu-item"},params:{query_id:{type:"query",dynamic:!0},query_props:{type:"opQueryString"},start_onboarding_tour:{type:"query",squash:!0,value:void 0}}},{name:"work-packages.new",url:"/new?type&parent_id",component:$b,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"router--work-packages-full-create",menuItem:"work-packages-menu-item"}},{name:"work-packages.copy",url:"/{copiedFromWorkPackageId:[0-9]+}/copy",component:Jb,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"router--work-packages-full-create",menuItem:"work-packages-menu-item"}},{name:"work-packages.show",url:"/{workPackageId:[0-9]+}",redirectTo:"work-packages.show.activity",component:Hd,data:{bodyClasses:"router--work-packages-full-view",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.activity",url:"/activity",component:Vp,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.activity.details",url:"/activity/details/#{activity_no:d+}",component:Vp,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.relations",url:"/relations",component:fv,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.watchers",url:"/watchers",component:yv,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.list",url:"",component:Ib,reloadOnSearch:!1,data:{bodyClasses:"router--work-packages-list-view",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.new",url:"/create_new?type&parent_id",component:Qb,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"router--work-packages-split-view-new",menuItem:"work-packages-menu-item",parent:"work-packages.list"}},{name:"work-packages.list.copy",url:"/details/{copiedFromWorkPackageId:[0-9]+}/copy",component:ly,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"router--work-packages-split-view",menuItem:"work-packages-menu-item",parent:"work-packages.list"}},{name:"work-packages.list.details",redirectTo:"work-packages.list.details.overview",url:"/details/{workPackageId:[0-9]+}",component:As,reloadOnSearch:!1,params:{focus:{dynamic:!0,value:!0}},data:{bodyClasses:"router--work-packages-split-view",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.overview",url:"/overview",component:Dv,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.activity",url:"/activity",component:Vp,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.activity.details",url:"/activity/details/#{activity_no:d+}",component:Vp,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.relations",url:"/relations",component:fv,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.watchers",url:"/watchers",component:yv,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}}]}]},[]),l["\u0275mpd"](1024,h.P,ER.n,[It.LocationStrategy,WR.b,WR.a,l.Injector]),l["\u0275mpd"](1024,h.O,ER.h,[h.P]),l["\u0275mpd"](512,L.n,L.n,[]),l["\u0275mpd"](2048,L.l,null,[L.n]),l["\u0275mpd"](512,L.j,L.j,[L.l]),l["\u0275mpd"](2048,L.b,null,[L.j]),l["\u0275mpd"](512,L.h,L.m,[L.b,l.Injector]),l["\u0275mpd"](512,L.c,L.c,[L.h]),l["\u0275mpd"](512,Y,Y,[l.Injector,L.c]),l["\u0275mpd"](512,yr,yr,[]),l["\u0275mpd"](512,Pu,Pu,[]),l["\u0275mpd"](512,Aa,Aa,[]),l["\u0275mpd"](1024,l.APP_INITIALIZER,function(e,n,t,l,i,o,r,a,s,c,d,p,h,f,g,m,v,b,y,w){return[_i["\u0275angular_packages_platform_browser_platform_browser_j"](e),JR(n),(k=t,function(){k.get(at).register("openProjectAngularBootstrap",function(){return[Sl]})}),ER.d(l),WR.h(i,o),nS(r),yS(a),qS(s,c),LS(d),HS.bootstrapAttributeGroups(p),YR(h),zS(f),QS(g),KS(m),function(){window.OpenProject.getPluginContext().then(function(e){e.services.editField.extendFieldType("select",["Budget"]);var n=e.services.displayField;n.extendFieldType("resource",["Budget"]),n.addFieldType(YS,"costs",["costsByType"]),n.addFieldType(ZS,"currency",["laborCosts","materialCosts","overallCosts"]),e.services.halResource.registerResource("Budget",{cls:JS}),e.hooks.workPackageSingleContextMenu(function(e){return{key:"log_costs",icon:"icon-projects",indexBy:function(e){var n=_.findIndex(e,{key:"log_time"});return-1!==n?n+1:e.length},resource:"workPackage",link:"logCosts"}}),e.hooks.workPackageTableContextMenu(function(e){return{key:"log_costs",icon:"icon-projects",link:"logCosts",indexBy:function(e){var n=_.findIndex(e,{link:"logTime"});return-1!==n?n+1:e.length},text:I18n.t("js.button_log_costs")}}),e.services.states.add("budgets",Object(u.h)())})},function(){window.OpenProject.getPluginContext().then(function(e){e.services.halResource.registerResource("Document",{cls:ex}),e.services.states.add("documents",Object(u.h)())})},function(){window.OpenProject.getPluginContext().then(function(e){e.services.halResource.registerResource("Overview",{cls:tx}),e.services.states.add("overviews",Object(u.h)())})},wt(w)];var k},[[2,l.NgProbeToken],zR,l.Injector,h.P,h.O,WR.b,l.Injector,Y,yr,Pu,Aa,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector]),l["\u0275mpd"](512,l.ApplicationInitStatus,l.ApplicationInitStatus,[[2,l.APP_INITIALIZER]]),l["\u0275mpd"](131584,l.ApplicationRef,l.ApplicationRef,[l.NgZone,l["\u0275Console"],l.Injector,l.ErrorHandler,l.ComponentFactoryResolver,l.ApplicationInitStatus]),l["\u0275mpd"](1073742336,l.ApplicationModule,l.ApplicationModule,[l.ApplicationRef]),l["\u0275mpd"](1073742336,_i.BrowserModule,_i.BrowserModule,[[3,_i.BrowserModule]]),l["\u0275mpd"](1073742336,WR.d,WR.d,[]),l["\u0275mpd"](1073742336,Pt.r,Pt.r,[]),l["\u0275mpd"](1073742336,Pt.e,Pt.e,[]),l["\u0275mpd"](1073742336,p.d,p.d,[]),l["\u0275mpd"](1073742336,NC.i,NC.i,[]),l["\u0275mpd"](1073742336,XR,XR,[]),l["\u0275mpd"](1073742336,jt.c,jt.c,[]),l["\u0275mpd"](1073742336,tr.c,tr.c,[]),l["\u0275mpd"](1073742336,eS,eS,[]),l["\u0275mpd"](1073742336,tS,tS,[]),l["\u0275mpd"](1073742336,L.e,L.e,[]),l["\u0275mpd"](1073742336,L.d,L.d,[]),l["\u0275mpd"](1073742336,wS,wS,[]),l["\u0275mpd"](1073742336,ix,ix,[]),l["\u0275mpd"](1073742336,ox,ox,[]),l["\u0275mpd"](1073742336,$S,$S,[]),l["\u0275mpd"](1073742336,Vy.ChartsModule,Vy.ChartsModule,[]),l["\u0275mpd"](1073742336,fc.NgxGalleryModule,fc.NgxGalleryModule,[]),l["\u0275mpd"](1073742336,rx,rx,[]),l["\u0275mpd"](1073742336,HS,HS,[]),l["\u0275mpd"](1073742336,qC.c,qC.c,[]),l["\u0275mpd"](1073742336,ZR,ZR,[]),l["\u0275mpd"](1073742336,XI.b,XI.b,[]),l["\u0275mpd"](1073742336,ux,ux,[]),l["\u0275mpd"](1073742336,BS,BS,[]),l["\u0275mpd"](1073742336,ax,ax,[]),l["\u0275mpd"](1073742336,sx,sx,[]),l["\u0275mpd"](1073742336,US,US,[]),l["\u0275mpd"](1073742336,GS,GS,[]),l["\u0275mpd"](1073742336,XS,XS,[]),l["\u0275mpd"](1073742336,nx,nx,[]),l["\u0275mpd"](1073742336,lx,lx,[]),l["\u0275mpd"](1073742336,cx,cx,[]),l["\u0275mpd"](1073742336,yt,yt,[]),l["\u0275mpd"](256,l["\u0275APP_ROOT"],!0,[]),l["\u0275mpd"](256,jt.d,jt.e,[]),l["\u0275mpd"](256,tr.e,tr.a,[]),l["\u0275mpd"](1024,dx.a,function(){return[[{name:"root",url:"/{projects}/{projectPath}",component:Yi,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0},flash_message:{dynamic:!0,value:null,inherit:!1}}}],[{name:"boards",parent:"root",url:"/boards/?query_props",data:{bodyClasses:"router--boards-view-base",menuItem:"board-view-menu-item"},params:{query_props:{type:"opQueryString",dynamic:!0}},redirectTo:"boards.list",component:aC},{name:"boards.list",component:bC,data:{parent:"boards",bodyClasses:"router--boards-list-view",menuItem:"board-view-menu-item"}},{name:"boards.show",url:"{board_id}",params:{board_id:{type:"int"},isNew:{type:"bool",inherit:!1,dynamic:!0}},reloadOnSearch:!1,component:cI,data:{parent:"boards",bodyClasses:"router--boards-full-view",menuItem:"board-view-menu-item"}}],[{name:"work-packages.calendar",url:"/calendar",component:rP,reloadOnSearch:!1,data:{bodyClasses:"router--work-packages-calendar",menuItem:"calendar-menu-item",parent:"work-packages"}}],[{name:"my_page",url:"/my/page",component:u_,data:{bodyClasses:"router--work-packages-my-page",parent:"work-packages"}}],[{name:"work-packages",parent:"root",component:Uv,url:"/work_packages?query_id&query_props&start_onboarding_tour",redirectTo:"work-packages.list",data:{bodyClasses:"router--work-packages-base",menuItem:"work-packages-menu-item"},params:{query_id:{type:"query",dynamic:!0},query_props:{type:"opQueryString"},start_onboarding_tour:{type:"query",squash:!0,value:void 0}}},{name:"work-packages.new",url:"/new?type&parent_id",component:$b,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"router--work-packages-full-create",menuItem:"work-packages-menu-item"}},{name:"work-packages.copy",url:"/{copiedFromWorkPackageId:[0-9]+}/copy",component:Jb,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"router--work-packages-full-create",menuItem:"work-packages-menu-item"}},{name:"work-packages.show",url:"/{workPackageId:[0-9]+}",redirectTo:"work-packages.show.activity",component:Hd,data:{bodyClasses:"router--work-packages-full-view",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.activity",url:"/activity",component:Vp,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.activity.details",url:"/activity/details/#{activity_no:d+}",component:Vp,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.relations",url:"/relations",component:fv,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.watchers",url:"/watchers",component:yv,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.list",url:"",component:Ib,reloadOnSearch:!1,data:{bodyClasses:"router--work-packages-list-view",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.new",url:"/create_new?type&parent_id",component:Qb,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"router--work-packages-split-view-new",menuItem:"work-packages-menu-item",parent:"work-packages.list"}},{name:"work-packages.list.copy",url:"/details/{copiedFromWorkPackageId:[0-9]+}/copy",component:ly,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"router--work-packages-split-view",menuItem:"work-packages-menu-item",parent:"work-packages.list"}},{name:"work-packages.list.details",redirectTo:"work-packages.list.details.overview",url:"/details/{workPackageId:[0-9]+}",component:As,reloadOnSearch:!1,params:{focus:{dynamic:!0,value:!0}},data:{bodyClasses:"router--work-packages-split-view",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.overview",url:"/overview",component:Dv,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.activity",url:"/activity",component:Vp,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.activity.details",url:"/activity/details/#{activity_no:d+}",component:Vp,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.relations",url:"/relations",component:fv,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}},{name:"work-packages.list.details.watchers",url:"/watchers",component:yv,data:{parent:"work-packages.list.details",menuItem:"work-packages-menu-item"}}]]},[]),l["\u0275mpd"](256,L.o,"XSRF-TOKEN",[]),l["\u0275mpd"](256,L.p,"X-XSRF-TOKEN",[]),l["\u0275mpd"](256,s,bt,[])])});window.global=window,t("FUyZ"),t("buKu"),o.a.production&&Object(l.enableProdMode)(),i(function(){_i.platformBrowser().bootstrapModuleFactory(px).then(function(e){i("body").addClass("__ng2-bootstrap-has-run")})})}},[[0,8,119]]]);